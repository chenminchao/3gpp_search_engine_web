[{"key": "Scope", "numbering": "1", "title_level": 0, "desc": "         1  Scope\n\nThe present document discusses and describes requirements, procedures,\nservice interfaces (for service-based architecture) and protocols from CT3\naspects of 5G System as specified in 3GPP\u00a0TS\u00a023.501\u00a0[2], 3GPP\u00a0TS\u00a023.502\u00a0[3]\nand 3GPP\u00a0TS\u00a023.503\u00a0[66].\n\nThese CT3 aspects include:\n\n  -  the 5G Policy Framework definition (including new functionalities such\n    as access and mobility management policy support, UE policy support or\n    applicable functionality related to network slicing). Support for non-\n    3GPP access network, handover between non-3GPP access and 3GPP access,\n    roaming aspects and 5G QoS aspects in the scope of the 5G Policy\n    Framework will be part of the study;\n\n  -  Inter-working with external networks; and\n\n  -  Network Capability Exposure scenarios (e.g. monitoring and\n    Policy/Charging Capabilities exposure).\n\nThe present document is used as a placeholder for CT3 5G System materials\nto be moved to appropriate 3GPP technical specifications when it is\nsufficiently stable. As such, neither all the discussions within this\ndocument are finished nor the procedures need to be completed. This TR may\nalso contain some empty clauses. This TR will no longer be updated on a\nsystematic manner and therefore contains information may become outdated.\n\n\n", "Keywords": ""}, {"key": "References", "numbering": "2", "title_level": 0, "desc": "2  References\n\nThe following documents contain provisions which, through reference in this\ntext, constitute provisions of the present document.\n\n  -  References are either specific (identified by date of publication,\n    edition number, version number, etc.) or non-specific.\n\n  -  For a specific reference, subsequent revisions do not apply.\n\n  -  For a non-specific reference, the latest version applies. In the case\n    of a reference to a 3GPP document (including a GSM document), a non-\n    specific reference implicitly refers to the latest version of that\n    document in the same Release as the present document.\n\n  [1]  3GPP\u00a0TR\u00a021.905: \"Vocabulary for 3GPP Specifications\".\n\n  [2]  3GPP\u00a0TS\u00a023.501: \"System Architecture for the 5G System; Stage\u00a02\".\n\n  [3]  3GPP\u00a0TS\u00a023.502: \"Procedures for the 5G System; Stage\u00a02\".\n\n  [4]  3GPP\u00a0TS\u00a023.203: \"Policies and Charging control architecture;\n             Stage\u00a02\".\n\n  [5]  IETF\u00a0RFC\u00a0793: \"Transmission Control Protocol\".\n\n  [6]  IETF\u00a0RFC\u00a05246, \"The Transport Layer Security (TLS) Protocol Version\n             1.2\".\n\n  [7]  IETF\u00a0RFC\u00a07540: \"Hypertext Transfer Protocol Version 2 (HTTP/2)\".\n\n  [8]  IETF\u00a0RFC\u00a07159: \"The JavaScript Object Notation (JSON) Data\n             Interchange Format\".\n\n  [9]  IETF\u00a0RFC\u00a0768: \"User Datagram Protocol\".\n\n  [10] IETF\u00a0draft-ietf-quic-transport-04: \" QUIC: A UDP-Based Multiplexed\n             and Secure Transport\".\n\n  [11] IETF\u00a0draft-ietf-quic-tls-04: \"Using Transport Layer Security (TLS)\n             to Secure QUIC\".\n\n  [12] IETF\u00a0draft-ietf-quic-http-04: \"Hypertext Transfer Protocol (HTTP)\n             over QUIC\".\n\n  [13] IETF\u00a0draft-ietf-quic-recovery-04: \"QUIC Loss Detection and\n             Congestion Control\".\n\n  [14] IETF\u00a0draft-newton-json-content-rules-08: \"A Language for Rules\n             Describing JSON Content\".\n\n  [15] IETF\u00a0RFC\u00a04960: \"Stream Control Transmission Protocol\".\n\n  [16] 3GPP\u00a0TS\u00a033.210: \"3G security; Network Domain Security (NDS); IP\n             network layer security\".\n\n  [17] IETF\u00a0RFC\u00a06733: \"Diameter Base Protocol\".\n\n  [18] \"Architectural Styles and the Design of Network-based Software\n             Architectures\", UNIVERSITY OF CALIFORNIA, IRVINE, Dissertation\n             of Roy Thomas Fielding, 2000, Chapter 5 \"Representational\n             State Transfer (REST)\",\n             https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_s\n             tyle.htm.\n\n  [19] IETF\u00a0RFC\u00a04862: \"IPv6 Stateless Address Autoconfiguration\".\n\n  [20] IETF\u00a0RFC\u00a03736: \"Stateless Dynamic Host Configuration Protocol (DHCP)\n             Service for IPv6\".\n\n  [21] IETF\u00a0RFC\u00a03315: \"Dynamic Host Configuration Protocol for IPv6\n             (DHCPv6)\".\n\n  [22] IETF\u00a0RFC\u00a02131: \"Dynamic Host Configuration Protocol\".\n\n  [23] IETF\u00a0RFC\u00a01542: \"Clarification and Extensions for the Bootstrap\n             Protocol\".\n\n  [24] IETF\u00a0RFC\u00a04039: \"Rapid Commit Option for the Dynamic Host\n             Configuration Protocol version 4 (DHCPv4)\".\n\n  [25] 3GPP\u00a0TS\u00a023.228: \"IP Multimedia Subsystem (IMS); Stage\u00a02\".\n\n  [26] 3GPP\u00a0TS\u00a024.229: \"IP Multimedia Call Control Protocol based on SIP\n             and SDP; Stage\u00a03\".\n\n  [27] IETF\u00a0RFC\u00a02132: \"DHCP Options and BOOTP Vendor Extensions\".\n\n  [28] IETF\u00a0RFC\u00a03361: \"Dynamic Host Configuration Protocol (DHCP-for-IPv4)\n             Option for Session Initiation Protocol (SIP) Servers\".\n\n  [29] IETF\u00a0RFC\u00a03646: \"DNS Configuration options for Dynamic Host\n             Configuration Protocol for IPv6 (DHCPv6)\".\n\n  [30] IETF\u00a0RFC\u00a03319: \"Dynamic Host Configuration Protocol (DHCPv6) Options\n             for Session Initiation Protocol (SIP) Servers\".\n\n  [31] IETF\u00a0RFC\u00a06020: \"YANG - A Data Modeling Language for the Network\n             Configuration Protocol (NETCONF)\".\n\n  [32] IETF\u00a0RFC\u00a06991: \"Common YANG Data Types\".\n\n  [33] IETF\u00a0RFC\u00a07950; \"The YANG 1.1 Data Modeling Language\".\n\n  [34] IETF\u00a0RFC\u00a07951: \"JSON Encoding of Data Modeled with YANG\".\n\n  [35] IETF\u00a0RFC\u00a08040: \"RESTCONF Protocol\".\n\n  [36] OpenAPI Initiative, \"OpenAPI 3.0.0 Specification\",\n             https://github.com/OAI/OpenAPI-\n             Specification/blob/master/versions/3.0.0.md.\n\n  [37] 3GPP\u00a0TS\u00a029.155: \"Traffic steering control; Representational state\n             transfer (REST) over St reference point\".\n\n  [38] 3GPP\u00a0TS\u00a029.250: \"Nu reference point between SCEF and PFDF for\n             sponsored data connectivity\".\n\n  [39] 3GPP\u00a0TS\u00a029.251: \"Gw and Gwn reference points for sponsored data\n             connectivity\".\n\n  [40] 3GPP\u00a0TS\u00a029.116: \"Representational state transfer over xMB reference\n             point between Content Provider and BM-SC\".\n\n  [41] IETF\u00a0draft-wright-json-schema-01: \"JSON Schema: A Media Type for\n             Describing JSON Documents\".\n\n  [42] IETF\u00a0draft-wright-json-schema-validation-01: \"JSON Schema\n             Validation: A Vocabulary for Structural Validation of JSON\".\n\n  [43] IETF\u00a0draft-ietf-cbor-cddl-00: \"Concise data definition language\n             (CDDL): a notational convention to express CBOR data\n             structures\".\n\n  [44] IETF\u00a0draft-ietf-core-yang-cbor-04: \"CBOR Encoding of Data Modeled\n             with YANG\".\n\n  [45] 3GPP\u00a0TS\u00a029.002: \"Mobile Application Part (MAP) specification\".\n\n  [46] 3GPP\u00a0TS\u00a029.328: \"IP Multimedia (IM) Subsystem Sh interface;\n             Signalling flows and message contents\".\n\n  [47] IETF\u00a0RFC\u00a07049: \"Concise Binary Object Representation (CBOR)\".\n\n  [48] Presentation of Leonard Richardson at the QCon Conference. San\n             Francisco (2008): \"Justice Will Take Us Millions Of Intricate\n             Moves\", Act Three: \"The Maturity Heuristic\",\n             https://www.crummy.com/writing/speaking/2008-QCon/act3.html.\n\n  [49] Draft ETSI GS MEC 009 V1.0.1 (2017): \"Mobile Edge Computing (MEC);\n             General principles for Mobile Edge Service APIs\".\n\n  [50] Wikipedia article: \"Remote procedure call\",\n             https://en.wikipedia.org/wiki/Remote_procedure_call.\n\n  [51] API Design Guide, Google, \"https://cloud.google.com/apis/design/\".\n\n  [52] IETF\u00a0RFC\u00a06202: \"Known Issues and Best Practices for the Use of Long\n             Polling and Streaming in Bidirectional HTTP\".\n\n  [53] IETF\u00a0RFC\u00a06455: \"The Websocket Protocol\".\n\n  [54] IETF\u00a0RFC\u00a07230: \"Hypertext Transfer Protocol (HTTP/1.1): Message\n             Syntax and Routing\".\n\n  [55] 3GPP\u00a0TS\u00a023.379: \"Functional architecture and information flows to\n             support Mission Critical Push To Talk (MCPTT); Stage 2\".\n\n  [56] 3GPP\u00a0TS\u00a029.214: \"Policy and Charging Control over Rx reference\n             point\".\n\n  [57] 3GPP\u00a0TS\u00a022.280: \"Mission Critical Services Common Requirements\".\n\n  [58] 3GPP\u00a0TS\u00a023.682: \"Architecture enhancements to facilitate\n             communications with packet data networks and applications\".\n\n  [59] IETF\u00a0RFC\u00a07541: \"HPACK: Header Compression for HTTP/2\".\n\n  [60] IETF\u00a0RFC\u00a07231: \"Hypertext Transfer Protocol (HTTP/1.1): Semantics\n             and Content\".\n\n  [61] IETF\u00a0RFC\u00a07232: \"Hypertext Transfer Protocol (HTTP/1.1): Conditional\n             Requests\".\n\n  [62] IETF\u00a0RFC\u00a07233: \"Hypertext Transfer Protocol (HTTP/1.1): Range\n             Requests\".\n\n  [63] IETF\u00a0RFC\u00a07234: \"Hypertext Transfer Protocol (HTTP/1.1): Caching\".\n\n  [64] IETF\u00a0RFC\u00a07235: \"Hypertext Transfer Protocol (HTTP/1.1):\n             Authentication\".\n\n  [65] C4-174201: \"GSMA NG Signal LS to 3GPP CT4 on 5G signalling protocol\n             requirements\".\n\n  [66] 3GPP\u00a0TS\u00a023.503: \"Policy and Charging Control Framework for the 5G\n             System; Stage\u00a02\".\n\n  [67] 3GPP\u00a0TS\u00a029.061: \"Interworking between the Public Land Mobile Network\n             (PLMN) supporting packet based services and Packet Data\n             Networks (PDN)\".\n\n  [68] 3GPP\u00a0TS\u00a029.213: \"Policy and Charging Control signalling flows and\n             Quality of Service (QoS) parameter mapping\".\n\n  [69] IEEE\u00a0802.3: \"IEEE Standard for Ethernet\".\n\n  [70] IEEE\u00a0802.1Q: \"Local and metropolitan area networks--Bridges and\n             Bridged Networks\".\n\n  [71] 3GPP\u00a0TS\u00a029.122: \"T8 reference point for Northbound APIs\".\n\n  [72] 3GPP\u00a0TS\u00a029.518: \"5G System; Access and Mobility Management Services;\n             Stage 3\".\n\n  [73] 3GPP\u00a0TS\u00a023.040: \"Technical realization of the Short Message Service\n             (SMS)\".\n\n  [74] IETF\u00a0RFC\u00a03576: \"Dynamic Authorization Extensions to Remote\n             Authentication Dial In User Service (RADIUS)\".\n\n  [75] IETF\u00a0RFC\u00a06733: \"Diameter Base Protocol\".\n\n\n", "Keywords": ""}, {"key": "Additional evaluation criteria for protocol selection for", "numbering": "4.1.3", "title_level": 2, "desc": "4.1.1  Architecture Requirements\n\nArchitecture requirement #1: The proposed solutions shall be aligned with\nthe related functionality as described in 3GPP\u00a0TS\u00a023.501\u00a0[2],\n3GPP\u00a0TS\u00a023.502\u00a0[3] and 3GPP\u00a0TS\u00a023.503\u00a0[66].\n\n\n4.1.2  Requirements for protocol selection for service based interfaces\n\n  R1.  Support of bidirectional communication (Rational: stage 2\n    requirements that service based interfaces support Request-Response and\n    Subscription-Notification, where subscription can be optional).\n\n  R2.  Support of reliable communication (in some level of the protocol\n    stack, a reliable message delivery needs to be guaranteed. It appears\n    preferable not to burden the application with that to exploit\n    communalities. Is link-level failover supported?).\n\n  R3.  Forward compatibility and ease of upgrade (protocol needs to be\n    extensible, also outside standards, and a concept for operation between\n    nodes with different capability levels is required).\n\n  R4.  Low Response Time. The solution shall also support varying response\n    times, e.g. in roaming and interconnection, latency between 100ms and\n    5s are usually considered for signalling end-to-end transport (see C4-\n    174201\u00a0\"GSMA NG Signal LS to 3GPP CT4 on 5G signalling protocol\n    requirements\"\u00a0[65]).\n\n  R5.  Scalability to large numbers of transactions per service, support\n    long-lived connection and the number of required transport connections\n    should be manageable and not cause hindrance to system performance.\n\n  R6.  Ease and speed of deployment and instantiation/deinstantiation of\n    network functions and services with minimal impacts on the network.\n\n  R7.  Time of Availability of used standards.\n\n\n4.1.3  Additional evaluation criteria for protocol selection for service\n         based interfaces\n\n  A1.  Resource-efficiency (message size and processing requirements?).\n\n  A2.  Reusability of existing 3GPP implementations (Can existing\n    implementations and deployments be partially reused? How large are the\n    impacts for inter-operator and/or inter-domain interfaces? This\n    includes interworking with legacy networks.).\n\n  A3.  Minimize number of protocols in network (The overall number of\n    protocols to be supported in a network and at any a given type of\n    network function should be minimized. Selected protocol should be able\n    to support intra- and inter-operator interfaces.).\n\n  A4.  Congestion, load and overload control.\n\n  A5.  Support of Security (in particular per service authentication,\n    authorization and possibly encryption, in particular for inter-operator\n    communication).\n\n  A6.  Ease of troubleshooting and monitoring (Message Traceability and\n    Monitoring). For monitoring and reporting for roaming/interconnection,\n    it is very helpful that an answer follows the same path (i.e. same\n    proxies) as its request (see C4-174201\u00a0\"GSMA NG Signal LS to 3GPP CT4\n    on 5G signalling protocol requirements\"\u00a0[65]).\n\n  A7.  Ease of use of 3GPP services from operator owned application\n    functions (such application function can be used to implement operator-\n    specific services).\n\n  A8.  Support of service and/or message based failover and failback.\n\n  A9.  Support of network entity selection based on UE context information\n    (e.g. based on dynamic UE session information).\n\n  A10. Ease of traversal of carrier-grade ALG/NAT/firewall.\n\n  A11. Impacts to GSMA GRX/IPX.\n\n  A12. Open and public Source/Standardization body. (3GPP needs to be able\n    to access SDO sources; this also includes support of the protocol\n    maintenance and ease for 3GPP to extend the protocol).\n\n  A13. Protocol enables stateless operation.\n\n  A14. Routing support and related mechanisms.\n\n  A15. Support of strong error detection and error reporting capabilities.\n\n  A16. Support of multiplexing of messages belonging to multiple sessions\n    over a single transport connection.\n\n  A17. Support of well-defined schema and unambiguous interpretation of\n    transported data.\n\n\n", "Keywords": ""}, {"key": "Requirements for interworking between the 5G System and external", "numbering": "4.3", "title_level": 1, "desc": "4.2  Requirements for the 5G Policy Framework\n\n5GPF requirement #1: The proposed stage 3 5G Policy Framework shall be\naligned with the requirements as described in 3GPP\u00a0TS\u00a023.503\u00a0[66],\nAnnex\u00a0A.1. That is:\n\n  1) A generic PCC framework as defined in 3GPP\u00a0TS\u00a023.203\u00a0[4] including\n    relevant 5G applicable parts for the 5G Policy Framework:\n\n    a) The 5G Policy Framework includes the following Functional Elements:\n       The Policy Control Function (PCF), the Session Management Function\n       (SMF), the Application Function (AF), the Online Charging System\n       (OCS), the Unified Data Repository (UDR) and the Network Exposure\n       Function (NEF).\n\n    b) The PCF shall be able to evaluate operator policies that are\n       triggered by events received from the SMF, the NEF, the AF, and the\n       OCS.\n\n    c) The PCF shall provide Rules for application and service data flow\n       detection, gating, QoS and flow based charging to the SMF.\n\n    d) The 5G Policy Framework shall be able to manage the Packet Filter\n       Descriptions (PFDs) in the SMF by the 3rd party AS via the NEF.\n\n    e) The 5G Policy Framework shall support to negotiate the background\n       data transfer policy with the 3rd party AS via the NEF.\n\n    f) The PCF shall implement a Front End to access subscription\n       information relevant for policy decisions in a Unified Data\n       Repository (UDR) including dynamic profile updates pushed by the UDR.\n\n    g) Traffic Steering Control for steering traffic shall be supported for\n       the services on the DN side of the N6 reference point.\n\n    h) The 5G Policy Framework shall support IMS Services, Multimedia\n       Priority Services, Emergency Services and Mission critical services.\n\n  NOTE:  The existing PCC framework is applicable to PDU sessions of IPv4\n         and IPv6 Types only.\n\n  2) Extensions to the PCC framework defined in 3GPP\u00a0TS\u00a023.203\u00a0[4] include:\n\n    a) The 5G Policy Framework includes the following additional Functional\n       Elements: the Access and Mobility Management Function (AMF) and the\n       Network Data Analytics Function (NWDAF).\n\n    b) The PCF shall be able to provide Access and Mobility Management\n       related policies and UE policies to the AMF.\n\n    c) The PCF shall be able to evaluate operator policies that are\n       triggered by events received from the AMF.\n\n    d) For a subscriber roaming in a visited PLMN, the visited PLMN shall\n       be able to receive the subscriber's mobility policy data.\n\n    e) The PCF shall be able to take input from Network Data Analytics\n       Function (NWDAF) into consideration for policies on assignment of\n       network resources and for traffic steering policies.\n\n  Editor's note:  The list in bullets 1 and 2 covers the high level\n         requirements that are addressed in the document so far according to\n         the current status of the specification(s). Additional or modified\n         requirements are to be added when the related information is\n         agreed.\n\n  Editor's note:  Current list of requirements for the Policy Framework are\n         based on an informative Annex in TS 23.503. This has to be updated\n         and has to refer to the proper specification(s) when this\n         information is made normative in stage 2.\n\n5GPF requirement #2: The proposed stage 3 5G Policy Framework interfaces\nshall, in addition to 5G functionality, support the EPC functionality as\ndefined in 3GPP\u00a0TS\u00a023.203\u00a0[4] in order to allow interworking with EPC\nnetworks.\n\n5GPF requirement #3: The proposed stage 3 5G Policy Framework shall provide\na mechanism for PCC network functions discovery and selection.\n\n5GPF requirement #4: The proposed stage 3 5G Policy Framework shall be able\nto provide the QoS mapping mechanisms to apply the proper 5G QoS\ninformation based on the relevant QoS information as provided by the\nApplication Function and/or Network Exposure Function.\n\n5GPF requirement#5: It shall be possible to apply QoS control at service\ndata flow level, QoS flow level or PDU session level in the SMF.\n\n5GPF requirement #6: A PCC rule may be predefined or dynamically\nprovisioned at establishment and during the life time of a PDU session. The\nlatter is referred to as a dynamic PCC rule.\n\n5GPF requirement#7: The number of real-time PCC interactions shall be\nminimized although not significantly increasing the overall system reaction\ntime. This requires optimized interfaces between the PCC nodes.\n\n\n4.3  Requirements for interworking between the 5G System and external Data\n         Networks\n\n5GDN requirement #1: The proposed stage 3 solutions shall provide a\nmechanism for interaction with external DN for transport of signalling PDU\nsession authorization/authentication by external DN as specified in\n3GPP\u00a0TS\u00a023.501\u00a0[2].\n\n5GDN requirement #2: The proposed stage 3 solutions shall provide a\nmechanism for interaction with external DN for transport of user plane\ninformation by/to external DN as specified in 3GPP\u00a0TS\u00a023.501\u00a0[2].\n\n\n", "Keywords": ""}, {"key": "5G Policy Framework", "numbering": "5", "title_level": 0, "desc": "4.4  Requirements for Network Capability Exposure of 5G System\n\n5GNCE requirement #1: The proposed stage 3 solution shall comply with the\nexposure functionality as defined in 3GPP\u00a0TS\u00a023.501\u00a0[2] for Policy/Charging\nand identified monitoring and provisioning capabilities.\n\n  NOTE:  External exposure can be categorized as Monitoring capability,\n         Provisioning capability, and Policy/Charging capability. The\n         Monitoring capability is for monitoring of specific event for UE in\n         5G system and making such monitoring events information available\n         for external exposure via the NEF. The Provisioning capability is\n         for allowing external party to provision of information which can\n         be used for the UE in 5G system. The Policy/Charging capability is\n         for handling QoS and charging policy for the UE based on the\n         request from external party.\n\n5GNCE requirement #2: The proposed stage 3 solution shall provide\nmechanism(s)for both internal and external exposure as defined in\n3GPP\u00a0TS\u00a023.501\u00a0[2].\n\n\n5  5G Policy Framework\n\n\n", "Keywords": ""}, {"key": "Reference Model", "numbering": "5.1", "title_level": 1, "desc": "5.1  Reference Model\n\nThe policy framework functionality in 5G is comprised by the functions of\nthe Policy Control Function (PCF), the policy and charging enforcement\nfunctionality supported by SMF and UPF, the access and mobility policy\nenforcement functionality supported by the AMF, the Network Data Analytics\nFunction (NWDAF), the Network Exposure Function (NEF), the Online Charging\nSystem (OCS), the Unified Data Repository (UDR) and the Application\nFunction (AF). 3GPP\u00a0TS\u00a023.501\u00a0[2] specifies the 5G policy framework stage\u00a02\nfunctionality.\n\n                                    [pic]\n\n     Figure 5.1-1a: Overall non-roaming 5G Policy framework architecture\n                       (service based representation)\n\n\n\n                                    [pic]\n\n     Figure 5.1-1b: Overall non-roaming 5G Policy framework architecture\n                      (reference point representation)\n\n  Editor's note:  Implications from multiple Slices and its relation to PCF\n         are FFS in stage 2.\n\n  NOTE\u00a01:  The PCEF functionality defined in 3GPP\u00a0TS\u00a023.203\u00a0[4] corresponds\n         to the functions supported by the SMF and the UPF.\n\n  Editor's note:  5GC interfaces corresponding to the PCEF interfaces\n         towards charging system are FFS.\n\n  NOTE\u00a02:  The N4 interface is not part of the Policy Framework\n         architecture but shown in the figures for completeness.\n\n  NOTE\u00a03:  The reference point PGw supports equivalent functionality as Gw\n         between PFDF and PCEF in EPC.\n\n  NOTE\u00a04:  The interactions between the PCF and the AF need to provide the\n         Rx functionalities as defined in 3GPP\u00a0TS\u00a023.203\u00a0[4] to allow the\n         5GC to interwork with the AFs related to the existing services e.g.\n         IMS based services and Mission critical services.\n\n                                    [pic]\n\n    Figure 5.1-2a: Overall roaming policy framework architecture - local\n              breakout scenario (service based representation)\n\n\n\n                                    [pic]\n\n    Figure 5.1-2b: Overall roaming policy framework architecture - local\n             breakout scenario (reference point representation)\n\n  NOTE\u00a05:  In the local breakout scenario, the PCF in the VPLMN can\n         interact with the AF in order to generate PCC Rules for services\n         delivered via the VPLMN. The PCF in the VPLMN uses locally\n         configured policies according to the roaming agreement with the\n         HPLMN operator as input for PCC Rule generation. The PCF in the\n         VPLMN has no access to subscriber policy information from the HPLMN\n         to retrieve input for PCC Rule generation. The interactions between\n         the PCF in the VPLMN and the PCF in the HPLMN through the Npcf\n         service based interface enables the PCF in the HPLMN to provision\n         access and mobility policy rules and UE policies to the PCF in the\n         VPLMN, as described in 3GPP\u00a0TS\u00a023.503\u00a0[66] subclause\u00a05.2.5.\n\n  Editor's note:  Position of the NWDAF in 5G roaming policy framework\n         architecture for local breakout scenario is still FFS in SA2.\n\n\n\n                                    [pic]\n\n Figure 5.1-3a: Overall roaming policy framework architecture - home routed\n                   scenario (service based representation)\n\n\n\n                                    [pic]\n\n Figure\u00a05.1-3b: Overall roaming policy framework architecture - home routed\n                  scenario (reference point representation)\n\n\n", "Keywords": ""}, {"key": "Policy Control Function (PCF)", "numbering": "5.2.1", "title_level": 2, "desc": "5.2.1  Policy Control Function (PCF)\n\nThe PCF is a functional element for policy control decision and flow based\ncharging control functionalities. The PCF provides the following functions:\n\n  -  policy rules for application and service data flow detection, gating,\n    QoS and flow based charging to the SMF.\n\n  -  Access and Mobility Management related policies to the AMF. The\n    policies provided from PCF to AMF includes Service Area Restrictions\n    and RFSP index.\n\n  -  UE policies that include Access Network discovery and selection\n    policies and URSP to the AMF.\n\nThe policy decisions made by the PCF may be based on one or more of the\nfollowing:\n\n  -  Information obtained from the AF, e.g. the session, media and\n    subscriber related information.\n\n  -  Information obtained from the UDR. The PCF implements a Front End to\n    access subscription information relevant for policy decisions in a UDR.\n\n  -  Information obtained from the AMF, e.g. UE related and access related\n    information.\n\n  -  Information obtained from the SMF.\n\n  -  Information obtained from the NWDAF.\n\n  -  Information obtained from the NEF.\n\n  -  Information obtained from the OCS.\n\n  -  Information obtained from another PCF in the roaming scenario.\n\n  -  Own PCF pre-configured information.\n\n\n", "Keywords": ""}, {"key": "Session Management Function (SMF)", "numbering": "5.2.2", "title_level": 2, "desc": "5.2.2  Session Management Function (SMF)\n\nThe 5GC Policy Framework interface corresponding to the PCEF interface is\nsupported by the SMF and corresponds to the N7 reference point.\n\nThe SMF is responsible for the enforcement control of policy decisions\nrelated to QoS, charging, gating, service flow detection, packet routing\nand forwarding, traffic usage reporting.\n\nThe actual enforcement of QoS, charging, gating, service flow detection,\npacket routing and forwarding and traffic accounting and reporting policy\ndecisions is distributed among the UPF, RAN and UE depending on the policy\ntype.\n\nThe SMF functionality related to policy and charging enforcement control\nincludes:\n\n  -  creating the context of SM related policies;\n\n  -  updating the context of SM related policies;\n\n  -  deleting the context of SM related policies;\n\n  -  subscribing for event notifications on the specified PDU session; and\n\n  -  notifying about subscribed events on the PDU session.\n\n  Editor's note:  It is FFS to consider the related services for policy\n         request and event notification or to explicitly indicate that the\n         modification also includes event reporting.\n\n\n", "Keywords": ""}, {"key": "Access and Mobility Management Function (AMF)", "numbering": "5.2.3", "title_level": 2, "desc": "5.2.3  Access and Mobility Management Function (AMF)\n\nThe AMF includes the following functionality:\n\n  -  Handling of UE Context Establishment request sent by the AMF to the\n    PCF as part of UE Registration procedure(s);\n\n  -  Handling of UE Context Modification request sent by the AMF to the PCF\n    when the conditions related to the access and mobility management\n    decision (e.g. UE location) change.\n\n  -  Handling of UE Context Modification request sent by the PCF to the AMF\n    when the policy information related to the UE changes.\n\n  -  Receive the access and mobility management decision from the PCF to\n    the AMF;\n\n  -  Delivery of network events from the AMF to the PCF;\n\n  -  Handling of UE Context Termination request sent by the AMF to the PCF\n    as part of UE De-Registration procedure.\n\n\n", "Keywords": ""}, {"key": "Application Function (AF)", "numbering": "5.2.4", "title_level": 2, "desc": "5.2.4  Application Function (AF)\n\nWithin the Policy Framework, the AF is a functional element that\ncommunicates to the PCF to transfer dynamic application session information\nrequired for the PCF decisions (e.g. service specific information,\napplication influence on traffic routing) as well as to receive PDU service\nspecific information and notifications about PDU events.\n\nIf not allowed by the operator to communicate directly with the PCF, the AF\nshall use the external exposure network to communicate with the PCF via the\nNEF.\n\n\n", "Keywords": ""}, {"key": "Network Data Analytics Function (NWDAF)", "numbering": "5.2.5", "title_level": 2, "desc": "5.2.5  Network Data Analytics Function (NWDAF)\n\nThe NWDAF is a functional element to provide slice specific network data\nanalytics. NWDAF notifies/publishes slice specific network status analytic\ninformation to the PCF(s). PCF(s) can collect directly slice specific\nnetwork status analytic information from NWDAF. This information may be\nused for policy decisions.\n\nLoad level information of network slice is provided by the NWDAF.\n\n  NOTE:  How the information is used by the PCF is not standardized in\n         Release 15.\n\n\n", "Keywords": ""}, {"key": "Network Exposure Function (NEF)", "numbering": "5.2.6", "title_level": 2, "desc": "5.2.6  Network Exposure Function (NEF)\n\nThe NEF is a functional element to support the following functionality in\n5G policy framework:\n\n  -  It provides a means to securely expose the services and capabilities\n    provided by the PCF as described in clause\u00a07.\n\n  -  It supports management of Packet Filter Descriptions (PFDs) as\n    described in clause\u00a07.\n\n  -  It supports the negotiation and activation of background data transfer\n    policy as described in clause\u00a07.\n\n\n", "Keywords": ""}, {"key": "Unified Data Repository (UDR)", "numbering": "5.2.7", "title_level": 2, "desc": "5.2.7  Unified Data Repository (UDR)\n\nThe UDR is a functional element that supports the following PCC related\nfunctionalities:\n\n  -  Storage and retrieval of the policy data by the PCF.\n\n  -  Retrieval of subscription data by the PCF.\n\n  -  Storage of the structured data e.g. by the NEF, such as application\n    detection data of the Packet Flow Descriptions and application request\n    information for one or multiple UEs.\n\n  Editor's note:  The entities that retrieve the structured data are FFS.\n\n\n", "Keywords": ""}, {"key": "System Procedures", "numbering": "5.3", "title_level": 1, "desc": "5.3  System Procedures\n\n  Editor's note:  The procedures in this clause need to be aligned with the\n         PCF service(s) or procedures defined in stage 2.\n\n\n", "Keywords": ""}, {"key": "Policy request during UE registration", "numbering": "5.3.1.1", "title_level": 3, "desc": "5.3.1.1  Policy request during UE registration\n\nThis procedure is performed when the UE needs to perform initial\nregistration to the 5G system or needs to perform the registration with the\nAMF relocation.\n\n                                    [pic]\n\n           Figure 5.3.1.1-1: Policy request during UE registration\n\n  1. The AMF receives the registration request from the AN. The AMF can\n    obtain Service Area Restrictions, RFSP index, and GPSI from the UDM\n    during the update location procedure. Based on local policy, the AMF\n    selects to contact the PCF. The AMF selects the PCF as described in\n    subclause\u00a05.10.2 and invokes the Npcf_AMPolicyControl_Get service\n    operation to request the PCF to create the policy context in the PCF\n    and to retrieve the UE policies and/or Access and Mobility control\n    policies. The request operation provides the SUPI, and if received from\n    the UDM, the Service Area Restrictions, RFSP index, and GPSI, and may\n    provide the access type, the PEI if received in the AMF, the User\n    Location Information if available, the UE Time Zone if available,\n    Serving Network, RAT type, GPSI. The request also includes a\n    Notification URI to indicate to the PCF where to send a notification\n    when the policy/ies is/are updated.\n\n  2. If PCF does not have the subscription data for the UE, the PCF invokes\n    the Nudr_UnifiedDataManagement_Query service operation and includes in\n    the request to the UDR the PCF Identifier and the Data Identifier which\n    uniquely identifies the requested subscription data within the UDR i.e.\n    SUPI.\n\n     The UDR responds to the PCF with the subscription data that may\n    include UE policies and Access and Mobility control policies.\n\n  3. The PCF makes the requested policy decision including, e.g. UE\n    policies such as Service Area Restrictions, RAT Frequency Selection\n    Priority (RFSP) Index and UE Route Selection Policy (URSP) and may\n    determine applicable event trigger(s).\n\n  4. The PCF responds to the AMF by including requested policy:\n\n    -  UE policy (see subclause\u00a05.8) including UE Access Network discovery\n       and selection policies and/or UE Route Selection Policies (URSP) of\n       the UE; and/or\n\n    -  AMF Access and Mobility Policy (see subclause\u00a05.6) including Service\n       Area Restrictions, and/or a RAT Frequency Selection Priority (RFSP)\n       Index,\n\n     as determined by the PCF.\n\n  5. The PCF can subscribe to the Namf_EventExposure service.\n\n  NOTE:  The definition of the Namf_EventExposure service is out of scope\n         of the present study.\n\n\n", "Keywords": ""}, {"key": "Update initiated by the AMF", "numbering": "5.3.1.2.1", "title_level": 4, "desc": "5.3.1.2.1   Update initiated by the AMF\n\nThis procedure is performed when the conditions impacting the access and\nmobility control policies change, e.g. UE location.\n\n  Editor's note:  Whether this procedure is needed is FFS. There are no\n         such stage 2 requirements so far.\n\n                                    [pic]\n\n  Figure\u00a05.3.1.2.1-1: Policy update initiated by the AMF event notification\n\n  1. The AMF uses the Namf_EventExposure_Notify service operation to\n    indicate that an event that requires reporting to the PCF has occurred.\n\n  2. Step\u00a01 through step\u00a03 as specified in subclause\u00a05.3.1.2.2 \"Update\n    initiated by the PCF\".\n\n\n", "Keywords": ""}, {"key": "Update initiated by the PCF", "numbering": "5.3.1.2.2", "title_level": 4, "desc": "5.3.1.2.2   Update initiated by the PCF\n\nThis procedure is performed when the UE policies and/or Access and Mobility\ncontrol policies are changed.\n\n                                    [pic]\n\n           Figure 5.3.1.2.2-1: Policy update initiated by the PCF\n\n  1. The PCF makes policy decisions to modify the policy context based on\n    the changed condition, the changed UE policies, or Access and Mobility\n    control policies (e.g. subscription update, event notification that\n    triggers the change of Access and Mobility control policy, analytics\n    information received from the NWDAF).\n\n  2. The PCF invokes the Npcf_AMPolicyControl_UpdateNotify service\n    operation to the AMF that has previously subscribed and includes SUPI\n    in the Npcf_AMPolicyControl_UpdateNotify service operation. If this\n    procedure is required to update AMF Access and Mobility policies, the\n    Npcf_AMPolicyControl_UpdateNotify service operation also includes\n    Service Area Restrictions and/or RFSP index. If this procedure is\n    required to update the UE policies, the\n    Npcf_AMPolicyControl_UpdateNotify service operation includes URSP\n    and/or UE Access Network discovery and selection policies.\n\n  3. The AMF enforces the corresponding policies and responds to the PCF,\n    indicating a success or failure of the policy enforcement.\n\n\n", "Keywords": ""}, {"key": "Policy context deletion initiated by the AMF", "numbering": "5.3.1.3.1", "title_level": 4, "desc": "5.3.1.3.1   Policy context deletion initiated by the AMF\n\nThis procedure is performed when the UE deregisters from the network or\nwhen the old AMF removes the UE context during handover.\n\n                                    [pic]\n\n      Figure 5.3.1.3.1-1: Policy context deletion initiated by the AMF\n\n  1. The AMF sends the Npcf_AMPolicyControl_Delete service operation to\n    delete the policy context in the PCF. The request operation includes\n    SUPI.\n\n  2. The PCF deletes the policy context for that AMF.\n\n  NOTE:  The PCF can unsubscribe from data modification notifications from\n         the UDR.\n\n  3. The PCF responds to the AMF and in the response the PCF indicates\n    result (success/failure) of the Npcf_AMPolicyControl_Delete service\n    operation.\n\n\n", "Keywords": ""}, {"key": "Policy context deletion initiated by the PCF", "numbering": "5.3.1.3.2", "title_level": 4, "desc": "5.3.1.3.2   Policy context deletion initiated by the PCF\n\nThis procedure is performed when the PCF decides to terminate the policy\ncontext.\n\n  Editor's note:  Whether this procedure is need is FFS. There are no such\n         stage 2 requirements so far.\n\n                                    [pic]\n\n      Figure 5.3.1.3.2-1: Policy context deletion initiated by the PCF\n\n  1. The PCF makes policy decisions to terminate the policy context based\n    on the external trigger, e.g. UE subscription data is deleted, or\n    internal trigger, e.g. operator policy is changed.\n\n  2. The PCF sends the Npcf_AMPolicyControl_UpdateNotify service operation\n    to the AMF that has previously subscribed.\n\n  Editor's note:  The parameters sent by the PCF are FFS.\n\n  3. The AMF sends the response to the Npcf_AMPolicyControl_UpdateNotify\n    service operation to the PCF.\n\n  4. Step\u00a01 through step\u00a03 in subclause\u00a05.3.1.3.1 \"Policy context deletion\n    initiated by the AMF\".\n\n\n", "Keywords": ""}, {"key": "Request of Session Management (SM) related policies", "numbering": "5.3.2.1", "title_level": 3, "desc": "5.3.2.1  Request of Session Management (SM) related policies\n\nThis procedure is performed when the UE requests to establish a PDU\nsession.\n\n                                    [pic]\n\n              Figure 5.3.2.1-1: Request the SM related policies\n\n  1. The SMF receives a PDU session establishment request from the UE. The\n    SMF selects the PCF as described in subclause\u00a05.10.3 and invokes the\n    Npcf_SMPolicyControl_Get service operation to request the SM related\n    policies in the PCF and to get the default PCC Rules for the PDU\n    session. The request operation provides the SUPI, the PDU session ID\n    and DNN. The request operation can provide the GPSI, the access type,\n    the IPv4 address and/or the IPv6 network prefix (if available), the PEI\n    if received in the SMF, the User Location Information, the UE Time\n    Zone, Serving Network, RAT type, charging information, the Session-AMBR\n    and the default QoS information, if available. The request operation\n    also includes a Notification URI to indicate to the PCF where to send a\n    notification when the SM related policies are updated.\n\n  2. If PCF does not have the subscription data for the SUPI and DNN, the\n    PCF invokes the Nudr_UnifiedDataManagement_Query service operation to\n    the UDR and includes the PCF Identifier and the Data Identifier which\n    uniquely identifies the requested subscription data.\n\n     The UDR responds to the PCF with the subscription data.\n\n  Editor's note:  The interaction between the PCF and UDR are FFS.\n\n  3. The PCF makes the policy decision to determine the information\n    provided in step\u00a04 and to determine the event trigger to subscribe to\n    event(s) in step\u00a05.\n\n  Editor's note:  Other policies determined by the PCF are FFS.\n\n  4. The PCF responds to the SMF and includes in the response of the\n    Npcf_SMPolicyControl_Get service operation the policy determined by the\n    PCF. The policy information provided by the PCF is the PCC rules of the\n    PDU session, the authorized Session-AMBR and the authorized default QoS\n    information.\n\n  5. Step\u00a02 through step\u00a03 as specified in subclause\u00a05.3.3.1 \"PCF initiated\n    events subscription\".\n\n\n", "Keywords": ""}, {"key": "PCF initiated update of SM related policies", "numbering": "5.3.2.2.1", "title_level": 4, "desc": "5.3.2.2.1   PCF initiated update of SM related policies\n\nThis procedure is performed when the PCF decides to modify policy decisions\nfor a PDU session.\n\n  Editor's note:  Other triggers to initiate the procedure is FFS.\n\n                                    [pic]\n\n   Figure\u00a05.3.2.2.1-1: Update of SM related policies initiated by the PCF\n\n  1. The PCF makes policy decisions to modify the information provided for\n    the PDU session based on e.g. the operation policy or upon AF requests\n    or the UE subscription data is modified.\n\n  Editor's note:  The interaction between the PCF and UDR, and the\n         interaction between the PCF and AF is FFS.\n\n  2. The PCF invokes the Npcf_SMPolicyControl_UpdateNotify service\n    operation to the SMF that has previously subscribed and includes the\n    PDU session ID and can include the updated PCC Rules of the PDU\n    session, the authorized Session-AMBR and the authorized default QoS\n    information.\n\n  3. The SMF provides to the PCF the result (success/failure) of the\n    Npcf_SMPolicyControl_UpdateNotify service operation.\n\n  4. If the PCF decides to modify the subscribed events, step\u00a02 through\n    step\u00a03 as specified in subclause\u00a05.3.3.1 \"PCF initiated events\n    subscription\" are executed.\n\n\n", "Keywords": ""}, {"key": "SMF triggered update of SM related policies", "numbering": "5.3.2.2.2", "title_level": 4, "desc": "5.3.2.2.2   SMF triggered update of SM related policies\n\nThis procedure is performed when the SMF observes some events that the PCF\nhas subscribed to.\n\n                                    [pic]\n\n Figure\u00a05.3.2.2.2-1: Update of SM related policies triggered by an SMF event\n\n  1. Step\u00a02 through step\u00a04 as specified in subclause\u00a05.3.3.2 \"SMF\n    Notification about subscribed events\".\n\n  2. If the PCF decides to modify the policy and/or the subscribed events\n    based on the event information received in step\u00a01, step\u00a01 through\n    step\u00a04 as specified in subclause\u00a05.3.2.2.1 \"PCF initiated update of SM\n    related policies\" are executed.\n\n\n", "Keywords": ""}, {"key": "Deletion of the context of SM related policies initiated by", "numbering": "5.3.2.3.2", "title_level": 4, "desc": "5.3.2.3  Deletion of the context of SM related policies\n\n\n5.3.2.3.1   Deletion of the context of SM related policies initiated by the\n             SMF\n\nThis procedure is performed during the PDU session termination.\n\n                                    [pic]\n\n     Figure 5.3.2.3.1-1: Deletion of the context of SM related policies\n                            initiated by the SMF\n\n  1. The SMF invokes the Npcf_SMPolicyControl_Delete service operation to\n    request the PCF to delete the context of the SM related policy. The\n    request operation includes the PDU session ID to identify the context\n    of SM related policies that was initially created and information the\n    SMF received during the PDU session termination that is relevant for\n    the PCF e.g. usage monitoring information (if applicable) or access\n    network information.\n\n  Editor's note:  The parameters sent to the PCF by the SMF are FFS. Apart\n         from the PDU session ID, Stage 2 only list \"Relevant information\n         for the PCF\". It also needs to be considered which information is\n         rather provided based on subscription using the\n         Nsmf_EventExposure_Notify service operation.\n\n  2. The PCF removes the corresponding context of SM related policies.\n\n  3. The PCF responds to the SMF and in the response the PCF indicates\n    result (success/failure) of the Npcf_SMPolicyControl_Delete service\n    operation.\n\n\n5.3.2.3.2   Deletion of the context of SM related policies initiated by the\n             PCF\n\nThis procedure is performed when the PCF requests to terminate a PDU\nsession based on some external or internal triggers as described in step\u00a01\nbelow.\n\n                                    [pic]\n\n     Figure 5.3.2.3.2-1: Deletion of the context of SM related policies\n                            initiated by the PCF\n\n  1. The PCF makes policy decisions to terminate a PDU session based on\n    some external trigger, e.g. UE subscription data is deleted, or based\n    on some internal trigger, e.g. operator policy is changed.\n\n  2. The PCF sends the Npcf_SMPolicyControl_UpdateNotify service operation\n    to trigger the SMF to request the release of the PDU session. The PCF\n    includes the PDU session ID and an indication to terminate the PDU\n    session.\n\n  3. The SMF provides to the PCF the result (success/failure) of the\n    Npcf_SMPolicyControl_UpdateNotify service operation.\n\n  4. Step\u00a01 through step\u00a03: as specified in subclause\u00a05.3.2.3.1 \"Deletion\n    of the context of SM related policies initiated by the SMF\", as needed.\n\n\n", "Keywords": ""}, {"key": "PCF subscription to events", "numbering": "5.3.3.1", "title_level": 3, "desc": "5.3.3.1  PCF subscription to events\n\nThis procedure is performed at PDU session establishment for the PCF to\nsubscribe at least to the events that always require PCF subscription, and\nat any time during the PDU session lifetime when the PCF decides to\nsubscribe to events for a PDU session. Both, events that always require PCF\nsubscription and events that depend on PCF policy decision can be\nsubscribed with the same Nsmf_EventExposure_Subscribe service operation.\n\n  Editor's note:  Other triggers to initiate the procedure are FFS.\n\n                                    [pic]\n\n             Figure\u00a05.3.3.1-1: Subscription to events by the PCF\n\n  1. The PCF makes policy decision to subscribe to events for the PDU\n    session based on e.g. the operator policy or an AF request or when the\n    UE subscription data is modified.\n\n  Editor's note:  The interaction between the PCF and the UDR, and the\n         interaction between the PCF and the AF is FFS.\n\n  2. The PCF may subscribe to events from the SMF by invoking\n    Nsmf_EventExposure_Subscribe service operation indicating the PDU\n    Session ID, UE ID (SUPI or GPSI or IP address and DNN),  and the\n    subscribed event (including the event filters and the requested\n    notification method (periodic, one time, on event detection) and\n    optionally an immediate one time notification flag and reporting\n    options (e.g. Maximum Number of Reports or Monitoring Duration). The\n    PCF also supplies a Notification URI to indicate where to send\n    notifications.\n\n  3. The SMF provides a response to the Nsmf_EventExposure_Subscribe\n    service operation. If the request is accepted the SMF returns the Event\n    correlation ID indicating the requested subscription is created.\n\nThe Nsmf_EventExposure_Subscribe service operation including the Event\ncorrelation ID is invoked by the PCF when it needs to modify an existing\nsubscription previously created by itself in the SMF.\n\n\n", "Keywords": ""}, {"key": "SMF Notification about subscribed events", "numbering": "5.3.3.2", "title_level": 3, "desc": "5.3.3.2  SMF Notification about subscribed events\n\nThis procedure is performed when the SMF notifies the PCF that some PDU\nsession related event(s) occurred for which the PCF has subscribed to event\nnotifications.\n\n                                    [pic]\n\n      Figure\u00a05.3.3.2-1: SMF Notification about the PCF subscribed event\n\n  1. An event to which the PCF has subscribed to occurs.\n\n  2. The SMF sends the Nsmf_EventExposure_Notify service operation to the\n    Notification URI provided by the PCF to indicate that an event\n    previously subscribed by the PCF has occurred. The SMF provides the PDU\n    Session ID, UE ID (SUPI or GPSI or IP address and DNN), the Event\n    correlation ID, and the Event Trigger describing the event.\n\n  3. The PCF sends the response to the Nsmf_EventExposure_Notify operation.\n\n  4. The PCF makes policy decision and if applicable, the PCF may send an\n    event notification to the AF.\n\n\n", "Keywords": ""}, {"key": "PCF unsubscription to events", "numbering": "5.3.3.3", "title_level": 3, "desc": "5.3.3.3  PCF unsubscription to events\n\nThis procedure is performed when the PCF decides to unsubscribe to all\npreviously subscribed events for a PDU session.\n\n  Editor's note:  Other triggers to initiate the procedure are FFS.\n\n                                    [pic]\n\n            Figure\u00a05.3.3.3-1: Unsubscription to events by the PCF\n\n  1. The PCF makes policy decision to unsubscribe to all previously\n    subscribed events for the PDU session based on e.g. operator policy or\n    upon AF requests or when the UE subscription data is modified.\n\n  Editor's note:  The interaction between the PCF and the UDR, and the\n         interaction between the PCF and the AF is FFS.\n\n  2. The PCF may unsubscribe to events from the SMF by sending\n    Nsmf_EventExposure_UnSubscribe service operation indicating the Event\n    correlation ID to cancel.\n\n  3. The SMF provides the response to the Nsmf_EventExposure_UnSubscribe\n    service operation.\n\n\n", "Keywords": ""}, {"key": "Initial provisioning of service information", "numbering": "5.3.5.1", "title_level": 3, "desc": "5.3.5.1  Initial provisioning of service information\n\nThis procedure is performed when the AF/NEF requests to create an AF\napplication session context for the requested service.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality.\n\n                                    [pic]\n\n         Figure\u00a05.3.5.1-1: Create the AF application session context\n\n  1. The AF receives a AF session establishment request. The AF invokes the\n    Npcf_PolicyAuthorization_Create service operation to the PCF including\n    the AF Identifier, the IP address of the UE, the identification of the\n    application session context, the SUPI if available, the DNN if\n    available, Media information (Media type, Media format), bandwidth\n    requirements, sponsored data connectivity if applicable, flow\n    description, AF application identifier, Flow status, Priority\n    indicator, emergency indicator, Application service provider, resource\n    allocation outcome.\n\n  Editor's note:  The complete set of parameters sent to the PCF by the AF\n         are FFS.\n\n  2. If PCF does not have the subscription data for the SUPI and DNN, the\n    PCF invokes the Nudr_UnifiedDataManagement_Query service operation to\n    the UDR including the PCF identifier, the SUPI and the requested\n    subscription data.\n\n     The UDR responds to the PCF with the subscription data.\n\n  3. The PCF processes the received service information according to the\n    operator policy and can decide whether the request is accepted or not.\n\n  4. The PCF responds to the AF.\n\n  5. If the AF request was accepted in step\u00a03, the PCF determines the PCC\n    Rules to be created and provisioned. Provisioning of PCC rules to the\n    SMF is carried out as described in subclause\u00a05.3.2.2.1 \"PCF initiated\n    update of SM related policies\".\n\n\n", "Keywords": ""}, {"key": "Modification of service information", "numbering": "5.3.5.2", "title_level": 3, "desc": "5.3.5.2  Modification of service information\n\nThis procedure is performed when the AF/NEF requests to update an AF\napplication session context for the requested service.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality.\n\n                                    [pic]\n\n         Figure\u00a05.3.5.2-1: Update the AF application session context\n\n  1. The AF receives a AF session modification request. The AF invokes the\n    Npcf_PolicyAuthorization_Update service operation to the PCF including\n    the modified service information.\n\n  Editor's note:  The complete set of parameters sent to the PCF by the AF\n         are FFS.\n\n  2. If PCF does not have the subscription data for the SUPI and DNN\n    corresponding to the application session context to update, the PCF\n    sends the Nudr_UnifiedDataManagement_Query service operation to the UDR\n    including the PCF identifier, the SUPI and the requested subscription\n    data.\n\n     The UDR responds to the PCF with the subscription data.\n\n  3. The PCF processes the received service information according to the\n    operator policy and can decide whether the request is accepted or not.\n\n  4. The PCF responds to the AF.\n\n  5. If the AF request was accepted in step\u00a03, the PCF determines the PCC\n    Rules to be created and provisioned. Provisioning of PCC rules to the\n    SMF is carried out as described in subclause\u00a05.3.2.2.1 \"PCF initiated\n    update of SM related policies\".\n\n\n", "Keywords": ""}, {"key": "Delete the AF application session context initiated by the", "numbering": "5.3.5.3.2", "title_level": 4, "desc": "5.3.5.3  AF application session context termination\n\n\n5.3.5.3.1   Delete the AF application session context initiated by the AF\n\nThis procedure is performed when the AF/NEF requests to delete the AF\napplication session context.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality.\n\n                                    [pic]\n\n Figure\u00a05.3.5.3.1-1: Delete the AF application session context initiated by\n                                   the AF\n\n  1. The AF sends the Npcf_PolicyAuthorization_Delete request including the\n    information which identifies the AF application session context.\n\n  2. The PCF removes the AF application session context and sends the\n    Npcf_PolicyAuthorization_Delete Response indicating deletion of the AF\n    application session context in the PCF.\n\n  3. The PCF determines the PCC Rules to be removed. Deletion of PCC rules\n    to the SMF is carried out as described in subclause\u00a05.3.2.2.1 \"PCF\n    initiated update of SM related policies\".\n\n  4. The PCF determines the events to unsubscribe for an active PDU session\n    and can invoke an Nsmf_EventExposure_Unsubscribe service operation to\n    the SMF.\n\n\n5.3.5.3.2   Delete the AF application session context initiated by the PCF\n\nThis procedure is performed when the PCF requests the AF/NEF to delete the\nAF application session context.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality for policy/charging capability.\n\n                                    [pic]\n\n Figure\u00a05.3.5.3.2-1: Delete the AF application session context initiated by\n                                   the PCF\n\n  1. The PCF can determine to terminate an ongoing application session\n    context based on external or internal trigger.\n\n  2. The PCF invokes the Npcf_PolicyAuthorization_Notify service operation\n    to the AF to indicate the AF application session context is no longer\n    valid. The PCF includes information to identify the AF application\n    session context, and an AF application session context termination\n    cause.\n\n  Editor's note:  The parameters sent by the PCF are FFS.\n\n  3. The AF sends response to the Npcf_PolicyAuthorization_Notify service\n    operation.\n\n  Editor's note:  The parameters sent by the AF are FFS.\n\n  4. Step\u00a01 through step\u00a04: as specified in subclause\u00a05.3.5.3.1 \"Delete AF\n    application session context initiated by the AF\", as needed.\n\n\n", "Keywords": ""}, {"key": "AF subscription to events", "numbering": "5.3.5.4", "title_level": 3, "desc": "5.3.5.4  AF subscription to events\n\nThis procedure is performed when the AF/NEF decides to subscribe to events\nfor an active application session context.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality.\n\n                                    [pic]\n\n             Figure\u00a05.3.5.4-1: Subscription to events by the AF\n\n  1. The AF decides to subscribe to events for the active AF application\n    session context in relation to the corresponding PDU session.\n\n  2. The AF invokes the Npcf_PolicyAuthorization_Subscribe service\n    operation indicating the AF application session context and the events\n    that subscribes. The request also includes a Notification URI to\n    indicate to the PCF where to send the notification of the subscribed\n    events.\n\n  Editor's note:  The parameters sent by the AF are FFS.\n\n  3. The PCF can subscribe to PDU session events as described in\n    subclause\u00a05.3.3.1 \"PCF subscription to events\".\n\n  Editor's note:  Whether the PCF provides the response to the\n         Npcf_PolicyAuthorization_Subscribe service operation after\n         receiving the outcome in step\u00a03 is FFS.\n\n\n", "Keywords": ""}, {"key": "AF unsubscription to events", "numbering": "5.3.5.5", "title_level": 3, "desc": "5.3.5.5  AF unsubscription to events\n\nThis procedure is performed when the AF/NEF decides to unsubscribe to\npreviously subscribed events for an active application session context.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality.\n\n                                    [pic]\n\n            Figure\u00a05.3.5.5-1: Unsubscription to events by the AF\n\n  1. The AF decides to unsubscribe to events for the active AF application\n    session context in relation to the corresponding PDU session.\n\n  2. The AF invokes the Npcf_PolicyAuthorization_Unsubscribe service\n    operation indicating the AF application session context and the events\n    that unsubscribes.\n\n  Editor's note:  The parameters sent by the AF are FFS.\n\n  3. The PCF can unsubscribe the related PDU session events using\n    Nsmf_EventExposure_Unsubscribe service operation for the active PDU\n    session.\n\n  Editor's note:  Whether the PCF provides the response to the\n         Npcf_PolicyAuthorization_Unsubscribe service operation after\n         receiving the outcome in step\u00a03 is FFS.\n\n\n", "Keywords": ""}, {"key": "PCF notification about application session context events", "numbering": "5.3.5.6", "title_level": 3, "desc": "5.3.5.6  PCF notification about application session context events\n\nThis procedure is performed when the PCF notifies the AF/NEF that the PDU\nsession and/or service related event(s) occurred.\n\n  NOTE:  The NEF acts as an AF to support the network exposure\n         functionality.\n\n                                    [pic]\n\n Figure\u00a05.3.5.6-1: PCF notification about application session context events\n\n  1. An event to which the AF has subscribed to occurs. E.g. the PCF\n    receives an SMF Notification, as defined in subclause\u00a05.3.3.2 \"SMF\n    Notification about events that require reporting\".\n\n  2. The PCF invokes the Npcf_PolicyAuthorization_Notify service operation\n    to the AF to indicate that an event for the active application session\n    has occurred.\n\n  Editor's note:  The parameters sent to the AF by the PCF are FFS.\n\n  3. The AF sends the response to the Npcf_PolicyAuthorization_Notify\n    service operation.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.1", "title_level": 2, "desc": "5.4.1  General\n\nThe following NF services are specified for PCF:\n\n                 Table 5.4.1-1: NF Services provided by PCF\n\n|Service Name      |Description                           |Referenc|Example   |\n|                  |                                      |e       |Consumer  |\n|Npcf_AMPolicyContr|This service provides access control, |5.4.2   |AMF       |\n|ol                |network selection and mobility        |        |          |\n|                  |management related policies to the    |        |          |\n|                  |AMF, UE Route Selection Policy to the |        |          |\n|                  |UE via the AMF.                       |        |          |\n|Npcf_SMPolicyContr|This service provides session related |5.4.3   |SMF       |\n|ol                |policies to the SMF.                  |        |          |\n|Npcf_PolicyAuthori|This service is to authorise an AF    |5.4.4   |AF/NEF    |\n|zation            |request and to create policies as     |        |          |\n|                  |requested by the authorised AF for the|        |          |\n|                  |PDU-CAN session to which the AF       |        |          |\n|                  |session is bound.                     |        |          |\n\n\nThe following policy control related NF services are specified for the SMF:\n\n                 Table 5.4.1-2: NF Services provided by SMF\n\n|Service Name      |Description                           |Referenc|Example   |\n|                  |                                      |e       |Consumer  |\n|Nsmf_EventExposure|This service provides events related  |5.4.5   |PCF, NEF, |\n|                  |to PDU sessions towards consumer NF.  |        |AMF, AF   |\n|                  |The service operations exposed by this|        |          |\n|                  |service allow other NFs to subscribe, |        |          |\n|                  |unsubscribe and get notified of events|        |          |\n|                  |happening on the PDU session.         |        |          |\n\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.2.1", "title_level": 3, "desc": "5.4.2.1  General\n\nThe Npcf_AMPolicyControl service provides access control, and mobility\nmanagement related policies to the AMF, the UE Route Selection Policy to\nthe UE via the AMF, which includes the following functionalities:\n\n  -  create policies based on the request from the AMF during UE\n    registration;\n\n  -  notify the AMF of the updated policies which are subscribed; and\n\n  -  delete policy context for the UE.\n\n\n", "Keywords": ""}, {"key": "Encoding Proposal 1: RESTful HTTP with Policy as PCF resource", "numbering": "5.4.2.3", "title_level": 3, "desc": "5.4.2.2  Operations\n\n       Table 5.4.2.2-1: Operations of the Npcf_AMPolicyControl Service\n\n|Service operation name                                                       |\n\n\n\n5.4.2.3  Encoding Proposal 1: RESTful HTTP with Policy as PCF resource and\n           custom operation to update policy at AMF\n\n                                    [pic]\n\n          Figure\u00a05.4.2.3-1: Proposed Resource URI structure of the\n                          Npcf_AMPolicyControl API\n\n      Table\u00a05.4.2.3-1: Proposed resources and methods overview for the\n                        Npcf_AMPolicyControl service\n\n|Resource|Resource URI     |HTTP  |Request    |Successful |Meaning           |\n|name    |                 |method|body       |response   |                  |\n|        |                 |      |           |body       |                  |\n|Individu|{apiRoot}        |PUT   |NpcfAMPolic|NpcfAMPolic|Update an existing|\n|al AM   |/npcf-am-policy-c|(FFS) |yControlReq|yControl   |Individual AM     |\n|Policy  |ontrol/          |      |uest       |           |Policy resource   |\n|        |v1/policies/     |      |           |           |for a supi        |\n|        |{policyId}       |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n|        |                 |PATCH |FFS        |FFS        |Update an existing|\n|        |                 |(FFS) |           |           |Individual AM     |\n|        |                 |      |           |           |Policy resource   |\n|        |                 |      |           |           |for a supi        |\n|        |                 |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n|        |                 |GET   |none       |NpcfAMPolic|Read the          |\n|        |                 |(FFS) |           |yControl   |Individual AM     |\n|        |                 |      |           |           |Policy resource   |\n|        |                 |      |           |           |for a supi        |\n|        |                 |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n|        |                 |DELETE|none       |none       |Delete the        |\n|        |                 |      |           |           |Individual AM     |\n|        |                 |      |           |           |Policy resource   |\n|        |                 |      |           |           |for a supi        |\n|        |                 |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n\n\n  Editor's note:  It is also FFS whether to use different data types in the\n         bodies of the related request and response.\n\n  Editor's note:  It is FFS whether PUT/PATCH methods and the related GET\n         method are required to cover possible resource updates requested by\n         the AMF invoking Npcf_AMPolicyControl_Get service operation.\n\n  Editor's note:  It is FFS if further changes are required in the resource\n         structure.\n\n             Table\u00a05.4.2.3-2: Proposed methods overview for the\n             Npcf_AMPolicyControl_UpdateNotify service operation\n\n|Resource    |URI                  |HTTP     |Request body                |\n|name        |                     |method   |                            |\n|request     |Npcf_AMPolicyControlR|1        |                            |\n|            |equest               |         |                            |\n|policy      |Npcf_AMPolicyControlP|1        |                            |\n|            |olicy                |         |                            |\n\n\n          Table\u00a05.4.2.3-4: Proposed type NpcfAMPolicyControlRequest\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi (FFS)       |1        |Subscription Permanent     |\n|                 |                 |         |Identifier                 |\n|notificationURI  |Uri (FFS)        |0..1     |Identifies the recipient of|\n|                 |                 |         |Notifications sent by the  |\n|                 |                 |         |PCF.                       |\n|gpsi             |Gpsi (FFS)       |0..1     |Generic Public Subscription|\n|                 |                 |         |Identifier                 |\n|accessType       |AccessType       |0..1     |The Access Type where the  |\n|                 |                 |         |served UE is camping.      |\n|ratType          |RatType (FFS)    |0..1     |The RAT Type where the     |\n|                 |                 |         |served UE is camping.      |\n|servingNetwork   |NetworkId (FFS)  |0..1     |The serving network where  |\n|                 |                 |         |the served UE is camping.  |\n|userLocationInfor|UserLocationInfor|0..1     |The location of the served |\n|mation           |mation (FFS)     |         |UE is camping.             |\n|ueTimeZone       |TimeZone (FFS)   |0..1     |The time zone where the    |\n|                 |                 |         |served UE is camping.      |\n|permanentEquipmen|PermanentEquipmen|0..1     |The Permanent Equipment    |\n|tIdentifier      |tIdentifier (FFS)|         |Identifier of the served   |\n|                 |                 |         |UE.                        |\n|serviceAreaRestri|ServiceAreaRestri|0..1     |Service Area Restriction   |\n|ction            |ction            |         |                           |\n\n\n  NOTE\u00a01:  The Supi, Uri, RatType, AccessType, NetworkId,\n         UserLocationInformation, TimeZone, and PermanentEquipmentIdentifier\n         Data Types should be specified as common data types applicable for\n         multiple APIs.\n\n       Table\u00a05.4.2.3-5: Proposed type Npcf_AMPolicyControlNotification\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi (FFS)       |1        |Subscription Permanent     |\n|                 |                 |         |Identifier                 |\n|uePolicy         |UePolicy         |0..1     |UE policy (see             |\n|                 |                 |         |subclause\u00a05.8).            |\n|amfAccessAndMobil|AmfAccessAndMobil|0..1     |AMF Access and Mobility    |\n|ityManagementCont|ityManagementCont|         |Management Control Policy  |\n|rolPolicy        |rolPolicy        |         |(see subclause\u00a05.6).       |\n\n\n          Table\u00a05.4.2.3-6: Proposed type Npcf_AMPolicyControlPolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|uePolicy         |UePolicy         |0..1     |UE policy (see             |\n|                 |                 |         |subclause\u00a05.8).            |\n|amfAccessAndMobil|AmfAccessAndMobil|0..1     |AMF Access and Mobility    |\n|ityManagementCont|ityManagementCont|         |Management Control Policy  |\n|rolPolicy        |rolPolicy        |         |(see subclause\u00a05.6).       |\n\n\n                   Table\u00a05.4.2.3-7: Proposed type UePolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|accessNetworkDisc|FFS              |0..1     |                           |\n|overySelectionPol|                 |         |                           |\n|icy              |                 |         |                           |\n|urspRules        |UrspRule         |0..N     |UE Route Selection Policy  |\n|                 |                 |         |(URSP) rules               |\n\n\n                   Table\u00a05.4.2.3-8: Proposed type UrspRule\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|trafficFilter    |TrafficFilter    |0..1     |Traffic Filter Information.|\n|                 |(FFS)            |         |(NOTE)                     |\n|applicationIdenti|ApplicationIdenti|0..1     |Application Identifier     |\n|fier             |fier (FFS)       |         |(NOTE)                     |\n|nonSeamlessOffloa|NonSeamlessOffloa|0..N     |Non-seamless Offload Rules |\n|dRules           |dRule            |         |(more than one rule        |\n|                 |                 |         |allowed, one per Non-3GPP  |\n|                 |                 |         |access type).              |\n|slices           |SliceInfo        |0..N     |Describes the network      |\n|                 |                 |         |slices that matching       |\n|                 |                 |         |traffic is allowed to use. |\n|                 |                 |         |More than one instance     |\n|                 |                 |         |allowed, provided in       |\n|                 |                 |         |priority order.            |\n|continuityTypes  |ContinuityType   |0..3     |Describes the required SSC |\n|                 |                 |         |mode(s) as defined in see  |\n|                 |                 |         |subclause\u00a05.6.9.2 of       |\n|                 |                 |         |3GPP\u00a0TS\u00a023.501\u00a0[2] for     |\n|                 |                 |         |matching traffic. More than|\n|                 |                 |         |one instance allowed,      |\n|                 |                 |         |provided in priority order.|\n|dnns             |Dnn (FFS)        |0..N     |The required DNN(s) for the|\n|                 |                 |         |matching traffic (more than|\n|                 |                 |         |one instance allowed,      |\n|                 |                 |         |provided in priority       |\n|                 |                 |         |order).                    |\n|accessType       |AccessType       |1..2     |Indicates the type of      |\n|                 |                 |         |access (3GPP or non-3GPP)  |\n|                 |                 |         |on which the PDU session   |\n|                 |                 |         |should be established for  |\n|                 |                 |         |the matching traffic. More |\n|                 |                 |         |than one instance allowed, |\n|                 |                 |         |provided in priority order.|\n|NOTE: Either trafficFilter or applicationIdentifier shall be included.   |\n\n\n  NOTE\u00a02:  The TrafficFilter, ApplicationIdentifier, Dnn, ContinuityType\n         and AccessType Data Types should be specified as common data types\n         applicable for multiple APIs.\n\n  Editor's note:  The data type TrafficFilter is FFS. If uplink and\n         downlink filters cannot be included together in one instance, the\n         cardinality of trafficFilter needs to be adjusted to \"0..2\".\n\n            Table\u00a05.4.2.3-9: Proposed type NonSeamlessOffloadRule\n\n|Attribute name  |Data type     |Cardinal|Description                    |\n|                |              |ity     |                               |\n|trafficTreatment|TrafficTreatme|0..1    |Indicated whether matching     |\n|                |nt            |        |traffic is Prohibited,         |\n|                |              |        |Preferred, or Permitted to be  |\n|                |              |        |offloaded.                     |\n|non3gppAccessTyp|Non3gppAccessT|0..1    |Optional parameter to indicate |\n|e               |ype (FFS)     |        |the Non-3GPP access network    |\n|                |              |        |type for which the traffic     |\n|                |              |        |treatment applies.             |\n\n\n           Table\u00a05.4.2.3-10: Proposed Enumeration TrafficTreatment\n\n|Enumeration value      |Description                         |\n|PROHIBITED             |Matching traffic is Prohibited to be|\n|                       |offloaded.                          |\n|PREFERRED              |Matching traffic is Preferred, to be|\n|                       |offloaded.                          |\n|PERMITTED              |Matching traffic is Permitted to be |\n|                       |offloaded.                          |\n\n\n                  Table\u00a05.4.2.3-11: Proposed type SliceInfo\n\n|Attribute    |Data type|Cardinalit|Description                           |\n|name         |         |y         |                                      |\n|sliceType    |integer  |1         |Indicates expected Network Slice      |\n|             |         |          |behaviour in terms of features and    |\n|             |         |          |services. Standardised values are \"1\" |\n|             |         |          |for enhanced Mobile Broadband (eMBB), |\n|             |         |          |\"2\" for ultra-reliable low latency    |\n|             |         |          |communications (URLLC), and \"3\" for   |\n|             |         |          |massive IoT (MIoT), but non-standard  |\n|             |         |          |values can also be used.              |\n|slice        |FFS      |0..1      |Optional parameter that complements   |\n|Differentiato|         |          |the Slice/Service type(s) to allow    |\n|r            |         |          |further differentiation for selecting |\n|             |         |          |a Network Slice instance from the     |\n|             |         |          |potentially multiple Network Slice    |\n|             |         |          |instances that all comply with the    |\n|             |         |          |indicated Slice/Service type.         |\n\n\n  NOTE\u00a03:  The SliceInfo Type should be specified as common data type\n         applicable for multiple APIs.\n\n            Table\u00a05.4.2.3-12: Proposed Enumeration ContinuityType\n\n|Enumeration value    |Description                           |\n|SSC_MODE_1           |As defined in subclause\u00a05.6.9.2 of    |\n|                     |3GPP\u00a0TS\u00a023.501\u00a0[2].                   |\n|SSC_MODE_2           |As defined in subclause\u00a05.6.9.2 of    |\n|                     |3GPP\u00a0TS\u00a023.501\u00a0[2].                   |\n|SSC_MODE_3           |As defined in subclause\u00a05.6.9.2 of    |\n|                     |3GPP\u00a0TS\u00a023.501\u00a0[2].                   |\n\n\n              Table\u00a05.4.2.3-13: Proposed Enumeration AccessType\n\n|Enumeration value        |Description                  |\n|3GPP_ACCESS              |                             |\n|NON_3GPP_ACCESS          |                             |\n\n\n  NOTE\u00a04:  The Enumeration AccessType should be specified as common data\n         type applicable for multiple APIs.\n\n Table\u00a05.4.2.3-14: Proposed type AmfAccessAndMobilityManagementControlPolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|serviceAreaRestri|ServiceAreaRestri|0..1     |Service Area Restriction   |\n|ction            |ction            |         |Policy                     |\n|rfspIndex        |UInteger (FFS)   |0..1     |RAT/Frequency Selection    |\n|                 |                 |         |Priority Index             |\n|                 |                 |         |Note: Is encoded as        |\n|                 |                 |         |unsigned integer with 256  |\n|                 |                 |         |values in LTE.             |\n\n\n           Table\u00a05.4.2.3-15: Proposed type ServiceAreaRestriction\n\n|Attribute name|Data type |Cardinal|Description                           |\n|              |          |ity     |                                      |\n|allowedTais   |Tai (FFS) |0..N    |A list of allowed Tracking Area       |\n|              |          |        |Identities. (NOTE\u00a02)                  |\n|notAllowedTais|Tai (FFS) |0..N    |A list of not allowed Tracking Area   |\n|              |          |        |Identities. (NOTE\u00a02)                  |\n|allowedTaNumbe|UInteger  |0..1    |The maximum number of allowed TAs     |\n|r             |(FFS)     |        |within a list of allowed TAs defined  |\n|              |          |        |in the AMF. Default is 0. (NOTE\u00a01,    |\n|              |          |        |NOTE\u00a02)                               |\n|unlimitedAllow|Boolean   |0..1    |Indicates whether all of the allowed  |\n|edTa          |          |        |TAs within a list of allowed TAs      |\n|              |          |        |defined in the AMF are allowed.       |\n|              |          |        |Default is \"FALSE\". (NOTE\u00a01, NOTE\u00a02)  |\n|NOTE\u00a01: If unlimitedAllowedTa with value \"TRUE\" is provided, this        |\n|overrides any value of allowedTaNumber including the default \"0\".        |\n|NOTE\u00a02: AllowedTais may be provided in combination with allowedTaNumber  |\n|or unlimitedAllowedTa. However, notAllowedTAIs shall not be provided in  |\n|combination with allowedTais, allowedTaNumber or unlimitedAllowedTa with |\n|value \"TRUE\".                                                            |\n\n\n  NOTE\u00a05:  The UInteger data type (for unsigned integer) and the Tai (for\n         tracking area identity) should be specified as common data type\n         applicable for multiple APIs.\n\n\n", "Keywords": ""}, {"key": "Encoding Proposal 3: RESTful HTTP with Policy as PCF resource", "numbering": "5.4.2.5", "title_level": 3, "desc": "5.4.2.4  Encoding Proposal 2: RESTful HTTP with Policy as AMF resource\n\n                                    [pic]\n\n          Figure\u00a05.4.2.4-1: Proposed Resource URI structure of the\n                          Npcf_AMPolicyControl API\n\n      Table\u00a05.4.2.4-1: Proposed resources and methods overview for the\n                        Npcf_AMPolicyControl service\n\n|Resource|Resource URI     |HTTP  |Request    |Successful |Meaning           |\n|name    |                 |method|body       |response   |                  |\n|        |                 |      |           |body       |                  |\n|Individu|{apiRoot}        |PUT   |Npcf_AMPoli|Npcf_AMPoli|Update an existing|\n|al AM   |/npcf-am-policy-c|FFS   |cyControlSu|cyControSub|Individual AM     |\n|Policy  |ontrol/          |      |bscription |scription  |Policy resource   |\n|Subscrip|v1/subscriptions/|      |           |           |for a SUPI        |\n|tion    |{subscriptionId} |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n|        |                 |PATCH |FFS        |FFS        |Update an existing|\n|        |                 |(FFS) |           |           |Individual AM     |\n|        |                 |      |           |           |Policy resource   |\n|        |                 |      |           |           |for a SUPI        |\n|        |                 |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n|        |                 |GET   |none       |Npcf_AMPoli|Read the          |\n|        |                 |      |           |cyControlSu|Individual AM     |\n|        |                 |      |           |bscription |Policy resource   |\n|        |                 |      |           |           |for a SUPI        |\n|        |                 |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n|        |                 |DELETE|none       |none       |Delete the        |\n|        |                 |      |           |           |Individual AM     |\n|        |                 |      |           |           |Policy resource   |\n|        |                 |      |           |           |for a SUPI        |\n|        |                 |      |           |           |supplied by the   |\n|        |                 |      |           |           |AMF.              |\n\n\nStage 2 requires that Policy information can be provided both as response\nto a Npcf_AMPolicyControl_Get, and as Npcf_AMPolicyControl_UpdateNotify\nrequest. The information can be quite extensive and includes a possibly\nhigh number of USRP rules. Some related issues are:\n\n  -  How to achieve maximum communality in the implementation of\n    Npcf_AMPolicyControl_Get and Npcf_AMPolicyControl_UpdateNotify?\n\n  -  How to enable an effective update for both cases?\n\nThe service consumer subscribes to policies by supplying the Individual AM\nPolicy Subscription resource including the notificationURI. The PCF does\nnot return policies in the HTTP response to that subscription. The PCF\nrather immediately sends an HTTP request towards notificationURI to create\nor update the policy resource at the service consumer (AMF) as depicted in\nfigure\u00a05.4.2.4-2 and described in table\u00a05.4.2.4-2.\n\n                                    [pic]\n\n   Figure\u00a05.4.2.4-2: Proposed Resource URI structure for resources at the\n           service consumer (AMF) for the Npcf_AMPolicyControl API\n\n  Editor's note:  It is FFS whether to introduce resources between the\n         {notificationURI} and the AM Policy that enable the PCF (e.g. for\n         restoration purposes) to read the installed policies for several\n         subscribers. The URI structure could then for instance be\n         {notificationURI}/{sessionID}/policies.\n\n  Table\u00a05.4.2.4-2: Proposed resources and methods overview for resources at\n       the service consumer (AMF) of the Npcf_AMPolicyControl service\n\n|Resource |URI         |HTTP   |Request body  |Successful  |Meaning         |\n|name     |            |method |              |response    |                |\n|         |            |       |              |body        |                |\n|NOTE: If the SMF deletes the Individual SM PDUSessioPolicy Subscription    |\n|resource, the corresponding SM Policies resource is also deleted in the SMF|\n|without a DELTE request from the PCF                                       |\n\n\n       Table\u00a05.4.2.4-3: Proposed type Npcf_AMPolicyControlSubscription\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi (FFS)       |1        |Subscription Permanent     |\n|                 |                 |         |Identifier                 |\n|notificationURI  |Uri (FFS)        |1        |Identifies the recipient of|\n|                 |                 |         |Notifications sent by the  |\n|                 |                 |         |PCF.                       |\n|gpsi             |Gpsi (FFS)       |0..1     |Generic Public Subscription|\n|                 |                 |         |Identifier                 |\n|accessType       |AccessType       |0..1     |The Access Type where the  |\n|                 |                 |         |served UE is camping.      |\n|ratType          |RatType (FFS)    |0..1     |The RAT Type where the     |\n|                 |                 |         |served UE is camping.      |\n|servingNetwork   |NetworkId (FFS)  |0..1     |The serving network where  |\n|                 |                 |         |the served UE is camping.  |\n|userLocationInfor|UserLocationInfor|0..1     |The location of the served |\n|mation           |mation (FFS)     |         |UE is camping.             |\n|ueTimeZone       |TimeZone (FFS)   |0..1     |The time zone where the    |\n|                 |                 |         |served UE is camping.      |\n|permanentEquipmen|PermanentEquipmen|0..1     |The Permanent Equipment    |\n|tIdentifier      |tIdentifier (FFS)|         |Identifier of the served   |\n|                 |                 |         |UE.                        |\n|serviceAreaRestri|ServiceAreaRestri|0..1     |Service Area Restriction   |\n|ction            |ction            |         |                           |\n\n\n  NOTE\u00a01:  The Supi, Uri, Gpsi, AccessType, RatType, NetworkId,\n         UserLocationInformation, TimeZone, and PermanentEquipmentIdentifier\n         Data Types should be specified as common data types applicable for\n         multiple APIs.\n\n          Table\u00a05.4.2.4-4: Proposed type Npcf_AMPolicyControlPolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi (FFS)       |1        |Subscription Permanent     |\n|                 |                 |         |Identifier                 |\n|uePolicy         |UePolicy         |0..1     |UE policy (see             |\n|                 |                 |         |subclause\u00a05.8).            |\n|amfAccessAndMobil|AmfAccessAndMobil|0..1     |AMF Access and Mobility    |\n|ityManagementCont|ityManagementCont|         |Management Control Policy  |\n|rolPolicy        |rolPolicy        |         |(see subclause\u00a05.6).       |\n\n\n                   Table\u00a05.4.2.4-5: Proposed type UePolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|accessNetworkDisc|FFS              |0..1     |                           |\n|overySelectionPol|                 |         |                           |\n|icy              |                 |         |                           |\n|urspRules        |UrspRule         |0..N     |UE Route Selection Policy  |\n|                 |                 |         |(URSP) rules               |\n\n\n                   Table\u00a05.4.2.4-6: Proposed type UrspRule\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|urspRuleId       |UrspRuleId       |1        |                           |\n|trafficFilter    |TrafficFilter    |0..1     |Traffic Filter Information.|\n|                 |(FFS)            |         |(NOTE)                     |\n|applicationIdenti|ApplicationIdenti|0..1     |Application Identifier     |\n|fier             |fier (FFS)       |         |(NOTE)                     |\n|nonSeamlessOffloa|NonSeamlessOffloa|0..N     |Non-seamless Offload Rules |\n|dRules           |dRule            |         |(more than one rule        |\n|                 |                 |         |allowed, one per Non-3GPP  |\n|                 |                 |         |access type).              |\n|slices           |SliceInfo        |0..N     |Describes the network      |\n|                 |                 |         |slices that matching       |\n|                 |                 |         |traffic is allowed to use. |\n|continuityTypes  |ContinuityType   |0..3     |Describes the required SSC |\n|                 |                 |         |mode(s) as defined in see  |\n|                 |                 |         |subclause\u00a05.6.9.2 of       |\n|                 |                 |         |3GPP\u00a0TS\u00a023.501\u00a0[2] for     |\n|                 |                 |         |matching traffic. More than|\n|                 |                 |         |one instance allowed,      |\n|                 |                 |         |provided in priority order.|\n|dnns             |Dnn (FFS)        |0..N     |The required DNN(s) for the|\n|                 |                 |         |matching traffic (more than|\n|                 |                 |         |one instance allowed,      |\n|                 |                 |         |provided in priority       |\n|                 |                 |         |order).                    |\n|accessType       |AccessType       |1..2     |Indicates the type of      |\n|                 |                 |         |access (3GPP or non-3GPP)  |\n|                 |                 |         |on which the PDU session   |\n|                 |                 |         |should be established for  |\n|                 |                 |         |the matching traffic. More |\n|                 |                 |         |than one instance allowed, |\n|                 |                 |         |provided in priority order.|\n|NOTE: Either trafficFilter or applicationIdentifier shall be included.   |\n\n\n  NOTE\u00a02:  The TrafficFilter, ApplicationIdentifier, Dnn and AccessType\n         Data Types should be specified as common data types applicable for\n         multiple APIs.\n\n  Editor's note:  The data type TrafficFilter is FFS. If uplink and\n         downlink filters cannot be included together in one instance, the\n         cardinality of trafficFilter needs to be adjusted to \"0..2\".\n\n            Table\u00a05.4.2.4-7: Proposed type NonSeamlessOffloadRule\n\n|Attribute name |Data type     |Cardina|Description                      |\n|               |              |lity   |                                 |\n|trafficTreatmen|TrafficTreatme|0..1   |Indicated whether matching       |\n|t              |nt            |       |traffic is Prohibited, Preferred,|\n|               |              |       |or Permitted to be offloaded.    |\n|non3gppAccessTy|Non3gppAccessT|0..1   |Optional parameter to indicate   |\n|pe             |ype (FFS)     |       |the Non-3GPP access network type |\n|               |              |       |for which the traffic treatment  |\n|               |              |       |applies.                         |\n\n\n           Table\u00a05.4.2.4-8: Proposed Enumeration TrafficTreatment\n\n|Enumeration value      |Description                         |\n|PROHIBITED             |Matching traffic is Prohibited to be|\n|                       |offloaded.                          |\n|PREFERRED              |Matching traffic is Preferred, to be|\n|                       |offloaded.                          |\n|PERMITTED              |Matching traffic is Permitted to be |\n|                       |offloaded.                          |\n\n\n                  Table\u00a05.4.2.4-9: Proposed type SliceInfo\n\n|Attribute   |Data type|Cardinal|Description                              |\n|name        |         |ity     |                                         |\n|sliceType   |integer  |1       |Indicates expected Network Slice         |\n|            |         |        |behaviour in terms of features and       |\n|            |         |        |services. Standardised values are \"1\" for|\n|            |         |        |enhanced Mobile Broadband (eMBB), \"2\" for|\n|            |         |        |ultra-reliable low latency communications|\n|            |         |        |(URLLC), and \"3\" for massive IoT (MIoT), |\n|            |         |        |but non-standard values can also be used.|\n|sliceDiffere|FFS      |0..1    |Optional parameter that complements the  |\n|ntiator     |         |        |Slice/Service type(s) to allow further   |\n|            |         |        |differentiation for selecting a Network  |\n|            |         |        |Slice instance from the potentially      |\n|            |         |        |multiple Network Slice instances that all|\n|            |         |        |comply with the indicated Slice/Service  |\n|            |         |        |type.                                    |\n\n\n  NOTE\u00a03:  The SliceInfo Type should be specified as common data type\n         applicable for multiple APIs.\n\n            Table\u00a05.4.2.4-10: Proposed Enumeration ContinuityType\n\n|Enumeration value    |Description                           |\n|SSC_MODE_1           |As defined in subclause\u00a05.6.9.2 of    |\n|                     |3GPP\u00a0TS\u00a023.501\u00a0[2].                   |\n|SSC_MODE_2           |As defined in subclause\u00a05.6.9.2 of    |\n|                     |3GPP\u00a0TS\u00a023.501\u00a0[2].                   |\n|SSC_MODE_3           |As defined in subclause\u00a05.6.9.2 of    |\n|                     |3GPP\u00a0TS\u00a023.501\u00a0[2].                   |\n\n\n  Editor's note:  It is FFS if the ContinuityType Enumeration Types should\n         be specified as common data type applicable for multiple APIs\n\n              Table\u00a05.4.2.4-11: Proposed Enumeration AccessType\n\n|Enumeration value        |Description                  |\n|3GPP_ACCESS              |                             |\n|NON_3GPP_ACCESS          |                             |\n\n\n  NOTE\u00a04:  The Enumeration AccessType should be specified as common data\n         type applicable for multiple APIs.\n\n Table\u00a05.4.2.4-12: Proposed type AmfAccessAndMobilityManagementControlPolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|serviceAreaRestri|ServiceAreaRestri|0..1     |Service Area Restriction   |\n|ction            |ction            |         |Policy                     |\n|rfspIndex        |UInteger (FFS)   |0..1     |RAT/Frequency Selection    |\n|                 |                 |         |Priority Index             |\n|                 |                 |         |Note: Is encoded as        |\n|                 |                 |         |unsigned integer with 256  |\n|                 |                 |         |values in LTE.             |\n\n\n           Table\u00a05.4.2.4-13: Proposed type ServiceAreaRestriction\n\n|Attribute name|Data type  |Cardinali|Description                         |\n|              |           |ty       |                                    |\n|allowedTais   |Tai (FFS)  |0..N     |A list of allowed Tracking Area     |\n|              |           |         |Identities. (NOTE\u00a02)                |\n|notAllowedTais|Tai (FFS)  |0..N     |A list of not allowed Tracking Area |\n|              |           |         |Identities. (NOTE\u00a02)                |\n|allowedTaNumbe|UInteger   |0..1     |The maximum number of allowed TAs   |\n|r             |(FFS)      |         |within a list of allowed TAs defined|\n|              |           |         |in the AMF. Default is 0. (NOTE\u00a01,  |\n|              |           |         |NOTE\u00a02)                             |\n|unlimitedAllow|Boolean    |0..1     |Indicates whether all of the allowed|\n|edTa          |           |         |TAs within a list of allowed TAs    |\n|              |           |         |defined in the AMF are allowed.     |\n|              |           |         |Default is \"FALSE\". (NOTE\u00a01, NOTE\u00a02)|\n|NOTE\u00a01: If unlimitedAllowedTa with value \"TRUE\" is provided, this        |\n|overrides any value of allowedTaNumber including the default \"0\".        |\n|NOTE\u00a02: AllowedTais may be provided in combination with allowedTaNumber  |\n|or unlimitedAllowedTa. However, notAllowedTAIs shall not be provided in  |\n|combination with allowedTais, allowedTaNumber or unlimitedAllowedTa with |\n|value \"TRUE\".                                                            |\n\n\n  NOTE\u00a05:  The UInteger data type (for unsigned integer) and the Tai (for\n         tracking area identity) should be specified as common data type\n         applicable for multiple APIs.\n\n\n5.4.2.5  Encoding Proposal 3: RESTful HTTP with Policy as PCF resource and\n           notification to trigger AMF to fetch new policy\n\nThis encoding proposal is identical to encoding proposal 1 with the\nexception that the proposed type Npcf_AMPolicyControlNotification does not\ncontain policy, but only a trigger to fetch updated policy.\n\nThe AMF fetches policy using an HTTP GET when receiving such a\nnotification.\n\n\n5.4.2.5a Encoding Proposal 4: RESTful HTTP with Policy both as PCF resource\n           and as AMF resource and subscription related information only in\n           PCF resource\n\nThe proposal is similat to proposal 2. However, policy related information\nis also included in the Individual Subscription resource to allow the PCF\nto return this information in a response to the initial GET.\n\n\n", "Keywords": ""}, {"key": "Comparison of Encoding Proposals", "numbering": "5.4.2.6", "title_level": 3, "desc": "5.4.2.6  Comparison of Encoding Proposals\n\n              Table\u00a05.4.2.6-1: Comparison of Encoding Proposals\n\n|               |Proposal 1    |Proposal 2      |Proposal 3       |Proposal 4       |\n|Efficient      |Yes           |Less efficient, |Yes              |Yes              |\n|policy         |              |as two HTTP     |                 |                 |\n|provisioning   |              |Request response|                 |                 |\n|for initial GET|              |pairs required. |                 |                 |\n|Efficient      |For HTTP GET  |Alternatives:   |For HTTP GET only|Alternatives:    |\n|policy         |only complete |1. two HTTP     |complete policy  |1. return        |\n|provisioning   |policy but no |interactions,   |but no deltas can|policies in HTTP |\n|for subsequent |deltas can be |but possibility |be provided. Thus|GET response:    |\n|GET (Pull      |provided. Thus|to provide only |most likely      |only complete    |\n|operation, FFS |most likely   |deltas in       |custom operation |policy but no    |\n|if this is     |custom        |Policy.         |required.        |deltas can be    |\n|required)      |operation     |2. custom       |                 |provided.        |\n|               |required.     |operation.      |                 |2. use two HTTP  |\n|               |              |                |                 |interactions:    |\n|               |              |                |                 |only complete    |\n|               |              |                |                 |policy but no    |\n|               |              |                |                 |deltas can be    |\n|               |              |                |                 |provided.        |\n|               |              |                |                 |3. custom        |\n|               |              |                |                 |operation.       |\n|Efficient      |Yes (Depends  |Yes             |No, two HTTP     |Yes              |\n|policy         |on Custom     |                |interactions, and|                 |\n|provisioning   |operation     |                |no possibility to|                 |\n|for Notify     |design.)      |                |provide only     |                 |\n|(Push          |              |                |deltas in policy.|                 |\n|operation)     |              |                |                 |                 |\n|RESTful design |Only small    |Yes             |Partial:         |Partial:         |\n|               |fractions. A  |                |most likely      |duplicated       |\n|               |substantial   |                |subsequent PULL  |resource is not a|\n|               |part of the   |                |operation        |usual pattern.   |\n|               |functionality |                |requires custom  |                 |\n|               |(PUSH policy  |                |operation.       |                 |\n|               |provisioning  |                |                 |                 |\n|               |and most      |                |                 |                 |\n|               |likely also   |                |                 |                 |\n|               |subsequent    |                |                 |                 |\n|               |PULL          |                |                 |                 |\n|               |operation)    |                |                 |                 |\n|               |uses Custom   |                |                 |                 |\n|               |operations.   |                |                 |                 |\n|Efficient      |OK            |OK (assuming    |OK               |OK (assuming     |\n|resource       |              |policy resources|                 |policy resources |\n|deletion       |              |at SMF are      |                 |at SMF are       |\n|               |              |implicitly      |                 |implicitly       |\n|               |              |deleted when SMF|                 |deleted when SMF |\n|               |              |deletes         |                 |deletes          |\n|               |              |subscription    |                 |subscription     |\n|               |              |resource.)      |                 |resource.)       |\n\n\n\n", "Keywords": ""}, {"key": "Conclusions", "numbering": "5.4.2.7", "title_level": 3, "desc": "5.4.2.7  Conclusions\n\nEncoding proposal 1 is selected for the normative work.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.3.1", "title_level": 3, "desc": "5.4.3.1  General\n\nThe Npcf_SMPolicyControl service provides session related policies to the\nSMF, which includes the following functionalities:\n\n  -  create policies based on the request from the SMF during a PDU session\n    establishment;\n\n  -  notify the SMF of the updated policies which are subscribed; and\n\n  -  delete policies for a PDU session.\n\n\n", "Keywords": ""}, {"key": "Encoding Proposal 1: RESTful HTTP with Policy as PCF resource", "numbering": "5.4.3.3", "title_level": 3, "desc": "5.4.3.2  Operations\n\n       Table 5.4.3.2-1: Operations of the Npcf_SMPolicyControl Service\n\n|Service operation name                                                       |\n\n\n  Editor's note:  Further stage 2 clarification on \"relevant information to\n         the PCF\" as mandatory input to the Npcf_SMPolicyControl_Delete is\n         required.\n\n  Editor's note:  The optional \"PDU session termination request\" input\n         parameter to the Npcf_SMPolicyControl_UpdateNotify is not defined\n         in stage 2, but stage 2 says that this procedure can be used to\n         trigger the deletion of a PDU session (see step\u00a01b of\n         figure\u00a04.3.4.2-1 within 3GPP\u00a0TS\u00a023.502\u00a0[3]).\n\n  Editor's note:  Further stage 2 clarification on \"default QoS\n         information\" as optional input to the Npcf_SMPolicyControl_Get is\n         required.\n\n\n5.4.3.3  Encoding Proposal 1: RESTful HTTP with Policy as PCF resource and\n           custom operation to update policy at SMF\n\n                                    [pic]\n\n          Figure\u00a05.4.3.3-1: Proposed Resource URI structure of the\n                          Npcf_SMPolicyControl API\n\n      Table\u00a05.4.3.3-1: Proposed resources and methods overview for the\n                        Npcf_SMPolicyControl service\n\n|Resource|Resource URI     |HTTP  |Request    |Successful   |Meaning         |\n|name    |                 |method|body       |response body|                |\n|Individu|{apiRoot}/       |PATCH |FFS        |FFS          |Update an       |\n|al SM   |npcf-sm-policy-co|(FFS) |           |             |existing        |\n|Policy  |ntrol/           |      |           |             |Individual SM   |\n|        |v1/              |      |           |             |Policy resource.|\n|        |policies/        |      |           |             |                |\n|        |{policyId}       |      |           |             |                |\n|        |                 |GET   |none       |Npcf_SMPolicy|Read the        |\n|        |                 |      |           |Control      |Individual SM   |\n|        |                 |      |           |             |Policy resource.|\n|        |                 |DELETE|none       |none         |Delete the      |\n|        |                 |      |           |             |Individual SM   |\n|        |                 |      |           |             |Policy resource.|\n\n\n  Editor's note:  It is FFS whether the PUT, PATCH, and GET for the\n         Individual SM Policy resource are required.\n\n  Editor's note:  The GET HTTP method is intended for recovery scenarios\n         only.\n\n             Table\u00a05.4.3.3-2: Proposed methods overview for the\n             Npcf_SMPolicyControl_UpdateNotify service operation\n\n|Resource name|URI                 |HTTP     |Request body               |\n|             |                    |method   |                           |\n|request      |Npcf_SMPolicyControl|1        |The input parameters for   |\n|             |Request             |         |the policy decision.       |\n|policy       |Npcf_SMPolicyControl|1        |The authorized policies.   |\n|             |Policy              |         |                           |\n\n\n          Table\u00a05.4.3.3-4: Proposed type NpcfSMPolicyControlRequest\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi (FFS)       |1        |Subscription Permanent     |\n|                 |                 |         |Identifier                 |\n|pduSessionId     |PduSessionId     |1        |PDU session Id             |\n|                 |(FFS)            |         |                           |\n|dnn              |Dnn (FFS)        |1        |The DNN of the PDU session.|\n|notificationUri  |Link             |1        |Identifies the recipient of|\n|                 |                 |         |Notifications sent by the  |\n|                 |                 |         |PCF.                       |\n|accessType       |AccessType       |0..1     |The Access Type where the  |\n|                 |                 |         |served UE is camping.      |\n|ratType          |RatType (FFS)    |0..1     |The RAT Type where the     |\n|                 |                 |         |served UE is camping.      |\n|servingNetwork   |NetworkId (FFS)  |0..1     |The serving network where  |\n|                 |                 |         |the served UE is camping.  |\n|userLocationInfor|UserLocationInfor|0..1     |The location of the served |\n|mation           |mation (FFS)     |         |UE is camping.             |\n|ueTimeZone       |TimeZone (FFS)   |0..1     |The time zone where the    |\n|                 |                 |         |served UE is camping.      |\n|permanentEquipmen|PermanentEquipmen|0..1     |The Permanent Equipment    |\n|tIdentifier      |tIdentifier (FFS)|         |Identifier of the served   |\n|                 |                 |         |UE.                        |\n|ipv4Address      |Ipv4Address (FFS)|0..1     |The IPv4 Address of the    |\n|                 |                 |         |served UE.                 |\n|ipv6AddressPrefix|Ipv6AddressPrefix|0..1     |The Ipv6 Address Prefix of |\n|                 |(FFS)            |         |the served UE.             |\n|chargingInformati|ChargingInformati|0..1     |                           |\n|on               |on (FFS)         |         |                           |\n|sessionAmbr      |BitRate (FFS)    |0..1     |                           |\n|defaultQosInforma|defaultQosInforma|0..1     |                           |\n|tion             |tion (FFS)       |         |                           |\n\n\n  NOTE:  The Supi, PduSessionId, Link, RatType, Dnn, NetworkId,\n         UserLocationInformation, TimeZone, PermanentEquipmentIdentifier,\n         Ipv4Address, Ipv6AddressPrefix, ChargingInformation, BitRate, and\n         defaultQosInformation Data Types should be specified as common data\n         types applicable for multiple APIs.\n\n       Table\u00a05.4.3.3-5: Proposed type NpcfSMPolicyControlNotification\n\n|Attribute name |Data type          |Cardinali|Description                |\n|               |                   |ty       |                           |\n|supi           |Supi (FFS)         |1        |Subscription Permanent     |\n|               |                   |         |Identifier                 |\n|pduSessionId   |PduSessionId       |1        |PDU session id             |\n|sessionPolicy  |Npcf_SMPolicyContro|1        |Session management policy  |\n|               |lPolicy            |         |(see subclause\u00a05.7).       |\n|terminationRequ|Boolean            |0..1     |Request to terminate the   |\n|est            |                   |         |PDU session. Default is    |\n|               |                   |         |\"FALSE\".                   |\n\n\n          Table\u00a05.4.3.3-6: Proposed type NpcfSMPolicyControlPolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|pccRules         |PccRule          |0..N     |List of PCC Rules with     |\n|                 |                 |         |content as described in    |\n|                 |                 |         |subclause\u00a05.7.1.           |\n|SessionAmbr      |BitRate (FFS)    |0..1     |Session-AMBR               |\n|defaultQosInforma|defaultQosInforma|0..1     |Default QoS                |\n|tion             |tion (FFS)       |         |                           |\n\n\n                   Table\u00a05.4.3.3-7: Proposed type PCCRule\n\n|Attribute name |Data type     |Cardinal|Description                          |\n|               |              |ity     |                                     |\n|ruleId         |string        |1       |Uniquely identifies the PCC rule,    |\n|               |              |        |within a PDU session.                |\n|removeFlag     |Boolean       |0..1    |Indicates the PCC rule is remove.    |\n|partialFlag    |Boolean       |0..1    |Indicate to update the PCC rule      |\n|               |              |        |partially.                           |\n|ruleActivationT|datatime      |0..1    |The time when the PCC rule shall be  |\n|ime            |              |        |activated.                           |\n|ruleDeactivatio|datatime      |0..1    |The time when the PCC rule shall be  |\n|nTime          |              |        |deactivated.                         |\n|resourceAllocat|Boolean       |0..1    |Indicates the notification is needed |\n|ionNotification|              |        |when the resource of the PCC rule is |\n|               |              |        |allocated successfully.              |\n|chargingCorrela|Boolean       |0..1    |Indicates the charging id of the PCC |\n|tionIndicator  |              |        |rule is required to report.          |\n|monitoringFlag |Boolean       |0..1    |Indicates the usage of the PCC rule  |\n|               |              |        |shall not be accumulated to the PDU  |\n|               |              |        |session level.                       |\n|serviceId      |string        |0..1    |Indicates the identifier of the      |\n|               |              |        |service or service component the     |\n|               |              |        |service data flow in a PCC rule      |\n|               |              |        |relates to.                          |\n|rateGroup      |string        |0..1    |The charging key for the PCC rule    |\n|               |              |        |used for rating purposes.            |\n|defaultFlowIndi|Boolean       |0..1    |Indicates the PCC rule shall be bound|\n|cation         |              |        |to the default Qos flow.             |\n|applicationIden|string        |0..1    |A reference to the application       |\n|tifier         |              |        |detection filter configured at the   |\n|               |              |        |UPF.                                 |\n|flowInformation|FlowInformtion|0..1    |Contains the information from a      |\n|               |              |        |single IP flow packet filter.        |\n|flowStaus      |FlowStatus    |0..1    |Describes whether the IP flow(s) are |\n|               |(FFS)         |        |enabled or disabled.                 |\n|qosInformation |QoSInformation|0..1    |Describes the QoS information of the |\n|               |              |        |PCC rule.                            |\n|reflectiveQoSIn|Boolean       |0..1    |Indicates the Reflective QoS is      |\n|dication       |              |        |applicable to the service data flow. |\n|qoSNotification|Boolean       |0..1    |Indicates a request for notification |\n|Control        |              |        |from RAN for the SDF when the QoS    |\n|               |              |        |targets for a GBR 5QI cannot be      |\n|               |              |        |fulfilled for a QoS flow during the  |\n|               |              |        |lifetime of the QoS flow.            |\n|reportingLevel |ReportingLevel|0..1    |Indicates the report level of the    |\n|               |              |        |charging information.                |\n|online         |Boolean       |0..1    |Indicates the online charging is     |\n|               |              |        |applicable to the PCC rule.          |\n|offline        |Boolean       |0..1    |Indicates the offline charging is    |\n|               |              |        |applicable to the PCC rule.          |\n|meteringMethod |MeteringMethod|0..1    |Defines what parameters shall be     |\n|               |              |        |metered for offline charging.        |\n|precedence     |Integer       |0..1    |determines the order, in which       |\n|               |              |        |service data flow templates          |\n|               |              |        |consisting of service data flow      |\n|               |              |        |filters are applied at service data  |\n|               |              |        |flow detection at the UPF.           |\n|afChargingIdent|AFChargingIden|0..1    |An identifier, provided from the AF, |\n|ifier          |tifer         |        |correlating the measurement for the  |\n|               |              |        |Charging key/Service identifier      |\n|               |              |        |values in this PCC rule with         |\n|               |              |        |application level reports.           |\n|flows          |Flows         |0..n    |Identifies the flow of the AF        |\n|               |              |        |charging identifier is related to.   |\n|monitroingKey  |Integer       |0..1    |The PCF uses the monitoring key to   |\n|               |              |        |group services that share a common   |\n|               |              |        |allowed usage.                       |\n|redirectInforma|RedirectInform|0..1    |                                     |\n|tion           |ation         |        |                                     |\n|muteNotificatio|Boolean       |0..1    |Indicates application's start or stop|\n|n              |              |        |notification is to be muted.         |\n|afSignallingPro|AFSignallingPr|0..1    |                                     |\n|tocol          |otocol        |        |                                     |\n|sponsorInformat|Sponsorinforma|0..1    |Indicates the sponsor information    |\n|ion            |tion          |        |including sponsor id and ASP id.     |\n|requireAccessIn|RequiredAccess|0..1    |Indicates that access network        |\n|fo             |Info          |        |information is required.             |\n|sharingKeyDl   |SharingKeyDL  |0..1    |Indicates resource sharing in        |\n|               |(FFS)         |        |downlink direction with service data |\n|               |              |        |flows having the same value in their |\n|               |              |        |PCC rule.                            |\n|sharingKeyUl   |SharingKeyUL  |0..1    |Indicates resource sharing in uplink |\n|               |(FFS)         |        |direction with service data flows    |\n|               |              |        |having the same value in their PCC   |\n|               |              |        |rule.                                |\n|trafficSteering|string        |0..1    |Reference to a pre-configured traffic|\n|PolicyIdentifie|              |        |steering policy in downlink at the   |\n|rDl            |              |        |SMF.                                 |\n|trafficSteering|string        |0..1    |Reference to a pre-configured traffic|\n|PolicyIdentifie|              |        |steering policy in Uplink at the SMF.|\n|rUl            |              |        |                                     |\n|dataNetworkAcce|DataNetworkAcc|0..1    |Identifier of the target Data Network|\n|ssIdentifier   |essIdentifier |        |Access.                              |\n|               |(FFS)         |        |                                     |\n|dataNetworkAcce|dataNetworkAcc|0..1    |Indicates whether a notification in  |\n|ssCharingReport|essCharingRepo|        |case of change of DNAI at            |\n|               |rt (FFS)      |        |addition/change/removal of the UPF is|\n|               |              |        |requested, as well as the            |\n|               |              |        |destination(s) for where to provide  |\n|               |              |        |the notification.                    |\n\n\n  Editor's note:  It is FFS if the above table need to be updated for\n         common data types.\n\n  Editor's note:  It is FFS the encoding of the information in the above\n         table is FFS.\n\n                Table\u00a05.4.3.3-8: Proposal type QoSInformation\n\n|Attribute name |Data type   |P  |Cardina|Description                  |\n|               |            |   |lity   |                             |\n|maxRequestedBan|Bitrates    |O  |1      |Indicates the max bandwidth  |\n|dwidthUl       |            |   |       |in uplink.                   |\n|maxRequestedBan|Bitrates    |O  |1      |Indicates the max bandwidth  |\n|dwidthDl       |            |   |       |in downlink.                 |\n|guaranteed-Bitr|Bitrates    |O  |1      |Indicates the guaranteed     |\n|ateUl          |            |   |       |bandwidth in uplink.         |\n|guaranteed-Bitr|Bitrates    |O  |1      |Indicates the max guaranteed |\n|ateDL          |            |   |       |in downlink.                 |\n|allocation-Rete|AllocationRe|M  |1      |Indicates the allocation and |\n|ntionPriority  |tentionPrior|   |       |retention priority.          |\n|               |ity (FFS)   |   |       |                             |\n\n\n             Table\u00a05.4.3.3-9: Proposal type RedirectInformation\n\n|Attribute name   |Data type      |P  |Cardina|Description              |\n|                 |               |   |lity   |                         |\n|redirectAddressTy|RedirectAddress|O  |0..1   |Indicates the type of    |\n|pe               |Type           |   |       |redirect address.        |\n|redirectServerAdd|string         |O  |0..1   |Indicates the address of |\n|ress             |               |   |       |the redirect server.     |\n\n\n               Table\u00a05.4.3.3-10: Proposal type FlowInformation\n\n|Attribute   |Data type  |P  |Cardina|Description                       |\n|name        |           |   |lity   |                                  |\n|packetFilter|boolean    |O  |0..1   |The packet shall be sent to the   |\n|Usage       |           |   |       |UE.                               |\n|tosTrafficCl|string     |O  |0..1   |Contains the Ipv4 Type-of-Service |\n|ass         |           |   |       |and mask field or the Ipv6        |\n|            |           |   |       |Traffic-Class field and mask      |\n|            |           |   |       |field.                            |\n|spi         |string     |O  |0..1   |the security parameter index of   |\n|            |           |   |       |the IPSec packet.                 |\n|flowLabel   |string     |O  |0..1   |the Ipv6 flow label header field. |\n|flowDirectio|FlowDirecti|O  |0..1   |indicates the direction/directions|\n|n           |on         |   |       |that a filter is applicable,      |\n|            |           |   |       |downlink only, uplink only or both|\n|            |           |   |       |down- and uplink (bidirectional). |\n\n\n              Table\u00a05.4.3.3-11: Proposal Enumeration FlowStaus\n\n|Enumeration value|Description                                             |\n|UPSPECIFIED      |The corresponding filter applies for traffic to the UE  |\n|                 |(downlink), but has no specific direction declared.     |\n|DOWNLINK         |The corresponding filter applies for traffic to the UE. |\n|UPLINK           |The corresponding filter applies for traffic from the   |\n|                 |UE.                                                     |\n|BIDIRECTIONAL    |The corresponding filter applies for traffic both to and|\n|                 |from the UE.                                            |\n\n\n            Table\u00a05.4.3.3-12: Proposal Enumeration ReportingLevel\n\n|Enumeration value     |Description                                         |\n|SERVICE_IDENTIFIER_LEV|indicates that the usage shall be reported on       |\n|EL                    |service id and rating group combination level.      |\n|RATING_GROUP_LEVEL    |indicates that the usage shall be reported on rating|\n|                      |group level.                                        |\n|SPONSORED_CONNECTIVITY|indicates that the usage shall be reported on       |\n|_LEVEL                |sponsor identity and rating group combination level.|\n\n\n            Table\u00a05.4.3.3-13: Proposal Enumeration MeteringMethod\n\n|Enumeration value |Description                                            |\n|DURATION          |indicates that the duration of the service data flow   |\n|                  |traffic shall be metered.                              |\n|VOLUME            |indicates that volume of the service data flow traffic |\n|                  |shall be metered.                                      |\n|DURATION_VOLUME   |indicates that the duration and the volume of the      |\n|                  |service data flow traffic shall be metered.            |\n|EVENT             |indicates that events of the service data flow traffic |\n|                  |shall be metered.                                      |\n\n\n         Table\u00a05.4.3.3-14: Proposal Enumeration AFSignallingProtocol\n\n|Enumeration value |Description                                            |\n|NO_INFORMATION    |Indicate that no information about the AF signalling   |\n|                  |protocol is being provided.                            |\n|SIP               |Indicates that the signalling protocol is Session      |\n|                  |Initiation Protocol                                    |\n\n\n         Table\u00a05.4.3.3-15: Proposal Enumeration RedirectAddressType\n\n|Enumeration value |Description                                    |\n|IPv4              |Indicates that the type is in the form of IPv4 |\n|IPv6              |Indicates that the type is in the form of IPv6 |\n|URL               |Indicates that the type is in the form of URL  |\n|SIP_URI           |Indicates that the type is in the form of SIP  |\n|                  |URI                                            |\n\n\n\n", "Keywords": ""}, {"key": "Encoding Proposal 3: RESTful HTTP with Policy as PCF resource", "numbering": "5.4.3.5", "title_level": 3, "desc": "5.4.3.4  Encoding Proposal 2: RESTful HTTP with Policy as SMF resource\n\n                                    [pic]\n\n          Figure\u00a05.4.3.4-1: Proposed Resource URI structure of the\n                          Npcf_SMPolicyControl API\n\n      Table\u00a05.4.3.4-1: Proposed resources and methods overview for the\n                        Npcf_SMPolicyControl service\n\n|Resource|Resource URI     |HTTP  |Request    |Successful   |Meaning         |\n|name    |                 |method|body       |response body|                |\n|Individu|{apiRoot}/       |PUT   |Npcf_SMPoli|FFS          |Update an       |\n|al      |npcf-sm-policy-co|(FFS) |cyControlSu|             |existing        |\n|SMPolicy|ntrol/           |      |bscription |             |Individual SM   |\n|Subscrip|v1/              |      |           |             |Policy          |\n|tion    |policy_subscripti|      |           |             |Subscription    |\n|        |ons/             |      |           |             |resource for a  |\n|        |                 |      |           |             |SUPI and        |\n|        |{subscriptionID} |      |           |             |sessionID       |\n|        |                 |      |           |             |supplied by the |\n|        |                 |      |           |             |SMF.            |\n|        |                 |PATCH |FFS        |FFS          |Update an       |\n|        |                 |(FFS) |           |             |existing        |\n|        |                 |      |           |             |Individual SM   |\n|        |                 |      |           |             |Policy          |\n|        |                 |      |           |             |Subscription    |\n|        |                 |      |           |             |resource.       |\n|        |                 |GET   |none       |Npcf_SMPolicy|Read the        |\n|        |                 |      |           |ControlSubscr|Individual SM   |\n|        |                 |      |           |iption       |PDUSession      |\n|        |                 |      |           |             |Policy          |\n|        |                 |      |           |             |Subscription    |\n|        |                 |      |           |             |resource.       |\n|        |                 |DELETE|none       |none         |Delete the      |\n|        |                 |      |           |             |Individual SM   |\n|        |                 |      |           |             |PDUSession      |\n|        |                 |      |           |             |Policy          |\n|        |                 |      |           |             |Subscription    |\n|        |                 |      |           |             |resource.       |\n\n\n  Editor's note:  It is also FFS whether to use different data types in the\n         bodies of the related request and response.\n\n  Editor's note:  It is FFS whether the DELETE for the Individual SM\n         Subscriber Policy resource is required.\n\nStage 2 requires that Policy information can be provided both as response\nto a Npcf_SMPolicyControl_Get, and as Npcf_SMPolicyControl_UpdateNotify\nrequest. The information is quite extensive and includes a possibly high\nnumber of PCC rules. Some related issues are\n\n  -  How to achieve maximum communality in the implementation of\n    Npcf_SMPolicyControl_Get and Npcf_SMPolicyControl_UpdateNotify?\n\n  -  How to enable an effective update for both cases?\n\nThe service consumer subscribes to policies by supplying the Individual SM\nPDUSessionPolicy Subscription resource including the notificationURI. The\nPCF does not return policies in the HTTP response to that subscription. The\nPCF rather immediately sends an HTTP request towards notificationURI to\ncreate or update the policy resource at the SMF as depicted in\nfigure\u00a05.4.3.4-2 and described in table\u00a05.4.3.4-2.\n\n                                    [pic]\n\n   Figure\u00a05.4.3.4-2: Proposed Resource URI structure for resources at the\n           service consumer (SMF) for the Npcf_SMPolicyControl API\n\n  Editor's note:  It is FFS whether to introduce resources between the\n         {notificationURI} and the SM Policies that enable the PCF (e.g. for\n         restoration purposes) to read the installed policies for several\n         subscribers and/or the SM Policies for all PDU sessions of one\n         subscriber. The URI structure could then for instance be\n         {notificationURI}/{supi}/{sessionID}/policies.\n\n  Table\u00a05.4.3.4-2: Proposed resources and methods overview for resources at\n       the service consumer (SMF) of the Npcf_SMPolicyControl service\n\n|Resource |URI         |HTTP   |Request body  |Successful  |Meaning         |\n|name     |            |method |              |response    |                |\n|         |            |       |              |body        |                |\n|NOTE: If the SMF deletes the Individual SM PDUSessioPolicy Subscription    |\n|resource, the corresponding SM Policies resource is also deleted in the SMF|\n|without a DELTE request from the PCF                                       |\n\n\n       Table\u00a05.4.3.4-3: Proposed type Npcf_SMPolicyControlSubscription\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi (FFS)       |1        |Subscription Permanent     |\n|                 |                 |         |Identifier                 |\n|pduSessionId     |PduSessionId     |1        |PDU session Id             |\n|                 |(FFS)            |         |                           |\n|dnn              |Dnn (FFS)        |1        |The DNN of the PDU session.|\n|notificationUri  |Uri              |1        |Identifies the recipient of|\n|                 |                 |         |Notifications sent by the  |\n|                 |                 |         |PCF.                       |\n|gpsi             |Gpsi (FFS)       |0..1     |Generic Public Subscription|\n|                 |                 |         |Identifier                 |\n|accessType       |AccessType       |0..1     |The Access Type where the  |\n|                 |                 |         |served UE is camping.      |\n|ratType          |RatType (FFS)    |0..1     |The RAT Type where the     |\n|                 |                 |         |served UE is camping.      |\n|servingNetwork   |NetworkId (FFS)  |0..1     |The serving network where  |\n|                 |                 |         |the served UE is camping.  |\n|userLocationInfor|UserLocationInfor|0..1     |The location of the served |\n|mation           |mation (FFS)     |         |UE is camping.             |\n|ueTimeZone       |TimeZone (FFS)   |0..1     |The time zone where the    |\n|                 |                 |         |served UE is camping.      |\n|permanentEquipmen|PermanentEquipmen|0..1     |The Permanent Equipment    |\n|tIdentifier      |tIdentifier (FFS)|         |Identifier of the served   |\n|                 |                 |         |UE.                        |\n|ipv4Address      |Ipv4Address (FFS)|0..1     |The IPv4 Address of the    |\n|                 |                 |         |served UE.                 |\n|ipv6AddressPrefix|Ipv6AddressPrefix|0..1     |The Ipv6 Address Prefix of |\n|                 |(FFS)            |         |the served UE.             |\n|chargingInformati|ChargingInformati|0..1     |                           |\n|on               |on (FFS)         |         |                           |\n|sessionAmbr      |BitRate (FFS)    |0..1     |                           |\n|defaultQosInforma|DefaultQosInforma|0..1     |                           |\n|tion             |tion (FFS)       |         |                           |\n\n\n  NOTE:  The Supi, PduSessionId, Gpsi, Uri, AceesType, RatType, Dnn,\n         NetworkId, UserLocationInformation, TimeZone,\n         PermanentEquipmentIdentifier, Ipv4Address, Ipv6AddressPrefix,\n         ChargingInformation, BitRate, and DefaultQosInformation Data Types\n         should be specified as common data types applicable for multiple\n         APIs.\n\n          Table\u00a05.4.3.4-4: Proposed type Npcf_SMPolicyControlPolicy\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|pccRules         |PccRule          |0..N     |List of PCC Rules with     |\n|                 |                 |         |content as described in    |\n|                 |                 |         |subclause\u00a05.7.1.           |\n|activePredefinedP|PccRuleId        |0..N     |List of activated          |\n|ccRules          |                 |         |predefined PCC Rules.      |\n|sessionAmbr      |BitRate (FFS)    |0..1     |                           |\n|defaultQosInforma|DefaultQosInforma|0..1     |                           |\n|tion             |tion (FFS)       |         |                           |\n\n\n  Editor's note:  It is FFS whether supi and PDU session Id are required as\n         additional parameters.\n\n                   Table\u00a05.4.3.4-5: Proposed type PccRule\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|pccRuleId        |PccRuleId(FFS)   |1        |PCC Rule Id                |\n|FFS              |                 |         |                           |\n|                 |                 |         |                           |\n\n\n  Editor's note:  FFS. Provide content as described in subclause\u00a05.7.1.\n\n\n5.4.3.5  Encoding Proposal 3: RESTful HTTP with Policy as PCF resource and\n           notification to trigger SMF to fetch new policy\n\nThis encoding proposal is identical to encoding proposal 1 with the\nexception that the proposed type Npcf_SMPolicyControlNotification does not\ncontain policy, but only a trigger to fetch updated policy.\n\nThe SMF fetches policy using an HTTP GET when receiving such a\nnotification.\n\n\n5.4.3.5a Encoding Proposal 4: RESTful HTTP with Policy both as PCF resource\n           and as SMF resource and subscription related information only in\n           PCF resource\n\nThe proposal is similar to proposal 2. However, policy related information\nis also included in the Individual SM PDUSessionPolicy Subscription\nresource to allow the PCF to return this information in a response to the\ninitial GET.\n\n\n", "Keywords": ""}, {"key": "Comparison of Proposals", "numbering": "5.4.3.6", "title_level": 3, "desc": "5.4.3.6  Comparison of Proposals\n\n              Table\u00a05.4.3.6-1: Comparison of Encoding Proposals\n\n|                 |Proposal 1     |Proposal 2        |Proposal 3         |Proposal 4         |\n|Efficient policy |Yes            |Less efficient, as|Yes                |Yes                |\n|provisioning for |               |two HTTP Request  |                   |                   |\n|initial GET      |               |response pairs    |                   |                   |\n|                 |               |required.         |                   |                   |\n|Efficient policy |For HTTP GET   |Alternatives:     |For HTTP GET only  |Alternatives:      |\n|provisioning for |only complete  |1. two HTTP       |complete policy but|1. return policies |\n|subsequent GET   |policy but no  |interactions, but |no deltas can be   |in HTTP GET        |\n|(Pull operation, |deltas can be  |possibility to    |provided. Thus most|response:          |\n|FFS if this is   |provided. Thus |provide only      |likely custom      |only complete      |\n|required)        |most likely    |deltas in Policy. |operation required.|policy but no      |\n|                 |custom         |2. custom         |                   |deltas can be      |\n|                 |operation      |operation.        |                   |provided.          |\n|                 |required.      |                  |                   |2. use two HTTP    |\n|                 |               |                  |                   |interactions:      |\n|                 |               |                  |                   |only complete      |\n|                 |               |                  |                   |policy but no      |\n|                 |               |                  |                   |deltas can be      |\n|                 |               |                  |                   |provided.          |\n|                 |               |                  |                   |3. custom          |\n|                 |               |                  |                   |operation.         |\n|Efficient policy |Yes (Depends on|Yes               |No, two HTTP       |Yes                |\n|provisioning for |custom         |                  |interactions, and  |                   |\n|Notify (Push     |operation      |                  |no possibility to  |                   |\n|operation)       |design)        |                  |provide only deltas|                   |\n|                 |               |                  |in policy          |                   |\n|RESTful design   |Only small     |Yes               |Partial:           |Partial:           |\n|                 |fractions. A   |(Evolution to     |most likely        |Duplicated resource|\n|                 |substantial    |combination with  |subsequent PULL    |is not a usual     |\n|                 |part of the    |event exposure    |operation requires |pattern.           |\n|                 |functionality  |might require     |custom operation.  |(Evolution to      |\n|                 |(PUSH policy   |custom operation  |(Evolution to      |combination with   |\n|                 |provisioning   |for subsequent    |combination with   |event exposure     |\n|                 |and most likely|GET.)             |event exposure     |might require      |\n|                 |also subsequent|                  |might require      |custom operation   |\n|                 |PULL operation)|                  |custom operation   |for subsequent     |\n|                 |uses custom    |                  |for subsequent     |GET.)              |\n|                 |operations.    |                  |GET.)              |                   |\n|Efficient        |OK             |OK (assuming      |OK                 |OK (assuming policy|\n|Deletion         |               |policy resources  |                   |resources at SMF   |\n|                 |               |at SMF are        |                   |are implicitly     |\n|                 |               |implicitly deleted|                   |deleted when SMF   |\n|                 |               |when SMF deletes  |                   |deletes            |\n|                 |               |subscription      |                   |subscription       |\n|                 |               |resource.)        |                   |resource.)         |\n\n\n\n", "Keywords": ""}, {"key": "Conclusions", "numbering": "5.4.3.7", "title_level": 3, "desc": "5.4.3.7  Conclusions\n\nEncoding proposal 1 is selected for the normative work.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.4.1", "title_level": 3, "desc": "5.4.4.1  General\n\nThe is service is to authorise an AF request and to create policies as\nrequested by the authorised AF for a PDU session to which the AF session is\nbound. This service allows the NF consumer to subscribe/unsubscribe the\nnotification of events (e.g. change of access type or RAT type, changes of\nthe PLMN identifier).\n\n\n", "Keywords": ""}, {"key": "Encoding Proposal 2: RESTful HTTP with event subscriptions as", "numbering": "5.4.4.4", "title_level": 3, "desc": "5.4.4.2  Operations\n\n     Table 5.4.4.2-1: Operations of the Npcf_PolicyAuthorization Service\n\n|Service operation name                                                       |\n\n\n  Editor's note:  It is FFS whether identification of the application\n         session context is a required input to the\n         Npcf_PolicyAuthorization_Notify operation. This parameter is not\n         yet included in stage 2.\n\n  Editor's note:  It is FFS whether the application session context\n         identifier can be a required output rather than a required input\n         for the Npcf_PolicyAuthorization_Create operation and thus be\n         assigned by the PCF. This could enable a resource creation via HTTP\n         POST.\n\n\n5.4.4.3  Encoding Proposal 1: RESTful HTTP with event subscriptions as sub-\n           resource\n\n                                    [pic]\n\n          Figure\u00a05.4.4.3-1: Proposed Resource URI structure of the\n                        Npcf_PolicyAuthorization API\n\n      Table\u00a05.4.4.3-1: Proposed resources and methods overview for the\n                      Npcf_PolicyAuthorization service\n\n|Resource |Resource URI    |HTTP  |Request    |Successful |Meaning           |\n|name     |                |method|body       |response   |                  |\n|         |                |      |           |body       |                  |\n|Individua|{apiRoot}/      |PUT   |SessionRequ|SessionAnsw|Request that the  |\n|l Npcf   |npcf-policyautho|(FFS, |est        |er         |PCF creates a new |\n|policy   |rization/       |see   |           |           |session for Npcf  |\n|authoriza|v1/             |editor|           |           |policy            |\n|tion     |sessions/       |'s    |           |           |authorization, if |\n|         |{Sessionid}     |note) |           |           |it does not exist |\n|         |                |      |           |           |or updates an     |\n|         |                |      |           |           |existing session. |\n|         |                |PATCH |FFS        |FFS        |Partially updates |\n|         |                |(FFS, |           |           |session for Npcf  |\n|         |                |see   |           |           |policy            |\n|         |                |editor|           |           |authorization     |\n|         |                |'s    |           |           |                  |\n|         |                |note) |           |           |                  |\n|         |                |GET   |none       |Session    |Provides          |\n|         |                |      |           |           |information about |\n|         |                |      |           |           |a session for Npcf|\n|         |                |      |           |           |policy            |\n|         |                |      |           |           |authorization.    |\n|         |                |DELETE|none       |DeleteAnswe|Instructs the PCF |\n|         |                |      |           |r          |server to delete a|\n|         |                |      |           |           |session for Npcf  |\n|         |                |      |           |           |policy            |\n|         |                |      |           |           |authorization.    |\n|Media    |{apiRoot}/      |PUT   |1..N       |none       |Requests that the |\n|Component|npcf-policyautho|(FFS) |MediaCompon|           |complete set of   |\n|s        |rization/       |      |ent        |           |media components  |\n|         |v1/             |      |           |           |for a session is  |\n|         |sessions/       |      |           |           |added or replaced.|\n|         |{Sessionid}/    |      |           |           |                  |\n|         |media-components|      |           |           |                  |\n|         |                |GET   |none       |1\u2026N,       |Gets information  |\n|         |                |      |           |MediaCompon|about the complete|\n|         |                |      |           |ent        |set of media      |\n|         |                |      |           |           |components for a  |\n|         |                |      |           |           |session           |\n|Individua|{apiRoot}/      |PUT   |MediaCompon|none       |Request that the  |\n|l Media  |npcf-policyautho|(FFS, |ent        |           |server creates a  |\n|Component|rization/       |see   |           |           |new media         |\n|         |v1/             |editor|           |           |component, if it  |\n|         |sessions/       |'s    |           |           |does not exist or |\n|         |{Sessionid}/    |note) |           |           |updates an        |\n|         |media-components|      |           |           |existing media    |\n|         |/               |      |           |           |component.        |\n|         |{mcNbr}         |      |           |           |                  |\n|         |                |PATCH |FFS        |FFS        |Partially updates |\n|         |                |(FFS, |           |           |a media component |\n|         |                |see   |           |           |                  |\n|         |                |editor|           |           |                  |\n|         |                |'s    |           |           |                  |\n|         |                |note) |           |           |                  |\n|         |                |GET   |none       |MediaCompon|Provides          |\n|         |                |      |           |ent        |information about |\n|         |                |      |           |           |a media component.|\n|         |                |DELETE|none       |none       |Instructs the PCF |\n|         |                |      |           |           |to delete a media |\n|         |                |      |           |           |component.        |\n|NPCF     |{apiRoot}/      |PUT   |EventSubscr|none       |Allows the NF     |\n|policy   |npcf-policyautho|      |iption     |           |service consumers |\n|authoriza|rization/       |      |           |           |to subscribe to   |\n|tion     |v1/sessions/[Ses|      |           |           |the notification  |\n|event    |sionid}/event-su|      |           |           |of events or      |\n|subscript|bscription      |      |           |           |modify that       |\n|ion      |                |      |           |           |subscription.     |\n|         |                |      |           |           |                  |\n|(FFS, see|                |      |           |           |                  |\n|editor's |                |      |           |           |                  |\n|note)    |                |      |           |           |                  |\n|         |                |DELETE|none       |none       |Allows the NF     |\n|         |                |      |           |           |service consumers |\n|         |                |      |           |           |to unsubscribe to |\n|         |                |      |           |           |the notification  |\n|         |                |      |           |           |of events.        |\n\n\n  Editor's note:  It is FFS whether to use PUT or POST or to allow both for\n         the creation of the policy authorization operation. If POST is used\n         the client addresses the resource responsible for service creation\n         at the server. The server allocates the session id (provided in the\n         location header of 201 Created) having a more server centric\n         solution. The advantage of POST is that it is the standard\n         characteristic to create a new resource in RESTful web development,\n         uses a clear server centric solution and service creation and\n         update are distinguished by the methods. The advantage of PUT is\n         that the method is idempotent if the client uses the same session\n         id for following request.\n\n  Editor's note:  It is FFS whether PATCH should only be supported as an\n         optional method by the PCF. Depending on the selected encoding,\n         PATCH can be not idempotent and not secure. The restriction for the\n         server is that it is not allowed to react on GET request with data\n         not completely patched. Normally PUT is used for service updating\n         with the disadvantage to transport the complete representation of\n         the resource and should normally be supported by the server in any\n         case. Within this usage strategy for PUT the definition of\n         meaningful sub-resources can be helpful (e.g. sub-resources for\n         media component descriptions, sponsored data, etc.).\n\n  Editor's note:  It is FFS whether the \"eventsubscription\" should be\n         defined as own subresource or related information only be included\n         in the Individual Npcf policy authorization resource. The\n         \"eventsubscription\" resource allows to address the DELETE message\n         to the \"eventsubscription\" resource without a request body and to\n         keep the active service operation with a session id.\n\n  Editor's note:  It is FFS if the mediacomponent subresource is required\n         or related information only is only included in the Individual Npcf\n         policy authorization resource. In the latter case media components\n         could be updated using PATCH.\n\n      Table\u00a05.4.4.3-2: Proposed resources and methods overview for the\n               Npcf_PolicyAuthorization notification services\n\n|Resource |Resource URI    |HTTP  |Request    |Successful |Meaning           |\n|name     |                |method|body       |response   |                  |\n|         |                |      |           |body       |                  |\n\n\n  Editor's note:  It is for FFS whether the notificationURI should be\n         extendable by sub-resources defined. An application can be the\n         event notification service to the resource\n         {notificationURI}/eventid. Another application can be an\n         asynchronous process in which the client waits for a longer time\n         period for service compilation (e.g. a new service creation with\n         POST will be answered with 202 Accepted to the resource\n         {notificationURI}/notificationid) and after final service request\n         compilation with a POST to {notificationURI}/notificationid which\n         has to be answered with 200 OK by the client now.\n\n                   Table\u00a05.4.4.3-3: Proposed type Session\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|request          |ServiceRequest   |1        |                           |\n|answer           |ServiceRequestAns|1        |                           |\n|                 |wer              |         |                           |\n\n\n                Table\u00a05.4.4.3-4: Proposed type SessionRequest\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|supi             |Supi             |0..1     |                           |\n|dnn              |Dnn              |0..1     |                           |\n|ipDomainId       |IpDomainId       |0..1     |                           |\n|afAppId          |AfAppId          |0..1     |                           |\n|mediaComponents  |MediaComponent   |1..N     |                           |\n|afChargingId     |AfChargingId     |0..1     |                           |\n|subId            |SubscriptionId   |0..1     |                           |\n|resPrio          |ResPrio          |0..1     |                           |\n|ueIpv4           |Ipv4Addr         |0..1     |                           |\n|ueIpv6           |Ipv6Addr         |0..1     |                           |\n|svcURN           |SvcURN           |0..1     |Service-URN                |\n|spConnData       |SpConnData       |0..1     |                           |\n|mpsId            |MpsId            |0..1     |MPS-Identifier             |\n|refId            |RefId            |0..1     |                           |\n|eventSubscription|EventSubscription|0..1     |                           |\n\n\n                Table\u00a05.4.4.3-5: Proposed type MediaComponent\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|mcNumber         |UInteger         |1        |                           |\n|FFS              |                 |         |                           |\n|                 |                 |         |                           |\n\n\n                Table\u00a05.4.4.3-6: Proposed type SessionAnswer\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|sessionId        |SessionId        |1        |                           |\n|ancId            |AncId            |0..1     |Access-Network-Charging-Ide|\n|                 |                 |         |ntifier                    |\n|ancAddr          |Address (FFS)    |0..1     |Access-Network-Charging-Add|\n|                 |                 |         |ress                       |\n|acceptableSvcInfo|AcceptableSvcInfo|0..1     |Accepable Service Info     |\n|FFS if this      |                 |         |                           |\n|should rather go |                 |         |                           |\n|to a negative    |                 |         |                           |\n|response         |                 |         |                           |\n|ipCanType (FFS,  |IpCanType (FFS)  |0..1     |                           |\n|needs to cover   |                 |         |                           |\n|5GC)             |                 |         |                           |\n|netLocAccSupp    |NetLocAccSupp    |0..1     |                           |\n|ratType          |RatType          |0..1     |                           |\n|anTrusted        |boolean          |0..1     |Indicates whether the      |\n|                 |                 |         |access network is trusted  |\n|                 |                 |         |or untrusted for the       |\n|                 |                 |         |Non-3GPP access network    |\n|anGWAddr (FFS if |Address (FFS)    |0..1     |Carries the IP address of  |\n|this applies for |                 |         |the ePDG used as IPSec     |\n|5GC)             |                 |         |tunnel endpoint with the UE|\n|flows            |Flows            |0..N     |                           |\n|retryInterval    |DurationSec      |0..1     |                           |\n\n\n                    Table\u00a05.4.4.3-7: Proposed type Flows\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|FFS              |                 |         |                           |\n|                 |                 |         |                           |\n\n\n              Table\u00a05.4.4.3-8: Proposed type EventSubscription\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|events           |Event (FFS)      |1..N     |                           |\n|notificationURI  |Uri              |1        |                           |\n\n\n                 Table\u00a05.4.4.3-9: Proposed type DeleteAnswer\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|resCode          |ResCode          |0..1     |                           |\n|spConnData       |SpConnData       |0..1     |                           |\n|uli              |UserLocationInfor|0..1     |User-Location-Info         |\n|                 |mation           |         |                           |\n|uliTime          |DateTime         |0..1     |                           |\n|msTimeZone       |TimeZone         |0..1     |                           |\n|ueLocalIt        |DateTime         |0..1     |User-Location-Info-Time    |\n|ranNasRelCause   |RanNasRelCause(FF|0..1     |                           |\n|                 |S)               |         |                           |\n|sgsnMccMnc       |SgsnMccMnc       |0..1     |                           |\n|twanId           |TWANId           |0..1     |                           |\n|netLocAccSupp    |NetLocAccSupp    |0..1     |                           |\n|tcpSrcPort       |Port(FFS)        |0..1     |                           |\n|udpSrcPort       |Port(FFS)        |0..1     |                           |\n\n\n           Table\u00a05.4.4.3-10: Proposed type NotificationInformation\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|event            |Event (FFS)      |1        |                           |\n|FFS              |                 |         |                           |\n\n\n\n5.4.4.4  Encoding Proposal 2: RESTful HTTP with event subscriptions as a\n           separated sub-resource\n\n                                    [pic]\n\n          Figure\u00a05.4.4.4-1: Proposed Resource URI structure of the\n                        Npcf_PolicyAuthorization API\n\n   Table\u00a05.4.4.4-1: Proposed resources and methods overview for the Npcf_\n                         PolicyAuthorization service\n\n|Resource |Resource URI    |HTTP  |Request    |Successful |Meaning           |\n|name     |                |method|body       |response   |                  |\n|         |                |      |           |body       |                  |\n|Individua|//{apiRoot}/npcf|PUT   |FFS        |FFS        |Npcf_PolicyAuthori|\n|l        |-policy-        |(FFS) |           |           |zation_Update.    |\n|Applicati|authorization/v1|      |           |           |Creates a new or  |\n|on       |/application-ses|      |           |           |updates an        |\n|session  |sions/{appSessio|      |           |           |existing          |\n|context  |nContextId}     |      |           |           |individual        |\n|         |                |      |           |           |Application       |\n|         |                |      |           |           |session context   |\n|         |                |      |           |           |resource.         |\n|         |                |PATCH |FFS        |FFS        |Npcf_PolicyAuthori|\n|         |                |(FFS) |           |           |zation_Update.    |\n|         |                |      |           |           |Updates an        |\n|         |                |      |           |           |existing          |\n|         |                |      |           |           |individual        |\n|         |                |      |           |           |Application       |\n|         |                |      |           |           |session context   |\n|         |                |      |           |           |resource.         |\n|         |                |DELETE|FFS        |FFS        |Npcf_PolicyAuthori|\n|         |                |      |           |           |zation_Delete.    |\n|         |                |      |           |           |Deletes an        |\n|         |                |      |           |           |existing          |\n|         |                |      |           |           |individual        |\n|         |                |      |           |           |Application       |\n|         |                |      |           |           |session context   |\n|         |                |      |           |           |resource.         |\n|         |                |GET   |FFS        |FFS        |Reads an existing |\n|         |                |      |           |           |individual        |\n|         |                |      |           |           |Application       |\n|         |                |      |           |           |session context   |\n|         |                |      |           |           |resource.         |\n|Event    |//{apiRoot}/npcf|POST  |FFS        |FFS        |Npcf_PolicyAuthori|\n|Subscript|-policy-authoriz|      |           |           |zation_Subscribe. |\n|ions     |ation/v1/event-s|      |           |           |Creates a new     |\n|         |ubscriptions    |      |           |           |event subscription|\n|         |                |      |           |           |resource for a    |\n|         |                |      |           |           |given Application |\n|         |                |      |           |           |session context   |\n|         |                |      |           |           |identifier.       |\n|Individua|//{apiRoot}/npcf|PUT   |FFS        |FFS        |Npcf_PolicyAuthori|\n|l Event  |-policy-authoriz|      |           |           |zation_Subscribe. |\n|Subscript|ation/v1/event-s|      |           |           |Modifies an       |\n|ion      |ubscriptions/{ev|      |           |           |existing event    |\n|         |entSubId}       |      |           |           |subscription      |\n|         |                |      |           |           |resource.         |\n|         |                |DELETE|FFS        |FFS        |Npcf_PolicyAuthori|\n|         |                |      |           |           |zation_Unsubscribe|\n|         |                |      |           |           |.                 |\n|         |                |      |           |           |Deletes an event  |\n|         |                |      |           |           |subscription.     |\n|         |                |GET   |FFS        |FFS        |Reads an event    |\n|         |                |      |           |           |subscription      |\n|         |                |      |           |           |resource.         |\n\n\n  Editor's note:  It is FFS whether PUT and/or PATCH should be used for the\n         encoding of the Npcf_PolicyAuthorization_Update service operation.\n\n             Table\u00a05.4.4.4-2: Proposed methods overview for the\n              Npcf_PolicyAuthorization_Notify service operation\n\n|Resource |URI         |HTTP   |Request body  |Successful  |Meaning         |\n|name     |            |method |              |response    |                |\n|         |            |       |              |body        |                |\n\n\n\n", "Keywords": ""}, {"key": "Comparison of encoding proposals", "numbering": "5.4.4.5", "title_level": 3, "desc": "5.4.4.5  Comparison of encoding proposals\n\n              Table\u00a05.4.4.5-1: Comparison of encoding proposals\n\n|                                     |Proposal 1        |Proposal 2        |\n|Separate usage of Event exposure     |Yes: all service  |Yes               |\n|                                     |information       |                  |\n|                                     |related attributes|                  |\n|                                     |are optional.     |                  |\n|Separate Evolution of event exposure |Possible as long  |Yes               |\n|to group communication               |as service        |                  |\n|                                     |information       |                  |\n|                                     |related attributes|                  |\n|                                     |remain optional.  |                  |\n|Combined Evolution of event exposure |Yes               |More complex.     |\n|and service information provisioning |                  |                  |\n|to group communication.              |                  |                  |\n|Support of Events related to         |Yes               |Complicated, e.g. |\n|particular service media flows (e.g. |                  |via URL to related|\n|QoS not available)                   |                  |resource.         |\n|Combined operations of event         |Yes               |No: two HTTP      |\n|subscriptions and service information|                  |interactions      |\n|provisioning at start of application |                  |required.         |\n|Combined operations of event         |Yes               |No: two HTTP      |\n|unsubscriptions and service          |                  |interactions      |\n|information revocation at stop of    |                  |required.         |\n|application                          |                  |                  |\n|Multiple Event Subscriptions for the |No                |Yes               |\n|same Application session             |                  |                  |\n\n\n  NOTE\u00a01:  Whether combined operations for service information and event\n         subscription handling are required remains unspecified and the\n         final solution will be covered as part of the normative work.\n\n  NOTE\u00a02:  Multiple event subscriptions for the same application session is\n         not a stage 2 requirement.\n\n\n", "Keywords": ""}, {"key": "Conclusions", "numbering": "5.4.4.6", "title_level": 3, "desc": "5.4.4.6  Conclusions\n\nThe approach defined in Encoding proposal 1 is selected for progressing the\nnormative work.\n\nResource structure at application session level is left for the normative\nwork.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.5.1", "title_level": 3, "desc": "5.4.5.1  General\n\nThis service provides events related to PDU sessions towards consumer NF.\nThe service operations exposed by this service allow other NFs to\nsubscribe, unsubscribe and get notified of events happening on the PDU\nsession. The following are the key functionalities of this NF service.\n\n  -  Allowing consumer NFs to subscribe and unsubscribe for events on a PDU\n    session; and\n\n  -  Notifying events on the PDU session to the NFs that require reporting.\n\nThe following are the types of events that can be exposed by the SMF:\n\n  -  UPF change (Addition and/or removal of PDU session anchor);\n\n  -  SMF change;\n\n  -  Application traffic detection (start and stop);\n\n  -  PDU session statistics (for example usage reporting);\n\n  -  PDU session release; and\n\n  -  Out of credit.\n\n  Editor's note:  Stage 2 indicates that it is FFS how this service may be\n         used for online charging.\n\n\n", "Keywords": ""}, {"key": "Operations", "numbering": "5.4.5.2", "title_level": 3, "desc": "5.4.5.2  Operations\n\n         Table 5.4.5.2-1: Stage 2 requirements for Operations of the\n                         Nsmf_EventExposure service\n\n|Service Operation name                                                      |\n\n\n  Editor's note:  The Repetition Period for periodic reporting as optional\n         input parameter to the subscribe is not explicitly mentioned in\n         stage 2, but stage 2 only lists examples of reporting options.\n\n  Editor's note:  The use of the Nsmf_EventExposure_UnSubscribe operation\n         to cancel the complete subscription, and thus not requiring other\n         input parameters than the Event correlation ID is not currently\n         covered in stage 2.\n\n\n", "Keywords": ""}, {"key": "Encoding Proposal 1: RESTful HTTP", "numbering": "5.4.5.3", "title_level": 3, "desc": "5.4.5.3  Encoding Proposal 1: RESTful HTTP\n\n                                    [pic]\n\n Figure\u00a05.4.5.3-1: Proposed Resource URI structure of the Nsmf_EventExposure\n                                     API\n\n      Table\u00a05.4.5.3-1: Proposed resources and methods overview for the\n                         Nsmf_EventExposure service\n\n|Resource |Resource URI  |HTTP  |Request    |Successful  |Meaning            |\n|name     |              |method|body       |response    |                   |\n|         |              |      |           |body        |                   |\n|Individua|{apiRoot }/   |GET   |none       |NsmfEventExp|Read an Individual |\n|l SMF    |nsmf-event-exp|      |           |osure       |SMF Notification   |\n|Notificat|osure/        |      |           |            |Subscription       |\n|ion      |v1/           |      |           |            |resource.          |\n|Subscript|subscriptions |      |           |            |                   |\n|ion      |/             |      |           |            |                   |\n|         |{eventSubId}  |      |           |            |                   |\n|         |              |PUT   |Nsmf_EventE|NsmfEventExp|Modify an existing |\n|         |              |      |xposure    |osure       |Individual SMF     |\n|         |              |      |           |            |Notification       |\n|         |              |      |           |            |Subscription       |\n|         |              |      |           |            |resource.          |\n|         |              |DELETE|none       |none        |Delete an          |\n|         |              |      |           |            |Individual SMF     |\n|         |              |      |           |            |Notification       |\n|         |              |      |           |            |Subscription       |\n|         |              |      |           |            |resource and cancel|\n|         |              |      |           |            |the related        |\n|         |              |      |           |            |subscription.      |\n\n\n             Table\u00a05.4.5.3-2: Proposed methods overview for the\n                 Nsmf_EventExposure_Notify service operation\n\n|Resource |URI         |HTTP   |Request body  |Successful  |Meaning         |\n|name     |            |method |              |response    |                |\n|         |            |       |              |body        |                |\n\n\n              Table\u00a05.4.5.3-3: Proposed type Nsmf_EventExposure\n\n|Attribute name|Data type     |Cardinal|Description                      |\n|              |              |ity     |                                 |\n|supi          |Supi (FFS)    |0..1    |Subscription Permanent Identifier|\n|              |              |        |(NOTE)                           |\n|gpsi          |Gpsi (FFS)    |0..1    |Generic Public Subscription      |\n|              |              |        |Identifier                       |\n|ipv4Address   |Ipv4Address   |0..1    |The IPv4 Address of the served   |\n|              |(FFS)         |        |UE. (NOTE)                       |\n|ipv6AddressPre|Ipv6AddressPre|0..1    |The Ipv6 Address Prefix of the   |\n|fix           |fix (FFS)     |        |served UE. (NOTE)                |\n|dnn           |Dnn (FFS)     |0..1    |DNN (NOTE)                       |\n|groupId       |GroupId       |0..1    |Identifies a group of UEs. (NOTE)|\n|anyUE         |Boolean       |0..1    |Default is \"FALSE\". (NOTE)       |\n|pduSessionId  |PduSessionId  |0..1    |PDU session ID (NOTE)            |\n|              |(FFS)         |        |                                 |\n|eventSubId    |EventSubId    |0..1    |Event correlation ID.            |\n|              |(FFS)         |        |This parameter shall be supplied |\n|              |              |        |by the SMF in the body of HTTP   |\n|              |              |        |requests of                      |\n|              |              |        |Nsmf_EventExposure_Notify service|\n|              |              |        |operation for reporting events   |\n|              |              |        |that require subscription.       |\n|notificationUR|Uri           |0..1    |It identifies the recipient of   |\n|I             |              |        |Notifications sent by the SMF.   |\n|              |              |        |This parameter shall be supplied |\n|              |              |        |by the NF service consumer in the|\n|              |              |        |HTTP requests.                   |\n|eventSubscript|EventSubscript|1..N    |Subscribed events                |\n|ions          |ion           |        |                                 |\n|NOTE: Either information about a single UE (i.e. supi, gpsi or dnn and  |\n|IP Address Information (i.e. ipv4Address or ipv6AddressPrefix), all in  |\n|combination with pduSessionId), or groupId, or anyUE set to \"TRUE\" shall|\n|be included.                                                            |\n\n\n  NOTE\u00a01:  The Supi, Gpsi, PduSessionId, EventSubId, Uri, Dnn, Ipv4Address,\n         Ipv6AddressPrefix, and GroupId,data types should be specified as\n         common data types applicable for multiple APIs\n\n        Table\u00a05.4.5.3-4: Proposed type Nsmf_EventExposureNotification\n\n|Attribute name |Data type     |Cardinali|Description                     |\n|               |              |ty       |                                |\n|supi           |Supi (FFS)    |1        |Subscription Permanent          |\n|               |              |         |Identifier (NOTE)               |\n|ipv4Address    |Ipv4Address   |0..1     |The IPv4 Address of the served  |\n|               |(FFS)         |         |UE. (NOTE)                      |\n|ipv6AddressPref|Ipv6AddressPre|0..1     |The Ipv6 Address Prefix of the  |\n|ix             |fix (FFS)     |         |served UE. (NOTE)               |\n|dnn            |Dnn (FFS)     |0..1     |DNN (NOTE)                      |\n|gpsi           |Gpsi (FFS)    |0..1     |Generic Public Subscription     |\n|               |              |         |Identifier (NOTE)               |\n|pduSessionId   |PduSessionId  |1        |PDU session ID (NOTE)           |\n|               |(FFS)         |         |                                |\n|eventSubId     |EventSub (FFS)|1        |Event correlation ID            |\n|eventNotificati|EventNotificat|1..N     |Notifications about Individual  |\n|ons            |ion           |         |Events                          |\n|NOTE: Information about a specified PDU session (i.e. supi (or gpsi) and|\n|pduSessionId, or dnn and IP Address Information (i.e. ipv4Address or    |\n|ipv6AddressPrefix) and pduSessionId), shall be included.                |\n\n\n              Table\u00a05.4.5.3-5: Proposed type EventSubscription\n\n|Attribute name |Data type     |Cardinal|Description                     |\n|               |              |ity     |                                |\n|event          |SmfEvent      |1       |Subscribed events               |\n|notificationMet|NotificationMe|0..1    |If \"notificationMethod\" is not  |\n|hod            |thod          |        |supplied, the default value     |\n|               |              |        |\"ON_EVENT_DETECTION\" applies.   |\n|immediateNotifi|Boolean       |0..1    |Default is \"FALSE\".             |\n|cation         |              |        |                                |\n|maxReportNbr   |UInteger (FFS)|0..1    |If omitted, there is no limit.  |\n|monitoringDurat|Duration (FFS)|0..1    |If omitted, there is no limit.  |\n|ion            |              |        |                                |\n|repetitionPerio|Duration (FFS)|0..1    |Is supplied for notification    |\n|d              |              |        |Method \"periodic\".              |\n\n\n  NOTE\u00a02:  The Duration data type and the UInteger (for unsigned integer)\n         should be specified as common data type applicable for multiple\n         APIs.\n\n               Table\u00a05.4.5.3-6: Proposed Enumeration SmfEvent\n\n|Enumeration value            |Description                         |\n|UPF_CHANGE                   |                                    |\n|APPLICATION_TRAFFIC_START    |The start of application traffic has|\n|                             |been detected.                      |\n|APPLICATION_TRAFFIC_STOP     |The stop of application traffic has |\n|                             |been detected.                      |\n|PDU_SESSION_RELEASE          |                                    |\n|OUT_OF_CREDIT                |Credit is no longer available.      |\n|PLMN_CHANGE                  |The UE has moved to another         |\n|                             |operator's domain.                  |\n|SESSION_AMBR_CHANGE          |The subscribed Session-AMBR has     |\n|                             |changed.                            |\n|DEFAULT_QOS_CHANGE           |The subscribed Default 5QI/ARP has  |\n|                             |changed.                            |\n|ACCESS_TYPE_CHANGE           |The access type of the PDU session  |\n|                             |has changed.                        |\n|SERVING_AREA_CHANGE          |The serving area of the UE has      |\n|                             |changed.                            |\n|USER_LOCATION_CHANGE         |Triggered upon a change in user     |\n|                             |location, e.g. change of TA (FFS    |\n|                             |other possible granularity).        |\n|CHANGE_OF_UE_PRESENCE_IN_    |The UE is entering/leaving a        |\n|PRESENCE_REPORTING_AREA      |Presence Reporting Area.            |\n|REVALIDATION_TIMEOUT         |SMF interaction to request PCC rules|\n|                             |from the PCF for an established PDU |\n|                             |session. This SMF interaction shall |\n|                             |take place within the Revalidation  |\n|                             |time limit set by the PCF in the PDU|\n|                             |session related policy information. |\n|UE_IP_ADDRESS_ALLOCATE       |A UE IP address has been allocated. |\n|UE_IP_ADDRESS_RELEASE        |A UE IP address has been released.  |\n|CHARGING_CORRELATION_EXCHANGE|Reports the access network charging |\n|                             |identifier for the PCC rules that   |\n|                             |requires it.                        |\n|USAGE_REPORT                 |Reports the accumulated usage for   |\n|                             |one or more monitoring keys.        |\n|ACCESS_NETWORK_INFO_REPORT   |Access information as specified in  |\n|                             |the Access Network Information      |\n|                             |Reporting part of a PCC rule.       |\n|CREDIT_MANAGEMENT_SESSION_   |Indicates that a transient/permanent|\n|FAILURE                      |failure has been detected in the    |\n|                             |OCS.                                |\n|UE_TIME_ZONE_CHANGE          |Indicates a change in the time zone |\n|                             |the UE is currently located.        |\n|RAT_TYPE_CHANGE              |Triggered upon a change in RAT type |\n|                             |(FFS).                              |\n|REALLOCATION_OF_CREDIT       |FFS                                 |\n|SUCCESSFUL_RESOURCE_ALLOCATIO|Indicates that resources have been  |\n|N                            |successfully allocated for a PCC    |\n|                             |rule.                               |\n\n\n          Table\u00a05.4.5.3-7: Proposed Enumeration NotificationMethod\n\n|Enumeration value        |Description                  |\n|PERIODIC                 |                             |\n|ONE_TIME                 |                             |\n|ON_EVENT_DETECTION       |                             |\n\n\n              Table\u00a05.4.5.3-8: Proposed type EventNotification\n\n|Attribute name   |Data type        |Cardinali|Description                |\n|                 |                 |ty       |                           |\n|event            |SmfEvent         |1        |Event that is notified     |\n|dnai             |Dnai (FFS)       |0..1     |DN Access Identifier       |\n|FFS              |FFS              |0..1     |Depending on the event     |\n|                 |                 |         |type, additional           |\n|                 |                 |         |information can be required|\n\n\n  NOTE\u00a03:  The Dnai data type should be specified as common data type\n         applicable for multiple APIs.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.7.1", "title_level": 3, "desc": "5.4.6.1  General\n\n  NOTE:  Studies on the definition of the UDR service are out of scope of\n         the present TR. The purpose of this subclause is to study the usage\n         of the UDR service for policy control.\n\n   Table 5.4.6.1-1: Operations of the Nudr_Unified_Data_Management Service\n\n|Service operation   |Description                           |NF      |Inputs, |\n|name                |                                      |Consumer|required|\n|                    |                                      |s       |        |\n|Nnwdaf_Events_Subscr|This service enables the consumer to  |5.4.7.2 |PCF     |\n|iption              |subscribe/unsubscribe to NWDAF slice  |        |        |\n|                    |congestion events notification.       |        |        |\n|                    |Periodic notification and notification|        |        |\n|                    |upon threshold exceeded can be        |        |        |\n|                    |subscribed to.                        |        |        |\n|Nnwdaf_Analytics_Inf|This service enables the consumer to  |5.4.7.3 |PCF     |\n|o                   |request and retrieve operator specific|        |        |\n|                    |analytics from NWDAF.                 |        |        |\n\n\n  Editor's note:  CT3 ask SA2 to confirm the NWDAF operations.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.4.7.2.1", "title_level": 4, "desc": "5.4.7.2.1   General\n\nThe Nnwdaf_Events_Subscription service enables the NF service consumer to\nsubscribe/unsubscribe to NWDAF slice congestion events notification.\nPeriodic notification and notification upon threshold exceeded can be\nsubscribed to.\n\n\n", "Keywords": ""}, {"key": "Degree of Compliance of the stage 2 requirements with REST", "numbering": "5.5.2.4", "title_level": 3, "desc": "5.4.7.2.2   Operations\n\n   Table\u00a05.4.7.2.2-1: Operations of the Nnwdaf_Events_Subscription Service\n\n|Service operation    |Description                                               |\n|name                 |                                                          |\n|1. Client/Server     |Mostly met.                                               |\n|                     |Services are defined in such a way that a provider NFs    |\n|                     |offers services to consumer NFs.                          |\n|                     |However, services can include asynchronous notifications  |\n|                     |from server to client which may need to be modelled as a  |\n|                     |separate pair of client and server with reversed roles.   |\n|2. Stateless         |Not fully met.                                            |\n|                     |Stage 2 requires that a resource at a particular server,  |\n|                     |rather than a resource at an arbitrary server, is         |\n|                     |addressed after a separate server selection via the NRF.  |\n|                     |The server also needs to maintain some state to provide   |\n|                     |asynchronous notifications.                               |\n|                     |However, there are no stage 2 requirements to maintain a  |\n|                     |\"session\" state at the server on many interfaces (e.g. N8,|\n|                     |N10, N12, N13), and other interfaces (e.g. N11, N7) can   |\n|                     |also be designed as session stateless.                    |\n|3. Cacheable         |Not fully met.                                            |\n|                     |It is anticipated that most interactions will relate to   |\n|                     |resources for a particular served UE that can be changing |\n|                     |frequently. Caching related responses would offer little  |\n|                     |benefit.                                                  |\n|                     |However, NFs can cache NRF responses.                     |\n|4. Uniform interface |Can be met.                                               |\n|                     |It is largely a stage 3 decision how to document          |\n|                     |interfaces and whether to document service based interface|\n|                     |in a uniform fashion.                                     |\n|                     |Adherence to level 3 of the Richardson maturity model     |\n|                     |seems possible.                                           |\n|5. Layered system    |Met.                                                      |\n|                     |Consumer NF does not need to be aware of how producer NF  |\n|                     |provides a response.                                      |\n|6. Code on Demand    |Not met.                                                  |\n|(optional)           |No related stage2 requirements exist.                     |\n\n\nTable\u00a05.5.2.4-2 analyses the REST compliance level according to Richardson\nmaturity model, as outlined in subclause\u00a05.5.2.2, that APIs for service\nbased interfaces of the 5GC Control Plane could achieve.\n\n Table 5.5.2.4-2: Achievable Richardson Maturity Levels for RESTful APIs in\n                           the 5GC Control Plane.\n\n|Level                |RESTful APIs in the 5GC Control Plane                     |\n|Level 1: Resources   |It is expected that this level can be achieved to a large |\n|                     |extent.                                                   |\n|                     |                                                          |\n|                     |Stage 2 requirements are not documented in terms of       |\n|                     |resources, so additional stage 3 analysis will be required|\n|                     |to derive resources.                                      |\n|                     |                                                          |\n|                     |Some services could map easily to resources, e.g. PDU     |\n|                     |session as resource for SMF services, or stored data as   |\n|                     |resource for UDM services.                                |\n|                     |Designing resources for some other services may require   |\n|                     |more discussions, e.g.                                    |\n|                     |\u2022 AMF services (N1N2 Message Transfer/Notify, Forward     |\n|                     |Relocation Request)                                       |\n|                     |\u2022 AUSF services (UEAuthentication Request)                |\n|                     |\u2022 5G-EIR services (Check ME Identity)                     |\n|                     |                                                          |\n|                     |As a possible remedy, RPC-like resources have been defined|\n|                     |in previous RESTful APIs, e.g. the \"task\" resource defined|\n|                     |in of ETSI GS MEC 009\u00a0[49].                               |\n|Level 2: HTTP Verbs  |It is expected that this level can be achieved to a large |\n|                     |extent.                                                   |\n|                     |                                                          |\n|                     |Once resources are defined in a suitable fashion, in most |\n|                     |cases applying suitable HTTP methods should be simple.    |\n|                     |                                                          |\n|                     |However, for some special resources mainly the POST HTTP  |\n|                     |might be suitable, e.g.                                   |\n|                     |\u2022 Notifications could be described as resources posted by |\n|                     |the client, but there might not be a requirement to       |\n|                     |subsequently manipulate those resources with other HTTP   |\n|                     |methods.                                                  |\n|                     |\u2022 Resources representing transferred messages at the AMF  |\n|                     |would likely also only be posted.                         |\n|                     |\u2022 There might be a need to pass some parameters when      |\n|                     |deleting a resource (see e.g. GTP-C DSR/DBR in EPC)       |\n|                     |Note: Also for the \"task\" resource defined in of ETSI GS  |\n|                     |MEC 009\u00a0[49], only the POST method is supported,          |\n|Level 3: Hypermedia  |It is expected that this level can be achieved to a large |\n|Controls             |extent.                                                   |\n|                     |                                                          |\n|                     |Once resources and HTTP verbs are defined in a suitable   |\n|                     |fashion, Hypermedia can also be provided.                 |\n\n\n\n", "Keywords": ""}, {"key": "Evaluation of RPC", "numbering": "5.5.2.5", "title_level": 3, "desc": "5.5.2.5  Evaluation of RPC\n\nFor 5GC, the SBA definitions in stage-2 follow an architectural style that\nmatches much more closely an RPC style of interaction, rather than a REST\napproach.\n\nIt should be noted that a RESTful or RPC approach is not inherently better\nor worse, and that several of the advantages present in REST, are also\nachievable by RPC.\n\nMaybe, one of the advantages where REST is clearly superior is the higher\ndegree of decoupling between client and server (allegedly achieved by the\nuse of the HATEOAS principles). However, this characteristic is expected to\nbring more benefits in a scenario where the SDO defining an API has no, or\nlittle, control over the clients of such API; but this is NOT the case of\n3GPP 5GC, where both client and servers are internal network entities fully\nspecified, in all detail (including backwards compatibility across\nreleases, feature negotiation mechanisms, protocol extensibility, etc..),\nby 3GPP; these criteria, however, may be different for interfaces exposed\ntowards external clients of the 3GPP system.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.5.2.6.1", "title_level": 4, "desc": "5.5.2.6.1   General\n\nIt is evident that the REST architectural style offers remarkable benefits,\nand that's why its acceptance in the design of web systems has grown\nexponentially in the last years. However, it should be also noted that the\ncurrent architectural definition (stage-2) of the 3GPP 5GC has followed a\ntotally opposite paradigm, mainly based on describing interactions between\nentities by following a procedure/service invocation, or the triggering of\na certain action on the server (very much like a Remote Procedure Call),\nrather than a resource-oriented architectural definition, which would have\nbeen desirable in order to achieve a smooth and straightforward stage-3\nprotocol specification phase.\n\nThis fact does not mean that RESTful protocol design cannot be used, since\nit is often rather straightforward to map the service invocation described\nin stage-2 to a RESTful resource manipulation operation; when such mapping\nis easy or straightforward, it is indeed recommended to follow such design\napproach.\n\nHowever, in other cases, mapping the stage-2 service invocation style of\ninteraction to a resource operation is quite awkward and totally counter-\nintuitive, making it very hard and cumbersome the stage-3 protocol\ndefinition, which will affect the understanding of the relationship between\nstage-3 protocol and stage-2 service operations for implementers, making\nthe system prone to inter-operability problems.\n\n\n", "Keywords": ""}, {"key": "Level 3 of the Richardson maturity model", "numbering": "5.5.2.6.2", "title_level": 4, "desc": "5.5.2.6.2   Level 3 of the Richardson maturity model\n\nLevel 3 of the Richardson maturity model is supposed to offer the following\nbenefits:\n\n  a) Hyperlinks allow developers to explore the possibilities of the API.\n\n  b) The structure of resources can be modified and extended by the server\n    at any time and the client automatically adjust to such changes.\n\nHowever, benefit a) seems not compelling in a 3GPP environment where 3GPP\nstandards provide an open and extensive documentation.\n\nBenefit b) seems to be very hard to achieve in practice, because for each\nhyperlink the meaning (what type of resource or custom operation does the\nhyperlink point to?), and possible operations (HTTP verbs, URI query\nparameters, etc.) would need to be communicated in a clearly standardized\nand machine readable fashion to allow a client to automatically make use of\nthat hyperlink. Even then, it seems very unrealistic that a client can make\nautomatic use of new API extensions advertised in such a fashion as it\nwould also need the capability to further handle related extensions (e.g.\nto interwork with similar extensions at other interfaces).\n\nThe main drawbacks of adhering to Level 3 of the Richardson maturity model\nare:\n\n  a) Increased message size and computational effort.\n\n  b) Increased standardization effort, in particular if a stringent machine-\n    readable format to describe all possible operations on a resource and\n    the semantics associated with a hyperlink to a resource is defined.\n\nIt is thus suggested that 5G APIs do not need to support Level 3 of the\nRichardson maturity.\n\n\n", "Keywords": ""}, {"key": "HTTP APIs types", "numbering": "5.5.2.7", "title_level": 3, "desc": "5.5.2.7  HTTP APIs types\n\nThe API Design Guide from Google\u00a0[51] provides general design guidelines\nfor HTTP-based REST APIs and RPC APIs to design simple, consistent and easy-\nto-use APIs. Table\u00a05.5.2.5-1 provides an overview of standard and custom\nAPI methods described in this document.\n\n              Table 5.5.2.7-1: Standard and Custom API methods\n\n|              |Standard API methods         |Custom API methods            |\n|Usage         |API functionality that       |API functionality that does   |\n|              |naturally maps to one of the |not naturally map to one of   |\n|              |standard method              |the standard methods          |\n|              |(CRUD operations).           |(non-CRUD operations)         |\n|Method        |Standard method:             |Custom methods                |\n|              |List, Get, Create, Update,   |                              |\n|              |Delete                       |                              |\n|Resource/Scope|Applies to the resource      |Can be associated with a      |\n|              |indicated in the URI         |resource, a collection (see   |\n|              |                             |NOTE) or a service            |\n|HTTP mapping  |Standard HTTP method         |Custom method included in URI.|\n|              |                             |                              |\n|              |List: GET <collection URL>   |                              |\n|              |Get: GET <resource URL>      |Mapped to the most suitable   |\n|              |Create: POST <collection URL>|HTTP method (POST typically)  |\n|              |Update: PUT or PATCH         |                              |\n|              |<resource URL>               |                              |\n|              |Delete: DELETE <resource URL>|                              |\n|Parameters    |Parameters/objects in Body or|Parameters/objects in Body    |\n|              |URI (e.g. search parameters  |                              |\n|              |in URI)                      |                              |\n|Properties    |Large number of resources,   |Large number of methods       |\n|              |only few methods (CRUD)      |permitted                     |\n|              |allowed                      |                              |\n|API examples  |POST /Sessions/              |POST /messages:send           |\n|              |DELETE /sessions/123456      |POST /sessions/123456:activate|\n|Example use   |CRUD operations              |Cancel an outstanding         |\n|cases         |                             |operation                     |\n|              |                             |Move a resource from one      |\n|              |                             |parent to another             |\n|              |                             |Activate/Deactivate a resource|\n|NOTE: A collection contains a list of resources of the same type.          |\n\n\n\n", "Keywords": ""}, {"key": "Conclusions", "numbering": "5.5.2.8", "title_level": 3, "desc": "5.5.2.8  Conclusions\n\nIt would be straight forward to design RPCs based on the stage 2 service /\nservice operations documentation, but such a protocol design might not\nadequately match the expectation motivating the selection of service based\ninterfaces and could also block a future evolution to a larger compliance\nwith a Service Oriented Architecture.\n\nDesigning RESTful APIs meeting stage 2 requirements for service based\ninterfaces seems feasible but will require more stage 3 analysis to model\nresources. RESTful APIs offer the advantage of homogenous, easy to use\ninterfaces, enhanced HTTP visibility (HTTP method accessible e.g. for\nproxying, logging, monitoring) and a larger decoupling between client and\nserver compared to RPCs. For some operations, an RPC like design might be\nnecessary, but experience exist how to embed such operations in a RESTful\nframework (see e.g. custom methods associated with a resource in\nsubclause\u00a05.5.2.5).\n\nThe 5GC manages resources such as UEs, sessions or database records where\nlarge number of instances exist and which can be mapped typically to simple\nresource operations like CRUD.\n\nIt is recommended to apply a RESTful framework for the protocol design as\nfollows:\n\n  -  service operations should implement the Level 2 of the Richardson\n    maturity model, with standard API methods, whenever it is a good match\n    for the style of interaction to model, e.g. service operations that can\n    naturally map to one of the standard method (CRUD operations); this\n    should be the preferred modelling attempt;\n\n  -  service operations may use custom API methods (RPC interaction), when\n    it is seen a better fit for the style of interaction to model, e.g. non-\n    CRUD service operations.\n\n\n", "Keywords": ""}, {"key": "Introduction", "numbering": "5.5.3.1", "title_level": 3, "desc": "5.5.3.1  Introduction\n\nThere is a huge number of alternatives to encode structured data over-the-\nwire. As can be seen in\nhttps://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats, the\nlist is quite exhaustive. Probably the main properties to focus, to select\na the most appropriate encoding format would be:\n\n  -  Standard (defined and backed-up by an SDO)\n\n  -  Widespread industry adoption\n\n  -  Performance (related in part to another property: binary vs textual)\n\nSo, from the list included in the reference above, the evaluation has been\nnarrowed down to 3 alternatives: JSON (text-based, and being an IETF\nstandard, with the widest adoption), and 2 binary alternatives (BSON and\nCBOR) to consider other approaches with a potential better performance.\n\nAlternatives such as ASN.1 have not been considered, given the lack of\nindustry acceptance of such format as data serialization over HTTP.\n\nAlternatives such as Protocol Buffers / Apache Avro / MessagePack, etc,\nhave not been considered given that they are not backed up by an SDO\n(despite the specification being publicly available, and being categorized\nas \"Standardized\" in the list of alternatives included in the reference\nabove).\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.3.2.1", "title_level": 4, "desc": "5.5.3.2.1   Description\n\nJSON is specified in IETF\u00a0RFC\u00a07159\u00a0[8], and it is a lightweight text-based\ndata interchange format, originated from a subset of the JavaScript\nprogramming language.\n\nIt is the most widespread format, especially in the area of HTTP web\nservices, given its simplicity and ease of use. It has a very simple and\nstraightforward specification, and the tools availability is immense, both\nfrom a development perspective (programming language support for code\ngeneration to encode/decode documents) and from an application\nspecification perspective (with IDL frameworks such as OpenAPI / Swagger,\ntargeting primarily JSON as data format).\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.3.2.2", "title_level": 4, "desc": "5.5.3.2.2   Evaluation\n\nThe main advantage of JSON is its widespread adoption and deployment, being\nthe de-facto industry standard, and also its simplicity (human-readable).\n\nThe main drawback is that it is considered as too verbose, with other\nbinary alternatives having better performance, in terms of\nencoding/decoding and message size.\n\nGiven its de-facto industry standard for HTTP web services development, and\nthe tool availability, it is regarded as the primary recommendation for\nusage in 3GPP 5GC specification. At the same time, it is recommended for\nfurther releases to consider a more efficient alternative, which should be\nassessed once more data regarding expected performance gains are collected\nby 3GPP members.\n\nRegarding performance, it should be noted that sometimes the critical\nfactor is the usage of a well-optimized encoder/decoder library; this is\nespecially applicable to JSON, where many libraries included by default in\na certain software platforms, can be greatly outperformed by specialized\nlibraries (e.g., UltraJson (https://github.com/esnme/ultrajson), or Jackson\n(https://github.com/FasterXML/jackson).\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.3.3.1", "title_level": 4, "desc": "5.5.3.3.1   Description\n\nBSON (short name for Binary JSON) is specified in\nhttp://bsonspec.org/spec.html. It should be noted that this format is not\nbacked up by a Standards Developing Organization (SDO) and, instead, it was\nmainly developed as the binary format used in the MongoDB\n(https://www.mongodb.com/) document database to store JSON documents\ninternally.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.3.3.2", "title_level": 4, "desc": "5.5.3.3.2   Evaluation\n\nThe main design goal of BSON is the ease of traversal of documents, given\nits primary applicability to document databases. It was not designed to be\nspecially more compact of faster than JSON.\n\nBSON offers minimal performance gains (compared with JSON), with some tests\nclaiming that the encoding and decoding might be even slower than a JSON\nequivalent document. The potential gains are quite dependent on the type of\ndocument (numeric fields are encoded/decoded more efficiently than textual\nfields). Also, when some \"native\" BSON data types are used during the\nencoding of the data structures, the performance gains are higher, but the\nobvious disadvantage is that by using them, the JSON/BSON equivalence is\nnot possible anymore.\n\nSimilarly, the gains in message size are minimal, and in some cases, the\nBSON document may be even larger than the corresponding equivalent JSON\ndocument.\n\nOverall, considering its non-standard status, its primary applicability to\na \"document database\" environment, and its questionable performance\nbenefits, BSON is not recommended for 3GPP 5GC protocols.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.3.4.1", "title_level": 4, "desc": "5.5.3.4.1   Description\n\nConcise Binary Object Representation (CBOR) is specified in\nIETF\u00a0RFC\u00a07049\u00a0[47] and it is a binary serialization format specification\ndeveloped primarily for constrained devices and applications, such as IoT\ndevices.\n\nThe main goal of CBOR is to achieve a higher degree of compactness and\nefficiency, for both encoder and decoder, at least when compared with other\ntext-based serialization formats such as JSON.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.3.4.2", "title_level": 4, "desc": "5.5.3.4.2   Evaluation\n\nCBOR is often hyped as being dramatically more efficient than JSON,\nclaiming sometimes an efficiency gain of 2x-3x; however, according to\nbenchmarks run over the Jackson processor (a high-efficiency JSON processor\nfor Java), the efficiency gain in encoding/decoding, is typically around 20-\n30% (source: https://groups.google.com/forum/#!topic/jackson-\nuser/OSOnFl2izbo). It seems questionable whether a performance gain in this\nrange makes up for some other clear advantages in JSON, such as the\nwidespread industry usage, tools availability, and simplicity.\n\nAnother source worth checking is the academic Thesis work \"Implementation\nand evaluation of the CBOR protocol\"\n(https://is.cuni.cz/webapps/zzp/download/130156104) where it is stated\nthat, while acknowledging the higher efficiency of CBOR, it is concluded\nthat \"while a viable alternative to JSON or MsgPack, CBOR's unique\ncombination of features does not give it a significant competitive edge\nover these formats in their respective domains\".\n\nIn addition, using CBOR makes it more difficult to use an IDL such as Open\nAPI (Swagger 2.0), which is mainly used along with JSON. There is, in fact,\na specification language intended to cover this gap (CDDL \u2013 Concise Data\nDefinition Language), currently under definition in IETF, but the status as\nof today is only an IETF draft (https://tools.ietf.org/html/draft-ietf-cbor-\ncddl-00), probably not mature enough to be used as a basis for\nspecification in 3GPP 5GC.\n\nIn any case, CBOR is an alternative worth considering for usage in 3GPP\n5GC, mostly because its expected higher efficiency and performance when\nhandling specific data structures, such as byte arrays (octet streams),\nwhich are arguably one of the most common data structure expected in 5GC\nprotocols (as they were in EPC protocols). For those, JSON is particularly\npoorly suited.\n\n\n", "Keywords": ""}, {"key": "Conclusion", "numbering": "5.5.3.5", "title_level": 3, "desc": "5.5.3.5  Conclusion\n\nIt is recommended to use JSON as serialization data format for the\nspecification of 3GPP 5GC in Rel-15.\n\n  Editor's note:  It is FFS to investigate potential performance\n         improvements on the transmission of binary data along with JSON, by\n         using approaches other than a transformation to a text string\n         (typically done with a base64 transform). One of such possibilities\n         is to send large parts of opaque binary data using a\n         multipart/mixed media type, where each part is sent via different\n         media types (e.g. JSON payload with \"Content-Type:\n         application/json\", and the binary data with \"Content-Type:\n         application/octet-stream\").\n\nNonetheless, it is recommended to continue with internal 3GPP research\nefforts to evaluate the potential performance gain to be expected\nrealistically from other encoding alternatives, for the specific payload\ntypes typically used in the 5GC interfaces.\n\nThe usage of CBOR (or other binary, more performant alternative) can be re-\nevaluated for subsequent 3GPP releases, once more detailed benchmark\nfigures are available first-hand from the 3GPP community, and the tools\navailability is more stable.\n\nIt is expected that replacing JSON with a more efficient CBOR alternative\ncan be achieved without impacting the application logic; content types for\nJSON and CBOR can be indicated by using the respective Media Types\n(application/json, application/cbor, etc..) allowing client and server to\nagree (via content negotiation and HTTP \"Accept\" headers) on the supported\nserialization format. However, it should be noted that this task would\nrequire substantial standardization effort.\n\n\n", "Keywords": ""}, {"key": "Introduction", "numbering": "5.5.5.1", "title_level": 3, "desc": "5.5.5.1  Introduction\n\nAn Interface Definition Language (IDL) is a specification language used to\ndescribe data models, and interactions between distributed software\ncomponents.\n\nIdeally, and IDL should have the following characteristics:\n\n  -  Formal: It has to be machined-parsed, so it allows automatic checking\n    of correctness and consistency\n\n  -  Abstract: It is not bound to specific realizations, in terms of data\n    modelling, or protocol mechanisms\n\n  -  Independent of programming language or developing environment\n\n  -  Independent of protocol or Inter-Process Communication mechanisms\n\n  -  Independent of the data serialization format\n\n  -  Provides definitions for frequently required data types\n\nIn 3GPP, one of the IDLs with a widest usage, traditionally, has been\nASN.1; however, for SBA, and specifically for web technology (RESTful APIs,\nHTTP/JSON, etc.), there are other approaches with a wider adoption\ncurrently in the industry.\n\nA non-exhaustive list of alternatives could be:\n\n  -  Standards-based\n\n    -  ITU-T/ETSI: ASN.1\n\n    -  OASIS: RELAX-NG\n\n    -  W3C: WSDL / XML Schema\n\n    -  IETF: ABNF, YANG\n\n  -  Non-Standard (De-facto Industry standards)\n\n    -  OpenAPI Specification (Swagger)\n\n    -  JSON Schema\n\n    -  JSON Content Rules\n\n    -  JSON RPC\n\n    -  RAML\n\n    -  Protocol Buffers\n\n    -  Apache Thrift\n\nIn particular, for those protocols using a data serialization format such\nas JSON or CBOR, there is a need to further describe the data that can be\ntransported in the protocol. IDLs typically are supported by tooling that\nallows to verify if a JSON or CBOR file complies with an interface\ndefinition written in the corresponding language, and possibly also to\ngenerate APIs and related code in various programming languages to generate\nor parse conformant JSON or CBOR files. Some of the IDL do not only contain\ninformation related to JSON or CBOR bodies, but also related to the\nunderlying transport protocols, and thus allow for tooling with more\nextensive automation.\n\nThe IDL alternatives in the above list have been narrowed down to six\nalternatives that best characteristics for SBA and specifically for Web\ntechnology. An exhaustive and detailed analysis of each and every\nalternative from the above list is not intended.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.5.2.1", "title_level": 4, "desc": "5.5.5.2.1   Description\n\nYANG is a data modelling language developed by IETF for the NETCONF\nprotocol. It was originally designed for Network Management, as a\nreplacement for the SNMP protocol (and the associated SMI information\nmodelling framework).\n\nIt allows the definition of data models (both \"configuration\" data and\n\"state\" data), and also specific interactions between network elements, in\nthe form of \"Event Notifications\" and \"Actions\" (associated to data\nobjects), and generic \"Remote Procedure Calls\" to be invoked in a network\nentity.\n\nYANG is defined in IETF\u00a0RFC\u00a06020\u00a0[31].\n\nIn addition, IETF\u00a0RFC\u00a08040\u00a0[35] defines an HTTP-based protocol (RESTCONF)\nto access data, and invoke actions, defined in YANG following a REST\napproach, with standard serialization options based on XML or JSON.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.5.2.2", "title_level": 4, "desc": "5.5.5.2.2   Evaluation\n\nThe main characteristic of this alternative is its capability in terms of\nabstract data modelling. It shows a higher level of decoupling between the\ngeneric data model definition and the actual concrete implementation, in\nthe form of a specific protocol realization and a specific data\nserialization format.\n\nAdditionally, a YANG data model can be used in a standard manner to\ndescribe a RESTful type of interaction between client and server, and at\nthe same time, it can also describe RPC (Remote Procedure Call)\ninteractions.\n\nThe main issue, from a 3GPP perspective, is that this language was not\noriginally conceived as a general-purpose modeling language and, instead,\nits primary scope was the Network Management area. In addition, the\nlearning curve is higher than other simpler alternatives.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.5.3.1", "title_level": 4, "desc": "5.5.5.3.1   Description\n\nOpenAPI (formerly known as Swagger) defines a standard, programming\nlanguage-agnostic, interface description for REST APIs. It is specified at:\n\n  -  https://github.com/OAI/OpenAPI-Specification\n\nIt consists on a language specification itself, and also on a number of\ntools intended for specification, documentation and code generation for\nimplementation of client and server sides of the API, together with\nautomation of test cases.\n\nThe files describing the RESTful API in accordance with the Swagger\nspecification are represented as JSON objects and conform to the JSON\nstandards. YAML, being a superset of JSON, can be used as well to represent\na Swagger specification file.\n\nFor the definition of primitive data types, the specification is based on\nthe JSON Schema draft-4 (https://tools.ietf.org/html/draft-zyp-json-schema-\n04#section-3.5).\n\nThe last version of OpenAPI Specification, recently approved (June 2017),\nis version 3.0.0, although the most stable version is 2.0, which has been\nin production for several years now (since 2014). In version 3.0.0, certain\nnew features have been added, which are expected to be useful in the\ndefinition of 5GC interfaces (e.g., language support for adding HATEOAS\ncontent, and language support for handling of multipart media types in HTTP\nbodies).\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.5.3.2", "title_level": 4, "desc": "5.5.5.3.2   Evaluation\n\nThe main characteristic of this alternative is its massive and widespread\nadoption in the industry, for RESTful API design. It can be considered as a\nde-facto standard (although not backed-up by a formal SDO), and it has the\nbiggest ecosystem of tools (both commercial an Open Source) and community\nsupport.\n\nThe main criticism to Swagger 2.0 relied on its lack of support for\nhypermedia, when the framework is mainly targeted for RESTful API\nspecification. This implies that attempting to fulfil the HATEOAS\n(Hypermedia As The Engine Of Application State) principle, is not\nstraightforward. Sources:\n\n  -  http://blog.novatec-gmbh.de/the-problems-with-swagger/\n\n  -  https://jimmybogard.com/swagger-the-rest-kryptonite/\n\nIn addition, given it primary focus on the RESTful architectural style, its\nsupport for RPC style of interactions is not so well supported, although\nthere are workarounds to overcome this issue.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.5.4.1", "title_level": 4, "desc": "5.5.5.4.1   Description\n\nProtocol Buffers is a mechanism, originally developed by Google and then\nturned to Open Source, to serialize structured data. It defines its own\nlanguage (proto3, as the last version), to specify the structure of the\ndata (messages, parameters, data types, etc.) so, in that sense, it can be\nconsidered as an IDL.\n\nProtocol Buffers documentation can be found in:\n\n  -  https://developers.google.com/protocol-buffers/, and\n\n  -  https://github.com/google/protobuf/\n\nThe encoding of the data over-the-wire is binary and it is very compact and\nefficient, at the expense of not being self-describing (that is, there is\nno way to tell the names, meaning, or full datatypes of fields without an\nexternal specification).\n\nProtocol Buffers were originally conceived for usage with RPC-style of\ninteractions, internally at Google, and there is a specific protocol (gRPC)\ndesigned for high-performance RPC interactions; nevertheless, they can also\nbe used to model RESTful APIs.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.5.4.2", "title_level": 4, "desc": "5.5.5.4.2   Evaluation\n\nThe main characteristic of this alternative is its efficiency and higher\nperformance.\n\nThe main drawback is that the language is maintained and evolved by Google,\nand it is bound to a number of tools (compilers, code generators,\nruntimes\u2026) also developed and maintained mainly by Google, so it is not a\nsystem fully specified by an SDO. Therefore, this option is not considered\nfurther.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.5.5.1", "title_level": 4, "desc": "5.5.5.5.1   Description\n\nIETF\u00a0draft-newton-json-content-rules\u00a0[14] is used by 3GPP CT3 in several\nspecifications (3GPP\u00a0TS\u00a029.155\u00a0[37], 3GPP\u00a0TS\u00a029.250\u00a0[38],\n3GPP\u00a0TS\u00a029.251\u00a0[39]). An expired version of this draft has been a de-facto\nstandard in the industry for several years. IETF work resumed a while ago\nwith new versions of the draft. The draft provides an IDL for JSON bodies\nin a relatively simple format.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.5.5.2", "title_level": 4, "desc": "5.5.5.5.2   Evaluation\n\nThe main characteristic of this alternative is its simplicity. As the draft\nhas seen some usage in the industry for several years, tooling support is\navailable. However, the industry seems to have moved towards the more\npowerful OPenAPI Swagger.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.5.6.1", "title_level": 4, "desc": "5.5.5.6.1   Description\n\nIETF\u00a0draft-wright-json-schema\u00a0[41] and IETF\u00a0draft-wright-json-schema-\nvalidation\u00a0[42] are not directly referenced in 3GPP specs, but are used by\nthe \"OpenAPI 3.0.0 Specification\"\u00a0[36] (see below). The draft provides an\nIDL for JSON bodies in a relatively simple format.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.5.6.2", "title_level": 4, "desc": "5.5.5.6.2   Evaluation\n\nThe main characteristic of this alternative is its simplicity. As the draft\nhas seen some usage in the industry for several years, tooling support is\navailable. However, the industry seems to have moved towards the more\npowerful OpenAPI Swagger.\n\n\n", "Keywords": ""}, {"key": "Description", "numbering": "5.5.5.7.1", "title_level": 4, "desc": "5.5.5.7.1   Description\n\nIETF\u00a0draft-ietf-cbor-cddl\u00a0[43] is not used by 3GPP so far. The draft\nprovides an IDL for CBOR bodies.\n\n\n", "Keywords": ""}, {"key": "Evaluation", "numbering": "5.5.5.7.2", "title_level": 4, "desc": "5.5.5.7.2   Evaluation\n\nFor CBOR as serialization language, this draft is typically used as IDL.\nOnly limited tooling is currently available and the draft seems not yet\nwidely used.\n\n\n", "Keywords": ""}, {"key": "Comparison of IDLs", "numbering": "5.5.5.8", "title_level": 3, "desc": "5.5.5.8  Comparison of IDLs\n\n                    Table 5.5.5.8-1: Comparison of IDLs.\n\n|         |YANG (see     |OpenAPI 3.0.0|IETF\u00a0draft-ne|IETF\u00a0draft-w|IETF\u00a0draft-i|\n|         |IETF\u00a0RFC\u00a06020\u00a0|Specification|wton-json-con|right-json-s|etf-cbor-cdd|\n|         |[31],         |\u00a0[36]        |tent-rules\u00a0[1|chema\u00a0[41]  |l\u00a0[43]      |\n|         |IETF\u00a0RFC\u00a06991\u00a0|             |4]           |and         |            |\n|         |[32],         |             |             |IETF\u00a0draft-w|            |\n|         |IETF\u00a0RFC\u00a07950\u00a0|             |             |right-json-s|            |\n|         |[33],         |             |             |chema-valida|            |\n|         |IETF\u00a0RFC\u00a07951\u00a0|             |             |tion\u00a0[42]   |            |\n|         |[34], and     |             |             |            |            |\n|         |IETF\u00a0draft-iet|             |             |            |            |\n|         |f-core-yang-cb|             |             |            |            |\n|         |or\u00a0[44])      |             |             |            |            |\n|Supported|JSON, XML,    |JSON, XML    |JSON         |JSON        |CBOR        |\n|MIME     |CBOR          |             |             |            |            |\n|Formats  |              |             |             |            |            |\n|Supported|Boolean       |boolean      |Boolean,     |boolean     |Boolean,    |\n|Primitive|int8, int16,  |Integer with |integer,     |Integer with|int, uint.  |\n|Data     |int32, int64, |optional     |integer      |optional    |nint        |\n|types    |uint8, uint16,|int32 or     |numbers in a |int32 or    |float,      |\n|         |uint32, and   |int64 format |range,       |int64 format|float16,    |\n|         |uint64,       |and/or range |float,       |and/or range|float32,    |\n|         |optional with |Number with  |double,      |Number with |float64     |\n|         |range         |optional     |floating     |optional    |bytes       |\n|         |decimal64,    |float or     |point numbers|float or    |text        |\n|         |optional with |double format|in a range,  |double      |choices     |\n|         |range         |and/or range |strings,     |format      |(allows to  |\n|         |string,       |string with  |URI          |and/or range|describe    |\n|         |optional with |optional     |(optionally  |string with |enumerations|\n|         |length and/or |byte, binary,|including URI|optional    |), regular  |\n|         |pattern       |date,        |scheme)      |byte,       |expressions |\n|         |enumeration   |date-time or |regular      |binary,     |            |\n|         |bits          |password     |expressions, |date,       |            |\n|         |binary        |format,      |Fixed string |date-time or|            |\n|         |              |enum         |values (e.g. |password    |            |\n|         |              |             |allowing to  |format,     |            |\n|         |              |             |define       |enum        |            |\n|         |              |             |enumerations |            |            |\n|         |              |             |via groups)  |            |            |\n|Definitio|yes           |yes          |yes, via     |yes         |yes         |\n|n of own |              |             |named rules  |            |            |\n|types    |              |             |             |            |            |\n|supported|              |             |             |            |            |\n|Including|yes           |yes          |yes          |yes         |no          |\n|external |              |             |             |            |            |\n|definitio|              |             |             |            |            |\n|ns via   |              |             |             |            |            |\n|URI      |              |             |             |            |            |\n|supported|              |             |             |            |            |\n|Support  |IETF\u00a0RFC\u00a08040\u00a0|Extensive    |no           |no          |no          |\n|for      |[35] defines  |HTTP support |             |            |            |\n|transport|an HTTP-based |well aligned |             |            |            |\n|protocol |protocol that |with RESTful |             |            |            |\n|         |provides a    |style:       |             |            |            |\n|         |RESTful       |Allows to    |             |            |            |\n|         |programmatic  |define HTTP  |             |            |            |\n|         |interface for |methods      |             |            |            |\n|         |accessing data|applicable to|             |            |            |\n|         |defined in    |data         |             |            |            |\n|         |YANG. In      |structures,  |             |            |            |\n|         |addition,     |including    |             |            |            |\n|         |RPC-based     |parameters   |             |            |            |\n|         |interactions  |and response |             |            |            |\n|         |are also      |codes.       |             |            |            |\n|         |mapped to     |             |             |            |            |\n|         |HTTP-request/r|             |             |            |            |\n|         |esponse       |             |             |            |            |\n|         |transactions  |             |             |            |            |\n|         |in a standard |             |             |            |            |\n|         |way.          |             |             |            |            |\n|Stability|RFCs          |Webpage by   |Individual   |Individual  |WG IETF     |\n|of       |              |OpenApi      |IETF draft   |IETF draft  |draft       |\n|reference|              |Specification|             |            |            |\n|         |              |, also       |             |            |            |\n|         |              |including    |             |            |            |\n|         |              |reference to |             |            |            |\n|         |              |outdated     |             |            |            |\n|         |              |version of   |             |            |            |\n|         |              |two          |             |            |            |\n|         |              |individual   |             |            |            |\n|         |              |IETF drafts. |             |            |            |\n|         |              |However      |             |            |            |\n|         |              |widely used  |             |            |            |\n|         |              |in the       |             |            |            |\n|         |              |OpenSource   |             |            |            |\n|         |              |community and|             |            |            |\n|         |              |thus         |             |            |            |\n|         |              |relatively   |             |            |            |\n|         |              |stable.      |             |            |            |\n|Availabil|Tools listed  |Tools        |Some tools   |Tools       |Little      |\n|ity of   |at            |available at |available    |available at|tooling at  |\n|tooling  |http://www.yan|https://swagg|e.g. at      |http://json-|http://cbor.|\n|         |g-central.org/|er.io/       |http://codalo|schema.org/i|io/tools.htm|\n|         |twiki/bin/view|             |gic.github.io|mplementatio|l           |\n|         |/Main/YangTool|             |/jcr/        |ns.html     |            |\n|         |s             |             |             |            |            |\n|Forward  |It is possible|Yes;         |Yes:         |Yes;        |Yes:        |\n|compatibi|to define     |By default,  |Additional   |By default, |\"Structs\"   |\n|lity     |optional      |additional   |properties   |additional  |can be      |\n|         |elements as   |properties   |within an    |properties  |extended    |\n|         |part of the   |within an    |Object are   |within an   |with        |\n|         |data          |Object are   |ignored      |Object are  |arbitrary   |\n|         |definition,   |ignored, This|             |ignored,    |key value   |\n|         |via the       |can be       |             |This can be |pairs if a  |\n|         |\"mandatory =  |controlled   |             |controlled  |key value   |\n|         |true/false\"   |via the      |             |via the     |pair with   |\n|         |statement.    |\"additionalPr|             |\"additionalP|wildcarded  |\n|         |              |operties\"    |             |roperties\"  |definition  |\n|         |              |keyword.     |             |keyword.    |is included |\n|         |              |             |             |            |in their    |\n|         |              |             |             |            |definition. |\n|         |              |             |             |            |How the     |\n|         |              |             |             |            |receiver    |\n|         |              |             |             |            |would handle|\n|         |              |             |             |            |such        |\n|         |              |             |             |            |extensions  |\n|         |              |             |             |            |is nor      |\n|         |              |             |             |            |directly    |\n|         |              |             |             |            |specified.  |\n|Other    |Originally    |De-facto     |Simplest     |Simple      |Little      |\n|aspects  |designed for  |industry     |alternative  |            |tooling     |\n|         |Network       |standard     |considered   |            |available.  |\n|         |Management,   |(widest      |             |            |            |\n|         |not as a      |acceptance in|             |            |            |\n|         |general-purpos|industry, at |             |            |            |\n|         |e framework.  |this moment).|             |            |            |\n|         |Steeper       |Simpler to   |             |            |            |\n|         |learning curve|use than     |             |            |            |\n|         |compared with |other more   |             |            |            |\n|         |other simpler |formal       |             |            |            |\n|         |approaches.   |alternatives.|             |            |            |\n|         |              |Powerful     |             |            |            |\n|         |              |enough to    |             |            |            |\n|         |              |address      |             |            |            |\n|         |              |expected     |             |            |            |\n|         |              |needs in 3GPP|             |            |            |\n|         |              |specification|             |            |            |\n|         |              |s.           |             |            |            |\n\n\n\n", "Keywords": ""}, {"key": "Conclusion", "numbering": "5.5.5.9", "title_level": 3, "desc": "5.5.5.9  Conclusion\n\nGiven the widest industry acceptance for design of RESTful APIs, and the\navailability of a big ecosystem of tools and community support, it is\nrecommended to use OpenAPI Specification, version 3.0.0, as the IDL for\nusage in 5GC.\n\nIt is recommended that the definition of each interface is done by\nincluding a normative annex, containing the OpenAPI specification file, in\neach Technical Specification in 5GC, similar to how it has been done is\nprevious TS's in 3GPP (e.g. ASN.1 in 3GPP\u00a0TS\u00a029.002\u00a0[45], XML Schema in\n3GPP\u00a0TS\u00a029.328\u00a0[46], Swagger in 3GPP\u00a0TS\u00a029.116\u00a0[40], etc.).\n\nIt is also expected that the API/protocol specification will include not\nonly a formal OpenAPI specification file, but also textual and/or tabular\nformat in the main body of the specification describing application-level\ndetailed description handling of parameters (Information Elements) and\ntheir mapping to actual protocol structures.\n\n\n", "Keywords": ""}, {"key": "Evaluation of candidate protocols for service based interfaces", "numbering": "5.5.6", "title_level": 2, "desc": "5.5.6  Evaluation of candidate protocols for service based interfaces\n\nTable\u00a05.5.6-1 provides a comparison of different candidate protocols based\non the requirements and additional evaluation criteria in subclauses\u00a04.1.1\nand 4.1.2, respectively. The colours of the cells provide an evaluation how\nwell the criteria are met (Dark green: Criterion well met. Light green:\nCriterion mostly met. White: Criterion partially met or no substantial\ndifferences between candidate protocols. Orange: Criterion not met.)\n\n              Table 5.5.6-1: Comparison of candidate protocols.\n\n|Requirement/     |TCP/TLS/HTTP2/JSON |UDP/QUIC/HTTP2/JSON  |SCTP/Diameter   |\n|Evaluation       |(see               |(see IETF\u00a0RFC\u00a0768[9],|(see            |\n|Criterion        |IETF\u00a0RFC\u00a0793\u00a0[5],  |IETF\u00a0draft-ietf-quic-|IETF\u00a0RFC\u00a04960\u00a0[1|\n|                 |IETF\u00a0RFC\u00a05246\u00a0[6], |transport\u00a0[10],      |5],             |\n|                 |IETF\u00a0RFC\u00a07540\u00a0[7], |IETF\u00a0draft-ietf-quic-|3GPP\u00a0TS\u00a033.210\u00a0[|\n|                 |IETF\u00a0RFC\u00a07159\u00a0[8]  |tls\u00a0[11],            |16] and         |\n|                 |and                |IETF\u00a0draft-ietf-quic-|IETF\u00a0RFC\u00a06733[17|\n|                 |IETF\u00a0draft-newton-j|http\u00a0[12],           |])              |\n|                 |son-content-rules\u00a0[|IETF\u00a0draft-ietf-quic-|                |\n|                 |14])               |recovery\u00a0[13],       |                |\n|                 |                   |IETF\u00a0RFC\u00a05246\u00a0[6],   |                |\n|                 |                   |IETF\u00a0RFC\u00a07540\u00a0[7],   |                |\n|                 |                   |IETF\u00a0RFC\u00a07159\u00a0[8] and|                |\n|                 |                   |IETF\u00a0draft-newton-jso|                |\n|                 |                   |n-content-rules\u00a0[14])|                |\n|R1. Support of   |Service            |Service communication|Diameter support|\n|bidirectional    |communication is   |is unidirectional,   |Request-Answer  |\n|communication    |unidirectional,    |i.e. fully           |command pairs in|\n|                 |i.e. fully         |bidirectional        |both directions.|\n|                 |bidirectional      |communication        |                |\n|                 |communication      |requires 2           |                |\n|                 |requires 2         |client-server pairs -|                |\n|                 |client-server pairs|1 per direction.     |                |\n|                 |- 1 per direction. |                     |                |\n|R2. Support of   |TCP supports packet|QUIC supports packet |SCTP supports   |\n|reliable         |retransmission for |retransmission for a |packet          |\n|communication    |a reliable         |reliable             |retransmission  |\n|                 |communication.     |communication.       |and failover to |\n|                 |Failover to        |Failover to alternate|alternate paths |\n|                 |alternate paths can|paths can be         |for a reliable  |\n|                 |be supported by    |supported by using   |communication.  |\n|                 |setting up         |additional QUIC      |                |\n|                 |additional TCP     |connections.         |                |\n|                 |connections.       |                     |                |\n|R3. Forward      |HTTP and JSON      |HTTP and JSON payload|Diameter allows |\n|compatibility and|payload support    |support versioning of|to control      |\n|ease of upgrade  |versioning of      |service. New IEs     |whether unknown |\n|                 |service. New IEs   |added to JSON schema |AVPs will be    |\n|                 |added to JSON      |will be ignored. 3GPP|ignored. 3GPP   |\n|                 |schema will be     |defined supported    |defined         |\n|                 |ignored. 3GPP      |feature mechanism has|supported       |\n|                 |defined supported  |already been added   |feature         |\n|                 |feature mechanism  |also to some         |mechanism is    |\n|                 |has already been   |HTTP/JSON interfaces.|well understood |\n|                 |added also to some |                     |and has been    |\n|                 |HTTP/JSON          |                     |proven to work  |\n|                 |interfaces.        |                     |well.           |\n|R4. Low Response |Radical throughput |UDP based transport  |Performance     |\n|Time             |reduction by TCP in|avoids head of-line  |proven to be    |\n|                 |overload and TCP   |blocking. QUIC       |appropriate for |\n|                 |head-of-line       |support multiple     |EPC.            |\n|                 |blocking are       |streams.             |See also A1.    |\n|                 |potential issues.  |See also A1.         |                |\n|                 |See also A1.       |Avoiding head of line|                |\n|                 |TCP is known to    |blocking also offers |                |\n|                 |work also network  |benefits when large  |                |\n|                 |conditions with    |jitter and           |                |\n|                 |long round-trip    |round.trip.times are |                |\n|                 |times and adjust   |encountered.         |                |\n|                 |the retransmission |                     |                |\n|                 |timer accordingly. |                     |                |\n|R5. Scalability  |Potentially limited|UDP based            |SCTP            |\n|                 |by high number of  |QUIC scales to very  |associations    |\n|                 |TCP connections,   |high number of       |between Diameter|\n|                 |but HTTP2 streams  |transport connections|peers can be    |\n|                 |allows a reuse of  |(64-bit identifier)  |used for many   |\n|                 |TCP connections    |                     |Diameter        |\n|                 |between service    |                     |sessions.       |\n|                 |instances.         |                     |(3GPP extended  |\n|                 |                   |                     |Diameter Agent  |\n|                 |                   |                     |for dynamic UE  |\n|                 |                   |                     |session         |\n|                 |                   |                     |information     |\n|                 |                   |                     |discovery may   |\n|                 |                   |                     |impact          |\n|                 |                   |                     |scalability, but|\n|                 |                   |                     |this is         |\n|                 |                   |                     |considered an   |\n|                 |                   |                     |architectural   |\n|                 |                   |                     |issue as similar|\n|                 |                   |                     |solutions would |\n|                 |                   |                     |be required     |\n|                 |                   |                     |should other    |\n|                 |                   |                     |protocols be    |\n|                 |                   |                     |selected)       |\n|R6. Ease and     |If client          |If client            |How well        |\n|speed of         |authentication     |authentication       |secondary SCTP  |\n|deployment of    |requires static    |requires static      |paths can be    |\n|network functions|configuration is   |configuration is ffs.|supported in    |\n|and services     |ffs. Otherwise     |Otherwise dynamic    |dynamic manner  |\n|                 |dynamic endpoint   |endpoint discovery   |(e.g. via DNS)  |\n|                 |discovery and      |and connection       |is ffs. Should  |\n|                 |connection         |establishment is     |static          |\n|                 |establishment is   |supported.           |configuration be|\n|                 |supported.         |                     |required,       |\n|                 |                   |                     |Diameter Agents |\n|                 |                   |                     |can help.       |\n|R7. Time of      |Already available. |Planned completion in|Already         |\n|Availability of  |                   |November 2018        |available.      |\n|used standards   |                   |(according to IETF   |                |\n|                 |                   |QUIC working group   |                |\n|                 |                   |milestones)          |                |\n|A1.              |Text encoding of   |Text encoding of HTTP|Binary encoding |\n|Resource-efficien|HTTP and JSON      |and JSON brings small|at the          |\n|cy               |brings small       |processing overhead  |application     |\n|                 |processing overhead|and increases message|layer, but      |\n|                 |and increases      |size.                |message size    |\n|                 |message size.      |(But only a small    |increase due to |\n|                 |(But only a small  |number of HTTP       |AVP header      |\n|                 |number of HTTP     |headers will be      |overhead.       |\n|                 |headers will be    |needed and HTTP2     |                |\n|                 |needed and HTTP2   |provides header      |                |\n|                 |provides header    |compression. HTTP2   |                |\n|                 |compression. HTTP2 |also supports binary |                |\n|                 |also supports      |encoding at the HTTP |                |\n|                 |binary encoding at |layer, application   |                |\n|                 |the HTTP layer,    |still provides a text|                |\n|                 |application still  |encoded payload)     |                |\n|                 |provides a text    |                     |                |\n|                 |encoded payload)   |                     |                |\n|A2. Reusability  |Many libraries to  |Many libraries to    |Diameter is     |\n|of existing 3GPP |choose from for    |choose from for      |widely used in  |\n|implementations  |HTTP/JSON layer.   |HTTP/JSON layer, but |EPC             |\n|                 |But existing       |QUIC support not yet |(roaming and    |\n|                 |application code   |so widespread.       |non-roaming     |\n|                 |based on Diameter  |Existing application |interfaces      |\n|                 |will require large |code based on        |                |\n|                 |adaptations. Also, |Diameter will require|                |\n|                 |need to implement  |large adaptations.   |                |\n|                 |HTTP equivalent of |Also, need to        |                |\n|                 |Diameter Agent with|implement HTTP       |                |\n|                 |3GPP extensions.   |equivalent of        |                |\n|                 |                   |Diameter Agent with  |                |\n|                 |                   |3GPP extensions.     |                |\n|A3. Minimize     |Already some       |No standardised usage|Already         |\n|number of        |limited usage      |of QUIC within       |widespread usage|\n|protocols in     |within operators\u00b4  |operators\u00b4 networks  |in and between  |\n|network          |networks and for   |up to now.           |operator\u00b4s      |\n|                 |external interfaces|However already some |networks.       |\n|                 |at the SCEF (with  |limited usage of     |Diameter not    |\n|                 |earlier HTTP       |HTTP/JSON (with      |supported on    |\n|                 |versions).         |earlier HTTP         |external        |\n|                 |HTTP/JSON could be |versions) within     |interfaces.     |\n|                 |used both for      |operators\u00b4 networks  |                |\n|                 |external and       |and for external     |                |\n|                 |internal           |interfaces at the    |                |\n|                 |interfaces.        |SCEF. HTTP/JSON could|                |\n|                 |Legacy interfaces  |be used both for     |                |\n|                 |in EPC use         |external and internal|                |\n|                 |different          |interfaces.          |                |\n|                 |protocols.         |                     |                |\n|A4. Congestion,  |HTTP/2: multiple   |HTTP/2: multiple     |Congestion      |\n|load and overload|streams, each with |streams, each with   |control         |\n|control          |priority (weight)  |priority (weight) and|supported by    |\n|                 |and dependency (on |dependency (on       |SCTP            |\n|                 |another streams)   |another streams)     |Application-Leve|\n|                 |Only limited       |Only limited         |l Load/Overload |\n|                 |possibilities to   |possibilities to     |Control         |\n|                 |indicate overload  |indicate overload via|supported by    |\n|                 |via HTTP errors,   |HTTP errors, but no  |Diameter.       |\n|                 |but no load        |load feedback.       |                |\n|                 |feedback.          |QUIC provides a      |                |\n|                 |TCP provides       |mechanism for loss   |                |\n|                 |end-to-end         |detection and        |                |\n|                 |congestion control,|overload control, but|                |\n|                 |but with radical   |performance is ffs.  |                |\n|                 |throughput         |                     |                |\n|                 |reduction.         |                     |                |\n|A5. Support of   |TLS for transport  |TLS for transport    |IPsec for       |\n|Security         |level.             |level.               |transport level |\n|                 |Support for        |Support for          |(see            |\n|                 |application-level  |application-level    |3GPP\u00a0TS\u00a033.210\u00a0[|\n|                 |authentication and |authentication and   |16]).           |\n|                 |authorization via  |authorization via    |                |\n|                 |HTTP header.       |HTTP header.         |                |\n|A6. Ease of      |Many tools exist to|Many tools exist to  |Operators likely|\n|troubleshooting  |trace/monitor HTTP |trace/monitor HTTP   |already have    |\n|and Monitoring   |REST APIs          |REST APIs, but no    |tools for       |\n|                 |Distributed        |widespread support   |Diameter.       |\n|                 |logging.           |for QUIC so far.     |Centralized     |\n|                 |                   |Distributed logging. |logging by      |\n|                 |If TLS end-to-end  |QUIC requires        |Diameter Agent  |\n|                 |encryption is used,|end-to-end encryption|or Distributed  |\n|                 |this renders       |that would render    |logging.        |\n|                 |centralized logging|centralized logging  |Binary decoding |\n|                 |at intermediates   |at intermediates     |required for    |\n|                 |impossible.        |impossible.          |troubleshooting.|\n|                 |                   |An HTTP response     |A Diameter      |\n|                 |An HTTP response   |follows the same path|answer follows  |\n|                 |follows the same   |as its request as it |the same path as|\n|                 |path as its request|is sent on the same  |its command.    |\n|                 |as it is sent on   |QUIC connection.     |                |\n|                 |the same TCP       |                     |                |\n|                 |connection.        |                     |                |\n|A7. Ease of use  |Largest user       |Large user community |Mainly 3GPP user|\n|of 3GPP services |community for Web  |for HTTP/JSON Web    |community, but  |\n|from operator    |Services. Already  |Services, but limited|already         |\n|owned application|supported by some  |experience for QUIC. |supported by    |\n|functions        |operator owned     |                     |some operator   |\n|                 |application        |                     |owned           |\n|                 |functions (with    |                     |application     |\n|                 |earlier HTTP       |                     |functions.      |\n|                 |versions)          |                     |(P-CSCF acting  |\n|                 |                   |                     |as AF. GCS AS,  |\n|                 |                   |                     |SCS)            |\n|A8. Support of   |Supported by HTTP  |Supported by HTTP    |Supported by    |\n|failover         |error codes and    |error codes and HTTP |error codes and |\n|                 |HTTP proxies.      |proxies.             |Diameter Agent. |\n|A9. Support of   |Supported, if new  |Supported, if new    |Supported by    |\n|network entity   |HTTP proxy         |HTTP proxy extensions|Diameter Agent  |\n|selection based  |extensions required|likely required is   |with existing   |\n|on UE context    |is FFS.            |FFS.                 |3GPP extensions.|\n|information (e.g.|                   |                     |                |\n|based on dynamic |                   |                     |                |\n|UE session       |                   |                     |                |\n|information      |                   |                     |                |\n|A10. Ease of     |Need to configure  |Need to configure    |Need to         |\n|traversal of     |operator-grade     |operator-grade       |configure       |\n|carrier-grade    |firewalls to pass  |firewalls to pass    |operator-grade  |\n|ALG/NAT/firewall |TCP/TLS/HTTP. For  |UDP/QUIC. For        |firewalls to    |\n|                 |bidirectional      |bidirectional        |pass IPSec, but |\n|                 |communication.     |communication.       |security        |\n|                 |configuration for  |configuration for two|gateways reduce |\n|                 |two connection may |connection may be    |the number of   |\n|                 |be required, but   |required, but        |required        |\n|                 |security gateways  |security gateways can|connections (see|\n|                 |can reduce the     |reduce the number of |3GPP\u00a0TS\u00a033.210\u00a0[|\n|                 |number of required |required connections |16]).           |\n|                 |connections (see   |(see                 |                |\n|                 |3GPP\u00a0TS\u00a033.210\u00a0[16]|3GPP\u00a0TS\u00a033.210\u00a0[16]).|                |\n|                 |).                 |                     |                |\n|A11. Impacts to  |No HTTP support so |No HTTP/QUIC support |Existing        |\n|GSMA GRX/IPX     |far. (e.g. GSMA    |so far. (e.g. GSMA   |Diameter        |\n|                 |uses home-routed   |uses home-routed APN |support.        |\n|                 |APN for HTTP-based |for HTTP-based Ut    |                |\n|                 |Ut interface).     |interface).          |                |\n|A12. Open and    |yes                |yes                  |yes             |\n|public           |                   |                     |                |\n|Source/Standardiz|                   |                     |                |\n|ation body       |                   |                     |                |\n|A13. Protocol    |HTTP is a stateless|HTTP is a stateless  |Diameter        |\n|enables stateless|protocol where each|protocol where each  |supports        |\n|operation        |request-response   |request-response     |stateless       |\n|                 |message pair is    |message pair is      |operations with |\n|                 |independent.       |independent.         |the concept of  |\n|                 |                   |                     |implicit session|\n|                 |                   |                     |termination. An |\n|                 |                   |                     |implicitly      |\n|                 |                   |                     |terminated      |\n|                 |                   |                     |session is one  |\n|                 |                   |                     |for which the   |\n|                 |                   |                     |server does not |\n|                 |                   |                     |maintain state  |\n|                 |                   |                     |information.    |\n|A14. Routing     |HTTP requests are  |HTTP requests are    |Diameter        |\n|support and      |routed based on the|routed based on the  |supports both   |\n|related          |request URI. The   |request URI. The     |routeing based  |\n|mechanisms.      |request URI can    |request URI can point|on realm and    |\n|                 |point e.g. to a    |e.g. to a host or a  |service and     |\n|                 |host or a resource |resource (only the   |routeing based  |\n|                 |(only the later    |later applies for    |on a Diameter   |\n|                 |applies for RESTful|RESTful protocol     |host Id.        |\n|                 |protocol design)   |design)              |Diameter        |\n|                 |HTTP supports the  |HTTP supports the use|supports the use|\n|                 |use of proxies in  |of proxies in the    |of proxies (DA) |\n|                 |the path.          |path.                |in the path.    |\n|A15. Error       |Many HTTP error    |Many HTTP error codes|Many Diameter   |\n|detection and    |codes are defined  |are defined and own  |error codes are |\n|error reporting  |and own error codes|error codes can be   |defined and own |\n|capabilities     |can be defined as  |defined as extensions|error codes can |\n|                 |extensions by 3GPP |by 3GPP (IANA        |be defined as   |\n|                 |(IANA registration |registration requires|extensions by   |\n|                 |requires expert    |expert review)       |3GPP.           |\n|                 |review)            |Well defined         |Well defined    |\n|                 |Well defined       |unambiguous          |unambiguous     |\n|                 |unambiguous        |transported data     |transported data|\n|                 |transported data   |enable an unambiguous|enable an       |\n|                 |enable an          |interpretation of    |unambiguous     |\n|                 |unambiguous        |transported data (see|interpretation  |\n|                 |interpretation of  |A17)                 |of transported  |\n|                 |transported data   |                     |data (see A17)  |\n|                 |(see A17)          |                     |                |\n|A.16 Sessions    |HTTP/2 supports    |QUIC/HTTP/2 supports |Diameter        |\n|multiplexing over|multiplexing       |multiplexing multiple|supports reuse  |\n|a single         |multiple parallel  |parallel requests in |of SCTP         |\n|transport        |requests in        |separate streams in a|connections for |\n|connection       |separate streams in|non-blocking fashion |multiple        |\n|                 |a non-blocking     |over the same UDP    |Diameter        |\n|                 |fashion at HTTP    |connection.          |sessions.       |\n|                 |level) over the    |HTTP/2 streams are   |SCTP supports   |\n|                 |same TCP           |mapped one to one    |ordered and     |\n|                 |connection.        |into QUIC streams and|unordered       |\n|                 |TCP provides       |an HTTP              |delivery of     |\n|                 |order-of-transmissi|request/response     |data.           |\n|                 |on delivery of     |consumes a pair of   |Head-of-line    |\n|                 |data, which can    |streams ensuring a   |blocking may    |\n|                 |result in HOL      |reliable and in order|occur within an |\n|                 |blocking within a  |delivery of          |STCP stream     |\n|                 |TCP connection if  |request/response     |using ordered   |\n|                 |TCP segments get   |without HOL blocking |data delivery if|\n|                 |lost.              |issue.               |SCTP segments   |\n|                 |                   |                     |get lost. HOL   |\n|                 |                   |                     |blocking may be |\n|                 |                   |                     |mitigated if    |\n|                 |                   |                     |both Diameter   |\n|                 |                   |                     |peers support a |\n|                 |                   |                     |large number of |\n|                 |                   |                     |streams.        |\n|A17. Well-defined|IETF\u00a0RFC\u00a07159\u00a0[8]  |IETF\u00a0RFC\u00a07159\u00a0[8] and|Diameter AVPs   |\n|schema and       |and                |IETF\u00a0draft-newton-jso|allow an        |\n|unambiguous      |IETF\u00a0draft-newton-j|n-content-rules\u00a0[14])|encoding that   |\n|interpretation of|son-content-rules\u00a0[|provide the framework|enables the     |\n|transported data |14]) provide the   |of schema that enable|unambiguous     |\n|                 |framework of schema|the unambiguous      |interpretation  |\n|                 |that enable the    |interpretation of    |of transported  |\n|                 |unambiguous        |transported data     |data.           |\n|                 |interpretation of  |                     |                |\n|                 |transported data   |                     |                |\n\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.6.1", "title_level": 2, "desc": "5.6.1  General\n\nThe PCF may provide AMF Access and Mobility Policy to the AMF via the\nNpcf_AMPolicyControl service interface.\n\nThe AMF Access and Mobility Policy delivered by the PCF shall consist of:\n\n  -  Service Area Restrictions; and/or\n\n  -  RAT Frequency Selection Priority (RFSP Index).\n\nThe PCF provides authorized Service Area Restrictions and/or RFSP index to\nthe AMF in the corresponding UE registration. Also, at any time during the\nlife time of the UE registration, the PCF may re-evaluate the applicable\nService Area Restrictions and/or RFSP Index due to different events, e.g.\nchange of RAT or change of the serving AMF due to mobility and provide the\nupdate Service Area Restrictions and/or RFSP Index to the AMF.\n\n  NOTE:  The actual enforcement of Service Area Restrictions is executed in\n         the UE, when the UE is in CM-IDLE state or in CM-CONNECTED state\n         when in RRC Inactive, and in the RAN/AMF when the UE is in CM-\n         CONNECTED state, while the enforcement of RAT/Frequency Selection\n         Priority is always performed in the RAN.\n\n\n", "Keywords": ""}, {"key": "Service Area Restriction", "numbering": "5.6.2", "title_level": 2, "desc": "5.6.2  Service Area Restriction\n\nThe Service Area Restriction information consists of:\n\n  -  either:\n\n    -  a list of allowed Tracking Area Identities (TAIs); and/or\n\n    -  the maximum number (that can be unlimited) of allowed TAs within a\n       list of allowed TAs defined in the AMF (and not explicitly provided\n       by the PCF);\n\n  -  or:\n\n    -  a list of not allowed Tracking Area Identities (TAIs).\n\nThe PCF may determine the Service Area Restriction based on service areas\nreceived from the AMF and operator policies. Operator defined policies may\ntake into consideration e.g. UE location, time of day, etc.\n\nWhen there is no Service Area Restriction to apply, i.e. when the result of\nService Area Restriction policy evaluation by the PCF shall determine that\nthe UE is allowed to get service without any restriction in all the\nTracking Areas of the PLMN, no Service Area Restriction information shall\nbe included in the service operations Npcf_AMPolicyControl_Get response /\nNpcf_AMPolicyControl_UpdateNotify request.\n\n\n", "Keywords": ""}, {"key": "RFSP Index", "numbering": "5.6.3", "title_level": 2, "desc": "5.6.3  RFSP Index\n\nThe RFSP Index is an index referring to a UE information used locally by\nthe Access Network in order to apply specific radio resource management\nstrategies.\n\nThe PCF may determine the RFSP Index based on an RFSP Index received from\nthe AMF and operator policies that take into consideration e.g. accumulated\nusage, load level information per network slice instance etc.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.7.1.1", "title_level": 3, "desc": "5.7.1.1  General\n\nTo enable the enforcement in the 5GC of the policy and charging control of\na service data flow, the 5GC system shall provide 5G Policy and Charging\nControl information from the PCF to the SMF.\n\nTwo different types of PCC rules exist:\n\n  -  Dynamic PCC rules: dynamically provisioned by the PCF to the SMF.\n    These PCC rules may be either predefined or dynamically generated in\n    the PCF. Dynamic PCC rules can be installed, modified and removed at\n    any time.\n\n  -  Predefined PCC rules: preconfigured in the SMF/UPF. Predefined PCC\n    rules can be activated or deactivated by the PCF at any time.\n    Predefined PCC rules may be grouped allowing the PCF to dynamically\n    activate a set of PCC rules.\n\n  NOTE\u00a01:  The operator can define a predefined PCC rule, to be activated\n         by the SMF. Such a predefined rule is not explicitly known in the\n         PCF.\n\nThe purpose of the PCC rule in 5G is to:\n\n  -  detect a packet belonging to a service data flow;\n\n  -  identify the service to which the service data flow contributes to;\n\n  -  provide applicable charging parameters for a service data flow; and\n\n  -  provide policy control for a service data flow.\n\nThe PCC rule information elements in 5GC, as defined in\n3GPP\u00a0TS\u00a023.503\u00a0[66], are shown in table\u00a05.7.1.1.-1.\n\n                Table 5.7.1.1-1: PCC rule information in 5GC\n\n|Purpose      |Informatio|Description          |Category      |PCF permitted  |\n|             |n name    |                     |              |to modify      |\n|             |          |                     |              |dynamically    |\n|             |          |                     |              |provided       |\n|             |          |                     |              |information    |\n|Service data |Service   |For IP PDU traffic:  |Mandatory     |Conditional    |\n|flow         |data flow |Either a list of     |(NOTE\u00a03)      |(NOTE\u00a04)       |\n|detection    |template  |service data flow    |              |               |\n|This part    |          |filters or an        |              |               |\n|defines the  |          |application          |              |               |\n|method for   |          |identifier that      |              |               |\n|detecting    |          |references the       |              |               |\n|packets      |          |corresponding        |              |               |\n|belonging to |          |application detection|              |               |\n|a service    |          |filter for the       |              |               |\n|data flow.   |          |detection of the     |              |               |\n|             |          |service data flow.   |              |               |\n|             |          |For Ethernet PDU     |              |               |\n|             |          |traffic:             |              |               |\n|             |          |Combination of       |              |               |\n|             |          |traffic patterns of  |              |               |\n|             |          |the Ethernet PDU     |              |               |\n|             |          |traffic  (packet     |              |               |\n|             |          |filters for Ethernet |              |               |\n|             |          |PDU traffic added).  |              |               |\n|             |Precedence|Determines the order,|Conditional   |Yes            |\n|             |          |in which the service |(NOTE\u00a05)      |               |\n|             |          |data flow templates  |              |               |\n|             |          |are applied at       |              |               |\n|             |          |service data flow    |              |               |\n|             |          |detection,           |              |               |\n|             |          |enforcement and      |              |               |\n|             |          |charging.            |              |               |\n|             |Mute for  |Defines whether      |Conditional   |No             |\n|             |notificati|application's start  |(NOTE\u00a06)      |               |\n|             |on        |or stop notification |              |               |\n|             |          |is to be muted.      |              |               |\n|Charging     |Charging  |The charging system  |              |Yes            |\n|This part    |key       |(OCS or OFCS) uses   |              |               |\n|defines      |          |the charging key to  |              |               |\n|identities   |          |determine the tariff |              |               |\n|and          |          |to apply to the      |              |               |\n|instructions |          |service data flow.   |              |               |\n|for charging |          |                     |              |               |\n|and          |          |                     |              |               |\n|accounting   |          |                     |              |               |\n|that is      |          |                     |              |               |\n|required for |          |                     |              |               |\n|an access    |          |                     |              |               |\n|point where  |          |                     |              |               |\n|flow based   |          |                     |              |               |\n|charging is  |          |                     |              |               |\n|configured.  |          |                     |              |               |\n|             |Service   |The identity of the  |              |Yes            |\n|             |identifier|service or service   |              |               |\n|             |          |component the service|              |               |\n|             |          |data flow in a rule  |              |               |\n|             |          |relates to.          |              |               |\n|             |Sponsor   |An identifier,       |Conditional   |Yes            |\n|             |Identifier|provided from the AF |(NOTE\u00a07)      |               |\n|             |          |which identifies the |              |               |\n|             |          |Sponsor, used for    |              |               |\n|             |          |sponsored flows to   |              |               |\n|             |          |correlate            |              |               |\n|             |          |measurements from    |              |               |\n|             |          |different users for  |              |               |\n|             |          |accounting purposes. |              |               |\n|             |Applicatio|An identifier,       |Conditional   |Yes            |\n|             |n Service |provided from the AF |(NOTE\u00a07)      |               |\n|             |Provider  |which identifies the |              |               |\n|             |Identifier|Application Service  |              |               |\n|             |          |Provider, used for   |              |               |\n|             |          |sponsored flows to   |              |               |\n|             |          |correlate            |              |               |\n|             |          |measurements from    |              |               |\n|             |          |different users for  |              |               |\n|             |          |accounting purposes. |              |               |\n|             |Charging  |Indicates the        |Conditional   |No             |\n|             |method    |required charging    |(NOTE\u00a08)      |               |\n|             |          |method for the PCC   |              |               |\n|             |          |rule.                |              |               |\n|             |          |Values: online,      |              |               |\n|             |          |offline or neither.  |              |               |\n|             |Measuremen|Indicates whether the|              |Yes            |\n|             |t method  |service data flow    |              |               |\n|             |          |data volume,         |              |               |\n|             |          |duration, combined   |              |               |\n|             |          |volume/duration or   |              |               |\n|             |          |event shall be       |              |               |\n|             |          |measured.            |              |               |\n|             |          |This is applicable to|              |               |\n|             |          |reporting, if the    |              |               |\n|             |          |charging method is   |              |               |\n|             |          |online or offline.   |              |               |\n|             |          |(NOTE\u00a09)             |              |               |\n|             |Applicatio|An identifier,       |              |No             |\n|             |n Function|provided from the AF,|              |               |\n|             |Record    |correlating the      |              |               |\n|             |Informatio|measurement for the  |              |               |\n|             |n         |Charging key/Service |              |               |\n|             |          |identifier values in |              |               |\n|             |          |this PCC rule with   |              |               |\n|             |          |application level    |              |               |\n|             |          |reports.             |              |               |\n|             |Service   |Indicates that       |              |Yes            |\n|             |identifier|separate usage       |              |               |\n|             |level     |reports shall be     |              |               |\n|             |reporting |generated for this   |              |               |\n|             |          |Service identifier.  |              |               |\n|             |          |Values: mandated or  |              |               |\n|             |          |not required.        |              |               |\n|Policy       |5G QoS    |Identifier for the   |Conditional   |Yes            |\n|control      |Identifier|authorized QoS       |(NOTE\u00a01)      |               |\n|This part    |(5QI)     |parameters, as       |              |               |\n|defines the  |          |defined in           |              |               |\n|information  |          |3GPP\u00a0TS\u00a023.501\u00a0[2],  |              |               |\n|the PCF shall|          |subclause\u00a05.7.2      |              |               |\n|provide to   |          |                     |              |               |\n|SMF for      |          |                     |              |               |\n|policy       |          |                     |              |               |\n|control for  |          |                     |              |               |\n|the service  |          |                     |              |               |\n|data flow.   |          |                     |              |               |\n|             |ARP       |The Allocation and   |Conditional   |Yes            |\n|             |          |Retention Priority   |(NOTE\u00a010)     |               |\n|             |          |for the service data |              |               |\n|             |          |flow consisting of   |              |               |\n|             |          |the priority level,  |              |               |\n|             |          |the pre-emption      |              |               |\n|             |          |capability and the   |              |               |\n|             |          |pre-emption          |              |               |\n|             |          |vulnerability.       |              |               |\n|             |QoS       |Indicates a request  |              |Yes            |\n|             |Notificati|for notification to  |              |               |\n|             |on Control|RAN for the SDF when |              |               |\n|             |(QNC)     |the QoS targets for a|              |               |\n|             |          |GBR 5QI cannot be    |              |               |\n|             |          |fulfilled for a QoS  |              |               |\n|             |          |flow during the      |              |               |\n|             |          |lifetime of the QoS  |              |               |\n|             |          |flow. The QNC is the |              |               |\n|             |          |Notification Control |              |               |\n|             |          |5G QoS parameter     |              |               |\n|             |          |defined in           |              |               |\n|             |          |3GPP\u00a0TS\u00a023.501\u00a0[2],  |              |               |\n|             |          |subclause\u00a05.7.2.     |              |               |\n|             |Bind to   |Indicates that the   |Conditional   |Yes            |\n|             |QoS flow  |dynamic PCC rule     |(NOTE\u00a02)      |               |\n|             |of the    |shall always have its|              |               |\n|             |default   |binding with the QoS |              |               |\n|             |QoS rule  |flow of the default  |              |               |\n|             |          |QoS rule.            |              |               |\n|             |Gate      |The gate status      |              |Yes            |\n|             |status    |indicates whether the|              |               |\n|             |          |service data flow,   |              |               |\n|             |          |detected by the      |              |               |\n|             |          |service data flow    |              |               |\n|             |          |template, may pass   |              |               |\n|             |          |(Gate is open) or    |              |               |\n|             |          |shall be discarded   |              |               |\n|             |          |(Gate is closed).    |              |               |\n|             |Reflective|Indicates to apply   |              |Yes            |\n|             |QoS       |reflective QoS for   |              |               |\n|             |Control   |the service data     |              |               |\n|             |          |flow. Reflective QoS |              |               |\n|             |          |is defined in        |              |               |\n|             |          |3GPP\u00a0TS\u00a023.501\u00a0[2],  |              |               |\n|             |          |subclause\u00a05.7.5.     |              |               |\n|             |UL-maximum|The uplink maximum   |              |Yes            |\n|             |bitrate   |bitrate authorized   |              |               |\n|             |          |for the service data |              |               |\n|             |          |flow.                |              |               |\n|             |DL-maximum|The downlink maximum |              |Yes            |\n|             |bitrate   |bitrate authorized   |              |               |\n|             |          |for the service data |              |               |\n|             |          |flow.                |              |               |\n|             |UL-guarant|The uplink guaranteed|              |Yes            |\n|             |eed       |bitrate authorized   |              |               |\n|             |bitrate   |for the service data |              |               |\n|             |          |flow.                |              |               |\n|             |DL-guarant|The downlink         |              |Yes            |\n|             |eed       |guaranteed bitrate   |              |               |\n|             |bitrate   |authorized for the   |              |               |\n|             |          |service data flow.   |              |               |\n|             |UL sharing|Indicates resource   |              |No             |\n|             |indication|sharing in uplink    |              |               |\n|             |          |direction with       |              |               |\n|             |          |service data flows   |              |               |\n|             |          |having the same value|              |               |\n|             |          |in their PCC rule.   |              |               |\n|             |DL sharing|Indicates resource   |              |No             |\n|             |indication|sharing in downlink  |              |               |\n|             |          |direction with       |              |               |\n|             |          |service data flows   |              |               |\n|             |          |having the same value|              |               |\n|             |          |in their PCC rule.   |              |               |\n|             |Redirect  |Redirect state of the|Conditional   |Yes            |\n|             |          |service data flow    |(NOTE\u00a06)      |               |\n|             |          |(enabled/disabled).  |              |               |\n|             |Redirect  |Controlled Address to|Conditional   |Yes            |\n|             |Destinatio|which the service    |(NOTE\u00a011)     |               |\n|             |n         |data flow is         |              |               |\n|             |          |redirected when      |              |               |\n|             |          |redirect is enabled. |              |               |\n|Access       |User      |The serving cell of  |              |Yes            |\n|Network      |Location  |the UE is to be      |              |               |\n|Information  |Report    |reported. When the   |              |               |\n|Reporting    |          |corresponding QoS    |              |               |\n|This part    |          |flow is deactivated, |              |               |\n|describes    |          |and if available,    |              |               |\n|access       |          |information on when  |              |               |\n|network      |          |the UE was last known|              |               |\n|information  |          |to be in that        |              |               |\n|to be        |          |location is also to  |              |               |\n|reported for |          |be reported.         |              |               |\n|the PCC rule |          |                     |              |               |\n|when the     |          |                     |              |               |\n|corresponding|          |                     |              |               |\n|QoS flow is  |          |                     |              |               |\n|established, |          |                     |              |               |\n|modified or  |          |                     |              |               |\n|terminated.  |          |                     |              |               |\n|             |UE        |The time zone of the |              |Yes            |\n|             |Timezone  |UE is to be reported.|              |               |\n|             |Report    |                     |              |               |\n|Usage        |Monitoring|The PCF uses the     |              |Yes            |\n|Monitoring   |key       |monitoring key to    |              |               |\n|Control      |          |group services that  |              |               |\n|This part    |          |share a common       |              |               |\n|describes    |          |allowed usage.       |              |               |\n|identities   |          |                     |              |               |\n|required for |          |                     |              |               |\n|Usage        |          |                     |              |               |\n|Monitoring   |          |                     |              |               |\n|Control.     |          |                     |              |               |\n|             |Indication|Indicates that the   |              |Yes            |\n|             |of        |service data flow    |              |               |\n|             |exclusion |shall be excluded    |              |               |\n|             |from      |from PDU session     |              |               |\n|             |session   |usage monitoring.    |              |               |\n|             |level     |                     |              |               |\n|             |monitoring|                     |              |               |\n|Traffic      |Traffic   |This part describes  |              |Yes            |\n|Steering     |Steering  |identities required  |              |               |\n|Enforcement  |Policy    |for Traffic Steering |              |               |\n|Control      |Identifier|Enforcement Control. |              |               |\n|This part    |          |                     |              |               |\n|describes    |          |                     |              |               |\n|identities   |          |                     |              |               |\n|required for |          |                     |              |               |\n|Traffic      |          |                     |              |               |\n|Steering     |          |                     |              |               |\n|Enforcement  |          |                     |              |               |\n|Control.     |          |                     |              |               |\n|             |Data      |Identifier of the    |              |Yes            |\n|             |Network   |target Data Network  |              |               |\n|             |Access    |Access. It is defined|              |               |\n|             |Identifier|in                   |              |               |\n|             |          |3GPP\u00a0TS\u00a023.501\u00a0[2],  |              |               |\n|             |          |subclause\u00a05.6.7.     |              |               |\n|             |Data      |Indicates whether a  |              |Yes            |\n|             |Network   |notification in case |              |               |\n|             |Access    |of change of DNAI is |              |               |\n|             |Change    |needed. It is defined|              |               |\n|             |report    |in                   |              |               |\n|             |          |3GPP\u00a0TS\u00a023.501\u00a0[2],  |              |               |\n|             |          |subclause\u00a05.6.7      |              |               |\n|NOTE\u00a01: The 5G QoS Identifier is mandatory for QoS flow binding in the SMF, |\n|unless the \"Bind to QoS flow of the default QoS rule\" is included and set to|\n|the value \"binding to default QoS rule\".                                    |\n|NOTE\u00a02: The presence of this attribute causes the 5QI/ARP/QNC of the rule to|\n|be ignored.                                                                 |\n|NOTE\u00a03: Either service data flow filter(s) or application identifier shall  |\n|be defined per each rule.                                                   |\n|NOTE\u00a04: YES, in case the service data flow template consists of a set of    |\n|service data flow filters. NO in case the service data flow template        |\n|consists of an application identifier.                                      |\n|NOTE\u00a05: The Precedence is mandatory for PCC rules with SDF template         |\n|containing SDF filter(s). For dynamic PCC rules with SDF template containing|\n|an application identifier, the precedence is either preconfigured in SMF or |\n|provided in the PCC rule from PCF.                                          |\n|NOTE\u00a06: Optional and applicable only if application identifier exists within|\n|the rule.                                                                   |\n|NOTE\u00a07: Applicable to sponsored data connectivity.                          |\n|NOTE\u00a08: Mandatory if there is no default charging method for the PDU        |\n|session.                                                                    |\n|NOTE\u00a09: Event based charging is only applicable to predefined PCC rules and |\n|PCC rules used for application detection filter (i.e. with an application   |\n|identifier).                                                                |\n|NOTE\u00a010: Mandatory when policy control on SDF level applies.                |\n|NOTE\u00a011: If Redirect is enabled.                                            |\n\n\n  NOTE\u00a02:  The PCC parameters related to NBIFOM, 3GPP PS Data Off, SRVCC\n         and Location change (Serving cell) are not supported, as specified\n         in 3GPP\u00a0TS\u00a023.503\u00a0[66].\n\n  Editor's note:  It is FFS how it is indicated in the PCC rule the AF\n         subscription to SMF notifications.\n\n  Editor's note:  Whether to use the access agnostic terminology for the\n         PCC rule is FFS.\n\n  Editor's note:  It is FFS whether the various constructs (QoS, Charging,\n         Traffic Steering) within the PCC rule will become references to\n         separate rules that are applied/associated with the packet filters,\n         similar to the design on the Sx interface.\n\nThe Service data flow template may comprise any number of Service data flow\nfilters or an application identifier for IP PDU traffic as is defined in\n3GPP\u00a0TS\u00a023.503\u00a0[66]. Additionally, it may also comprise any combination of\ntraffic patterns of the Ethernet PDU traffic as defined in\nsubclause\u00a05.7.6.3 of 3GPP\u00a0TS\u00a023.501\u00a0[2].\n\nThe 5G QoS Identifier, 5QI, is a scalar that is used as reference to a\nspecific QoS forwarding behaviour (e.g. packet loss rate, packet delay\nbudget) to be provided to a service data flow. It can be a standardized,\nnon-standardized or pre-configured value.\n\nThe Bind to QoS flow of the default QoS rule indicates that the SDF shall\nbe bound to the default QoS flow of the default QoS rule. The presence of\nthe \"Bind to QoS flow of the default QoS rule\" parameter attribute causes\nthe 5QI/ARP/QNC of the rule to be ignored by the SMF during the QoS flow\nbinding.\n\nThe QoS Notification Control, QNC indicates a request for a notification to\nthe access network (RAN) for the SDF when the QoS targets for a GBR 5QI\ncannot be fulfilled for a QoS flow during the lifetime of the QoS flow. If\nit is set and QoS targets cannot be fulfilled, RAN sends a notification\ntowards the SMF, which notifies the PCF or other interested receivers. It\nis indicated by the QoS Notification Control (QNC) information element,\nwhich is equivalent to the Notification Control 5G QoS parameter described\nin 3GPP\u00a0TS\u00a023.501\u00a0[2] subclause\u00a05.7.2.\n\nThe Reflective QoS Control indicates a request to apply reflective QoS for\nthe SDF. The Reflective QoS Control is used to control the RQI marking in\nthe DL packets of the service data flow and may trigger the sending of the\nRQA parameter for the QoS flow the service data flow is bound to. The\nReflective QoS is defined in 3GPP\u00a0TS\u00a023.501\u00a0[2] subclause\u00a05.7.5.\n\n  NOTE\u00a03:  While the UE applies a standardized value for the precedence of\n         all UE derived QoS rules, PCC rules require different precedence\n         values and PCF configuration has to ensure that there is a large\n         enough value range for the precedence of PCC rules corresponding to\n         UE derived QoS rules. To avoid that the precedence of network\n         provided QoS rules need to be changed when Reflective QoS is\n         activated and filters are overlapping, the PCF will take the\n         standardized value for the precedence of UE derived QoS rules into\n         account when setting the precedence value of PCC rules subject to\n         Reflective QoS.\n\nThe Target Data Network Identifier (DNAI) is a reference to the DNAI the\nSMF needs to consider for the UPF selection/reselection.\n\nThe Data Network Access Change report indicates a request for a\nnotification about a change of DNAI for the UPF serving the UE. The\nsubscription can be for an early notification and/or a late notification.\n\n\n", "Keywords": ""}, {"key": "PCC rule operations", "numbering": "5.7.1.2", "title_level": 3, "desc": "5.7.1.2  PCC rule operations\n\nFor dynamic PCC rules, the following operations are available:\n\n  -  installation: to provision a PCC rule that has not been already\n    provisioned;\n\n  -  modification: to modify a PCC rule already installed; and\n\n  -  removal: to remove a PCC rule already installed.\n\nFor predefined PCC rules, the following operations are available:\n\n  -  activation: to activate the PCC rule; and\n\n  -  deactivation: to deactivate the PCC rule.\n\nThe PCF provides PCC rules to the SMF using the Npcf_SMPolicyControl\nservice. The PCF shall identify each PCC rule with a Rule identifier. The\nRule identifier of the PCC rule shall be included for each PCC rule\nprovided in the Npcf_SMPolicyControl service operations.\n\nUpon reception of the Npcf_SMPolicyControl_Get service operation from the\nSMF the PCF shall decide what PCC rules apply for that PDU session. The PCF\nshall include the applicable PCC rules in the response of the\nNpcf_SMPolicyControl_Get service operation.\n\nThe PCF may use:\n\n  -  a response to the Npcf_SMPolicyControl_Get service operation to:\n\n    a) activate a preconfigured PCC rule; and\n\n    b) install a dynamic PCC rule; and\n\n  -  the Npcf_SMPolicyControl_UpdateNotify service operation to:\n\n    a) activate, modify, or deactivate a preconfigured PCC rule; and\n\n    b) install, modify, or remove a dynamic PCC rule.\n\n  NOTE\u00a01:  For the HTTP methods and resources to realize the\n         Npcf_SMPolicyControl service operations see subclause\u00a05.4.3.3.\n\nAfter the PCC rule installation/activation, the PCF may, at any time,\nremove/deactivate an active PCC rule.\n\nAt the PDU session termination when the SMF invokes the\nNpcf_SMPolicyControl_Delete service operation to the PCF, the SMF\nremoves/inactivates all PCC rules associated to that PDU session.\n\nAn active PCC rule means that:\n\n  -  the service data flow template shall be used for service data flow\n    detection;\n\n  -  the service data flow template shall be used for mapping of downlink\n    packets to the QoS flow determined by the QoS flow binding;\n\n  -  the service data flow template shall be used for service data flow\n    detection of uplink packets on the PDU session;\n\n  -  usage data for the service data flow shall be recorded;\n\n  -  policies associated with the PCC rule, if any, shall be invoked;\n\n  -  for service data flow detection with an application detection filter,\n    the start or the stop of the application traffic is reported to the\n    PCF, if applicable and requested by the PCF. In that case, the\n    notification for start may include service data flow filters, (if\n    possible to provide) and the application instance identifier associated\n    with the service data flow filters.\n\nA predefined PCC rule is known at least, within the scope of one PDU\nsession.\n\n  NOTE\u00a02:  The same predefined PCC rule can be activated for multiple QoS\n         flows in multiple PDU sessions.\n\nA predefined PCC rule is bound to one and only one QoS flow per PDU\nsession. For a predefined PCC rule whose service data flow cannot be fully\nreflected for the uplink direction in terms of traffic mapping information\nsent to the UE, the SMF may request the UPF to apply the uplink service\ndata flow detection at additional QoS flows with non-GBR 5QI of the same\nPDU session. The deactivation of such a predefined PCC rule ceases its\nservice data flow detection for the whole PDU session.\n\nWhen the PCF receives the Nsmf_EventExposure_Notify service operation\nindicating that the QoS flow is terminated, all active PCC rules on that\nQoS flow are removed/deactivated without sending explicit instruction i.e.\nthe PCF does not need to invoke the Npcf_SMPolicyControl_UpdateNotify\nservice operation to the SMF.\n\nPCC rule operations can be also performed in a deferred mode. A PCC rule\nmay have either a single deferred activation time, or a single deferred\ndeactivation time or both. An inactive PCC rule, that has not been\nactivated yet, is still considered to be installed/activated, and may be\nremoved/inactivated by the PCF.\n\n\n", "Keywords": ""}, {"key": "5G PDU session related policy information", "numbering": "5.7.2", "title_level": 2, "desc": "5.7.2  5G PDU session related policy information\n\nThe PCF may provide 5G PDU session related policy information to the SMF.\n\nThe IP-CAN session related policy information defined in 3GPP\u00a0TS\u00a023.203\u00a0[4]\nis re-used in 5G with the following differences:\n\n  -  Attributes relate to the PDU session instead of the IP-CAN session.\n\n  -  Attribute Default NBIFOM access is not applicable to 5G.\n\n  -  Additional information needed compared to the 3GPP\u00a0TS\u00a023.203\u00a0[4] IP-\n    CAN session related policy information is described in the table and\n    text below.\n\n        Table 5.7.2-1: Additional information needed compared to the\n        3GPP\u00a0TS\u00a023.203\u00a0[4] IP-CAN session related policy information\n\n|Attribute     |Description             |PCF permitted to |Category|Scope     |\n|              |                        |modify for       |        |          |\n|              |                        |dynamically      |        |          |\n|              |                        |provided         |        |          |\n|              |                        |information      |        |          |\n|PRA           |Defines the Presence    |Yes              |        |PDU       |\n|Identifier(s) |Reporting Area(s) to    |                 |        |session   |\n|              |monitor for the UE with |                 |        |          |\n|              |respect to              |                 |        |          |\n|              |entering/leaving        |                 |        |          |\n|List(s) of    |Defines the elements of |Yes              |        |PDU       |\n|Presence      |the Presence Reporting  |                 |        |session   |\n|Reporting Area|Area(s)                 |                 |        |          |\n|elements      |                        |                 |        |          |\n|IP Index      |Provided to SMF to      |No               |Optional|PDU       |\n|              |assist in determining   |                 |        |Session   |\n|              |the IP Address          |                 |        |          |\n|              |allocation method (e.g. |                 |        |          |\n|              |which IP pool to assign |                 |        |          |\n|              |from) when a PDU session|                 |        |          |\n|              |requires an IP address  |                 |        |          |\n|              |as defined in           |                 |        |          |\n|              |3GPP\u00a0TS\u00a023.501\u00a0[2],     |                 |        |          |\n|              |subclause\u00a05.8.1.1.      |                 |        |          |\n|Non-standardiz|Defines a 5QI value     |No               |Optional|PDU       |\n|ed QoS        |(from the               |                 |        |Session   |\n|Characteristic|non-standardized value  |                 |        |          |\n|s             |range) and the          |                 |        |          |\n|(NOTE\u00a05)      |associated 5G QoS       |                 |        |          |\n|              |characteristics as      |                 |        |          |\n|              |defined in              |                 |        |          |\n|              |3GPP\u00a0TS\u00a023.501\u00a0[2]      |                 |        |          |\n|              |subclause\u00a05.7.3.        |                 |        |          |\n|Authorized    |Defines the Aggregate   |Yes              |Optional|PDU       |\n|Session-AMBR  |Maximum Bit Rate for the|                 |        |Session   |\n|(NOTE\u00a03,      |Non-GBR QoS flows of the|                 |        |          |\n|NOTE\u00a04)       |PDU session.            |                 |        |          |\n|Authorized    |Defines the default 5QI |Yes              |Optional|PDU       |\n|default       |and ARP of the QoS flow.|                 |        |Session   |\n|5QI/ARP       |                        |                 |        |          |\n|(NOTE\u00a04)      |                        |                 |        |          |\n|Time Condition|Defines the time at     |No               |Optional|PDU       |\n|(NOTE\u00a01)      |which the corresponding |(NOTE\u00a02)         |        |Session   |\n|              |Subsequent Authorized   |                 |        |          |\n|              |Session-AMBR or         |                 |        |          |\n|              |Subsequent Authorized   |                 |        |          |\n|              |default 5QI/ARP shall be|                 |        |          |\n|              |applied.                |                 |        |          |\n|Subsequent    |Defines the Aggregate   |No               |Optional|PDU       |\n|Authorized    |Maximum Bit Rate for the|(NOTE\u00a02)         |        |Session   |\n|Session-AMBR  |Non-GBR QoS flows of the|                 |        |          |\n|(NOTE\u00a01,      |PDU session when the    |                 |        |          |\n|NOTE\u00a03)       |Time Condition is       |                 |        |          |\n|              |reached.                |                 |        |          |\n|Subsequent    |Defines the default 5QI |No               |Optional|PDU       |\n|Authorized    |and ARP of the default  |(NOTE\u00a02)         |        |Session   |\n|default       |QoS flow when the Time  |                 |        |          |\n|5QI/ARP       |Condition is reached.   |                 |        |          |\n|(NOTE\u00a01)      |                        |                 |        |          |\n|NOTE\u00a01: The Time Condition and Subsequent Authorized Session-AMBR/          |\n|Subsequent Authorized default 5QI/ARP are used together. The PCF may provide|\n|up to four instances of them. When multiple instances are provided, the     |\n|values of the associated Time Condition have to be different.               |\n|NOTE\u00a02: The PCF may replace all instances that have been provided previously|\n|with a new instruction. A previously provided Time Condition and Subsequent |\n|Authorized Session-AMBR/ Subsequent Authorized default 5QI/ARP pair cannot  |\n|be individually modified.                                                   |\n|NOTE\u00a03: The Authorized Session-AMBR and the Subsequent Authorized           |\n|Session-AMBR may be provided together with a list of RAT types.             |\n|NOTE\u00a04: There is always an unconditional value for the Authorized           |\n|Session-AMBR and Authorized default 5QI/ARP available at the SMF. The       |\n|initial value is received as Subscribed Session-AMBR/Subscribed default     |\n|5QI/ARP, and the PCF can overwrite it with these parameters.                |\n|NOTE\u00a05: Multiple Non-standardized QoS Characteristics can be provided by the|\n|PCF. Operator configuration is assumed to ensure that the non-standardized  |\n|5QI to QoS characteristic relation is unique within the PLMN.               |\n\n  Editor's note:  Whether PRA can be reused as specified in 3GPP\u00a0TS\u00a023.203\n         or if there is any PRA equivalent concept in 5G is FFS.\n\nThe Authorized Session-AMBR defines the UL/DL Aggregate Maximum Bit Rate\nfor the Non-GBR QoS flows of the PDU session, which is enforced in the UPF\nas defined in subclause\u00a05.9.7. PCF may provide the Authorized Session-AMBR\nin every interaction with the SMF. When SMF receives it from the PDU\nsession policy, it is provided to the UPF over N4 interface for the\nenforcement.\n\nThe Authorized default 5QI/ARP defines the default 5QI and ARP of the QoS\nflow, i.e. the QoS flow corresponding to the default QoS rule as is\ndescribed in subclause\u00a05.7.2 of 3GPP\u00a0TS\u00a023.501\u00a0[2]. The PCF may provide the\nauthorized default 5QI/ARP in every interaction with the SMF. The SMF shall\napply the authorized default 5QI/ARP for the PDU session, including the\nnecessary QoS flow binding actions.\n\nThe Time Condition and Subsequent Authorized Session-AMBR/ Subsequent\nAuthorized default 5QI/ARP are used together and up to four instances with\ndifferent values of the Time Condition parameter may be provided by the\nPCF. Time Condition indicates that the associated Subsequent Authorized\nSession-AMBR/ Subsequent Authorized default 5QI/ARP is only applied when\nthe time defined by this attribute is met. When SMF receives a Time\nCondition and Subsequent Authorized Session-AMBR/ Subsequent Authorized\ndefault 5QI/ARP pair, it stores it locally. When the time defined by the\nTime Condition parameter is reached, the SMF shall apply (or instruct UPF\nto apply) Subsequent Authorized Session-AMBR/ Subsequent Authorized default\n5QI/ARP.\n\n  NOTE\u00a01:  In order to reduce the risk for signalling overload, the PCF\n         should avoid simultaneous provisioning of the Subsequent Authorized\n         Session-AMBR/ Subsequent Authorized default 5QI/ARP for many UEs\n         (e.g. by spreading over time).\n\n  NOTE\u00a02:  In order to provide further Subsequent Authorized Session-AMBR/\n         Subsequent Authorized default 5QI/ARP in a timely fashion the PCF\n         can use its own clock to issue the desired changes or use the\n         Revalidation time limit parameter to trigger a SMF request for a\n         policy decision.\n\n  NOTE\u00a03:  For services that depend on specific Session-AMBR and/or default\n         5QI/ARP (e.g. MPS session) the PCF is responsible to ensure that no\n         Subsequent Authorized Session-AMBR or Subsequent Authorized default\n         5QI/ARP interfere with the service, e.g. by removing the Subsequent\n         Authorized Session-AMBR or Subsequent Authorized default 5QI/ARP\n         before the respective change time is reached.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.7.3.1", "title_level": 3, "desc": "5.7.3.1  General\n\nPacket Filter Set is used in the QoS rules or SDF template to identify a\nQoS flow. The Packet Filter Set may contain packet filters for the DL\ndirection, the UL direction or packet filters that are applicable to both\ndirections.\n\nThere are two types of Packet Filter Sets (i.e. IP Packet Filter and\nEthernet Packet Filter) corresponding to those PDU session types.\n\n\n", "Keywords": ""}, {"key": "IP Packet Filter Set", "numbering": "5.7.3.2", "title_level": 3, "desc": "5.7.3.2  IP Packet Filter Set\n\nFor IP PDU session type, the Packet Filter Set shall support packet\nfiltering based on at least any combination of:\n\n  -  Source/destination IP address or IPv6 prefix;\n\n  -  Source / destination port number;\n\n  -  Protocol ID of the protocol above IP/Next header type;\n\n  -  Type of Service (TOS) (IPv4) / Traffic class (IPv6) and Mask;\n\n  -  Flow Label (IPv6); and\n\n  -  Security parameter index.\n\n  NOTE\u00a01:  A value left unspecified in a filter matches any value of the\n         corresponding information in a packet.\n\n  NOTE\u00a02:  An IP address or Prefix may be combined with a prefix mask.\n\n  NOTE\u00a03:  Port numbers may be specified as port ranges.\n\n\n", "Keywords": ""}, {"key": "Ethernet Packet Filter Set", "numbering": "5.7.3.3", "title_level": 3, "desc": "5.7.3.3  Ethernet Packet Filter Set\n\nFor Ethernet PDU session type, the Packet Filter Set shall support packet\nfiltering based on at least any combination of:\n\n  -  Source/destination MAC address;\n\n  -  Ethertype as defined in IEEE\u00a0802.3\u00a0[69];\n\n  -  Customer-VLAN tag (C-TAG) and/or Service-VLAN tag (S-TAG) VID fields\n    as defined in IEEE\u00a0802.1Q\u00a0[70];\n\n  -  Customer-VLAN tag (C-TAG) and/or Service-VLAN tag (S-TAG) PCP/DEI\n    fields as defined in IEEE\u00a0802.1Q\u00a0[70]; and\n\n  -  IP Packet Filter Set, in case Ethertype indicates IPv4/IPv6 payload.\n\n  NOTE\u00a01:  The MAC address may be specified as address ranges.\n\n  NOTE\u00a02:  A value left unspecified in a filter matches any value of the\n         corresponding information in a packet.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.8.1", "title_level": 2, "desc": "5.8.1  General\n\nThe PCF will provide UE policies to the AMF via the N15 reference point.\nTwo types of UE policies are defined in 3GPP\u00a0TS\u00a023.501\u00a0[2]:\n\n  -  UE Access Network discovery and selection policies; and\n\n  -  UE Route Selection Policies (URSP).\n\n\n", "Keywords": ""}, {"key": "UE Access Network discovery and selection policies", "numbering": "5.8.2", "title_level": 2, "desc": "5.8.2  UE Access Network discovery and selection policies\n\nThese policies are used for the UE to select non-3GPP accesses and to\ndecide how to route traffic between the selected 3GPP and non 3GPP\naccesses.\n\n  Editor's note:  The structure of these policies remains unspecified in\n         stage 2.\n\n\n", "Keywords": ""}, {"key": "UE Route Selection Policies (URSP)", "numbering": "5.8.3", "title_level": 2, "desc": "5.8.3  UE Route Selection Policies (URSP)\n\nThese policies are used by the UE to determine how to route outgoing\ntraffic.\n\nThe following information needs to be provided as part of each UE Route\nSelection Policy:\n\n  -  Traffic Filter: Filter information for the traffic (flow information\n    or application identifier). The traffic that matches the traffic filter\n    of an URSP rule is referred to as the \"matching traffic\" for this URSP\n    rule.\n\n  -  Non-seamless Offload (more than one instance allowed, one per Non-3GPP\n    access type, provided in priority order). It includes:\n\n    a) Traffic-Treatment: Traffic [Prohibited, Preferred, Permitted] to be\n       offloaded to non-3GPP access outside of a PDU session.\n\n    b) Non-3GPP Access Type: Optional parameter to indicate the Non-3GPP\n       network for which the traffic treatment applies.\n\n  -  Slice info (more than one instance allowed, provided in priority\n    order). It includes S-NSSAI information, i.e.:\n\n    a) Slice/Service Type: Indicates expected Network Slice behaviour in\n       terms of features and services. Standardised Slice/Service types are\n       \"1\" for enhanced Mobile Broadband (eMBB)\", \"2\" for ultra- reliable\n       low latency communications (URLLC), and \"3\" for massive IoT (MIoT),\n       as specified in table\u00a05.15.2.2-1 in 3GPP\u00a0TS\u00a023.501\u00a0[2], but non-\n       standard Slice/Service types can also be used.\n\n    b) Slice Differentiator: Optional parameter that complements the\n       Slice/Service type(s) to allow further differentiation for selecting\n       a Network Slice instance from the potentially multiple Network Slice\n       instances that all comply with the indicated Slice/Service type.\n\n  Editor's note:  What info is provided by the PCF as part of this\n         information remains unspecified in stage 2.\n\n  -  Continuity Type (more than one instance allowed, provided in priority\n    order). It indicates the required SSC mode(s) as defined in\n    subclause\u00a05.6.9.2 of 3GPP\u00a0TS\u00a023.501\u00a0[2] [SSC Mode 1, SSC Mode 2, SSC\n    Mode 3] for the matching traffic.\n\n  -  DNN (more than one instance allowed, provided in priority order). It\n    includes the required DNN(s) for the matching traffic. It is used to\n    associate the matching traffic with one or more DNNs.\n\n  -  Access Type (more than one instance allowed, provided in priority\n    order): It indicates the type of access (3GPP or non-3GPP) on which the\n    PDU session should be established for the matching traffic. If the UE\n    needs to establish a PDU session for the matching traffic, this\n    indicates the type of access (3GPP or non-3GPP) on which the PDU\n    session should be established. It may also indicate a prioritized list\n    of accesses on which the PDU session establishment should be attempted.\n\n  Editor's note:  It is FFS if the size of the UE policies to be\n         transferred and frequency of the rules update from the PCF to the\n         UE would require additional transport options.\n\n  Editor's note:  It is FFS if part of the policies can be transferred via\n         UDM.\n\n\n", "Keywords": ""}, {"key": "Overview", "numbering": "5.9.1", "title_level": 2, "desc": "5.9.1  Overview\n\nThe PCF may provide authorized QoS to the SMF. The authorized QoS can be\nthe default QoS, the QoS per Service Data Flow and the QoS per PDU session.\n\nThe provisioning of the authorized QoS is performed from the PCF to the\nSMF. The authorized QoS can refer to a policy rule or to a PDU Session.\n\nThe authorized QoS provides appropriate values for the resources to be\nenforced.\n\nThe authorized QoS for a policy rule is a request for allocating the\ncorresponding resources.\n\n\n", "Keywords": ""}, {"key": "Policy provisioning for authorized QoS per service data flow", "numbering": "5.9.2", "title_level": 2, "desc": "5.9.2  Policy provisioning for authorized QoS per service data flow\n\nThe authorized QoS per service data flow shall be provisioned within the\ncorresponding PCC rule by the PCF to the SMF. The PCF shall include the QoS\nparameters in the authorized QoS as follows:\n\n  -  When the PCF authorizes the Non-GBR type QoS for the service data\n    flow, the PCF shall include a standardized 5QI or preconfigured 5QI\n    with the non-GBR value or a non-standardized 5QI and the ARP. The PCF\n    may also include the MBR if needed and the Reflective QoS indication if\n    applicable. For the Non-GBR QoS with standardized 5QIs or pre-\n    configured 5QIs the PCF may not provide the ARP as part of the\n    authorized QoS if the default ARP is authorized to the service data\n    flow.\n\n  -  When the PCF authorizes the GBR type QoS for the service data flow,\n    the PCF shall include a standardized 5QI with GBR value, a\n    preconfigured 5QI or a non-standardized 5QI with the 5G QoS\n    characteristics. The PCF shall also include the ARP, the GBR and the\n    MBR. The PCF may also include the QoS notification control if\n    applicable.\n\n  NOTE:  The PCF may provide preconfigured 5QI values only when the UE is\n         not roaming.\n\n\n", "Keywords": ""}, {"key": "Policy enforcement for authorized QoS per service data flow", "numbering": "5.9.3", "title_level": 2, "desc": "5.9.3  Policy enforcement for authorized QoS per service data flow\n\n  Editor's note:  Policy enforcement for authorized Qos per service data\n         flow is FFS.\n\nThe SMF shall perform a QoS flow binding based on the QoS information\nprovided for the service data flow.\n\nThe SMF shall assign the QFI and shall derive, if applicable, the QoS flow\ninformation required towards the Access Network and the QoS rule required\ntowards the UE.\n\n  NOTE:  The 5QI, 5G QoS characteristics if applicable, ARP, MBR and GBR\n         enforcement is performed in the UPF based on the information the\n         SMF sends via N4 interface.\n\n\n", "Keywords": ""}, {"key": "Policy provisioning of authorized QoS per PDU Session", "numbering": "5.9.4", "title_level": 2, "desc": "5.9.4  Policy provisioning of authorized QoS per PDU Session\n\nEach PDU session of a UE is associated with a Session-AMBR. The PCF shall\nprovision the authorized Session-AMBR for both Uplink and Downlink traffic\nas part of the PDU session establishment procedure. The SMF may provide an\nupdated Session-AMBR to the PCF when received from UDM and the PCF may\nmodify the Session-AMBR for both Uplink and Downlink traffic at any time as\nlong as there is a PDU session active for that DNN.\n\nThe Session-AMBR limits the aggregate bit rate that can be expected to be\nprovided across all Non-GBR QoS flows for a specific PDU session for both\nUplink and Downlink traffic.\n\n  NOTE:  Authorized session-AMBR includes the Session Aggregate Maximum Bit\n         Rate Uplink and/or Downlink.\n\nEach PDU session of a UE is associated with a default QoS. The SMF may\nprovide to the PCF the subscribed default QoS as received from the UDM and\nthe PCF shall provision the authorized default QoS as part of the PDU\nsession establishment procedure. The SMF may provide to the PCF an updated\ndefault QoS as provided by the UDM and the PCF may modify the default QoS\nat any time as long as there is a PDU session active for that DNN.\n\nThe default QoS relate to a non-GBR 5QI and includes the 5QI and ARP for\nthe treatment of packets related to the Default QoS flow. The default 5QI\nshall be from the standardized value range for non-GBR 5QIs.\n\n  Editor's note:  Handling of errors in the provisioning of the authorized\n         QoS per PDU Session is FFS.\n\n\n", "Keywords": ""}, {"key": "Policy enforcement for authorized QoS per PDU session", "numbering": "5.9.5", "title_level": 2, "desc": "5.9.5  Policy enforcement for authorized QoS per PDU session\n\nWhen the SMF receives an authorized Session-AMBR at PDU session\nestablishment and also at PDU session modification, the SMF shall send the\nauthorized Session-AMBR and/or the default QoS to:\n\n  -  the UPF via the N4 reference point; and\n\n  -  the RAN via the AMF.\n\nWhen the SMF receives an authorized default QoS at PDU Session\nestablishment and also at PDU Session modification, the SMF shall perform\nthe QoS Flow binding as defined in subclause\u00a05.18.4.\n\n  Editor's note:  Handling of errors at enforcement of the authorized QoS\n         per PDU session is FFS.\n\n\n", "Keywords": ""}, {"key": "Provisioning and Enforcement of authorized Reflective", "numbering": "5.9.6.4", "title_level": 3, "desc": "5.9.6.1  General\n\nThe Reflective QoS is achieved by creating a derived QoS rule in the UE\nbased on the received downlink traffic, and it applies for IP PDU session\nand Ethernet PDU session. It shall be possible to apply the Reflective QoS\nand the non-Reflective QoS concurrently within the same PDU session. For\ntraffic that is subject to the Reflective QoS, the UL packet gets the same\nQoS marking as the reflected DL packet.\n\nIf the 3GPP UE supports Reflective QoS functionality, the UE indicates\nsupport of reflective QoS to the network (i.e. SMF) during the PDU session\nestablishment.\n\n\n5.9.6.2  Provisioning of authorized Reflective QoS per service data flow\n\nWhen the PCF determines that the Reflective QoS is applied to a non-GBR\nservice data flow, the PCF shall include the related RQI in the\ncorresponding PCC rule and provide the PCC rule to the SMF.\n\n\n5.9.6.3  Policy enforcement of authorized Reflective QoS per service data\n           flow\n\nWhen the PCF provides the RQI as part of a PCC rule, and if the PCC rule is\nthe first PCC rule with the RQI bound to a QoS Flow after performing the\nflow binding, the SMF shall determine if the reflective QoS is applicable\nto the QoS Flow. If, the SMF shall provide the Reflective QoS Attribute\n(RQA) in the QoS Flow's QoS profile towards the 5G-RAN, which indicates\nthat some (not necessarily all) traffic carried on this QoS flow is subject\nto Reflective QoS.\n\nThe SMF shall also provide RQI for this SDF as part of the SDF information\nover N4 interface as described in 3GPP\u00a0TS\u00a023.501\u00a0[2].\n\nWhen the UPF receives this indication for an SDF, the UPF sets the RQI bit\nin the encapsulation header on the N3 reference point for every DL packet\ncorresponding to the SDF together with the QFI.\n\nWhen the PCF removes a PCC rule with the RQI or the PCF removes the RQI\nfrom a PCC rule, and if the PCC rule is the last PCC rule with the RQI\nbound to a QoS Flow, the SMF shall determines that the reflective QoS is no\nlonger applicable to the QoS Flow. In this case, the SMF should signal the\nremoval of the RQA from the QoS Flow QoS profile to the 5G-RAN and remove\nRQI in the corresponding SDF information provided to the UPF via N4\ninterface.\n\nWhen the UPF receives this instruction for the SDF, the UPF will no longer\nset the RQI bit in the encapsulation header on the N3 reference point.\n\nThe UPF continues to accept the UL traffic of the SDF for the originally\nauthorized QoS flow for an operator configurable time.\n\n  NOTE\u00a01:  This means that the detection and QoS enforcement instructions\n         which were applied before the SMF removed the indication to use\n         reflective QoS remain active in UL direction while the accounting\n         of the UL traffic is done according to the new instructions.\n\n  NOTE\u00a02:  The operator configurable time has to be at least as long as the\n         RQ Timer value to ensure that no UL packet would be dropped until\n         the UE derived QoS rule is deleted by the UE.\n\n\n5.9.6.4  Provisioning and Enforcement of authorized Reflective QoS\n           information per PDU session\n\nThe Reflective QoS information for the PDU session is provided to the UE as\npart of the PDU session establishment procedure.\n\nIn this case, the Reflective QoS information provided to the UE by the SMF,\nshall include the RQ Timer indicating the time Reflective QoS applies for\nall the derived QoS rules related to the non-GBR PCC rules for which\nReflective QoS applies via the User Plane for that PDU session.\n\n  Editor's note:  Whether the PCF provides the Reflective QoS information\n         to the SMF is FFS.\n\nIf the Reflective QoS information is provided to the SMF, the SMF shall\nprovide this information following the procedures described in the\ncorresponding NAS Technical Specification.\n\n  Editor's note:  The identity of the corresponding NAS Technical\n         Specification is FFS.\n\n\n", "Keywords": ""}, {"key": "5G QoS Identifier (5QI)", "numbering": "5.9.7.1", "title_level": 3, "desc": "5.9.7.1  5G QoS Identifier (5QI)\n\nA 5QI is a scalar that is used as a reference to 5G QoS characteristics\ni.e. access node-specific parameters that control QoS forwarding treatment\nfor the QoS flow (e.g. scheduling weights, admission thresholds, queue\nmanagement thresholds, link layer protocol configuration, etc.).\n\nThe standardized 5QI values have one-to-one mapping to a standardized\ncombination of 5G QoS characteristics as defined in subclause\u00a05.4.1 in\n3GPP\u00a0TS\u00a023.501\u00a0[2].\n\nThe 5G QoS characteristics for pre-configured 5QI values are pre-configured\nin the AN. The 5G QoS characteristics for dynamically assigned 5QI values\nare signalled as part of the authorized QoS.\n\n\n", "Keywords": ""}, {"key": "QoS Characteristics", "numbering": "5.9.7.2", "title_level": 3, "desc": "5.9.7.2  QoS Characteristics\n\nThe following QoS Characteristics are defined for non-standardised 5QI\nvalues:\n\nResource Type:\n\nThe Resource Type determines if the Service Data Flow is a GBR Service Data\nFlow, delay critical GBR or a Non-GBR Service Data Flow, i.e. if the\nresources for the related QoS flow are permanently allocated or not. GBR\nresource type and delay critical GBR resource type are treated the same,\nexcept that the definition of PDB and PER are different.\n\nPacket Delay Budget:\n\nThe Packet Delay Budget (PDB) defines an upper bound for the time in\nmilliseconds that a packet may be delayed between the UE and the UPF that\nterminates the N6 interface. For a certain 5QI the value of the PDB is the\nsame in uplink and downlink. In the case of 3GPP access, the PDB is used to\nsupport the configuration of scheduling and link layer functions (e.g. the\nsetting of scheduling priority weights and HARQ target operating points).\nFor a delay critical GBR flows, a packet delayed more than the PDB is\ncounted as lost.\n\nPacket Error Rate:\n\nThe Packet Error Rate (PER) defines an upper bound for the rate of SDUs\n(e.g. IP packets) that have been processed by the sender of a link layer\nprotocol (e.g. RLC in RAN of a 3GPP access) but that are not successfully\ndelivered by the corresponding receiver to the upper layer (e.g. PDCP in\nRAN of a 3GPP access). Thus, the PER defines an upper bound for a rate of\nnon-congestion related packet losses. The purpose of the PER is to allow\nfor appropriate link layer protocol configurations (e.g. RLC and HARQ in\nRAN of a 3GPP access). For a certain 5QI the value of the PER is the same\nin uplink and downlink. For QoS flows with delay critical GBR resource\ntype, a packet which is delayed more than PDB is counted as lost, and\nincluded in the PER.\n\nPriority Level:\n\nThe Priority level indicate a priority in scheduling resources among QoS\nflows. The Priority levels shall be used to differentiate between QoS flows\nof the same UE, and it shall also be used to differentiate between QoS\nflows from different UEs. Once all QoS requirements are fulfilled for the\nGBR QoS flows, spare resources can be used for any remaining traffic in an\nimplementation specific manner. The lowest Priority level value corresponds\nto the highest Priority.\n\nThe priority level may be signalled with standardized 5QIs, and if it is\nreceived, it overwrites the default value specified in QoS characteristics\nTable\u00a05.7.4.1 in 3GPP\u00a0TS\u00a023.501\u00a0[2].\n\nAveraging Window:\n\nThe Averaging window is defined only for GBR QoS flows. The Averaging\nwindow represents the duration over which the GFBR and MFBR shall be\ncalculated (e.g. (R)AN, UPF, UE). The averaging window is signalled with\n5QIs to the (R)AN and UPF, and if it is not received a standardized default\nvalue applies (for standardized 5QIs the value in the QoS characteristics\ntable\u00a05.7.4-1 defined in 3GPP\u00a0TS\u00a023.501\u00a0[2] applies). The Average Windows\nonly applies to GBR flows.\n\n  NOTE:  For non-standardized combinations of 5G QoS characteristics, a 5QI\n         value from the non-standardized value range together with the 5G\n         QoS characteristics are signalled over N7.\n\n\n", "Keywords": ""}, {"key": "Allocation Retention Priority", "numbering": "5.9.7.3", "title_level": 3, "desc": "5.9.7.3  Allocation Retention Priority\n\nThe ARP is used to indicate the priority of allocation and retention, the\npre-emption capability and pre-emption vulnerability for the Service Data\nFlow.\n\nThe Priority Level defines the relative importance of a resource request.\nThis allows deciding whether a new QoS flow may be accepted or needs to be\nrejected in case of resource limitations (typically used for admission\ncontrol of GBR traffic). It may also be used to decide which existing QoS\nflow to pre-empt during resource limitations.\n\nValues 1 to 15 are defined, with value 1 as the highest level of priority.\n\nValues 1 to 8 should only be assigned for services that are authorized to\nreceive prioritized treatment within an operator domain. Values 9 to 15 may\nbe assigned to resources that are authorized by the home network and thus\napplicable when a UE is roaming.\n\nThe pre-emption-capability of a Service Data Flow defines whether a service\ndata flow may get resources that were already assigned to another service\ndata flow with a lower priority level.\n\nThe pre-emption vulnerability of a Service Data Flow defines whether a\nservice data flow may lose the resources assigned to it in order to admit a\nservice data flow with higher priority level.\n\nThe pre-emption capability and the pre-emption vulnerability may be enabled\nor disabled.\n\n\n", "Keywords": ""}, {"key": "Guaranteed Bitrate (DL/UL)", "numbering": "5.9.7.4", "title_level": 3, "desc": "5.9.7.4  Guaranteed Bitrate (DL/UL)\n\nThe Guaranteed Bit Rate indicates the guaranteed bitrate in bits per second\nfor a downlink or uplink service data flow. For PDU types IPv4 and IPv6,\nthe bandwidth contains all the overhead coming from the IP-layer and the\nlayers above, e.g. IP, UDP, RTP and RTP payload.\n\n\n", "Keywords": ""}, {"key": "Maximum Bitrate (DL/UL)", "numbering": "5.9.7.5", "title_level": 3, "desc": "5.9.7.5  Maximum Bitrate (DL/UL)\n\nThe Maximum Bit Rate indicates the maximum bandwidth in bits per second for\na downlink or uplink service data flow. For PDU types IPv4 and IPv6, the\nbandwidth contains all the overhead coming from the IP-layer and the layers\nabove, e.g. IP, UDP, RTP and RTP payload.\n\n\n", "Keywords": ""}, {"key": "Notification Control", "numbering": "5.9.7.6", "title_level": 3, "desc": "5.9.7.6  Notification Control\n\nThe Notification control indicates whether notification should be made by\nthe RAN if the GFBR cannot be fulfilled for a Service Data Flow during the\nlifetime of the Service Data Flow. The RAN shall keep the QoS flow, and\nshould try to fulfil the GFBR. Upon receiving a notification from the RAN\nthat the GFBR cannot be fulfilled, the 5GC may initiate N2 signalling to\nmodify or remove the QoS Flow. Once conditions improve, and the GFBR is\nfulfilled again, the RAN sends a new notification, informing SMF that the\nGFBR can be fulfilled again. After a configured time, the RAN may send a\nsubsequent notification that the GFBR cannot be fulfilled.\n\nNotification control is applicable to GBR Service Data Flows.\n\n\n", "Keywords": ""}, {"key": "PDU Session Aggregate Maximum Bitrate (DL/UL)", "numbering": "5.9.7.7", "title_level": 3, "desc": "5.9.7.7  PDU Session Aggregate Maximum Bitrate (DL/UL)\n\nThe PDU Session Maximum Bitrate indicates the maximum aggregate bit rate in\nbits per seconds across all non-GBR QoS flows associated with the same PDU\nsession. The Session-AMBR is measured over an averaging window with a\nstandardized value.\n\n  Editor's note:  The standardized value of averaging window is to be\n         determined by Stage 2.\n\n\n", "Keywords": ""}, {"key": "UE Aggregate Maximum Bitrate (DL/UL)", "numbering": "5.9.7.8", "title_level": 3, "desc": "5.9.7.8  UE Aggregate Maximum Bitrate (DL/UL)\n\nThe UE Maximum Bitrate indicates the maximum aggregate bit rate in bits per\nseconds across all non-GBR QoS flows associated with a UE. The UE-AMBR is\nmeasured over an averaging window with a standardized value.\n\n  Editor's note:  The standardized value of averaging window is to be\n         determined by Stage 2.\n\n  NOTE:  This information is not provided by the policy framework.\n\n\n", "Keywords": ""}, {"key": "QoS mapping between Rx and N7", "numbering": "5.9.8", "title_level": 2, "desc": "5.9.8  QoS mapping between Rx and N7\n\nWhen an Rx session is initiated or modified, the PCF may derive Authorized\nQoS parameters from the service information provided by the AF.\n\nThe parameters include 5G QoS Identifier (5QI), Allocation and Retention\nPriority (ARP), and Maximum/Guaranteed Data Rate UL/DL.\n\nThe QoS mapping principles are defined in 3GPP\u00a0TS\u00a029.213\u00a0[68] with the\nexception that QCI is replaced by 5QI.\n\n  Editor's note:  If other QoS parameter mappings needs to be aligned with\n         5G QoS is FFS.\n\n  Editor's note:  To what extent 5QI characteristics are aligned with QCI\n         characteristics is FFS.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.10.1", "title_level": 2, "desc": "5.10.1 General\n\nThe PCF discovery and selection procedures are needed when there are\nmultiple and separately addressable PCFs in a PLMN. It is also possible\nthat a PCF may serve only specific DN(s).\n\nThese procedures correlate the AF service session establishment over N5 or\nRx with the associated PDU session (Session binding) handled over N7.\n\nThese procedures enable the AMF and SMF to address the PCF.\n\nThese procedures enable the NEF to address the PCF.\n\n\n", "Keywords": ""}, {"key": "PCF discovery and selection by the AMF", "numbering": "5.10.2", "title_level": 2, "desc": "5.10.2 PCF discovery and selection by the AMF\n\nThe AMF selects the PCF for a UE.\n\nThe AMF may utilize the Nnrf_NFDiscovery service of the Network Repository\nFunction to discover the PCF instance(s) unless PCF information is\navailable by other means, e.g. locally configured on AMF. Local operator\npolicies may be considered during the PCF selection.\n\n\n", "Keywords": ""}, {"key": "PCF discovery and selection by the SMF", "numbering": "5.10.3", "title_level": 2, "desc": "5.10.3 PCF discovery and selection by the SMF\n\nThe SMF selects the PCF for a PDU session. The selected PCF may be the same\nor a different one than the PCF selected by the AMF.\n\nThe SMF may utilize the Nnrf_NFDiscovery service of the Network Repository\nFunction to discover the PCF instance(s) unless PCF information is\navailable by other means, e.g. locally configured on SMF or received from\nthe AMF. The following factors may be considered during the PCF selection.\n\n  -  Local operator policies.\n\n  -  Selected Data Network Name (DNN).\n\n  -  PCF selected by the AMF by signalling PCF addressing information from\n    AMF to SMF. This is to select the same PCF for AMF and SMF.\n\nAs an alternative to the PCF selection by the SMF as described above, the\nSMF may utilize the PCF Binding Support Functionality (PCF BSF) to route\nthe Npcf_SMPolicyControl service operations to the PCF. In this\nalternative, the SMF shall route the Npcf_SMPolicyControl service\noperations to the PCF BSF.\n\nThe PCF BSF may utilize the Nnrf_NFDiscovery service to discover the PCF\ninstance(s) unless PCF information is available by other means, e.g.\nlocally configured based on operator polices that may use the DNN. The\nNpcf_SMPolicyControl_Get service operation shall contain enough information\nso that the PCF BSF can utilize the Nnrf_NFDiscovery service.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.10.4.1", "title_level": 3, "desc": "5.10.4.1 General\n\nWhen multiple and separately addressable PCFs have been deployed, a network\nfunctionality is required in order to ensure that an AF for a certain PDU\nsession reaches over N5/Rx the PCF holding the PDU session information.\nThis network functionality has the following characteristics:\n\n  -  It has information about the user identity, the DNN, the UE IP\n    address(es) and the selected PCF address for a certain PDU Session. It\n    shall receive information when an IP address is allocated or released\n    for a PDU session.\n\n  -  It encompasses the ability to determine the selected PCF address,\n    selected by the PCF discovery and selection function described in\n    subclause\u00a05.10.3, according to the information carried by the incoming\n    requests from the AF.\n\n  -  It encompasses the ability to proxy or redirect N5/Rx requests based\n    on the targeting an IP address of a UE.\n\n  Editor's note:  Additional information needed by the network\n         functionality, e.g. for network slicing, is FFS.\n\n\n", "Keywords": ""}, {"key": "The PCF Binding Support Functionality (PCF BSF)", "numbering": "5.10.4.2", "title_level": 3, "desc": "5.10.4.2 The PCF Binding Support Functionality (PCF BSF)\n\nThe PCF BSF has the following characteristics:\n\n  a) The PCF BSF has information about the user identity, the DNN, the UE\n    IP address(es) and the selected PCF address for a certain PDU Session.\n    This information is stored internally in the PCF BSF. Optionally, the\n    PCF BSF can store the binding information in the UDR, in the Structured\n    Data for Exposure repository.\n\n  Editor's note:  It is FFS how the binding information is stored in the\n         UDR.\n\n  b) For the storage of binding information, the PCF BSF shall receive the\n    Npcf_SMPolicyControl service operations when an UE IP address is\n    allocated or released for a PDU session. The PCF BSF obtains the new\n    binding information by acting on the Npcf_SMPolicyControl_Get and the\n    Npcf_SMPolicyControl_Delete service operations, and the\n    Nsmf_EventExposure_Notify service operation.\n\n  c) For the retrieval of binding information, the PCF BSF determines the\n    selected PCF address according to the information carried by the\n    incoming requests. The PCF BSF acts on the Npcf_PolicyAuthorization\n    service operations to get the information carried in the incoming\n    requests and obtains the selected PCF address from the stored binding\n    information.\n\n  d) When the PCF BSF stores the binding in a Structured Data for Exposure\n    repository in the UDR, an AF may obtain binding information from the\n    UDR via NEF, and send the AF request towards the PCF without requiring\n    the support of the PCF BSF.\n\n  Editor's note:  It is FFS how the binding information is retrieved from\n         the UDR.\n\n  e) The PCF BSF is able to proxy or redirect N5/Rx requests based on the\n    IP address of a UE.\n\nThe PCF BSF may be deployed standalone or may be collocated with other\nnetwork functions such as the PCF.\n\n\n", "Keywords": ""}, {"key": "AF Policy Request to Multiple PCFs", "numbering": "5.10.4.3", "title_level": 3, "desc": "5.10.4.3 AF Policy Request to Multiple PCFs\n\nAn AF may, via the NEF, provide policy requirements that apply to multiple\nUE (which, for example, belong to group of UE(s) defined by subscription or\nto any UE) and hence may apply to multiple PCFs.\n\nThe NEF, after validation of the application request and possible parameter\nmapping shall store the request from the application. When the UDR is\ndeployed, NEF may store the request from the application in the UDR.\n\n  Editor's note:  The details of NEF and UDR interaction are FFS.\n\nThe PCF(s) that need to receive application requests subscribe to receive\nnotifications from the NEF about such group of UE's.\n\n  NOTE:  The NEF selects the PCF's based on information received from the\n         AF. Such information may include DDN information, network slices\n         information, etc.\n\n  Editor's note:  It is FFS whether the PCF(s) can subscribe to/receive\n         notification of such application request information from the UDR.\n\n  Editor's note:  Slicing aspects are FFS.\n\n  Editor's note:  More detailed information on the procedures need to be\n         added later.\n\n\n", "Keywords": ""}, {"key": "Roaming scenarios", "numbering": "5.11", "title_level": 1, "desc": "5.11 Roaming scenarios\n\nFor a subscriber roaming in a visited PLMN, the H-PCF shall provide access\nand mobility management related policy to V-PCF via the N24 interface. The\nV-PCF shall authorize the received policy based on the roaming agreement\nand local policy and then provide to the AMF.\n\nIn LBO roaming, the H-PCF shall provide access and mobility management\nrelated policies and UE policies to the V-PCF. The V-PCF shall provide\naccess mobility management policies, UE policies and session management\npolicies in the VPLMN. The V-PCF subscribes to AMF related events at the\nAMF and session related events at the SMF as in the non-roaming case.\n\nIn Home Routed roaming, the H-PCF shall provide UE policies to the V-PLMN\nvia the V-PCF. The H-PCF that handles the session related policies\nsubscribes to the events via the H-SMF.\n\n\n", "Keywords": ""}, {"key": "Interworking with EPC", "numbering": "5.13", "title_level": 1, "desc": "5.13 Interworking with EPC\n\nA 3GPP 5G Core Network may interact with an EPC Network (see subclause\u00a04.3\nin 3GPP\u00a0TS\u00a023.501\u00a0[2]). In order to do so, the 5G Policy Framework will, in\naddition to the 5G functionality, provide EPC functionality as defined in\n3GPP\u00a0TS\u00a023.203\u00a0[4].\n\nThe following figure shows the non-roaming Policy framework for\ninterworking between 5GC and EPC:\n\n                                    [pic]\n\n  Figure 5.13-1: Non-roaming Policy framework for interworking between 5GC\n                                  and EPC.\n\nThe following figure shows the roaming Policy framework for Home Routed\ncase for interworking between 5GC and EPC:\n\n                                    [pic]\n\n    Figure 5.13-2: Home Routed roaming Policy framework for interworking\n                             between 5GC and EPC\n\nThe following figure shows the roaming Policy framework for Local Breakout\nfor interworking between 5GC and EPC:\n\n                                    [pic]\n\n   Figure 5.13-3: Local breakout roaming Policy framework for interworking\n                             between 5GC and EPC\n\n  NOTE\u00a01:  PCF + PCRF, SMF+ PGW-C and UPF + PGW-U are dedicated for\n         interworking between 5GC and EPC, which are optional and are based\n         on UE and network capabilities. UEs that are not subject to 5GS and\n         EPC interworking may be served by entities not dedicated for\n         interworking, i.e. either by PGW/PCRF or SMF/UPF/PCF.\n\n  NOTE\u00a02:  N4 interface is shown in the figures for completeness as it is\n         not part of the Policy Framework\n\nInterworking between 5GC and EPC is optional. When supported:\n\n  -  The PCF+PCRF related functionality shall be offered by the same\n    logical entity.\n\n  -  The SMF+PGW-C functionality shall be offered by the same logical\n    entity\n\n  -  N7 interface shall be supported between the PCF-PCRF and the SMF+PGW-\n    C. This interface should be as much transparent as possible to the\n    access network.\n\n  -  SMF+PGW-C shall be in charge of the applicable attribute derivation\n    when the user accesses via EPC/E-UTRAN.\n\n  Editor's note:  Reference points and logical entities in the interworking\n         architecture can require further work at stage 2 level.\n\n  -  The following derivation is required:QoS mapping derivation:\n\n    a) 5QI values shall be mapped into QCI values.\n\n    b) Notification control different from successful/non-successful\n       resource allocation will be ignored.\n\n    c) Session AMBR shall be mapped into the APN-AMBR.\n\n  Editor's note:  QoS mapping derivation is subject to changes and needs\n         further stage 2 work.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.14.1", "title_level": 2, "desc": "5.14.1 General\n\nIn order to support the IMS service, the PCF shall be able to receive media\nrelated information from the IMS and inform the IMS of PDU-CAN events.\n\nIn order to support interworking with IMS deployments supporting Rx\ninterface, the PCF shall support Rx interface as specified in\n3GPP\u00a0TS\u00a029.214\u00a0[56]. This facilitates the migration from the EPC to the 5GC\nwithout requiring these AFs to upgrade to support the\nNpcf_PolicyAuthorization service.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.15.1", "title_level": 2, "desc": "5.15.1 General\n\nTo allow the 5G system to support the invocation/revocation of IMS\nMultimedia Priority services from IMS deployments supporting the Rx\ninterface, the PCF shall support Rx interface as specified in\n3GPP\u00a0TS\u00a029.214\u00a0[56]. This facilitates the migration from the EPC to the 5GC\nwithout requiring these AFs to upgrade to support the\nNpcf_PolicyAuthorization service.\n\nWhen the PCF derives PCC rules corresponding to the MPS service, the ARP\nand 5QI (and if applicable, 5G QoS characteristics) shall be set as\nappropriate for the prioritized service.\n\nWhen the PCF derives PCC rules corresponding to the non-MPS service, the\nPCF shall generate the PCC rules as per normal procedures.\n\nAt the time the Priority PDU connectivity services is invoked (i.e. MPS EPS\nPriority and MPS Priority Level are set), the PCF shall upgrade the ARP\nand/or change 5QI (and if applicable, 5G QoS characteristics) also for the\nPCC rules corresponding to the non-MPS service. The PCF shall change the\nARP and/or 5QI (plus 5G QoS characteristics) modified for the Priority PDU\nconnectivity service to an appropriate value according to the PCF decision.\n\nWhen the PCF receives the Npcf_SMPolicyControl_Get service request from the\nSMF, the PCF shall check whether any of these parameters is stored in the\nUDR: MPS EPS Priority, MPS Priority Level and/or IMS Signalling Priority.\nThe PCF shall derive the applicable PCC rules and default QoS flow based on\nthat information. If the IMS Signalling Priority is set and the DNN is\ndedicated for IMS, the PCF shall assign the ARP corresponding to the MPS\nfor the default QoS flow and for the PCC rules corresponding to the IMS\nsignalling QoS flow. If the DNN is dedicated for IMS, the ARP shall be\nderived without considering IMS Signalling Priority.\n\n  NOTE\u00a01:  Subscription data for the MPS is provided to the PCF by the UDR\n         service.\n\nOnce the PCF receives a notification of a change in MPS EPS Priority, MPS\nPriority Level and/or IMS Signalling Priority from the UDR, the PCF shall\nmake the corresponding policy decisions (i.e. the ARP and/or 5QI (and if\napplicable, 5G QoS characteristics) change) and, if applicable, the PCF\nshall initiate the Npcf_SMPolicyControl_UpdateNotify service to provision\nthe modified data.\n\n  NOTE\u00a02:  The MPS Priority Level is one among other input data such as\n         operator policy for the PCF to set the ARP.\n\nWhenever one or more AF sessions of the MPS service are active within the\nsame PDU session, the PCF shall ensure that the ARP priority level of the\ndefault QoS flow is at least as high as the highest ARP priority level used\nby any authorized PCC rules belonging to the MPS service. If the ARP pre-\nemption capability is enabled for any of the authorized PCC rules belonging\nto the MPS service, the PCF shall also enable the ARP pre-emption\ncapability for the default QoS flow.\n\n  NOTE\u00a03:  This ensures that services using dedicated QoS flow are not\n         terminated because of default QoS flow with a lower ARP priority\n         level or disabled ARP pre-emption capability being dropped during\n         mobility events.\n\n  NOTE\u00a04:  This PCF capability does not cover interactions with services\n         other than MPS services.\n\n\n", "Keywords": ""}, {"key": "Invocation/Revocation of Priority PDU connectivity services", "numbering": "5.15.2", "title_level": 2, "desc": "5.15.2 Invocation/Revocation of Priority PDU connectivity services\n\nWhen a Priority PDU connectivity service is invoked, the PCF shall:\n\n  -  derive the corresponding PCC rules with the ARP and 5QI (plus 5G QoS\n    characteristics if applicable) set as appropriate for a prioritized\n    service;\n\n  -  set the ARP of the default QoS flow as appropriate for a Priority PDU\n    connectivity services under consideration of the requirement described\n    in subclause\u00a05.15.1;\n\n  -  set the 5QI of the default QoS flow as appropriate for the Priority\n    PDU connectivity service;\n\n  -  set the ARP of PCC rules installed before the activation of the\n    Priority PDU connectivity Service to the ARP as appropriate for the\n    Priority PDU connectivity Service under the consideration of the\n    requirements described in subclause\u00a05.15.1; and\n\n  -  set the 5QI of the PCC rules installed before the activation of the\n    Priority PDU connectivity Service to the 5QI (plus 5G QoS\n    characteristics if applicable) as appropriate for the Priority PDU\n    connectivity Service if modification of the 5QI (plus 5G QoS\n    characteristics if applicable) of the PCC rules is required.\n\nWhen a Priority PDU connectivity service is revoked, the PCF shall:\n\n  -  delete the PCC rules corresponding to the Priority PDU connectivity\n    Service if they were previously provided;\n\n  -  set the ARP of the default QoS flow to the normal ARP under the\n    consideration of the requirements described in subclause\u00a05.15.1;\n\n  -  set the 5QI (plus 5G QoS characteristics if applicable) of the default\n    QoS flow as appropriate for the PCF decision;\n\n  -  set the ARP of all active PCC rules as appropriate for the PCF under\n    the consideration of the requirements described in subclause\u00a05.15.1;\n    and\n\n  -  set the 5QI (plus 5G QoS characteristics if applicable) to an\n    appropriate value according to the PCF decision if modification of the\n    5QI (plus 5G QoS characteristics if applicable) of PCC rules is\n    required.\n\n  NOTE:  The activation/deactivation of the Priority PDU connectivity\n         service requires explicit invocation/revocation via UDR MPS user\n         profile (MPS EPS Priority, MPS Priority Level). The AF for MPS\n         priority service can also be used to provide Priority PDU\n         connectivity services using network-initiated resource allocation\n         procedures (via interaction with PCC) for originating accesses.\n\n\n", "Keywords": ""}, {"key": "Invocation/Revocation of IMS Multimedia Priority Services", "numbering": "5.15.3", "title_level": 2, "desc": "5.15.3 Invocation/Revocation of IMS Multimedia Priority Services\n\nIf the PCF receives service information including an MPS session indication\nand the service priority level from the P-CSCF or at reception of the\nindication that IMS Signalling Priority is active for the PDU session, the\nPCF shall under consideration of the requirements described in\nsubclause\u00a05.15.1.\n\n  -  set the ARP of the default QoS flow as appropriate for the prioritized\n    service;\n\n  -  if required, set the ARP of all PCC rules assigned to the IMS\n    signalling bearer as appropriate for IMS Multimedia priority services;\n    and\n\n  -  derive the PCC rules corresponding to the IMS Multimedia Priority\n    Service and set the ARP of these PCC rules based on the information\n    received over Rx.\n\nIf the PCF detects that the P-CSCF released all the MPS session and the IMS\nSignalling Priority has been deactivated for the PDU session the PCF shall\nunder consideration of the requirements described in subclause\u00a05.15.1:\n\n  -  delete the PCC rules corresponding to the IMS Multimedia Priority\n    Service;\n\n  -  set the ARP of the default QoS flow as appropriate for the IMS\n    Multimedia Priority set to inactive; and\n\n  -  replace the ARP of all PCC rules assigned to the IMS signalling bearer\n    as appropriate when the IMS Multimedia Priority is inactive.\n\n  Editor's note:  The above procedures may need be updated when the\n         corresponding requirements in 3GPP\u00a0TS\u00a023.203\u00a0[4] are updated.\n\n\n", "Keywords": ""}, {"key": "Emergency Services", "numbering": "5.16", "title_level": 1, "desc": "5.16 Emergency Services\n\nThe PCF shall be able to identify an emergency PDU session service upon PDU\nsession establishment with an emergency DNN over the Npcf_SMPolicyControl\nservice based interface.\n\n  Editor's note:  Further details will be added based on progress in SA2.\n\n\n", "Keywords": ""}, {"key": "Mission Critical Services", "numbering": "5.17", "title_level": 1, "desc": "5.17 Mission Critical Services\n\nTo allow the 5G system to interwork with AFs related to the Mission\nCritical services that support Rx interface as described in\n3GPP\u00a0TS\u00a022.280\u00a0[57] and 3GPP\u00a0TS\u00a023.379\u00a0[55], the PCF shall support the\ncorresponding Rx procedures and requirements defined in\n3GPP\u00a0TS\u00a029.214\u00a0[56]. This facilitates the migration from the EPC to the 5GC\nwithout requiring these AFs to upgrade to support Npcf and Naf service\nbased interfaces.\n\n  Editor's note:  Further details will be added based on progress in SA2.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.18.1", "title_level": 2, "desc": "5.18.1 General\n\nThe binding mechanism associates the session information with the QoS flow\nthat is intended to carry the service data flow(s).\n\nThe binding mechanism includes three steps:\n\n  1. Session binding.\n\n  2. PCC rule authorization.\n\n  3. QoS flow binding.\n\nThe Session binding function receives the AF session information and\ndetermines the relevant PDU session. With this information the PCC rule\nauthorization function runs the policy rules and constructs the PCC\nrule(s), if the authorization is granted. Finally, the QoS flow binding\nfunction selects the QoS flow(s) to carry the service data flow (defined in\na PCC rule by means of the SDF template), within the PDU session.\n\nThe PCC rule authorization function and the QoS flow binding function can\ntake place without the Session binding function at certain PDU session\nevents (e.g. request of SM related policies initiated by the SMF). The PCF\nmay authorize dynamic PCC rules for service data flows without a\ncorresponding AF session.\n\n  NOTE:  The relation between AF sessions and rules depends only on the\n         operator configuration. An AF session can be covered by one or more\n         PCC rules, if applicable (e.g. one rule per media component of an\n         IMS session).\n\n\n", "Keywords": ""}, {"key": "Session Binding", "numbering": "5.18.2", "title_level": 2, "desc": "5.18.2 Session Binding\n\nThe Session binding is the association of the AF session information to one\nand only one PDU session.\n\nWhen the PCF receives the service information from the AF, the PCF shall\nperform the session binding and shall associate the described service IP\nflows within the AF session information (and therefore the applicable PCC\nrules) to one and only one existing PDU session. This association is done\ncomparing the following parameters received from the AF with the\ncorresponding PDU session parameters.\n\n  a) The UE IPv4 address or IPv6 network prefix.\n\n  b) The UE identity (of the same kind e.g. SUPI), if available.\n\n  NOTE:  In case the UE identity in the access network and the application\n         level identity for the user are of different kinds, the PCF needs\n         to maintain, or have access to, the mapping between the identities.\n         Such mapping is outside the scope of the present document.\n\n  c) The information about the data network (DNN) the user is accessing, if\n    available.\n\n  Editor's note:  It's FFS that how to solve the following scenario: Within\n         a PLMN, there are several separate IP address domains, with SMF(s)\n         that allocate Ipv4 IP addresses out of the same private address\n         range to UEs for the UPF(s) which located in the different IP\n         address domain. The same IP address can thus be allocated to UEs\n         served by UPFs in different address domains. If one PCF controls\n         several SMFs which has allocated the same Ipv4 address for the UPFs\n         in different IP address domains to the UE, the UE IP address is\n         thus not sufficient for the session binding. An AF can serve UEs in\n         different IP address domains, either by having direct IP interfaces\n         to those domains, or by having interconnections via NATs in the\n         user plane between UPFs and the AF. If a NAT is used, the AF\n         obtains the IP address allocated to the UE via application level\n         signalling and supplies it for the session binding to the PCF. The\n         AF supplies a Domain identifier denoting the IP address domain\n         behind the NAT in addition. The AF can derive the appropriate value\n         from the source address (allocated by the NAT) of incoming user\n         plane packets.\n\nThe PCF shall identify the PCC rules affected by the AF session\ninformation, including new PCC rules to be installed and existing PCC rules\nto be modified or removed.\n\nIf the PCF is not capable of executing the Session binding, the PCF shall\nreject the AF request.\n\n  Editor's note:  Session Binding mechanism for Ethernet PDU session type\n         is FFS.\n\n\n", "Keywords": ""}, {"key": "PCC Rule Authorization", "numbering": "5.18.3", "title_level": 2, "desc": "5.18.3 PCC Rule Authorization\n\nThe PCC rule authorization is the selection of the 5G QoS parameters for\nthe PCC rules.\n\nThe PCF shall perform the PCC rule authorization after successful Session\nbinding for dynamic PCC rules belonging to the AF sessions, as well as for\nthe PCC rules without the corresponding AF sessions. By the authorization\nprocess the PCF determines whether the user can have access to the\nrequested services and under what constraints. If so, the PCC rules are\ncreated or modified. If the Session information is not authorized, a\nnegative answer shall be issued to the AF.\n\nThe PCF shall perform the PCC rule authorization function when the PCF\nreceives the Session information from the AF, when the PCF receives a\nnotification of PDU session events (e.g. establishment, modification) from\nthe SMF, or when the PCF receives a notification from the UDR that calls\nfor a policy decision.\n\nFor the authorization of a PCC rule, the PCF shall consider any 5GC\nspecific restrictions, the AF service information and other information\navailable to the PCF (e.g. user's subscription information, operator\npolicies). The PCF assigns appropriate 5G QoS parameters (5QI, QoS\ncharacteristics, ARP, GBR, MBR, QNC), that can be supported by the access\nnetwork, to each PCC rule.\n\nThe authorization of a PCC rule associated with an emergency service shall\nbe supported without subscription information (e.g. information stored in\nthe UDR). The PCF shall apply policies configured for the emergency\nservice.\n\n\n", "Keywords": ""}, {"key": "QoS Flow Binding", "numbering": "5.18.4", "title_level": 2, "desc": "5.18.4 QoS Flow Binding\n\nThe QoS flow binding is the association of the PCC rule to a QoS flow,\nidentified by the QFI, within a PDU session. The QoS flow binding function\nresides in the SMF.\n\nThe set of 5G QoS parameters assigned by the PCF to the service data flow\nis the main input for QFI allocation.\n\nWhen the PCC rule provides an indication for the service data flow(s) to be\nbound to the QoS flow of the default QoS rule (i.e. the \"Bind to QoS flow\nof the default QoS rule\" parameter as defined in subclause\u00a05.7.1), the SMF\nshall use this indication instead of the set of 5G QoS parameters in the\nPCC rule for the QoS flow binding and keep the binding as long as this\nparameter remains set.\n\nWhen \"Bind to Default QoS flow of the default QoS rule\" parameter is not\nreceived, the allocation of QFI to the service data flow(s) is based on the\n5QI, ARP and QNC parameters. When the PCF provisions a PCC Rule, the SMF\nshall evaluate whether a QoS flow with the same 5QI/ARP/QNC combination\nexists. If a QoS flow with the same 5QI/ARP/QNC combination exists, the SMF\nallocates the same QFI to the service data flows that are assigned the same\nvalues for of the 5QI, ARP and QNC. If no QoS flow exists, the SMF assigns\na QFI for a new QoS flow, derives the QoS parameters for a new QoS flow,\nusing authorized QoS in the PCC Rule, and binds the PCC Rule to the QoS\nflow.\n\n  NOTE\u00a01:  For non-GBR QoS flows, QNC is not relevant.\n\n  NOTE\u00a02:  For non-GBR QoS flows only, and when standardized 5QIs or pre-\n         configured 5QIs are used, the 5QI value can be used as the QFI of\n         the QoS flow. However, the pre-configured 5QI values cannot be used\n         when the UE is roaming.\n\n  NOTE\u00a03:  For an unstructured PDU session, there is maximum of one QoS\n         flow.\n\nThe PCF shall supply the PCC rules to be installed, modified, or removed to\nthe SMF. The SMF shall evaluate whether it is possible to use one of the\nexisting QoS flows or not, and if applicable, shall send the QoS profile to\nthe (R)AN over the N2 interface, the SDF template and the QoS rule\ninformation to the UPF over the N4 interface, and the QoS rule to the UE.\n\nIf the PCF removes an indication for the service data flow(s) to be bound\nto the QoS flow of the default QoS rule the binding is created between\nservice data flow(s) and the QoS flow which have the same 5QI, ARP and QNC.\n\nIf the PCC rule is removed, the SMF shall remove the association of the PCC\nrule to the QoS flow. Whenever the authorized QoS of a PCC rule changes,\nthe existing QFI allocation shall be re-evaluated, i.e. the allocation\nprocedure, is performed. The re-evaluation may, for a service data flow,\nrequire a new binding with another QoS flow.\n\n  NOTE\u00a04:  A QoS change of the default 5QI/ARP/QNC values causes the QoS\n         flow binding for PCC rules previously bound to the QoS flow of the\n         default QoS rule set to be re-evaluated. At the end of the re-\n         evaluation of the PCC rules there needs to be at least one PCC rule\n         that successfully binds with the QoS flow of the default QoS rule\n         set.\n\nWhen a QoS flow is removed the SMF shall report to the PCF that the PCC\nRules bound to the corresponding QoS flow are removed.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.19.1", "title_level": 2, "desc": "5.19.1 General\n\nAn Application Function (AF) may send requests to influence SMF routing\ndecisions for traffic of PDU session, for event subscription or for both.\nThe AF requests may influence UPF (re)selection and allow routing user\ntraffic to a local access to a Data Network (identified by a DNAI).\n\n\n", "Keywords": ""}, {"key": "Support of traffic routing request", "numbering": "5.19.2", "title_level": 2, "desc": "5.19.2 Support of traffic routing request\n\nApplication Function influence on traffic routing only apples to non-\nroaming and to LBO deployments. Application Function influence on traffic\nrouting does not apply in case of Home Routed deployments. PCF shall not\napply AF requests targeting \"all users\" to PDU sessions established in Home\nRouted mode.\n\n  NOTE\u00a01:  The AF can issue requests on behalf of applications not owned by\n         the PLMN serving the UE.\n\n  NOTE\u00a02:  The AF can be in charge of the (re)selection or relocation of\n         the applications within the local DN. Such functionality is not\n         defined.\n\nThe AF requests are sent to the PCF via Npcf. In case of requests regarding\non-going PDU sessions of individual UEs the communication can be directly\nwith the PCF or via the NEF. Requests that target multiple UE(s) are sent\nvia the NEF and may target multiple PCF(s). The PCF(s) transform(s) the AF\nrequests into policies that apply to PDU sessions. When the AF has\nsubscribed to UP path management event notifications from SMF, such\nnotifications are sent either directly to the AF or via an NEF (without\ninvolving the PCF).\n\nIf the AF request targets a specific ongoing session, the AF may send its\nrequest directly to the PCF or via the NEF. If the AF request is not for a\nspecific ongoing session, the AF sends its request via NEF.\n\n  Editors' note:  It is FFS whether the AF Request may correspond to a list\n         IP addresses / IPv6 Prefixed of on-going PDU sessions. If that were\n         the case the request would have to be forked to multiple PCF.\n\nWhen the AF request is considered as semi-permanent (i.e. does not target\nan individual IP address / Prefix allocated to a UE) the PCF stores the AF\nrequest for usage by future PDU sessions. When the PCF determines if\nexisting PDU sessions are impacted by the AF request, the PCF updates the\nSMF with corresponding new policy rule(s) via a PDU session modification\nfor each of these PDU sessions.\n\nThe AF traffic routing requests may contain at least:\n\n  1) Information to identify the traffic to be routed. The traffic can be\n    identified in the AF request by:\n\n    -  Either a DNN and possibly slicing information (S-NSSAI) or an AF-\n       Service-Identifier.\n\n    -  When the AF provides an AF-Service-Identifier i.e. an identifier of\n       the service on behalf of which the AF is issuing the request, the 5G\n       Core maps this identifier into a target DNN and slicing information\n       (S-NSSAI).\n\n    -  When the NEF process the AF request, the AF-Service-Identifier may\n       be used to authorize the AF request.\n\n    -  An application identifier or traffic filtering information (e.g. 5\n       Tuple). The application identifier refers to an application handling\n       UP traffic and is used by the UPF to detect the traffic of the\n       application.\n\n  2) Information about the N6 traffic routing requirements for traffic\n    identified as defined in bullet\u00a01). This is provided implicitly by\n    reference, in the form of a list of routing profile IDs corresponding\n    each to a DNAI, if the details of the N6 routing requirements are\n    preconfigured in SMF. Otherwise, it is provided explicitly, in the form\n    of a list of DNAIs and associated N6 traffic routing information. Based\n    on the N6 traffic routing information, the PCF determines traffic\n    steering policy IDs sent to SMF that each corresponds to a steering\n    behaviour which is preconfigured on the SMF or UPF.\n\n  3) Potential locations of applications towards which the traffic routing\n    should apply. The potential location of application is expressed as a\n    list of DNAI(s). If the AF interacts with the PCF via the NEF, the NEF\n    may map the AF-Service-Identifier information to a list of DNAI(s). The\n    DNAI(s) may be used for UPF (re)selection.\n\n  4) Information on the UE(s) whose traffic is to be routed. This may\n    correspond to:\n\n    -  Individual UEs identified using either an External Identifier or a\n       MSISDN or an IP address/Prefix.\n\n    -  groups of UEs identified by an External Group Identifier when the AF\n       interacts via the NEF, or Internal-Group Identifier when the AF\n       interacts directly with the PCF.\n\n    -  any UE the request applies to any UE accessing the combination of\n       DNN, S-NSSAI and DNAI(s).\n\n    -  In case of PDU type is IPv4/IPv6, when the AF provides an IP\n       address/Prefix this allows the PCF to identify the PDU session for\n       which this request applies and the AF request applies only to the\n       current PDU session of a UE. In this case, additional information\n       such as the UE identity may also be provided to help the PCF to\n       identify the correct PDU session.\n\n    -  Otherwise the request shall apply to any existing or future PDU\n       session that matches the parameters in the AF request.\n\n    -  When the AF request targets any UE or a group of UE, the AF request\n       is likely to influence multiple PDU sessions possibly served by\n       multiple SMFs and PCFs.\n\n    -  When the AF request targets a group of UE it provides one or several\n       identifiers in its request. The group identifiers provided by the AF\n       are mapped to Internal-Group identifiers. Members of the group have\n       this Group Identifier in their subscription. The Internal-Group\n       Identifier is stored in UDM, retrieved by SMF from UDM and passed by\n       SMF to PCF at PDU session set-up. The PCF can then map the AF\n       requests with user subscription and determine whether an AF request\n       targeting a Group of users applies to a PDU session.\n\n  5) Information on when (temporal validity condition) the traffic routing\n    is to apply.\n\n  NOTE\u00a03:  This allows to provide an expiry time for the AF request.\n\n  6) Information on where (spatial validity condition) the UE(s) are to be\n    when the traffic routing applies. This is provided in the form of\n    area(s) of interest. If the AF interacts with the PCF via the NEF, it\n    may provide a list of geographic zone identifier(s) and the NEF maps\n    the information to areas of interest based on pre-configuration.\n\n  7) AF subscription to following events:\n\n    -  Early and/or late notifications about UP path management events: A\n       change of DNAI for the UPF serving the UE. The corresponding\n       notification about a change from source DNAI to target DNAI sent by\n       the SMF to the AF shall include the Identity of the target DNAI, the\n       IP address/prefix of the UE, type of notification (i.e. early\n       notification or late notification), the notification may include the\n       UE identity (e.g. an External Identifier or a MSISDN) and N6 routing\n       information.\n\n  NOTE\u00a04:  The subscription can be for early notification and/or late\n         notification. In case of a subscription for early notification, the\n         SMF sends the notification before executing the UPF (re)selection.\n         In case of a subscription for late notification, the SMF sends the\n         notification when the UPF (re)selection has completed.\n\n  8) An AF transaction identifier referring to the AF request. This allows\n    the AF to update or remove the AF influence request.\n\nBased on information received from the AF, operator's policy, etc, the PCF\nshall authorize the request and determine the traffic steering policy. The\ntraffic steering policy indicates the list of traffic steering policy IDs\nconfigured in SMF and if the N6 routing information associated to the\napplication is explicitly provided by the AF, the N6 routing information.\nThe traffic steering policy IDs are related to the mechanism enabling\ntraffic steering to the DN.\n\n  NOTE\u00a05:  The DNAIs are related to the information considered by SMF for\n         UPF selection, e.g. for diverting (locally) some traffic matching\n         traffic filters provided by the PCF.\n\nThen the PCF shall acknowledge the request either to the AF or to the NEF.\n\nFor PDU session that corresponds to the AF request, the PCC rules provided\nby the PCF to the SMF may contain information about the DNAI(s) towards\nwhich the traffic routing should apply and/or a list of traffic steering\npolicy IDs and/or information on AF subscription to SMF events. If the N6\nrouting information associated to the application is explicitly provided in\nthe AF request, the PCF shall also provide the N6 routing information to\nthe SMF as part of PCC rules. This is done by providing policies at PDU-CAN\nsession establishment or by initiating a PDU-CAN Session Modification\nprocedure.\n\nThe PCF evaluates the temporal validity condition of the AF request and\ninforms the SMF to activate or deactivate the corresponding PCC rules\naccording to the evaluation result.\n\n  Editor's note:  Whether spatial validity conditions are resolved at the\n         PCF or the SMF is FFS.\n\nThe SMF receives PCC rules that contain list of DNAI(s) from the PCF. When\nthe PCC rules are activated, the SMF may, based on local policies, take the\ninformation in the PCC rules into account to:\n\n  -  (re)select UPF(s) for PDU sessions. The SMF is responsible for\n    handling the mapping between the UE location (TAI / Cell-Id) and\n    DNAI(s) associated with UPF and applications and of the selection of\n    the UPF(s) that serve a PDU session.\n\n  -  activate mechanisms for traffic multi-homing or enforcement of an UL\n    Classifier (UL CL).\n\n  NOTE\u00a06:  Traffic forwarding rules and associated N6 routing information\n         if provided can be provisioned to the UPF.\n\n  -  inform the Application Function of the (re)selection of the UP path\n    (change of DNAI).\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "5.20.1", "title_level": 2, "desc": "5.20.1 General\n\nEvent reporting functionality in 5G is realized by the PCF, the SMF and the\nAMF. The SMF performs PDU session related event triggers detection and\nreports the occurred events to the PCF using the Nsmf_EventExposure\nservice. The AMF performs UE mobility related event triggers detection and\nreports the occurred events to the PCF using the Namf_EventExposure\nservice.\n\n\n", "Keywords": ""}, {"key": "SMF Event triggers handling", "numbering": "5.20.2", "title_level": 2, "desc": "5.20.2 SMF Event triggers handling\n\nThe SMF performs PDU session related event trigger detection. When an event\nmatching an armed event trigger occurs, the SMF shall report the occurred\nevent to the PCF by using the Nsmf_EventExposure_Notify service operation.\n\nWhen multiple events occur simultaneously, the SMF may report the occurred\nevents to the PCF within the same Nsmf_EventExposure_Notify service\noperation.\n\nThe event triggers define the conditions when the SMF shall interact again\nwith the PCF after an PDU session establishment.\n\nThe PCF subscribes to new event triggers with the SMF or removes armed\nevent triggers from the SMF using the Nsmf_EventExposure service (if\napplicable). It shall be possible for the SMF to react on the event\ntriggers. The PDU session related event triggers applicable for 5G are\nlisted in table\u00a05.20.2-1.\n\nIf the PCF wants to:\n\n  -  create subscription to one or more SMF detected event triggers; or\n\n  -  modify previously created subscription to SMF detected event triggers;\n\nthe PCF shall send the Nsmf_EventExposure_Subscribe service operation to\nthe SMF.\n\nIf the PCF wants to delete previously created subscription to SMF detected\nevent triggers the PCF shall send the Nsmf_EventExposure_UnSubscribe\nservice operation to the SMF.\n\nWhen an event matching an event trigger occurs, the SMF shall report the\noccurred event to the PCF by using the Nsmf_EventExposure_Notify service\noperation.\n\n  NOTE:  For the HTTP methods and resources to realize the\n         Nsmf_EventExposure service operations see subclause\u00a05.4.5.3.\n\n      Table 5.20.2-1: SMF detected event triggers to be reported to PCF\n\n|Event trigger  |Event trigger             |Description                     |\n|stage 2        |stage 3 definition        |                                |\n|definition     |                          |                                |\n|PLMN change    |PLMN_CHANGE               |The UE has moved to another     |\n|               |                          |operators' domain.              |\n|Session-AMBR   |SESSION_AMBR_CHANGE       |The subscribed Session-AMBR has |\n|change         |                          |changed.                        |\n|               |                          |                                |\n|               |                          |The Session-AMBR change event   |\n|               |                          |trigger shall trigger the PCF   |\n|               |                          |interaction for all changes in  |\n|               |                          |the data received in the SMF    |\n|               |                          |from the UDM.                   |\n|Default QoS    |DEFAULT_QOS_CHANGE        |The subscribed QoS has changed. |\n|change         |                          |                                |\n|               |                          |The default QoS change event    |\n|               |                          |trigger reports a change in the |\n|               |                          |default 5QI/ARP retrieved by the|\n|               |                          |SMF from the UDM, as explained  |\n|               |                          |in subclause\u00a05.7.2.7 of         |\n|               |                          |3GPP\u00a0TS\u00a023.501\u00a0[2].             |\n|               |                          |The default QoS change event    |\n|               |                          |trigger shall trigger the PCF   |\n|               |                          |interaction for all changes in  |\n|               |                          |the data received in the SMF    |\n|               |                          |from the UDM.                   |\n|Change in type |ACCESS_TYPE_CHANGE        |The access type of the PDU      |\n|of Access Type |                          |session has changed.            |\n|Location change|SERVING_AREA_CHANGE       |The serving area of the UE has  |\n|(serving area) |                          |changed.                        |\n|Location change|USER_LOCATION_CHANGE      |The serving core network node of|\n|(serving CN    |                          |the UE has changed.             |\n|node)          |                          |                                |\n|Change of UE   |CHANGE_OF_UE_PRESENCE_IN_ |The UE is entering/leaving a    |\n|presence in    |PRESENCE_REPORTING_AREA   |Presence Reporting Area.        |\n|Presence       |                          |                                |\n|Reporting Area |                          |                                |\n|Out of credit  |OUT_OF_CREDIT             |Credit is no longer available.  |\n|Enforced PCC   |REVALIDATION_TIMEOUT      |SMF is performing a PCC rules   |\n|rule request   |                          |request as instructed by the    |\n|               |                          |PCF.                            |\n|               |                          |The enforced PCC rule request   |\n|               |                          |event trigger shall trigger the |\n|               |                          |SMF interaction to request PCC  |\n|               |                          |rules from the PCF for an       |\n|               |                          |established PDU session. This   |\n|               |                          |SMF interaction shall take place|\n|               |                          |within the Revalidation time    |\n|               |                          |limit set by the PCF in the PDU |\n|               |                          |session related policy          |\n|               |                          |information.                    |\n|UE IP address  |UE_IP_ADDRESS_ALLOCATE    |A UE IP address has been        |\n|change         |                          |allocated/released.             |\n|               |                          |                                |\n|               |                          |The UE IP address change event  |\n|               |                          |trigger shall trigger the SMF   |\n|               |                          |interaction with the PCF in case|\n|               |                          |a UE IP address is allocated or |\n|               |                          |released during the lifetime of |\n|               |                          |the IP session.                 |\n|               |UE_IP_ADDRESS_RELEASE     |                                |\n|Access Network |CHARGING_CORRELATION_     |Access Network Charging         |\n|Charging       |EXCHANGE                  |Correlation Information has been|\n|Correlation    |                          |assigned.                       |\n|Information    |                          |                                |\n|               |                          |The Access Network Charging     |\n|               |                          |Correlation Information event   |\n|               |                          |trigger shall trigger the SMF to|\n|               |                          |report the assigned access      |\n|               |                          |network charging identifier for |\n|               |                          |the PCC rules that are          |\n|               |                          |accompanied with a request for  |\n|               |                          |this event at activation.       |\n|Usage report   |USAGE_REPORT              |The PDU session or the          |\n|               |                          |Monitoring key specific         |\n|               |                          |resources consumed by a UE      |\n|               |                          |either reached the threshold or |\n|               |                          |needs to be reported for other  |\n|               |                          |reasons. (NOTE\u00a01)               |\n|Start of       |APPLICATION_TRAFFIC_START |The start or the stop of        |\n|application    |                          |application traffic has been    |\n|traffic        |                          |detected.                       |\n|detection and  |                          |The Start of application traffic|\n|Stop of        |                          |detection and Stop of           |\n|application    |                          |application traffic detection   |\n|traffic        |                          |events shall trigger an         |\n|detection      |                          |interaction with PCF once the   |\n|               |                          |requested application traffic is|\n|               |                          |detected (i.e. Start of         |\n|               |                          |application traffic detection)  |\n|               |                          |or the end of the requested     |\n|               |                          |application traffic is detected |\n|               |                          |(i.e. Stop of application       |\n|               |                          |traffic detection) unless it is |\n|               |                          |requested within a specific PCC |\n|               |                          |rule to mute such a notification|\n|               |                          |for solicited application       |\n|               |                          |reporting or unconditionally in |\n|               |                          |case of unsolicited application |\n|               |                          |reporting. (NOTE\u00a02)             |\n|               |APPLICATION_TRAFFIC_STOP  |                                |\n|Access Network |ACCESS_NETWORK_INFO_REPORT|Access information as specified |\n|Information    |                          |in the Access Network           |\n|report         |                          |Information Reporting part of a |\n|               |                          |PCC rule.                       |\n|               |                          |If the event trigger for Access |\n|               |                          |Network Information reporting is|\n|               |                          |set, the SMF shall check the    |\n|               |                          |need for access network         |\n|               |                          |information reporting after     |\n|               |                          |successful installation/        |\n|               |                          |modification or removal of a PCC|\n|               |                          |rule or upon termination of the |\n|               |                          |PDU session. The SMF shall check|\n|               |                          |the Access Network Information  |\n|               |                          |report parameters (User Location|\n|               |                          |Report, UE Timezone Report) of  |\n|               |                          |the PCC rules and report the    |\n|               |                          |access network information to   |\n|               |                          |the PCF. The SMF shall not      |\n|               |                          |report any subsequent access    |\n|               |                          |network information updates     |\n|               |                          |received from the PDU session   |\n|               |                          |without any previous updates of |\n|               |                          |related PCC rule unless the     |\n|               |                          |associated QoS flow or PDU      |\n|               |                          |session has been released.      |\n|               |                          |(NOTE\u00a03, NOTE\u00a04)                |\n|Credit         |CREDIT_MANAGEMENT_SESSION_|Transient/Permanent Failure as  |\n|management     |FAILURE                   |specified by the OCS.           |\n|session failure|                          |The Credit management session   |\n|               |                          |failure event trigger shall     |\n|               |                          |trigger a SMF interaction with  |\n|               |                          |the PCF to inform about a credit|\n|               |                          |management session failure and  |\n|               |                          |to indicate the failure reason, |\n|               |                          |and the affected PCC rules.     |\n|-              |UE_TIME_ZONE_CHANGE       |Indicates a change in the time  |\n|               |                          |zone the UE is currently        |\n|               |                          |located.                        |\n|-              |RAT_TYPE_CHANGE           |Triggered upon a change in RAT  |\n|               |                          |type (FFS).                     |\n|-              |REALLOCATION_OF_CREDIT    |FFS                             |\n|-              |SUCCESSFUL_RESOURCE_      |Indicates that resources have   |\n|               |ALLOCATION                |been successfully allocated for |\n|               |                          |a PCC rule.                     |\n|NOTE\u00a01: If the Usage report event trigger is set and the volume or the time|\n|thresholds, earlier provided by the PCF, are reached, the SMF shall report |\n|this event to the PCF. If both volume and time thresholds were provided and|\n|the thresholds, for one of the measurements, are reached, the SMF shall    |\n|report this event to the PCF and the accumulated usage since last report   |\n|shall be reported for both measurements.                                   |\n|NOTE\u00a02: The application identifier and service data flow descriptions, if  |\n|deducible, shall also be included in the report. An application instance   |\n|identifier shall be included in the report both for Start and for Stop of  |\n|application traffic detection when service data flow descriptions are      |\n|deductible. This is done to unambiguously match the Start and the Stop     |\n|events.                                                                    |\n|NOTE\u00a03: If the Access Network Information report parameter for the User    |\n|Location Report is set and the user location (e.g. cell) is not available  |\n|to the SMF, the SMF shall provide the serving PLMN identifier to the PCF   |\n|which shall forward it to the AF.                                          |\n|NOTE\u00a04: If the SMF receives a request to install/modify or remove a PCC    |\n|rule with Access Network Information report parameters (User Location      |\n|Report, UE Timezone Report) set, the SMF shall initiate a PDU session      |\n|modification to retrieve the current access network information of the UE  |\n|and forward it to the PCF afterwards.                                      |\n\n\nUpon reception of the Nsmf_EventExposure_Notify service operation:\n\n  -  if the PCF decides to modify the SMF related policies, then the PCF\n    shall invoke the Npcf_SMPolicyControl_UpdateNotify service operation;\n\n  -  if the PCF decides to modify the subscribed event triggers, then the\n    PCF shall invoke the Nsmf_EventExposure_Subscribe service operation to\n    the SMF; or\n\n  -  if the PCF decides to delete the subscribed event triggers, then the\n    PCF shall invoke the Nsmf_EventExposure_Unsubscribe service operation\n    to the SMF.\n\n\n", "Keywords": ""}, {"key": "AMF Event triggers handling", "numbering": "5.20.3", "title_level": 2, "desc": "5.20.3 AMF Event triggers handling\n\nThe PCF may subscribe to the event triggers at the AMF by invoking the\nNamf_EventExposure_Subscribe service operation.\n\nThe Namf_EventExposure_Subscribe service operation is initiated if the PCF\nwants to:\n\n  -  create subscription to one or more AMF detected event triggers; or\n\n  -  modify previously created subscription to AMF detected event triggers.\n\nIf the PCF wants to delete previously created subscription to AMF detected\nevent triggers the PCF shall send the Namf_EventExposure_UnSubscribe\nservice operation to the AMF.\n\nWhen an event matching an armed event trigger occurs, the AMF shall report\nthe occurred event to the PCF by using the Namf_EventExposure_Notify\nservice operation. The AMF shall address the event notification to the\nNotification URI provided by the PCF in the Namf_EventExposure_Subscribe\nservice operation.\n\nWhen multiple events occur simultaneously, the AMF may report the occurred\nevents to the PCF within the same Namf_EventExposure_Notify service\noperation.\n\n  NOTE:  For the HTTP methods and resources to realize the\n         Namf_EventExposure service operations see 3GPP\u00a0TS\u00a029.518\u00a0[72],\n         since the Namf_EventExposure service is out of scope of this\n         document.\n\nThe AMF detected event triggers to be reported to the PCF are listed in\ntable\u00a05.20.3-1 and define the conditions when the AMF shall notify the PCF\nthat a certain event occurred.\n\n      Table 5.20.3-1: AMF detected event triggers to be reported to PCF\n\n|Event trigger                |Description                                |\n|Location change (tracking    |The tracking area of the UE has changed.   |\n|area)                        |                                           |\n|Change of UE presence in Area|The UE is entering/leaving a Presence      |\n|of Interest                  |Reporting Area of interest.                |\n|Service Area Restriction     |The subscribed service area restriction    |\n|change                       |information has changed.                   |\n|RFSP index change            |The subscribed RFSP index has changed.     |\n\n\nUpon reception of the Namf_EventExposure_Notify service operation,\n\n  -  if the PCF decides to modify UE policies, or Access and Mobility\n    policies, then the PCF shall invoke the\n    Npcf_AMPolicyControl_UpdateNotify service operation towards the AMF;\n\n  -  if the PCF decides to modify the subscribed events, then the PCF shall\n    invoke the Namf_EventExposure_Subscribe service operation towards the\n    AMF; or\n\n  -  if the PCF decides to delete the subscribed events, then the PCF shall\n    invoke Namf_EventExposure_Unsubscribe service operation towards the\n    AMF.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "6.1.1", "title_level": 2, "desc": "6.1.1  General\n\nThe PDU-CAN domain can interwork with IP networks and networks handling non-\nIP data services. When interworking with the IP networks, the PDU-CAN\ndomain can operator IPv4 or IPv6. The interworking point with the external\nnetworks is at N6 reference point. This interworking point is shown in the\nfollowing figure.\n\n                                    [pic]\n\n                Figure 6.1.1-1: External network interworking\n\nThe UPF for interworking with the external network is the access point of\nthe PDU-CAN domain. See 3GPP\u00a0TS\u00a023.501\u00a0[2] for further details.\n\n\n", "Keywords": ""}, {"key": "Interworking with external DN with DHCP service", "numbering": "6.1.1.1", "title_level": 3, "desc": "6.1.1.1  Interworking with external DN with DHCP service\n\nThe Packet Domain may obtain IP address via external DHCP server during the\nPDU session establishment procedure in a 5G system. For IPv4, the SMF acts\nas the DHCP client towards the external DHCP server. For IPv6, the SMF acts\nas the DHCP server towards the UE and the DHCP client towards the external\nDHCP server. The UPF does not have any DHCP functionality and just forwards\npackets between the SMF and external server over the user plane for IPv4 or\nIPv6, and between the UE and the SMF over the user plane for IPv6.\n\n                                    [pic]\n\n Figure 6.1.1.1-1: The architecture of 5G System interworking with external\n                              netowrk for DHCP\n\n\n", "Keywords": ""}, {"key": "DN Authentication & Authorization", "numbering": "6.3.1", "title_level": 2, "desc": "6.3.1  DN Authentication & Authorization\n\nThe SMF may, depending on DNN configuration,  interact with an external DN\n(AAA server) for transport of signalling for PDU session\nauthorization/authentication by the external DN.\n\nThe following system procedure describes the signalling flows for the\nauthentication/authorization procedures with external DN for 5G system. The\nprocedures are based on the descriptions in 3GPP\u00a0TS\u00a023.501\u00a0[2] and\n3GPP\u00a0TS\u00a023.502\u00a0[3].\n\n  1. UE initiates the PDU Session Establishment procedure, including\n    authentication/authorization information.\n\n  2. The AMF sends Nsmf_PDUSession_CreateSMContext or\n    Nsmf_PDUSession_UpdateSMContext Request including the\n    authentication/authorization information to the SMF. And the SMF\n    responds to the service operation.\n\n     According to the configuration in the SMF, step\u00a06 to step\u00a09 are\n    executed before step\u00a03 if the SMF needs to send an EAP-Request message\n    to the UE.\n\n  3. If the N4 session has not been established before, the SMF triggers\n    the N4 Session Establishment procedure to the UPF.\n\n  4. The SMF forwards the Authentication/Authorization request to the DN-\n    AAA via the UPF, the authentication/authorization data is included in\n    N4 user plane message.\n\n  5-10.  The DN-AAA responds to the UPF. The authentication/authorization\n    information is transferred to UE via N4 user plane message,\n    Namf_Communication_N1N2MessageTransfer service and NAS SM Transport\n    message. UE further responds to the received\n    authentication/authorization data and such information is transferred\n    in NAS SM Transport message, Nsmf_PDUSession_UpdateSMContext service\n    and N4 user plane message, then finally sent to the DN-AAA by the UPF.\n\n  NOTE:  Step\u00a05 to step\u00a010 are optional and may be repeated depending on\n         the authentication/authorization mechanism used (e.g. EAP-TLS).\n\n  11.  The UPF receives final result of authentication/authorization from\n    the DN-AAA and forwards it to the SMF in N4 user plane message.\n\n  12.  The SMF proceeds with the PDU session establishment procedure and\n    includes the authentication/authorization information in\n    Namf_Communication_N1N2MessageTransfer service.\n\n  13.  The AMF sends the NAS PDU Session Establishment Request with the\n    authentication/authorization information to the UE.\n\n  Editor's note:  If AAA signalling is tunnelled in N4 user plane will be\n         decided by CT4.\n\n                                    [pic]\n\n              Figure 6.3.1-1: DN Authentication & Authorization\n\nThe DN-AAA server may revoke the authorization for a PDU Session or update\nDN authorization data for a PDU Session by DM or CoA message in RADIUS as\ndefined in IETF\u00a0RFC\u00a03576\u00a0[74] and ASR or RAR message in Diameter as defined\nin IETF\u00a0RFC\u00a06733\u00a0[75]. According to the request from DN-AAA server, the SMF\nmay release or update the PDU session.\n\n\n", "Keywords": ""}, {"key": "IPv6 Prefix allocation via IPv6 stateless", "numbering": "6.3.2.2", "title_level": 3, "desc": "6.3.2  IP Address Management\n\nWhen interworking with IP networks, the SMF may interact with an external\nData Network for UE IP Address management. It includes the support of IP\naddress allocation, renewal and release related messages over N6 reference\npoint.\n\n  NOTE:  The SMF may get an IP index from the PCF to assist in selecting\n         how the IP address is to be allocated when multiple allocation\n         methods or multiple instances of the same method are supported.\n\nThe following methods are already considered for UE IP Address management\nin an external network:\n\n  -  IPv4 Address allocation and IPv4 parameter configuration using DHCPv4;\n\n  -  /64 IPv6 prefix allocation via IPv6 stateless address\n    autoconfiguration via DHCPv6 according to IETF\u00a0RFC\u00a04862\u00a0[19];\n\n  -  IPv6 parameter configuration via stateless DHCPv6 according to\n    IETF\u00a0RFC\u00a03736\u00a0[20]; and\n\n  -  IPv4 address or IPv6 prefix allocation using Diameter or RADIUS.\n\n\n6.3.2.1  IPv4 Address allocation and IPv4 parameter configuration via\n           DHCPv4\n\nThe UE may obtain the IPv4 address and/or its configuration parameters at\nor after the initial access signalling (i.e. initial PDU session\nestablishment) to the packet domain. The request for IPv4 address and/or\nconfiguration parameters from the UE may trigger the SMF acting as a DHCPv4\nclient to request the IPv4 address and/or configuration parameters from an\nexternal DHCPv4 server and deliver them to the UE. The DHCPv4 functions in\nthe SMF, the UE and the external DHCPv4 server shall be compliant to\nIETF\u00a0RFC\u00a02131\u00a0[22], IETF\u00a0RFC\u00a01542\u00a0[23] and IETF\u00a0RFC\u00a04039\u00a0[24].\n\nThe following system procedure describes the successful IPv4 address\nallocation and parameter configuration signalling flow between the SMF and\nthe external DHCPv4 server as depicted in figure 6.3.1-1. For a detailed\ndescription of the DHCPv4 messages, refer to IETF\u00a0RFC\u00a02131\u00a0[22],\nIETF\u00a0RFC\u00a01542\u00a0[23] and IETF\u00a0RFC\u00a04039\u00a0[24].\n\n  1) The DHCPv4 client function in the SMF sends a DHCPDISCOVER as an IP\n    limited broadcast message, i.e. the destination address\n    255.255.255.255, towards the external DN. If the SMF has the DHCPv4\n    server IP addresses configured for the DNN, the DHCPDISCOVER shall be\n    send as unicast (or even multicast) to the external DHCPv4 servers. 2)\n    Upon receiving the DHCPDISCOVER request message, the external DHCPv4\n    servers reply by sending a DHCPOFFER message including an offered IP\n    address. Several DHCPOFFER messages may be received by the SMF if\n    multiple DHCPv4 servers respond to the DHCPDISCOVER.\n\n  3) The DHCPv4 client function in the SMF processes the messages and sends\n    a DHCPREQUEST towards the selected external DHCPv4 server.\n\n  NOTE\u00a01:  If the optimized signalling (Rapid Commit Option) is used as per\n         IETF\u00a0RFC\u00a04039\u00a0[24], the messages 2-3 can be eliminated.\n\n  4) Upon receiving the DHCPREQUEST message, the selected external DHCPv4\n    server acknowledges the address allocation by sending a DHCPACK\n    containing the lease period (T1), the time-out time (T2) and the\n    configuration information requested in DHCPREQUEST. The SMF stores the\n    allocated IPv4 address, the lease timers and the configuration\n    parameters.\n\n  NOTE\u00a02:  The SMF will further deliver the IPv4 address and the\n         configuration parameters to the UE by SM NAS message.\n\n                                    [pic]\n\n    Figure 6.3.2.1-1: The signalling flow for IPv4 address allocation and\n                    parameter configuration using DHCPv4\n\nFigure\u00a06.3.2.1-2 is a signalling flow for IPv4 address lease renew by using\nDHCPv4 protocol as specified in IETF\u00a0RFC\u00a02131\u00a0[22].\n\n  1) The DHCPv4 client function in the SMF sends a unicast DHCPREQUEST\n    towards the external DHCPv4 server to extend the lease period of the\n    allocated IPv4 address.\n\n  2) The external DHCPv4 server replies with a DHCPACK message confirming\n    the renewed lease and the T1 and T2 timers are restarted.\n\n                                     [pic]\n\n  Figure 6.3.2.1-2: The signalling flow for IPv4 address lease renew using\n                                   DHCPv4\n\n\n6.3.2.2  IPv6 Prefix allocation via IPv6 stateless address\n           autoconfiguration via DHCPv6\n\nWhen the IPv6 prefix is allocated from the external DN, the SMF is\nresponsible to obtain the IPv6 prefix for external DN, allocate and release\nthe IPv6 prefix. The SMF may use DHCPv6 to obtain the IPv6 prefix from the\nexternal DN. In this context, the SMF shall act as a DHCP client as per\nIETF\u00a0RFC\u00a03315\u00a0[21] towards the external DHCPv6 server.\n\nThe following system procedure describes the signalling flows for the IPv6\nStateless Address Autoconfiguration procedures for 5G system. The\nprocedures are based on the descriptions in 3GPP\u00a0TS\u00a023.501\u00a0[2] and\n3GPP\u00a0TS\u00a023.502\u00a0[3].\n\n  1. UE initiates the PDU Session Establishment procedure, indicating IPv6\n    address is required.\n\n  2. The AMF sends Session Management Request including the PDU Session\n    Establishment Request to the SMF.\n\n  3. The SMF may retrieve IPv6 prefix using DHCPv6 mechanism. This\n    procedure is performed when an external DN allocates an IPv6 prefix,\n    the signaling between the SMF and external DN is exchanged via UPF\n    which is omitted in the figure.\n\n  4. The SMF sends PDU Session Establishment Accept included in the Session\n    Management Response to the AMF. It includes the IPv6 prefix.\n\n  5. The AMF sends PDU Session Establishment Accept message to the UE\n    without the IPv6 prefix. The UE shall ignore the IPv6 prefix if it\n    receives it in the message.\n\n  6. The UE may send a Router Solicitation to the SMF via the UPF to\n    solicit a Router Advertisement message.\n\n  7. The SMF sends a Router Advertisement message to the UE via the UPF,\n    solicited or unsolicited. It shall include an IPv6 prefix in Prefix\n    Information option field of the message. The prefix is the same as the\n    one in the PDU Session Establishment Accept message, if it is provided\n    during the previous PDU Session Establishment procedure.\n\n                                    [pic]\n\n         Figure 6.3.2.2-2: IPv6 Stateless Address Autoconfiguration\n\n\n", "Keywords": ""}, {"key": "IPv6 parameter configuration via stateless DHCPv6", "numbering": "6.3.2.3", "title_level": 3, "desc": "6.3.2.3  IPv6 parameter configuration via stateless DHCPv6\n\nA UE that has obtained an IPv6 address may use stateless DHCP to request\nother configuration information such as a list of DNS recursive name\nservers or SIP servers.\n\nFor 3GPP networks, when an external DHCPv6 server in a DN is used to obtain\nthe requested parameters, the SMF acts as a DHCPv6 client towards the\nexternal DHCPv6 server while acting a DHCPv6 server towards the UE.\n\nThe IPv6 parameter configuration via stateless DHCPv6 function in the UE,\nthe SMF and the external DHCPv6 Server shall be compliant to\nIETF\u00a0RFC\u00a03736\u00a0[20]. The following system procedure describes the signalling\nflows for the IPv6 parameter configuration via stateless DHCPv6 procedures\nfor 5G system. All messages in the following steps between the UE and the\nSMF are sent via the UPF.\n\n  1) A Router Advertisement with the O-flag set, is sent from SMF to UE to\n    indicate to it to retrieve other configuration information.\n\n  2) The UE sends an INFORMATION-REQUEST message with the IP destination\n    address set to the All_DHCP_Relay_Agents_and_Servers multicast address\n    defined in the DHCPv6 IETF\u00a0RFC\u00a03315\u00a0[21]. The source address shall be\n    the link-local address of the UE. The DHCP relay agent in the SMF shall\n    forward the message.\n\n  3) DHCP servers receiving the forwarded INFORMATION-REQUEST message,\n    reply by sending a RELAY-REPLY message, with the \"Relay Message\" option\n    including a REPLY message with the requested configuration parameters.\n\n     The UE chooses one of the possibly several REPLY messages and extracts\n    the configuration information.\n\n                                    [pic]\n\n          Figure 6.3.2.3-1: DHCPv6 Other configuration signal flow\n\n\n", "Keywords": ""}, {"key": "IP address/prefix allocation via Diameter or RADIUS", "numbering": "6.3.2.4", "title_level": 3, "desc": "6.3.2.4  IP address/prefix allocation via Diameter or RADIUS\n\nThe SMF may also request the DN-AAA to allocate IPv4 address or IPv6 prefix\nby Diameter or RADIUS protocol within the Authentication and Authorization\nprocedure as specified in 3GPP\u00a0TS\u00a029.061\u00a0[67] with the difference that the\nP-GW is replaced by the SMF (acting as the initiator requesting the IP\naddress/prefix) and the UPF (transparently tranfering AAA messages between\nthe SMF and DN-AAA).\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "6.3.3.1", "title_level": 3, "desc": "6.3.3.1  General\n\nInterworking with the IP Multimedia Core Network Subsystem (IMS) puts\nspecific requirements on the SMF.\n\nThe SMF shall use the following mechanisms to support the interworking with\nthe IMS:\n\n  -  the P-CSCF discovery; and\n\n  -  N7 interface for the policy and charging control of QoS flows for IMS\n    media flows.\n\n  Editor's note:  Other mechanisms are FFS.\n\nThese mechanisms are however not restricted only to the interworking with\nthe IMS and may be used for other services that could benefit from these\nmechanisms.\n\n\n", "Keywords": ""}, {"key": "IMS Interworking Model", "numbering": "6.3.3.2", "title_level": 3, "desc": "6.3.3.2  IMS Interworking Model\n\nThe signalling interface between the UE and the P-CSCF is a logical\ninterface, i.e. it uses 5GC as a QoS flow. The Npcf_SMPolicyControl\nservices, offered via N7 interface, are used for network communication\nbetween the SMF and the PCF. For a description of the IMS architecture,\nrefer to 3GPP TS\u00a023.228\u00a0[25].\n\n\n", "Keywords": ""}, {"key": "IMS Specific Configuration in the SMF", "numbering": "6.3.3.3", "title_level": 3, "desc": "6.3.3.3  IMS Specific Configuration in the SMF\n\nThe SMF shall have a list of preconfigured addresses of signalling servers\n(the P-CSCF servers). This list shall be provided to the UE at PDU session\nestablishment. It shall be possible to preconfigure the list of\npreconfigured addresses of signalling servers per DNN.\n\nThe SMF/UPF may have the locally preconfigured packet filters, and/or the\napplicable PCC rules, to be applied on the QoS flow. The packet filters\nshall filter up-link and down-link packets, and shall only allow traffic\nto/from the signalling servers and to the DNS and the DHCP servers. It\nshall be possible to locally preconfigure the packet filters per DNN.\n\nIt shall be possible to enable/disable the use of the services offered via\nN7 interface per DNN.\n\nThe SMF shall support IPv4 or IPv6 addresses and protocol for IMS\nsignalling and IMS QoS flows.\n\nThe methods for the UE to discover the P-CSCF address(es) may vary\ndepending on the access technology that the UE is on. The details of the P-\nCSCF discovery mechanisms for various accesses are specified in\n3GPP\u00a0TS\u00a023.228\u00a0[25] and 3GPP\u00a0TS\u00a024.229\u00a0[26]. The P-CSCF discovery\nmechanisms are:\n\n  -  a 5GC procedure for the P-CSCF discovery;\n\n  -  via DHCP servers i.e. the SMF shall provide the functionality of a\n    DHCP relay agent; and\n\n  -  if the UE has a P-CSCF FQDN locally configured and request the DNS IP\n    address(es) from the SMF (via 5GC mechanism or DHCP procedures), the\n    SMF shall be able to provide DNS IP address(es) to the UE.\n\n  Editor's note:  Details for the 5GC discovery and the UE provisioning\n         need to be specified by SA2.\n\nThe SMF shall have similar functional support depending on the P-CSCF\ndiscovery methods supported by the UE on the access technology. For\nexample, for the UE in 3GPP 5G access network the SMF shall have DHCP\nserver function towards the UE while acting as a DHCP client towards\nexternal DHCP server, if the SMF is configured to request DNS and/or P-CSCF\nIP addresses from the external DHCP servers.\n\nThe SMF shall be able to deliver DNS and/or P-CSCF addresses to the UE if\nrequested by the UE via the 5G network or via DHCP procedures using the\nrelevant DHCP options for IPv4/IPv6 DNS and SIP servers (see\nIETF\u00a0RFC\u00a02132\u00a0[27], IETF\u00a0RFC\u00a03361\u00a0[28], IETF\u00a0RFC\u00a03646\u00a0[29] and\nIETF\u00a0RFC\u00a03319\u00a0[30]).\n\nOn DNNs providing IMS services, the information advertised in Router\nAdvertisements from the SMF to the UEs shall be configured in the same\nmanner as for other DNNs providing IPv6 services except that the \"O-flag\"\nshall be set.\n\nThe \"O-flag\" shall be set in IPv6 Router Advertisement messages sent by the\nSMF for DNNs used for IMS services. This will trigger a DHCP capable UE to\nstart a DHCPv6 session to retrieve server addresses and other configuration\nparameters. The UE which doesn't support DHCP shall ignore the \"O-flag\" and\nshall request the IMS specific configuration (e.g. the P-CSCF address) via\nother discovery methods supported in the UE (i.e. via locally configured P-\nCSCF address/FQDN in the UE or via 5G procedure, if applicable).\n\n  Editor's note:  Whether this mechanism as defined in EPC remains for 5G\n         is FFS.\n\nThe SMF shall have configurable policy rules for controlling QoS flows used\nfor signalling.\n\n\n", "Keywords": ""}, {"key": "Provisioning of Signalling Server Address", "numbering": "6.3.3.4.1", "title_level": 4, "desc": "6.3.3.4.1   Provisioning of Signalling Server Address\n\nAt a PDU Session establishment procedure related to the IMS, the SMF shall\nsupport the capability to send the P-CSCF address(es) to the UE. The P-CSCF\naddress information is sent by the visited SMF if LBO is used. For Home\nrouted, the P-CSCF address information is sent by the SMF in the HPLMN. The\nP-CSCF address(es) shall be sent transparently through the AMF, and in case\nof Home Routed also through the SMF in the VPLMN.\n\n  NOTE\u00a01:  The SMF is located in the VPLMN if LBO is used.\n\n  NOTE\u00a02:  Other options to provide the P-CSCF address(es) to the UE as\n         defined in 3GPP\u00a0TS\u00a023.228\u00a0[25] is not excluded.\n\n  NOTE\u00a03:  A PDU session for IMS is identified by \"APN\" or \"DNN\".\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "6.3.4.1", "title_level": 3, "desc": "6.3.4.1  General\n\nWhen support of unstructured PDU type data is provided at the N6 interface,\ndifferent Point-to-Point (PtP) tunnelling techniques may be used. When\nusing PtP tunnelling by UDP/IPv6 encapsulation subclause\u00a06.3.4.2 below\nshall be followed. Other techniques as described in clause\u00a06.3.4.3 below\nmay be used.\n\n\n", "Keywords": ""}, {"key": "N6 PtP tunnelling based on UDP/IPv6", "numbering": "6.3.4.2", "title_level": 3, "desc": "6.3.4.2  N6 PtP tunnelling based on UDP/IPv6\n\nN6 PtP tunnelling based on UDP/IPv6 may be used to deliver unstructured PDU\ntype data to an AS.\n\nIP address allocation procedures for the UE (i.e. PDU session) are\nperformed by the SMF as described in subclause\u00a06.3.2, but the IPv6 prefix\nis not provided to the UE, i.e. Router Advertisements and DHCPv6 are not\nperformed. The SMF assigns a suffix (i.e. IPv6 Interface Identifier) for\nthe PDU session. For the N6 PtP tunnel, the IPv6 prefix allocated for the\nPDU session plus suffix assigned for the PtP tunnel is used as source\naddress for the uplink data and as destination address for the downlink\ndata.\n\nDuring the PDU session establishment, the UPF associates the AN tunnel for\nthe PDU session with the N6 PtP tunnel.\n\nThe UPF acts as a transparent forwarding node between the UE and the\ndestination in the external DN.\n\nFor uplink delivery, if the uplink data is received the UPF shall forward\nthe received data to the external DN over the N6 PtP tunnel associated with\nthe AN tunnel with the destination address in the external DN and the 3GPP\ndefined UDP destination port number for unstructured PDU type data.\n\nFor downlink delivery, the external DN shall send the data using UDP/IP\nencapsulation with the IPv6 prefix plus suffix as destination address and\nthe 3GPP defined UDP destination port number for unstructured PDU type\ndata.\n\n  NOTE:  The UPF decapsulates the received data (i.e. removes the UDP/IP\n         headers) and forwards the data to AN on the AN tunnel identified by\n         the IPv6 prefix of the UE (i.e. PDU session) for delivery to the\n         UE.\n\n                                    [pic]\n\n   Figure 6.3.4.2-1: Protocol configuration for unstructured PDU type data\n                     (user plane) using N6 PtP tunneling\n\n\n", "Keywords": ""}, {"key": "Other N6 PtP tunnelling mechanisms", "numbering": "6.3.4.3", "title_level": 3, "desc": "6.3.4.3  Other N6 PtP tunnelling mechanisms\n\nN6 PtP tunnelling mechanisms such as PMIPv6/GRE, L2TP, etc, may be used to\ndeliver unstructured PDU type data to/from AS. The general handling of such\ndelivery mechanisms is as described below.\n\nA PtP tunnel is established by the UPF towards the AS. Depending on the\ntype of protocol employed on the N6 PtP tunnel, the N6 PtP tunnel setup may\nbe done at the time of UE Registration or at the time of first MO datagram\nbeing sent by the UE. The UPF selects the AS based on its configuration\n(e.g. per DNN, or per PtP tunnel type, etc). However, IP address allocation\nprocedures for the UE (according to subclause\u00a06.3.2) are not performed by\nthe SMF.\n\n  NOTE:  An AS can be dedicated for handling a specific protocol for\n         unstructured PDU type data.\n\nThe UPF acts as a transparent forwarding node between the UE and the AS.\n\nFor uplink delivery, the UPF forwards the received data to the AS over the\nestablished N6 PtP tunnel.\n\nFor downlink delivery, the AS locates the right N6 PtP tunnel for the UE\n(using information such as UE identifiers in the unstructured PDU type\nprotocol itself, etc) to forward the data. The AS sends the data to UPF\nover the established N6 PtP tunnel. The UPF in turn sends the data on the\nGTP-U tunnel identified by the associated N6 PtP tunnel for delivery to the\nUE.\n\n\n", "Keywords": ""}, {"key": "Protocols", "numbering": "6.5", "title_level": 1, "desc": "6.5  Protocols\n\nFor 5G network interworking with external DNs, existing protocols in\nwidespread usage in existing DNs (i.e. IP, DHCP, RADIUS and Diameter) as\nspecified in 3GPP\u00a0TS\u00a029.061\u00a0[67] are applicable between the SMF/UPF and the\nexternal DNs. The UPF transparently relays the message exchanged between\nthe SMF and the node (e.g. AAA server) of the external DNs.\n\n\n", "Keywords": ""}, {"key": "Reference Model", "numbering": "7.1", "title_level": 1, "desc": "7.1  Reference Model\n\n                                    [pic]\n\n            Figure 7.1-1: 3GPP Architecture for Network Exposure\n\n                                    [pic]\n\n        Figure 7.1-2: 3GPP roaming Architecture for Network Exposure\n\n  Editor's note:  The overall architecture is assumed to inherit the\n         corresponding one in 3GPP\u00a0TS\u00a023.682\u00a0[58] with service based\n         interface representations and may be subject to change according to\n         3GPP\u00a0TS\u00a023.501\u00a0[2].\n\n  Editor's note:  Whether Nnef service is also applicable for south bound\n         interface is FFS (e.g. PFD GET service).\n\n\n", "Keywords": ""}, {"key": "NEF", "numbering": "7.2.1", "title_level": 2, "desc": "7.2.1  NEF\n\nThe Network Exposure Function (NEF) supports the following functionality:\n\n  -  It provides a means to securely expose the services and capabilities\n    provided by 3GPP network functions. The NEF may authenticate, authorize\n    and throttle the Application Functions. In addition, it provides a\n    means for the Application Functions to securely provide information to\n    3GPP network, e.g. Mobility Pattern, communication pattern.\n\n  -  It translates between information exchanged with the AF and\n    information exchanged with the internal network function. For example,\n    it translates between an AF-Service-Identifier and internal 5G Core\n    information such as DNN, S-NSSAI, as described in clause\u00a05.6.7 of\n    3GPP\u00a0TS\u00a023.501\u00a0[2].\n\n  -  It receives information from other network functions (based on exposed\n    capabilities of other network functions). It may act as a Front End\n    (i.e. NEF-FE) to a Unified Data Repository (UDR) to store the received\n    information as structured data. The stored information can be accessed\n    and \"re-exposed\" by the NEF to other network functions and Application\n    Functions, and used for other purposes such as analytics.\n\n  NOTE:  The NEF can access the UDR located in the same PLMN.\n\n  Editor's note:  It is FFS whether the stored information in the UDR can\n         be exposed directly to other network functions and Application\n         Functions.\n\n\n", "Keywords": ""}, {"key": "AF", "numbering": "7.2.2", "title_level": 2, "desc": "7.2.2  AF\n\nThe Application Function (AF) may interact with the 3GPP Core Network via\nthe NEF in order to access Network Capability Exposure.\n\nIf allowed by the operator, the AF may also communicate with the PCF\ndirectly.\n\n  NOTE:  An AS can act as an AF to interact with the NEF.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "7.3.1.1", "title_level": 3, "desc": "7.3.1.1  General\n\nThe NEF supports external exposure of capabilities of network functions.\nExternal exposure can be categorized as follows:\n\n  -  Monitoring capability: it is for monitoring of specific event for UE\n    in 5G system and making such monitoring events information available\n    for external exposure via the NEF.\n\n  -  Provisioning capability: it is for allowing external party to\n    provision of information which can be used for the UE in 5G system.\n\n  -  Policy/Charging capability: it is for handling QoS and charging policy\n    for the UE based on the request from external party.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "7.3.1.2.1", "title_level": 4, "desc": "7.3.1.2.1   General\n\nThe NEF will be in charge to configure/delete the monitoring events in the\ncorresponding NF and report the corresponding monitoring events within the\n5GC. It shall support the following events for Event Exposure function as\nspecified in table\u00a07.3.1.2.1-1.\n\n        Table 7.3.1.2.1-1: List of events for Event Exposure function\n\n|Event               |Description                              |Event       |\n|                    |                                         |reporting   |\n|                    |                                         |entity      |\n|LOSS OF CONNECTIVITY|The AS requests to be notified when the  |AMF         |\n|                    |3GPP network detects that the UE is no   |            |\n|                    |longer reachable for signalling or user  |            |\n|                    |plane communication.                     |            |\n|UE REACHABILITY     |The AS requests to be notified when the  |AMF         |\n|                    |UE becomes reachable for sending either  |(reachabilit|\n|                    |SMS or downlink data to the UE.          |y for data) |\n|                    |                                         |UDM         |\n|                    |                                         |(reachabilit|\n|                    |                                         |y for SMS)  |\n|LOCATION REPORTING  |The AS requests to be notified of the    |AMF         |\n|                    |current location or the last known       |            |\n|                    |location of the UE. (NOTE\u00a01)             |            |\n|CHANGE OF IMSI IMEI |The AS requests to be notified when the  |UDM         |\n|ASSOCIATION         |association of an ME (IMEI(SV)) that uses|            |\n|                    |a specific subscription (IMSI) is changed|            |\n|ROAMING STATUS      |The AS queries the UE's current roaming  |UDM         |\n|                    |status and requests to get notified when |            |\n|                    |the status changes. (NOTE\u00a02)             |            |\n|COMMUNICATION       |The AS requests to be notified of        |AMF         |\n|FAILURE             |communication failure events             |            |\n|AVAILABILITY AFTER  |The AS requests to be notified when the  |AMF         |\n|DDN FAILURE         |UE has become available after a DL data  |            |\n|                    |delivery failure.                        |            |\n|NUMBER OF UES       |The AS requests to know how many UEs are |AMF         |\n|PRESENT IN A        |in the requested area (last known or     |            |\n|GEOGRAPHICAL AREA   |current location).                       |            |\n|NOTE\u00a01: Location granularity for event request, or event report, or both   |\n|could be at cell level (Cell ID), TA level or other formats e.g. shapes    |\n|(e.g. polygons, circles, etc.) or civic addresses (e.g. streets, districts,|\n|etc.) which can be mapped by NEF.                                          |\n|NOTE\u00a02: Roaming status means whether the UE is in HPLMN or VPLMN.          |\n\n\n  Editor's note:  Events configuration via the PCF and event reporting by\n         the PCF are FFS.\n\n  Editor's note:  Whether more events are needed is FFS.\n\nAll the identified Monitoring Event Types in previous table (except for the\nmonitoring of the number of UEs present in a geographical area) relate to\nevents on a UE basis for which the configuration of monitoring events is\ndone via the UDM. The UDM may further configure some monitoring events in\nthe AMF depending on the event type and/or event reporting entity. For the\nmonitoring of the number of UEs present in a geographical area, the\nmonitoring event configuration is done via the AMF directly. When the\nconfigured event happens, the event reporting NF sends the report directly\nto the NEF.\n\n\n", "Keywords": ""}, {"key": "Event Exposure subscription without NEF pre-subscription", "numbering": "7.3.1.2.2.1", "title_level": 5, "desc": "7.3.1.2.2.1 Event Exposure subscription without NEF pre-subscription\n\n                                    [pic]\n\n     Figure\u00a07.3.1.2.2.1-1: Event Exposure subscription without NEF pre-\n                                 subcription\n\n  1. The AS subscribes to one or several event(s) (identified by Event Id)\n    by Nnef_EventExposure_subs service. Reporting options defines the type\n    of reporting requested (e.g. periodic reporting or event based\n    reporting, for Monitoring Events). If the reporting event subscription\n    is authorized by the NEF, the NEF records the association of the event\n    trigger and the requester identity.\n\n  2. The NEF subscribes to received event(s) to other NF (e.g. UDM).\n\n  3. The NEF acknowledges the event subscription request.\n\n\n", "Keywords": ""}, {"key": "Event Exposure subscription with NEF pre-subscription", "numbering": "7.3.1.2.2.2", "title_level": 5, "desc": "7.3.1.2.2.2 Event Exposure subscription with NEF pre-subscription\n\nThe NEF may subscribe to all the NFs that provided the necessary services\nfor one UE, a group of UEs or all of the UEs.\n\n                                    [pic]\n\n Figure\u00a07.3.1.2.2.2-1: Event Exposure subscription with NEF pre-subcription\n\n  1. The NEF subscribes to the serving NF(s) (e.g. AMF) to be notified of\n    the detected event including indication identifying for one UE, a group\n    of UEs or for all of the UEs.\n\n  2. Step\u00a01 in subclause\u00a07.3.1.2.2.1.\n\n  3. The NEF acknowledges the event subscription request.\n\n\n", "Keywords": ""}, {"key": "Event Exposure notification", "numbering": "7.3.1.2.3", "title_level": 4, "desc": "7.3.1.2.3   Event Exposure notification\n\n                                    [pic]\n\n             Figure 7.3.1.2.3-1: NEF Event Exposure notification\n\n  1. The NF detects the occurred event and sends the event notification to\n    the NEF, which has subscribed to the event before.\n\n  2. The NEF further forwards to the AS the reporting event received by\n    Nnef_EventExposure_notif service.\n\n  3. The AS acknowledges the event notification request.\n\n\n", "Keywords": ""}, {"key": "Procedures for Background Data Transfer Policy management", "numbering": "7.3.1.4", "title_level": 3, "desc": "7.3.1.3  Procedures for PFD management\n\n  Editor's note:  The procedures are FFS.\n\n\n7.3.1.4  Procedures for Background Data Transfer Policy management and\n           activation\n\n  Editor's note:  The procedures are FFS.\n\n\n", "Keywords": ""}, {"key": "Procedures for network internal exposure", "numbering": "7.3.2", "title_level": 2, "desc": "7.3.2  Procedures for network internal exposure\n\nThe NEF may subscribe to the status change of mobility, session, and/or\npolicy data and may store the received data in the UDR if the NEF acts as a\nFront End. Such data may be exposed to the AF and other NF (e.g. NWDAF),\nand used for further data process.\n\n                                    [pic]\n\n                  Figure 7.3.2-1: Network internal exposure\n\n  1. The NEF subscribes to received event(s) to another NF (e.g. AMF).\n\n  2. If the event subscription response includes event data, the NEF may\n    store it in the UDR.\n\n  3. The NF detects the occurred event and sends the event notification to\n    the NEF, which has subscribed to the event before.\n\n  4. The NEF may store the received event data in the UDR.\n\n\n", "Keywords": ""}, {"key": "Procedures for Application Trigger", "numbering": "7.3.3", "title_level": 2, "desc": "7.3.3  Procedures for Application Trigger\n\nThe NEF provides a service for the AS to trigger an application level\noperation. The application payload is used to instruct the UE a procedure\nto be executed (e.g. PDU session establishment).\n\n                                    [pic]\n\n                Figure 7.3.3-1: Application Trigger procedure\n\n  1. The NEF receives a Nnef_ApplicationTrigger service request with\n    External Identifier or MSISDN, AS Identifier, validity period,\n    Application Port ID and trigger payload. The Application Port ID is\n    used to identify the receiving application within the UE. The validity\n    period indicates for how long the trigger message is valid. If the\n    trigger message does not reach the UE for the first time (e.g. the UE\n    is temporarily not reachable), the NEF may try to resend the trigger\n    message if it is still valid.\n\n  2. The NEF checks whether the AS is authorised to send the Application\n    Trigger based on the AS Identifier. The NEF also check whether the AS\n    has exceeded its quota or rate of trigger submission.\n\n  3. The NEF invokes the service provided by the UDM to determine the node\n    (e.g. MSC) which serves the UE and also to get the SUPI of the UE.\n\n  4. The NEF sends the Application Trigger to the SMS-C as defined in\n    3GPP\u00a0TS\u00a023.040\u00a0[73].\n\n  5. The NEF sends the Nnef_ApplicationTrigger response to the AS with\n    trigger result.\n\n  Editor's note:  Whether the NEF is integrated with MTC-IWF in 5G is FFS.\n\n  Editor's note:  Nnef_ApplicationTrigger service needs to be defined by\n         stage 2.\n\n  Editor's note:  It is FFS that whether a separate service operation for\n         Application Trigger delivery report is needed.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "7.4.1", "title_level": 2, "desc": "7.4.1  General\n\nThe external exposure network exposes the 3GPP network capabilities to the\napplication consumers via NEF by providing a set of NEF service operations.\nThe following NF services are specified for NEF:\n\n                  Table 5.4-1: NF Services provided by NEF\n\n|Service Name     |Description                 |Referenc|Example |Mechanism   |\n|                 |                            |e       |Consumer|            |\n|Nnef_EventExposur|Provides the service of     |7.4.3   |AS      |Subscribe-No|\n|e                |subscribing/unsubscribing/no|        |        |tify        |\n|                 |tifying Event Exposure.     |        |        |            |\n\n\n  Editor's note:  The current NEF services are not stable and could be\n         updated as described in stage 2.\n\n\n", "Keywords": ""}, {"key": "General", "numbering": "7.4.2.1", "title_level": 3, "desc": "7.4.2.1  General\n\nThis service provides an application level trigger payload towards a UE, in\norder to trigger the application specific procedure, e.g. start immediate\nor later communication with the AS by establishing a PDU session if it was\nnot established. The application trigger also includes information for\nrouting the trigger payload to the application in the UE and routing the\nresponse of the application back to the Application Server.\n\n\n", "Keywords": ""}, {"key": "Data Network Name", "desc": "Data Network Name is defined in 3GPP\u00a0TS\u00a023.501\u00a0[2], and\nit is equivalent to an APN.\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a023.501\u00a0[2], subclause\u00a03.1 apply:\n\n5G Access Network\n\n5G Core Network\n\n5G QoS Flow\n\n5G QoS Identifier\n\n5G System\n\nLocal Break Out (LBO)\n\nNetwork Function\n\nNF service\n\nNF service operation\n\nPDU Connectivity Service\n\nPDU Session\n\nPDU Session Type\n\nService based interface\n\nService Data Flow Filter\n\nService Data Flow Template", "numbering": "3.1", "Keywords": ""}, {"key": "5GC", "desc": "5G Core Network", "numbering": "3.2", "Keywords": ""}, {"key": "5QI", "desc": "5G QoS Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "AF", "desc": "Application Function", "numbering": "3.2", "Keywords": ""}, {"key": "AMBR", "desc": "Aggregate Maximum Bit Rate", "numbering": "3.2", "Keywords": ""}, {"key": "AMF", "desc": "Access and Mobility Management Function", "numbering": "3.2", "Keywords": ""}, {"key": "AN", "desc": "Access Network", "numbering": "3.2", "Keywords": ""}, {"key": "APN", "desc": "Access Point Name", "numbering": "3.2", "Keywords": ""}, {"key": "ARP", "desc": "Allocation and Retention Priority", "numbering": "3.2", "Keywords": ""}, {"key": "BSF", "desc": "Binding Support Functionality", "numbering": "3.2", "Keywords": ""}, {"key": "BSON", "desc": "Binary JSON", "numbering": "3.2", "Keywords": ""}, {"key": "CBOR", "desc": "Concise Binary Object Representation", "numbering": "3.2", "Keywords": ""}, {"key": "CDDL", "desc": "Concise Data Definition Language", "numbering": "3.2", "Keywords": ""}, {"key": "DEI", "desc": "Drop Eligible Indicator", "numbering": "3.2", "Keywords": ""}, {"key": "DHCP", "desc": "Dynamic Host Configuration Protocol", "numbering": "3.2", "Keywords": ""}, {"key": "DL", "desc": "Downlink", "numbering": "3.2", "Keywords": ""}, {"key": "DN", "desc": "Data Network", "numbering": "3.2", "Keywords": ""}, {"key": "DNAI", "desc": "Data Network Access Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "DNN", "desc": "Data Network Name", "numbering": "3.2", "Keywords": ""}, {"key": "DTLS", "desc": "Datagram Transport Layer Security", "numbering": "3.2", "Keywords": ""}, {"key": "EPC", "desc": "Evolved Packet Core", "numbering": "3.2", "Keywords": ""}, {"key": "GBR", "desc": "Guaranteed Bit Rate", "numbering": "3.2", "Keywords": ""}, {"key": "GPSI", "desc": "Generic Public Subscription Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "HATEOAS", "desc": "Hypermedia As The Engine Of Application State", "numbering": "3.2", "Keywords": ""}, {"key": "HTTP", "desc": "Hypertext Transfer Protocol", "numbering": "3.2", "Keywords": ""}, {"key": "IDL", "desc": "Interface Definition Language", "numbering": "3.2", "Keywords": ""}, {"key": "JSON", "desc": "JavaScript Object Notation", "numbering": "3.2", "Keywords": ""}, {"key": "MAC", "desc": "Media Access Control", "numbering": "3.2", "Keywords": ""}, {"key": "MBR", "desc": "Maximum Bit Rate", "numbering": "3.2", "Keywords": ""}, {"key": "MPS", "desc": "Multimedia Priority Service", "numbering": "3.2", "Keywords": ""}, {"key": "NBIFOM", "desc": "Network Based IP Flow Mobility", "numbering": "3.2", "Keywords": ""}, {"key": "NEF", "desc": "Network Exposure Function", "numbering": "3.2", "Keywords": ""}, {"key": "NF", "desc": "Network Function", "numbering": "3.2", "Keywords": ""}, {"key": "NSSAI", "desc": "Network Slice Selection Assistance Information", "numbering": "3.2", "Keywords": ""}, {"key": "NWDAF", "desc": "Network Data Analytics Function", "numbering": "3.2", "Keywords": ""}, {"key": "OCS", "desc": "Online Charging System", "numbering": "3.2", "Keywords": ""}, {"key": "PCC", "desc": "Policy and Charging Control", "numbering": "3.2", "Keywords": ""}, {"key": "PCF", "desc": "Policy Control Function", "numbering": "3.2", "Keywords": ""}, {"key": "PCP", "desc": "Priority Code Point", "numbering": "3.2", "Keywords": ""}, {"key": "PEI", "desc": "Permanent Equipment Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "PFDF", "desc": "Packet Flow Description Function", "numbering": "3.2", "Keywords": ""}, {"key": "QFI", "desc": "QoS Flow Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "QNC", "desc": "QoS Notification Control", "numbering": "3.2", "Keywords": ""}, {"key": "QoS", "desc": "Quality of Service", "numbering": "3.2", "Keywords": ""}, {"key": "REST", "desc": "Representational State Transfer", "numbering": "3.2", "Keywords": ""}, {"key": "RFSP", "desc": "RAT Frequency Selection Priority", "numbering": "3.2", "Keywords": ""}, {"key": "RPC", "desc": "Remote procedure call", "numbering": "3.2", "Keywords": ""}, {"key": "RQI", "desc": "Reflective QoS Indicator", "numbering": "3.2", "Keywords": ""}, {"key": "SCTP", "desc": "Stream Control Transmission Protocol", "numbering": "3.2", "Keywords": ""}, {"key": "SDF", "desc": "Service Data Flow", "numbering": "3.2", "Keywords": ""}, {"key": "SMF", "desc": "Session Management Function", "numbering": "3.2", "Keywords": ""}, {"key": "S-NSSAI", "desc": "Single Network Slice Selection Assistance Information", "numbering": "3.2", "Keywords": ""}, {"key": "SSC", "desc": "Session and Service Continuity", "numbering": "3.2", "Keywords": ""}, {"key": "SUPI", "desc": "Subscription Permanent Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "TA", "desc": "Tracking Area", "numbering": "3.2", "Keywords": ""}, {"key": "TAI", "desc": "Tracking Area Identity", "numbering": "3.2", "Keywords": ""}, {"key": "TCP", "desc": "Transmission Control Protocol", "numbering": "3.2", "Keywords": ""}, {"key": "TLS", "desc": "Transport Layer Security", "numbering": "3.2", "Keywords": ""}, {"key": "UDM", "desc": "Unified Data Management", "numbering": "3.2", "Keywords": ""}, {"key": "UDP", "desc": "User Datagram Protocol", "numbering": "3.2", "Keywords": ""}, {"key": "UDR", "desc": "Unified Data Repository", "numbering": "3.2", "Keywords": ""}, {"key": "UL", "desc": "Uplink", "numbering": "3.2", "Keywords": ""}, {"key": "UPF", "desc": "User Plane Function", "numbering": "3.2", "Keywords": ""}, {"key": "URSP", "desc": "UE Route Selection Policy", "numbering": "3.2", "Keywords": ""}, {"key": "VID", "desc": "VLAN Identifier", "numbering": "3.2", "Keywords": ""}, {"key": "VLAN", "desc": "Virtual Local Area Network", "numbering": "3.2", "Keywords": ""}]