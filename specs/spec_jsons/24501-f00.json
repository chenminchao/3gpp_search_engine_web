[{"key": "Scope", "numbering": "1", "title_level": 0, "desc": "         1  Scope\n\nThe present document specifies the non-access stratum (NAS) procedures in\nthe 5G system (5GS) used by the protocols for:\n\n-  mobility management between the user equipment (UE) and the access and\nmobility management function (AMF) for both 3GPP access and non-3GPP\naccess; and\n\n-  session management between the user equipment (UE) and the session\nmanagement function (SMF) for both 3GPP access and non-3GPP access.\n\nThe 5GS mobility management (5GMM) protocol defined in the present document\nprovides procedures for the control of mobility when the user equipment\n(UE) is using the NG radio access network (NG-RAN) and/or non-3GPP access\nnetwork. The 5GMM protocol also provides control of security for the NAS\nprotocols.\n\nThe 5GS session management (5GSM) protocol defined in the present document\nprovides procedures for the handling of 5GS PDU sessions. Together with the\nbearer control provided by the access stratum, this protocol is used for\nthe control of user-plane bearers.\n\nFor both NAS protocols the present document specifies procedures for the\nsupport of inter-system mobility between the NG-RAN and the evolved\nuniversal terrestrial radio access (E-UTRAN) connected to the evolved\npacket core (EPC) and between the NG-RAN and the non-3GPP access network.\n\nThe present document is applicable to the UE, the access and mobility\nmanagement function (AMF) and to the session management function (SMF) in\nthe 5GS.\n\nThe clauses and subclauses in the present document are common for both 3GPP\naccess and non-3GPP access unless it is explicitly stated that they apply\nto 3GPP access only or non-3GPP access only.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "References", "numbering": "2", "title_level": 0, "desc": "2  References\n\nThe following documents contain provisions which, through reference in this\ntext, constitute provisions of the present document.\n\n-  References are either specific (identified by date of publication,\nedition number, version number, etc.) or non-specific.\n\n-  For a specific reference, subsequent revisions do not apply.\n\n-  For a non-specific reference, the latest version applies. In the case of\na reference to a 3GPP document (including a GSM document), a non-specific\nreference implicitly refers to the latest version of that document in the\nsame Release as the present document.\n\n[1]  3GPP\u00a0TR\u00a021.905: \"Vocabulary for 3GPP Specifications\".\n\n[2]  3GPP\u00a0TS\u00a022.101: \"Service aspects; Service principles\".\n\n[3]  3GPP\u00a0TS\u00a022.261: \"Service requirements for the 5G system; Stage 1\".\n\n[4]  3GPP\u00a0TS\u00a023.003: \"Numbering, addressing and identification\".\n\n[5]  3GPP\u00a0TS\u00a023.122: \"Non-Access-Stratum functions related to Mobile\nStation (MS) in idle mode\".\n\n[6]  3GPP\u00a0TS\u00a023.167: \"IP Multimedia Subsystem (IMS) emergency sessions\".\n\n[7]  3GPP\u00a0TS\u00a023.401: \"GPRS enhancements for E-UTRAN access\".\n\n[8]  3GPP\u00a0TS\u00a023.501: \"System Architecture for the 5G System; Stage 2\".\n\n[9]  3GPP\u00a0TS\u00a023.502: \"Procedures for the 5G System; Stage 2\".\n\n[10] 3GPP\u00a0TS\u00a023.503: \" Policy and Charging Control Framework for the 5G\nSystem; Stage\u00a02\".\n\n[11] 3GPP\u00a0TS\u00a024.007: \"Mobile radio interface signalling layer 3; General\naspects\".\n\n[12] 3GPP\u00a0TS\u00a024.008: \"Mobile Radio Interface Layer\u00a03 specification; Core\nNetwork Protocols; Stage\u00a03\".\n\n[13] 3GPP\u00a0TS\u00a024.011: \"Point-to-Point Short Message Service (SMS) support on\nmobile radio interface\".\n\n[14] 3GPP\u00a0TS\u00a024.229: \"IP multimedia call control protocol based on Session\nInitiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3\".\n\n[15] 3GPP\u00a0TS\u00a024.301: \"Non-Access-Stratum (NAS) protocol for Evolved Packet\nSystem (EPS); Stage\u00a03\".\n\n[16] 3GPP\u00a0TS\u00a024.302: \"Access to the 3GPP Evolved Packet Core (EPC) via non-\n3GPP access networks; Stage 3\"\n\n[17] 3GPP\u00a0TS\u00a024.368: \"Non-Access Stratum (NAS) configuration Management\nObject (MO)\".\n\n[18] 3GPP\u00a0TS\u00a024.502: \"Access to the 3GPP 5G System (5GS) via non-3GPP\naccess networks;\u00a0Stage\u00a03\".\n\n[19] 3GPP\u00a0TS\u00a024.5xx: \"UE policies for 5G System (5GS); Stage 3\".\n\n[20] 3GPP\u00a0TS\u00a024.623: \"Extensive Markup Language (XML) Configuration Access\nProtocol (XCAP) over the Ut interface for Manipulating Supplementary\nServices\".\n\n[21] 3GPP\u00a0TS\u00a029.507: \"5G System; Access and Mobility Policy Control\nService; Stage 3\".\n\n[22] 3GPP\u00a0TS\u00a031.102: \"Characteristics of the Universal Subscriber Identity\nModule (USIM) application\".\n\n[23] 3GPP\u00a0TS\u00a033.102: \"3G security; Security architecture\".\n\n[24] 3GPP\u00a0TS\u00a033.501: \"Security architecture and procedures for 5G System\".\n\n[25] 3GPP\u00a0TS\u00a036.323: \"NR; Packet Data Convergence Protocol (PDCP)\nspecification\".\n\n[26] 3GPP\u00a0TS\u00a036.355: \"Evolved Universal Terrestrial Radio Access (E-UTRA);\nLTE Positioning Protocol (LPP)\".\n\n[27] 3GPP\u00a0TS\u00a038.300: \"NR; NR and NG-RAN Overall Description; Stage 2\".\n\n[28] 3GPP\u00a0TS\u00a038.304: \"New Generation Radio Access Network; User Equipment\n(UE) procedures in Idle mode\".\n\n[29] 3GPP\u00a0TS\u00a038.323: \"Evolved Universal Terrestrial Radio Access (E-UTRA);\nPacket Data Convergence Protocol (PDCP) specification\".\n\n[30] 3GPP\u00a0TS\u00a038.331: \"NR; Radio Resource Control (RRC); Protocol\nSpecification\".\n\n[31] 3GPP\u00a0TS\u00a038.413: \"NG Radio Access Network (NG-RAN); NG Application\nProtocol (NGAP)\".\n\n[32] IETF\u00a0RFC\u00a0768: \"User Datagram Protocol\".\n\n[33] IETF\u00a0RFC\u00a0793: \"Transmission Control Protocol.\"\n\n[34] IETF\u00a0RFC\u00a03748: \"Extensible Authentication Protocol (EAP)\".\n\n[35] IETF RFC 3736 (April 2004): \"Stateless Dynamic Host Configuration\nProtocol (DHCP) Service for IPv6\"\n\n[36] IETF\u00a0RFC\u00a04191: \"Default Router Preferences and More-Specific Routes\".\n\n[37] IETF\u00a0RFC\u00a04282: \"The Network Access Identifier\".\n\n[38] IETF\u00a0RFC\u00a04303: \"IP Encapsulating Security Payload (ESP)\".\n\n[39] IETF\u00a0RFC\u00a04862: \"IPv6 Stateless Address Autoconfiguration\".\n\n[40] IETF\u00a0RFC\u00a05448: \"Improved Extensible Authentication Protocol Method for\n3rd Generation Authentication and Key Agreement (EAP-AKA')\".\n\n[41] IETF\u00a0RFC\u00a07296: \"Internet Key Exchange Protocol Version 2 (IKEv2)\".\n\n[42] ITU-T\u00a0Recommendation\u00a0E.212: \"The international identification plan for\nmobile terminals and mobile users\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Definitions and abbreviations", "numbering": "3", "title_level": 0, "desc": "3  Definitions and abbreviations\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4", "title_level": 0, "desc": "         4  General\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "4.1", "title_level": 1, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between the protocols for 5GS mobility management and", "numbering": "4.2", "title_level": 1, "desc": "4.1  Overview\n\n\n4.2  Coordination between the protocols for 5GS mobility management and 5GS\n         session management\n\nA 5GS session management (5GSM) message is piggybacked in specific 5GS\nmobility management (5GMM) transport messages. To this purpose, the 5GSM\nmessages can be transmitted in an information element in the 5GMM transport\nmessages. In this case, the UE, the AMF and the SMF execute the 5GMM\nprocedure and the 5GSM procedure in parallel. The success of the 5GMM\nprocedure is not dependent on the success of the piggybacked 5GSM\nprocedure.\n\nThe UE can only initiate the 5GSM procedure when there is a 5GMM context\nestablished at the UE and the AMF can only forward the 5GSM message for the\n5GSM procedure initiated by the SMF when there is a 5GMM context\nestablished at the AMF.\n\nExcept for the 5GMM procedures piggybacking 5GSM messages, during 5GMM\nprocedures the UE and the AMF shall suspend the transmission of 5GSM\nmessages.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE domain selection", "numbering": "4.3", "title_level": 1, "desc": "4.3  UE domain selection\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE\u2019s usage setting", "numbering": "4.3.1", "title_level": 2, "desc": "4.3.1  UE\u2019s usage setting\n\nThe UE\u2019s usage setting defined in 3GPP\u00a0TS\u00a024.301\u00a0[15] applies to voice\ncapable UEs in 5GS and indicates whether the UE has preference for voice\nservices over data services or vice-versa, where:\n\na) voice services include IMS voice; and\n\nb) data services include any kind of user data transfer without a voice\nmedia component.\n\nThe UE\u2019s usage setting can be set to:\n\na) \"voice centric\"; or\n\nb) \"data centric\".\n\n If the UE is capable of S1 mode, there is a single UE\u2019s usage setting at\nthe UE which applies to both 5GS and EPS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Domain selection for UE originating sessions / calls", "numbering": "4.3.2", "title_level": 2, "desc": "4.3.2  Domain selection for UE originating sessions / calls\n\nThe behaviour of the UE for domain selection is determined by:\n\na) the UE usage setting;\n\nb) the availability of IMS voice; and\n\nc) whether the UE operates in single-registration mode or dual-registration\nmode (see 3GPP\u00a0TS\u00a023.501\u00a0[8]).\n\nIn the present document, \"IMS voice not available\" is determined per access\ntype independently, i.e. 3GPP access or non-3GPP access.\n\nIn the present document, \"IMS voice not available\" refers to one of the\nfollowing conditions:\n\na) the UE does not support IMS voice;\n\nb) the UE supports IMS voice, but the network indicates in the REGISTRATION\nACCEPT message that IMS voice over PS sessions are not supported; or\n\nc) the UE supports IMS voice, the network indicates in the REGISTRATION\nACCEPT message that IMS voice over PS sessions are supported, but the upper\nlayers:\n\n1) provide no indication that the UE is available for voice call in the IMS\nwithin a manufacturer determined period of time; or\n\n2) indicate that the UE is not available for voice calls in the IMS.\n\nNOTE:  If conditions\u00a0a and b evaluate to false, the upper layers need time\nto attempt IMS registration. In the event an indication from the upper\nlayers that the UE is available for voice calls in the IMS takes longer\nthan the manufacturer determined period of time (e.g. due to delay when\nattempting IMS registration or due to delay in obtaining a QoS flow for SIP\nsignalling), the NAS layer assumes the UE is not available for voice calls\nin the IMS.\n\nOther conditions may exist but these are implementation specific.\n\nIn the present document, \"IMS voice available\" applies when \"IMS voice not\navailable\" does not apply.\n\nWhen IMS voice is not available over 3GPP access, if the UE\u2019s usage setting\nis \"voice centric\", the UE operates in single-registration mode, and the\nUE:\n\n-  does not have a persistent PDU session, the UE shall disable the N1 mode\ncapability for 3GPP access (see subclause\u00a04.9.2), and attempt to select an\nE-UTRA cell connected to EPC. If such a cell is found, the UE shall then\nperform voice domain selection procedures as defined in\n3GPP\u00a0TS\u00a024.301\u00a0[15]; and\n\n-  has a persistent PDU session, then the UE waits until the radio bearer\nassociated with the persistent PDU session has been released. When the\nradio bearer associated with the persistent PDU session has been released\nand the UE operates in single-registration mode, the UE's usage setting is\n\"voice centric\" with \"IMS voice not available\", the UE shall attempt to\nselect an E-UTRA cell connected to EPC and disable the N1 mode capability\nfor 3GPP access (see subclause\u00a04.9). If such a cell is found, the UE shall\nthen perform voice domain selection procedures as defined in\n3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Change of UE\u2019s usage setting", "numbering": "4.3.3", "title_level": 2, "desc": "4.3.3  Change of UE\u2019s usage setting\n\nIf the UE operates in single-registration mode, whenever the UE's usage\nsetting changes, the UE shall execute procedures according to\ntable\u00a04.3.3.1:\n\nTable\u00a04.3.3.1: Change of UE's usage setting for a UE in single-registration\nmode\n\n|UE's usage      |Procedure to execute                            |\n|setting change  |                                                |\n|From \"data      |Disable the N1 mode capability for 3GPP access  |\n|centric\" to     |(see subclause\u00a04.9.2)                           |\n|\"voice centric\" |                                                |\n|and \"IMS voice  |                                                |\n|not available\"  |                                                |\n|over 3GPP access|                                                |\n|From \"voice     |Re-enable the N1 mode capability for 3GPP access|\n|centric\" to     |(see subclause\u00a04.9.2)                           |\n|\"data centric\"  |                                                |\n|and the N1 mode |                                                |\n|capability for  |                                                |\n|3GPP access is  |                                                |\n|disabled at the |                                                |\n|UE              |                                                |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Change or determination of IMS voice availability", "numbering": "4.3.4", "title_level": 2, "desc": "4.3.4  Change or determination of IMS voice availability\n\nIf the UE operates in single-registration mode, whenever the IMS voice\navailability is determined or changes, the UE shall execute procedures\naccording to table\u00a04.3.4.1:\n\nTable\u00a04.3.4.1: Change of IMS voice availability for a UE in single-\nregistration mode\n\n|Change of IMS   |Procedure to execute                            |\n|voice available |                                                |\n|condition       |                                                |\n|\"IMS voice not  |Disable the N1 mode capability (see             |\n|available\" over |subclause\u00a04.9.2)                                |\n|3GPP access and |                                                |\n|the UE\u2019s usage  |                                                |\n|setting is      |                                                |\n|\"voice centric\" |                                                |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS security", "numbering": "4.4", "title_level": 1, "desc": "4.4  NAS security\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.4.1", "title_level": 2, "desc": "4.4.1  General\n\nThis clause describes the principles for the handling of 5G NAS security\ncontexts in the UE and in the AMF and the procedures used for the security\nprotection of NAS messages between the UE and the AMF. Security protection\ninvolves integrity protection and ciphering of the 5GMM and 5GSM NAS\nmessages.\n\nThe signalling procedures for the control of NAS security are part of the\n5GMM protocol and are described in detail in clause\u00a05.\n\nNOTE:  The use of ciphering in a network is an operator option. In this\nsubclause, for the ease of description, it is assumed that ciphering is\nused, unless explicitly indicated otherwise. Operation of a network without\nciphering is achieved by configuring the AMF so that it always selects the\n\"null ciphering algorithm\", NEA0.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of 5G NAS security contexts", "numbering": "4.4.2", "title_level": 2, "desc": "4.4.2  Handling of 5G NAS security contexts\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.4.2.1", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Establishment of a mapped 5G NAS security context during", "numbering": "4.4.2.2", "title_level": 3, "desc": "4.4.2.1  General\n\nThe security parameters for authentication, integrity protection and\nciphering are tied together in a 5G NAS security context and identified by\na key set identifier (ngKSI). The relationship between the security\nparameters is defined in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nBefore security can be activated, the AMF and the UE need to establish a 5G\nNAS security context. Usually, the 5G NAS security context is created as\nthe result of a primary authentication and key agreement procedure between\nthe AMF and the UE. Alternatively, during inter-system change from S1 mode\nto N1 mode, the AMF and the UE derive a mapped 5G NAS security context from\nan EPS security context that has been established while the UE was in S1\nmode.\n\nThe 5G NAS security context is taken into use by the UE and the AMF, when\nthe AMF initiates an NAS security mode control procedure or during the\ninter-system change procedure from S1 mode to N1 mode. The 5G NAS security\ncontext which has been taken into use by the network most recently is\ncalled current 5G NAS security context. This current 5G NAS security\ncontext can be of type native or mapped, i.e. originating from a native 5G\nNAS security context or mapped 5G NAS security context.\n\nThe key set identifier ngKSI is assigned by the AMF either during the\nprimary authentication and key agreement procedure or, for the mapped 5G\nNAS security context, during the inter-system change procedure. The ngKSI\nconsists of a value and a type of security context parameter indicating\nwhether a 5G NAS security context is a native 5G NAS security context or a\nmapped 5G NAS security context. When the 5G NAS security context is a\nnative 5G NAS security context, the ngKSI has the value of KSIAMF, and when\nthe current 5G NAS security context is of type mapped, the ngKSI has the\nvalue of KSIASME.\n\nThe 5G NAS security context which is indicated by an ngKSI can be taken\ninto use to establish the secure exchange of NAS messages when a new N1 NAS\nsignalling connection is established without executing a new primary\nauthentication and key agreement procedure (see subclause\u00a05.4.1) or when\nthe AMF initiates a security mode control procedure. For this purpose the\ninitial NAS messages (i.e. REGISTRATION REQUEST, DEREGISTRATION REQUEST and\nSERVICE REQUEST) and the SECURITY MODE COMMAND message contain an ngKSI in\nthe NAS key set identifier IE indicating the current 5G NAS security\ncontext used to integrity protect the NAS message.\n\nIn the present document, when the UE is required to delete an ngKSI, the UE\nshall set the ngKSI to the value \"no key is available\" and consider also\nthe associated keys KAMF or K'AMF, 5G NAS ciphering key and 5G NAS\nintegrity key invalid (i.e. the 5G NAS security context associated with the\nngKSI as no longer valid).\n\nNOTE:  In some specifications the term ciphering key sequence number might\nbe used instead of the term key set identifier (KSI).\n\nAs described in the subclause 4.8 in order to interwork with E-UTRAN\nconnected to EPC, the UE supporting both S1 mode and N1 mode can operate in\neither single-registration mode or dual-registration mode. A UE operating\nin dual-registration mode shall independently maintain and use both EPS\nsecurity context (see 3GPP\u00a0TS\u00a024.301\u00a0[15]) and 5G NAS security context.\nDuring inter-system change to S1 mode, the UE operating in dual-\nregistration mode shall take into use an EPS security context and follow\nthe handling of this security context as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\nHowever, during inter-system change to N1 mode, the UE operating in dual-\nregistration mode shall take into use a 5G NAS security context and follow\nthe handling of this security context as described in the present\nspecification. A UE operating in single-registration mode shall maintain\nand use only 5G NAS security context and follow the handling of this\nsecurity context as described in the present specification.\n\nThe UE and the AMF need to be able to maintain two 5G NAS security contexts\nsimultaneously, i.e. a current 5G NAS security context and a non-current 5G\nNAS security context, since:\n\na) after a 5G re-authentication, the UE and the AMF can have both a current\n5G NAS security context and a non-current 5G NAS security context which has\nnot yet been taken into use (i.e. a partial native 5G NAS security\ncontext); and\n\nb) after an inter-system change from S1 mode to N1 mode, the UE and the AMF\ncan have both a mapped 5G NAS security context, which is the current 5G NAS\nsecurity context, and a non-current native 5G NAS security context that was\ncreated during a previous access in N1 mode.\n\nThe number of 5G NAS security contexts that need to be maintained\nsimultaneously by the UE and the AMF is limited by the following\nrequirements:\n\na) After a successful 5G (re-)authentication, which creates a new partial\nnative 5G NAS security context, the AMF and the UE shall delete the non-\ncurrent 5G NAS security context, if any;\n\nb) When a partial native 5G NAS security context is taken into use through\na security mode control procedure, the AMF and the UE shall delete the\npreviously current 5G NAS security context;\n\nc) When the AMF and the UE create a 5G NAS security context using null\nintegrity and null ciphering algorithm during an initial registration\nprocedure for emergency services, or a registration procedure for mobility\nand periodic registration update for a UE that has a PDU session for\nemergency services (see subclause\u00a05.4.2.2), the AMF and the UE shall delete\nthe previous current 5G NAS security context;\n\nd) When a new mapped 5G NAS security context or 5G NAS security context\ncreated using null integrity and null ciphering algorithm is taken into use\nduring the inter-system change from S1 mode to N1 mode, the AMF and the UE\nshall not delete the previously current native 5G NAS security context, if\nany. Instead, the previously current native 5G NAS security context shall\nbecome a non-current native 5G NAS security context, and the AMF and the UE\nshall delete any partial native 5G NAS security context;\n\n   If no previously current native 5G NAS security context exists, the AMF\nand the UE shall not delete the partial native 5G NAS security context, if\nany;\n\ne) When the AMF and the UE derive a new mapped 5G NAS security context\nduring inter-system change from S1 mode to N1 mode, the AMF and the UE\nshall delete any existing current mapped 5G NAS security context;\n\nf) When a non-current full native 5G NAS security context is taken into use\nby a security mode control procedure, then the AMF and the UE shall delete\nthe previously current mapped 5G NAS security context; and\n\ng) When the UE or the AMF moves from 5GMM-REGISTERED to 5GMM-DEREGISTERED\nstate, if the current 5G NAS security context is a mapped 5G NAS security\ncontext and a non-current full native 5G NAS security context exists, then\nthe non-current 5G NAS security context shall become the current 5G NAS\nsecurity context. Furthermore, the UE and the AMF shall delete any mapped\n5G NAS security context or partial native 5G NAS security context.\n\nThe UE shall mark the 5G NAS security context on the USIM or in the non-\nvolatile memory as invalid when the UE initiates an initial registration\nprocedure as described in subclause\u00a05.5.1,2 or when the UE leaves state\n5GMM-DEREGISTERED for any other state except 5GMM-NULL.\n\nThe UE shall store the current native 5G NAS security context as specified\nin annex\u00a0C and mark it as valid only when the UE enters state 5GMM-\nDEREGISTERED from any other state except 5GMM-NULL or when the UE aborts\nthe initial registration procedure without having left 5GMM-DEREGISTERED.\n\n\n4.4.2.2  Establishment of a mapped 5G NAS security context during inter-\n         system change from S1 mode to N1 mode in 5GMM-CONNECTED mode\n\nIn order for the UE operating in single-registration mode to derive a\nmapped 5G NAS security context for an inter-system change from S1 mode to\nN1 mode in 5GMM-CONNECTED mode, the AMF shall generate an ngKSI using the\ndownlink NAS COUNT and the K'ASME as indicated in 3GPP\u00a0TS\u00a033.501\u00a0[24]. The\nAMF shall include the message authentication code, selected NAS algorithms,\ndownlink NAS COUNT, replayed UE security capabilities and generated ngKSI\nin the S1 to N1 NAS transparent container IE (see subclause\u00a09.10.2.7). The\nAMF shall derive the 5G NAS keys from the K'ASME.\n\nWhen the UE operating in single-registration mode receives the command to\nperform handover to NG-RAN, the UE shall derive K'AMF, as indicated in\n3GPP\u00a0TS\u00a033.501\u00a0[24], using the K'ASME received in the S1 mode to N1 mode\nNAS transparent container IE. Furthermore, the UE shall associate the\nderived K'AMF with the received KSIASME and derive the 5G NAS keys from the\nK'ASME.\n\nWhen the UE operating in single-registration mode has a PDU session for\nemergency services and has no current EPS security context, the AMF shall\nset 5G-IA0 and 5G-EA0 as the selected NAS security algorithms in the S1\nmode to N1 mode NAS transparent container IE. The AMF shall create a\nlocally generated the K'AMF. The AMF shall set the ngKSI value of the\nassociated security context to \"000\" and the type of security context flag\nto \"mapped security context\" in the S1 mode to N1 mode NAS transparent\ncontainer IE.\n\nWhen the UE operating in single-registration mode receives the command to\nperform handover to NG-RAN (see 3GPP\u00a0TS\u00a038.331\u00a0[30]) and has a PDU\nconnection for emergency services, if 5G-IA0 and 5G-EA0 as the selected NAS\nsecurity algorithms are included in the S1 mode to N1 mode NAS transparent\ncontainer IE, the UE shall create a locally generated K'AMF. Furthermore,\nthe UE shall set the ngKSI value of the associated security context to the\nKSI value received.\n\nIf the inter-system change from S1 mode to N1 mode in 5GMM-CONNECTED mode\nis not completed successfully, the AMF and the UE operating in single-\nregistration mode shall delete the new mapped 5G NAS security context.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Establishment of secure exchange of NAS messages", "numbering": "4.4.2.3", "title_level": 3, "desc": "4.4.2.3  Establishment of secure exchange of NAS messages\n\nSecure exchange of NAS messages via a NAS signalling connection is usually\nestablished by the AMF during the registration procedure by initiating a\nsecurity mode control procedure. After successful completion of the\nsecurity mode control procedure, all NAS messages exchanged between the UE\nand the AMF are sent integrity protected using the current 5G security\nalgorithms, and except for the messages specified in subclause\u00a04.4.5, all\nNAS messages exchanged between the UE and the AMF are sent ciphered using\nthe current 5G security algorithms.\n\nDuring inter-system change from S1 mode to N1 mode in 5GMM-CONNECTED mode,\nsecure exchange of NAS messages is established between the AMF and the UE\nby:\n\na) the transmission of NAS security related parameters encapsulated in the\nAS signalling from the AMF to the UE triggering the inter-system change in\n5GMM-CONNECTED mode (see 3GPP\u00a0TS\u00a033.501\u00a0[24]). The UE uses these parameters\nto generate the mapped 5G NAS security context; and,\n\nb) after the inter-system change in 5GMM-CONNECTED mode, the transmission\nof a REGISTRATION REQUEST message from the UE to the AMF. The UE shall send\nthis message integrity protected using the mapped 5G NAS security context,\nbut unciphered. From this time onward, all NAS messages exchanged between\nthe UE and the AMF are sent integrity protected using the mapped 5G NAS\nsecurity context, and except for the messages specified in subclause 4.4.5,\nall NAS messages exchanged between the UE and the AMF are sent ciphered\nusing the mapped 5G NAS security context.\n\nThe secure exchange of NAS messages shall be continued after N1 mode to N1\nmode handover. It is terminated after inter-system change from N1 mode to\nS1 mode or when the NAS signalling connection is released.\n\nWhen a UE in 5GMM-IDLE mode, after an inter-system change from S1 mode to\nN1 mode, establishes a new NAS signalling connection, and has a valid\ncurrent 5G NAS security context, the UE shall transmit the initial NAS\nmessage integrity protected with the current 5G NAS security context. The\nUE shall include the ngKSI indicating the current 5G NAS security context\nvalue in the initial NAS message. The AMF shall check whether the ngKSI\nincluded in the initial NAS message belongs to a 5G NAS security context\navailable in the AMF, and shall verify the MAC of the NAS message. If the\nverification is successful, the AMF deletes the security context received\nfrom the source MME, and the AMF may re-establish the secure exchange of\nNAS messages:\n\na) by replying with a NAS message that is integrity protected and ciphered\nusing the current 5G NAS security context. From this time onward, all NAS\nmessages exchanged between the UE and the AMF are sent integrity protected\nand except for the messages specified in subclause 4.4.5, all NAS messages\nexchanged between the UE and the AMF are sent ciphered; or\n\nb) by initiating a security mode control procedure. This can be used by the\nAMF to take a non-current 5G NAS security context into use or to modify the\ncurrent 5G NAS security context by selecting new NAS security algorithms.\n\nWhen a UE in 5GMM-IDLE mode establishes a new NAS signalling connection and\nhas a valid current 5G NAS security context, the UE shall transmit the\ninitial NAS message integrity protected with the current 5G NAS security\ncontext, but unciphered. The UE shall include the ngKSI indicating the\ncurrent 5G NAS security context value in the initial NAS message. The AMF\nshall check whether the ngKSI included in the initial NAS message belongs\nto a 5G NAS security context available in the AMF, and shall verify the MAC\nof the NAS message. If the verification is successful, the AMF may re-\nestablish the secure exchange of NAS messages:\n\na) by replying with a NAS message that is integrity protected and ciphered\nusing the current 5G NAS security context. From this time onward, all NAS\nmessages exchanged between the UE and the AMF are sent integrity protected\nand except for the messages specified in subclause 4.4.5, all NAS messages\nexchanged between the UE and the AMF are sent ciphered; or\n\nb) by initiating a security mode control procedure. This can be used by the\nAMF to take a non-current 5G NAS security context into use or to modify the\ncurrent 5G NAS security context by selecting new NAS security algorithms.\n\nWhen a UE in 5GMM-IDLE mode establishes a new NAS signalling connection,\nhas no current 5G NAS security context and performs a registration\nprocedure after an inter-system change in idle mode from S1 mode to N1\nmode, the UE shall send the REGISTRATION REQUEST message without integrity\nprotection and encryption. The AMF may create a fresh mapped 5G NAS\nsecurity context or may trigger a primary authentication and key agreement\nprocedure to create a fresh native 5G NAS security context. The newly\ncreated 5G NAS security context is taken into use by initiating a security\nmode control procedure and this context becomes the current 5G NAS security\ncontext in both the UE and the AMF. This re-establishes the secure exchange\nof NAS messages.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Change of security keys", "numbering": "4.4.2.4", "title_level": 3, "desc": "4.4.2.4  Change of security keys\n\nWhen the AMF initiates a re-authentication to create a new 5G NAS security\ncontext, the messages exchanged during the authentication procedure are\nintegrity protected and ciphered using the current 5G NAS security context,\nif any.\n\nBoth UE and AMF shall continue to use the current 5G NAS security context,\nuntil the AMF initiates a security mode control procedure. The SECURITY\nMODE COMMAND message sent by the AMF includes the ngKSI of the new 5G NAS\nsecurity context to be used. The AMF shall send the SECURITY MODE COMMAND\nmessage integrity protected with the new 5G NAS security context, but\nunciphered. When the UE responds with a SECURITY MODE COMPLETE message, it\nshall send the message integrity protected and ciphered with the new 5G NAS\nsecurity context.\n\nThe AMF can also modify the current 5G NAS security context or take the non-\ncurrent native 5G NAS security context, if any, into use, by sending a\nSECURITY MODE COMMAND message including the ngKSI of the 5G NAS security\ncontext to be modified and including a new set of selected NAS security\nalgorithms. In this case the AMF shall send the SECURITY MODE COMMAND\nmessage integrity protected with the modified 5G NAS security context, but\nunciphered. When the UE replies with a SECURITY MODE COMPLETE message, it\nshall send the message integrity protected and ciphered with the modified\n5G NAS security context.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of NAS COUNT and NAS sequence number", "numbering": "4.4.3", "title_level": 2, "desc": "4.4.3  Handling of NAS COUNT and NAS sequence number\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.4.3.1", "title_level": 3, "desc": "4.4.3.1  General\n\nEach 5G NAS security context shall be associated with two separate counters\nNAS COUNT per access type in the same PLMN: one related to uplink NAS\nmessages and one related to downlink NAS messages. If the 5G NAS security\ncontext is used for access via both 3GPP and non-3GPP access in the same\nPLMN, there are two NAS COUNT counter pairs associated with the 5G NAS\nsecurity context. The NAS COUNT counters use 24 bit internal representation\nand are independently maintained by UE and AMF. The NAS COUNT shall be\nconstructed as a NAS sequence number (8 least significant bits)\nconcatenated with a NAS overflow counter (16 most significant bits).\n\nWhen NAS COUNT is input to NAS ciphering or NAS integrity algorithms it\nshall be considered to be a 32-bit entity which shall be constructed by\npadding the 24-bit internal representation with 8 zeros in the most\nsignificant bits.\n\nThe value of the uplink NAS COUNT that is stored or read out of the USIM or\nnon-volatile memory as described in annex\u00a0C, is the value that shall be\nused in the next NAS message.\n\nThe value of the downlink NAS COUNT that is stored or read out of the USIM\nor non-volatile memory as described in annex\u00a0C, is the largest downlink NAS\nCOUNT used in a successfully integrity checked NAS message.\n\nThe NAS sequence number part of the NAS COUNT shall be exchanged between\nthe UE and the AMF as part of the NAS signalling. After each new or\nretransmitted outbound security protected NAS message, the sender shall\nincrease the NAS COUNT number by one, except for the initial NAS messages\nif the lower layers indicated the failure to establish the RRC connection\n(see 3GPP\u00a0TS\u00a038.331\u00a0[30]). Specifically, on the sender side, the NAS\nsequence number shall be increased by one, and if the result is zero (due\nto wrap around), the NAS overflow counter shall also be incremented by one\n(see subclause\u00a04.4.3.5). The receiving side shall estimate the NAS COUNT\nused by the sending side. Specifically, if the estimated NAS sequence\nnumber wraps around, the NAS overflow counter shall be incremented by one.\n\nDuring the handover from E-UTRAN to NG-RAN, when a mapped 5G NAS security\ncontext is derived and taken into use, the AMF shall set both the uplink\nand downlink NAS COUNT counters of this 5G NAS security context to zero.\nThe UE shall set both the uplink and downlink NAS COUNT counters to zero.\n\nDuring the handover from NG-RAN to E-UTRAN the AMF signals the current\ndownlink NAS COUNT value in a NAS security transparent container (see\nsubclause\u00a09.10.2.x).\n\nDuring handover to or from NG-RAN, the AMF shall increment downlink NAS\nCOUNT by one after it has created a NAS security transparent container (see\nsubclause\u00a09.10.2.7).\n\nNOTE:  During the handover from E-UTRAN to NG-RAN, the NAS security\ntransparent container (see subclause\u00a09.10.2.7) is treated as an implicit\nSECURITY MODE COMMAND message for the UE and the AMF, and therefore the AMF\nregards the sending of the NAS security transparent container as the\nsending of an initial SECURITY MODE COMMAND message in order to derive and\ntake into use a mapped 5G NAS security context for the purpose of the NAS\nCOUNT handling.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Replay protection", "numbering": "4.4.3.2", "title_level": 3, "desc": "4.4.3.2  Replay protection\n\nReplay protection shall be supported for received NAS messages both in the\nAMF and the UE. However, since the realization of replay protection does\nnot affect the interoperability between nodes, no specific mechanism is\nrequired for implementation.\n\nReplay protection assures that one and the same NAS message is not accepted\ntwice by the receiver. Specifically, for a given 5G NAS security context, a\ngiven NAS COUNT value shall be accepted at most one time and only if\nmessage integrity verifies correctly.\n\nReplay protection is not applicable when 5G-IA0 is used.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Integrity protection and verification", "numbering": "4.4.3.3", "title_level": 3, "desc": "4.4.3.3  Integrity protection and verification\n\nThe sender shall use its locally stored NAS COUNT as input to the integrity\nprotection algorithm.\n\nThe receiver shall use the NAS sequence number included in the received\nmessage and an estimate for the NAS overflow counter as defined in\nsubclause\u00a04.4.3.1 to form the NAS COUNT input to the integrity verification\nalgorithm.\n\nThe algorithm to calculate the integrity protection information is\nspecified in 3GPP\u00a0TS\u00a033.501\u00a0[24], and the integrity protection shall\ninclude octet 7 to n of the security protected 5GS NAS message, i.e. the\nsequence number IE and the NAS message IE. In addition to the data that is\nto be integrity protected, the BEARER ID, DIRECTION bit, NAS COUNT and 5G\nNAS are input to the integrity protection algorithm. These parameters are\ndescribed in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nAfter successful integrity protection validation, the receiver shall update\nits corresponding locally stored NAS COUNT with the value of the estimated\nNAS COUNT for this NAS message.\n\nIntegrity verification is not applicable when 5G-IA0 is used.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Ciphering and deciphering", "numbering": "4.4.3.4", "title_level": 3, "desc": "4.4.3.4  Ciphering and deciphering\n\nThe sender shall use its locally stored NAS COUNT as input to the ciphering\nalgorithm.\n\nThe receiver shall use the NAS sequence number included in the received\nmessage and an estimate for the NAS overflow counter as defined in\nsubclause\u00a04.4.3.1 to form the NAS COUNT input to the deciphering algorithm.\n\nThe input parameters to the NAS ciphering algorithm are the BEARER ID,\nDIRECTION bit, NAS COUNT, NAS encryption key and the length of the key\nstream to be generated by the encryption algorithm.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS COUNT wrap around", "numbering": "4.4.3.5", "title_level": 3, "desc": "4.4.3.5  NAS COUNT wrap around\n\nIf, when increasing the NAS COUNT as specified above, the AMF detects that\neither its downlink NAS COUNT or the UE's uplink NAS COUNT is \"close\" to\nwrap around, (close to 224), the AMF shall take the following actions:\n\n-  If there is no non-current native 5G NAS security context with\nsufficiently low NAS COUNT values, the AMF shall initiate a new primary\nauthentication and key agreement procedure with the UE, leading to a new\nestablished 5G NAS security context and the NAS COUNT being reset to 0 in\nboth the UE and the AMF when the new 5G NAS security context is activated;\n\n-  Otherwise, the AMF can activate a non-current native 5G NAS security\ncontext with sufficiently low NAS COUNT values or initiate a new primary\nauthentication and key agreement procedure as specified above.\n\nIf for some reason a new KAMF has not been established using primary\nauthentication and key agreement procedure before the NAS COUNT wraps\naround, the node (AMF or UE) in need of sending a NAS message shall instead\nrelease the NAS signalling connection. Prior to sending the next uplink NAS\nmessage, the UE shall delete the ngKSI indicating the current 5G NAS\nsecurity context.\n\nWhen the 5G-IA0 is used as the NAS integrity algorithm, the UE and the AMF\nshall allow NAS COUNT wrap around. If NAS COUNT wrap around occurs, the\nfollowing requirements apply:\n\na) the UE and the AMF shall continue to use the current 5G NAS security\ncontext;\n\nb) the AMF shall not initiate the primary authentication and key agreement\nprocedure;\n\nc) the AMF shall not release the NAS signalling connection; and\n\nd) the UE shall not perform a local release of the NAS signalling\nconnection.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Integrity protection of NAS signalling messages", "numbering": "4.4.4", "title_level": 2, "desc": "4.4.4  Integrity protection of NAS signalling messages\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.4.4.1", "title_level": 3, "desc": "4.4.4.1  General\n\nFor the UE, integrity protected signalling is mandatory for the 5GMM NAS\nmessages once a valid 5G NAS security context exists and has been taken\ninto use. For the network, integrity protected signalling is mandatory for\nthe 5GMM NAS messages once a secure exchange of 5GS NAS messages has been\nestablished for the NAS signalling connection. Integrity protection of all\nNAS signalling messages is the responsibility of the NAS. It is the network\nwhich activates integrity protection.\n\nThe use of \"null integrity protection algorithm\"5G-IA0 (see\nsubclause\u00a09.10.3.32) in the current 5G NAS security context is only allowed\nfor an unauthenticated UE for which establishment of emergency services is\nallowed. For setting the security header type in outbound NAS messages, the\nUE and the AMF shall apply the same rules irrespective of whether the \"null\nintegrity protection algorithm\" or any other integrity protection algorithm\nis indicated in the 5G NAS security context.\n\nIf the \"null integrity protection algorithm\"5G-IA0 has been selected as an\nintegrity protection algorithm, the receiver shall regard the NAS messages\nwith the security header indicating integrity protection as integrity\nprotected.\n\nDetails of the integrity protection and verification of NAS signalling\nmessages are specified in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nWhen a NAS message needs to be sent both ciphered and integrity protected,\nthe NAS message is first ciphered and then the ciphered NAS message and the\nNAS sequence number are integrity protected by calculating the MAC.\n\nNOTE:  NAS messages that are ciphered with the \"null ciphering algorithm\"\n5G-EA0 are regarded as ciphered (see subclause\u00a04.4.5).\n\nWhen a NAS message needs to be sent only integrity protected and\nunciphered, the unciphered NAS message and the NAS sequence number are\nintegrity protected by calculating the MAC.\n\nWhen during a 5GMM procedure a 5GSM message is piggybacked in a 5GMM\nmessage, there is only one sequence number IE and one message\nauthentication code IE, if any, for the combined NAS message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Integrity checking of NAS signalling messages in the UE", "numbering": "4.4.4.2", "title_level": 3, "desc": "4.4.4.2  Integrity checking of NAS signalling messages in the UE\n\nExcept the messages listed below, no NAS signalling messages shall be\nprocessed by the receiving 5GMM entity in the UE or forwarded to the 5GSM\nentity, unless the network has established secure exchange of 5GS NAS\nmessages for the NAS signalling connection:\n\na) IDENTITY REQUEST (if requested identification parameter is SUCI);\n\nb) AUTHENTICATION REQUEST;\n\nc) AUTHENTICATION RESULT;\n\nd) AUTHENTICATION REJECT;\n\ne) REGISTRATION REJECT;\n\nf) DEREGISTRATION ACCEPT (for non switch off); and\n\ng) SERVICE REJECT.\n\nNOTE:  These messages are accepted by the UE without integrity protection,\nas in certain situations they are sent by the network before security can\nbe activated.\n\nIntegrity protection is never applied directly to 5GSM messages, but to the\n5GMM message in which the 5GSM message is included.\n\nThe network can provide the transparent container IE during the\nregistration procedure to the UE in the REGISTRATION ACCEPT message. The\ntransparent container IE is integrity protected by the HPLMN as specified\nin 3GPP\u00a0TS\u00a033.501\u00a0[24]. If the transparent container IE does not\nsuccessfully pass the integrity check (see 3GPP\u00a0TS\u00a033.501\u00a0[24]), then the\nUE can abort the registration procedure before performing PLMN selection as\nspecified in subclause\u00a05.5.1.2.4 and subclause\u00a05.5.1.3.4.\n\nOnce the secure exchange of NAS messages has been established, the\nreceiving 5GMM entity in the UE shall not process any NAS signalling\nmessages unless they have been successfully integrity checked by the NAS.\nIf NAS signalling messages, having not successfully passed the integrity\ncheck, are received, then the NAS in the UE shall discard that message. The\nprocessing of the SECURITY MODE COMMAND message that has not successfully\npassed the integrity check is specified in subclause\u00a05.4.2.5. If any NAS\nsignalling message is received as not integrity protected even though the\nsecure exchange of NAS messages has been established by the network, then\nthe NAS shall discard this message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Integrity checking of NAS signalling messages in the AMF", "numbering": "4.4.4.3", "title_level": 3, "desc": "4.4.4.3  Integrity checking of NAS signalling messages in the AMF\n\nExcept the messages listed below, no NAS signalling messages shall be\nprocessed by the receiving 5GMM entity in the AMF or forwarded to the 5GSM\nentity, unless the secure exchange of NAS messages has been established for\nthe NAS signalling connection:\n\na) REGISTRATION REQUEST;\n\nb) IDENTITY RESPONSE (if requested identification parameter is SUCI);\n\nc) AUTHENTICATION RESPONSE;\n\nd) AUTHENTICATION FAILURE;\n\ne) SECURITY MODE REJECT;\n\nf) DEREGISTRATION REQUEST; and\n\ng) DEREGISTRATION ACCEPT;\n\nNOTE\u00a01:  The REGISTRATION REQUEST message is sent by the UE without\nintegrity protection, if the registration procedure is initiated due to an\ninter-system change in 5GMM-IDLE mode and no current 5G NAS security\ncontext is available in the UE. The other messages are accepted by the AMF\nwithout integrity protection, as in certain situations they are sent by the\nUE before security can be activated.\n\nNOTE\u00a02:  The DEREGISTRATION REQUEST message can be sent by the UE without\nintegrity protection, e.g. if the UE is registered for emergency services\nand there is no shared 5G NAS security context available, or if due to user\ninteraction a registration procedure is cancelled before the secure\nexchange of NAS messages has been established. For these cases the network\ncan attempt to use additional criteria (e.g. whether the UE is subsequently\nstill performing periodic registration update or still responding to\npaging) before marking the UE as 5GMM-DEREGISTERED.\n\nIntegrity protection is never applied directly to 5GSM messages, but to the\n5GMM message in which the 5GSM message is included.\n\nOnce a current 5G NAS security context exists, until the secure exchange of\nNAS messages has been established for the NAS signalling connection, the\nreceiving 5GMM entity in the AMF shall process the following NAS signalling\nmessages, even if the MAC included in the message fails the integrity check\nor cannot be verified, as the 5G NAS security context is not available in\nthe network:\n\na) REGISTRATION REQUEST;\n\nb) IDENTITY RESPONSE (if requested identification parameter is SUCI);\n\nc) AUTHENTICATION RESPONSE;\n\nd) AUTHENTICATION FAILURE;\n\ne) SECURITY MODE REJECT;\n\nf) DEREGISTRATION REQUEST;\n\ng) DEREGISTRATION ACCEPT; and\n\nh) SERVICE REQUEST;\n\nNOTE\u00a03:  These messages are processed by the AMF even when the MAC that\nfails the integrity check or cannot be verified, as in certain situations\nthey can be sent by the UE protected with a 5G NAS security context that is\nno longer available in the network.\n\nIf a REGISTRATION REQUEST message fails the integrity check and it is not\nan registration request for emergency services, the AMF shall authenticate\nthe subscriber before processing the registration request any further.\nAdditionally, the AMF shall initiate a security mode control procedure, and\ninclude a HASHAMF IE in the SECURITY MODE COMMAND message as specified in\nsubclause\u00a05.4.2.2. For the case when the registration procedure is for\nemergency services see subclause\u00a05.5.1.2.3 and subclause\u00a05.4.1.3.5.\n\nIf a DEREGISTRATION REQUEST message fails the integrity check, the AMF\nshall proceed as follows:\n\n-  If it is not a deregistration request due to switch off, and the AMF can\ninitiate an authentication procedure, the AMF should authenticate the\nsubscriber before processing the deregistration request any further.\n\n-  If it is a deregistration request due to switch off, or the AMF does not\ninitiate an authentication procedure for any other reason, the AMF may\nignore the deregistration request and remain in state 5GMM-REGISTERED.\n\nNOTE\u00a04:  The network can attempt to use additional criteria (e.g. whether\nthe UE is subsequently still performing periodic registration update or\nstill responding to paging) before marking the UE as 5GMM-DEREGISTERED.\n\nIf a REGISTRATION REQUEST message fails the integrity check and the UE\nprovided EPS NAS message container IE which was successfully verified by\nthe source MME, the AMF may create a mapped 5G NAS security context and\ninitiate a security mode control procedure to take the new mapped 5G NAS\nsecurity context into use; otherwise if the UE has only a PDU session for\nnon-emergency services established, the AMF shall initiate a primary\nauthentication and key agreement procedure to create a new native 5G NAS\nsecurity context. Additionally, the AMF shall initiate a security mode\ncontrol procedure, and include a HASHAMF IE in the SECURITY MODE COMMAND\nmessage as specified in subclause\u00a05.4.2.2. For the case when the UE has a\nPDU session for emergency services see subclause\u00a05.5.1.3.3 and\nsubclause\u00a05.4.1.3.5.\n\nIf a SERVICE REQUEST message fails the integrity check and the UE has only\nPDU sessions for non-emergency services established, the AMF shall send the\nSERVICE REJECT message with 5GMM cause #9 \"UE identity cannot be derived by\nthe network\" and keep the 5GMM-context and 5G NAS security context\nunchanged. For the case when the UE has a PDU session for emergency\nservices and integrity check fails, the AMF may skip the authentication\nprocedure even if no 5G NAS security context is available and proceed\ndirectly to the execution of the security mode control procedure as\nspecified in subclause 5.4.2. After successful completion of the service\nrequest procedure, the network shall release all non-emergency PDU sessions\nlocally. The emergency PDU sessions shall not be released.\n\nOnce the secure exchange of NAS messages has been established for the NAS\nsignalling connection, the receiving 5GMM entity in the AMF shall not\nprocess any NAS signalling messages unless they have been successfully\nintegrity checked by the NAS. If any NAS signalling message, having not\nsuccessfully passed the integrity check, is received, then the NAS in the\nAMF shall discard that message. If any NAS signalling message is received,\nas not integrity protected even though the secure exchange of NAS messages\nhas been established, then the NAS shall discard this message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Ciphering of NAS signalling messages", "numbering": "4.4.5", "title_level": 2, "desc": "4.4.5  Ciphering of NAS signalling messages\n\nThe use of ciphering in a network is an operator option subject to AMF\nconfiguration. When operation of the network without ciphering is\nconfigured, the AMF shall indicate the use of \"null ciphering algorithm\" 5G-\nEA0 (see subclause\u00a09.10.3.32) in the current 5G NAS security context for\nall UEs. For setting the security header type in outbound NAS messages, the\nUE and the AMF shall apply the same rules irrespective of whether the \"null\nciphering algorithm\" or any other ciphering algorithm is indicated in the\n5G NAS security context.\n\nWhen the UE establishes a new N1 NAS signalling connection, it shall send\nthe initial NAS message unciphered.\n\nThe UE shall send the REGISTRATION REQUEST message always unciphered.\n\nThe UE shall start the ciphering and deciphering of NAS messages when the\nsecure exchange of NAS messages has been established for a N1 NAS\nsignalling connection. From this time onward, unless explicitly defined,\nthe UE shall send all NAS messages ciphered until the N1 NAS signalling\nconnection is released, or the UE performs inter-system change to S1 mode.\n\nThe AMF shall start ciphering and deciphering of NAS messages as described\nin subclause\u00a04.4.3.4. From this time onward, except for the SECURITY MODE\nCOMMAND message, the AMF shall send all NAS messages ciphered until the N1\nNAS signalling connection is released, or the UE performs inter-system\nchange to S1 mode.\n\nCiphering is never applied directly to 5GSM messages, but to the 5GMM\nmessage in which the 5GSM message is included.\n\nOnce the encryption of NAS messages has been started between the AMF and\nthe UE, the receiver shall discard the unciphered NAS messages which shall\nhave been ciphered according to the rules described in this specification.\n\nIf the \"null ciphering algorithm\"5G-EA0 has been selected as a ciphering\nalgorithm, the NAS messages with the security header indicating ciphering\nare regarded as ciphered.\n\nDetails of ciphering and deciphering of NAS signalling messages are\nspecified in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Unified access control", "numbering": "4.5", "title_level": 1, "desc": "4.5  Unified access control\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.5.1", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Determination of the access identities and access", "numbering": "4.5.2", "title_level": 2, "desc": "4.5.1  General\n\nWhen the UE wants to access the 5GS, the UE first performs access control\nchecks to determine if the access is allowed. Access control checks shall\nbe perfomed for the access attempts defined by the following list of\nevents:\n\na) the UE is in 5GMM-IDLE mode over 3GPP access and an event that requires\na transition to 5GMM-CONNECTED mode occurs; and\n\nb) the UE is in 5GMM-CONNECTED mode over 3GPP access or 5GMM-CONNECTED mode\nwith RRC inactive indication and one of the following events occurs:\n\n1) 5GMM receives an MO-MMTEL-voice-call-started indication, an MO-MMTEL-\nvideo-call-started indication or an MO-SMSoIP-attempt-started indication\nfrom upper layers;\n\n2) 5GMM receives a request from upper layers to send a mobile originated\nSMS over NAS unless the request triggered a service request procedure to\ntransition the UE from 5GMM-IDLE mode to 5GMM-CONNECTED mode;\n\n3) 5GMM receives a request from upper layers to send an UL NAS TRANSPORT\nmessage for the purpose of PDU session establishment unless the request\ntriggered a service request procedure to transition the UE from 5GMM-IDLE\nmode to 5GMM-CONNECTED mode;\n\n4) 5GMM receives a request from upper layers to send an UL NAS TRANSPORT\nmessage for the purpose of PDU session modification unless the request\ntriggered a service request procedure to transition the UE from 5GMM-IDLE\nmode to 5GMM-CONNECTED mode; and\n\n5) 5GMM receives a request to re-establish the user-plane resources for an\nexisting PDU session.\n\nNOTE\u00a01:  5GMM specific procedures initiated by NAS in 5GMM-CONNECTED mode\nare not subject to access control, e.g. a registration procedure after PS\nhandover will not be prevented by access control (see subclause\u00a05.5).\n\nEditor's note:  Whether other events need to be considered in 5GMM-\nCONNECTED mode or 5GMM-CONNECTED mode with RRC inactive indication, is FFS.\n\nWhen the NAS detects one of the above events, the NAS needs to perform the\nmapping of the kind of request to one or more access identities and one\naccess category and lower layers will perform access barring checks for\nthat request based on the determined access identities and access category.\n\nNOTE\u00a02:  The NAS is aware of the above events through indications provided\nby upper layers or when determing the need to start 5GMM procedures through\nnormal NAS behaviour, or both.\n\nTo determine the access identities and the access category for a request,\nthe NAS checks the reason for access, types of service requested and\nprofile of the UE including UE configurations, against a set of access\nidentities and access categories defined in 3GPP\u00a0TS\u00a022.261\u00a0[3], namely:\n\na) a set of standardized access identities;\n\nb) a set of standardized access categories; and\n\nc) a set of operator-defined access categories, if available.\n\nFor the purpose of determining the applicable access identities from the\nset of standardized access identities defined in 3GPP\u00a0TS\u00a022.261\u00a0[3], the\nNAS shall follow the requirements set out in subclause\u00a04.5.2 and the rules\nand actions defined in table\u00a04.5.2.1.\n\nFor the purpose of determining the applicable access category from the set\nof standardized access categories and operator-defined access categories\ndefined in 3GPP\u00a0TS\u00a022.261\u00a0[3], the NAS shall follow the requirements set\nout in subclause\u00a04.5.2 and the rules and actions defined in table\u00a04.5.2.2.\n\n\n4.5.2  Determination of the access identities and access category\n         associated with a request for access\n\nWhen the UE needs to initiate an access attempt in one of the events listed\nin subclause\u00a04.5.1, the UE shall determine one or more access identities\nfrom the set of standardized access identities, and one access category\nfrom the set of standardized access categories and operator-defined access\ncategories, to be associated with that access attempt.\n\nThe set of the access identities applicable for the request is determined\nby the UE in the following way:\n\na) for each of the access identities 1, 2, 11, 12, 13, 14 and 15 in\ntable\u00a04.5.2.1, the UE shall check whether the access identity is applicable\nin the selected PLMN, if a new PLMN is selected, or otherwise if it is\napplicable in the RPLMN or equivalent PLMN; and\n\nb) if none of the above access identities is applicable, then access\nidentity 0 is applicable.\n\nTable\u00a04.5.2.1: Access identities\n\n|Access Identity |UE configuration                                    |\n|number          |                                                    |\n|0               |UE is not configured with any parameters from this  |\n|                |table                                               |\n|1 (NOTE 1)      |UE is configured for multimedia priority service    |\n|                |(MPS).                                              |\n|2 (NOTE 2)      |UE is configured for mission critical service (MCS).|\n|3-10            |Reserved for future use                             |\n|11 (NOTE 3)     |Access Class 11 is configured in the UE.            |\n|12 (NOTE 3)     |Access Class 12 is configured in the UE.            |\n|13 (NOTE 3)     |Access Class 13 is configured in the UE.            |\n|14 (NOTE 3)     |Access Class 14 is configured in the UE.            |\n|15 (NOTE 3)     |Access Class 15 is configured in the UE.            |\n|NOTE 1: Access identity 1 is used by UEs configured for MPS, in the |\n|PLMNs where the configuration is valid. The PLMNs where the         |\n|configuration is valid are HPLMN (if the EHPLMN list is not present |\n|or is empty) or EHPLMN (if the EHPLMN list is present), visited     |\n|PLMNs of the home country, and configured visited PLMNs outside the |\n|home country.                                                       |\n|NOTE 2: Access identity 2 is used by UEs configured for MCS, in the |\n|PLMNs where the configuration is valid. The PLMNs where the         |\n|configuration is valid are HPLMN (if the EHPLMN list is not present |\n|or is empty) or EHPLMN (if the EHPLMN list is present).             |\n|NOTE 3: Access identities 11 and 15 are valid in HPLMN (if the      |\n|EHPLMN list is not present or is empty) or EHPLMN (if the EHPLMN    |\n|list is present). Access Identities 12, 13 and 14 are valid in HPLMN|\n|and visited PLMNs of home country only. For this purpose the home   |\n|country is defined as the country of the MCC part of the IMSI.      |\n\n\nEditor's note:  The definition and configuration of Access Classes 11 to 15\nfor 5GS is FFS.\n\nEditor's note:  How the UE is configured for MPS and MCS is FFS.\n\nThe UE uses the MPS indicator bit of the 5GS network feature support IE to\ndetermine if access identity 1 is valid when the UE is not in the country\nof its HPLMN (see 3GPP\u00a0TS\u00a023.122\u00a0[5]). Processing of the MPS indicator bit\nof the 5GS network feature support IE in the REGISTRATION ACCEPT message is\ndescribed in subclause\u00a05.5.1.2.4 and subclause\u00a05.5.1.3.4. The UE shall not\nconsider access identity 1 to be valid when the UE is not in the country of\nits HPLMN prior to receiving the MPS indicator bit of the 5GS network\nfeature support IE in the REGISTRATION ACCEPT message being set to \"Access\nidentity 1 valid in RPLMN or equivalent PLMN\".\n\nWhen the UE is in the country of its HPLMN, the contents of the USIM files\nEFUAC_AIC and EFACC as specified in 3GPP\u00a0TS\u00a031.102\u00a0[22] and the rules\nspecified in table\u00a04.5.2.1 are used to determine the applicability of\naccess identity 1 and access classes 11 - 15. When the UE is not in the\ncountry of its HPLMN, the contents of the USIM files EFUAC_AIC and EFACC\nare not applicable.\n\nIn order to determine the access category applicable for the access\nattempt, the NAS shall check the rules in table\u00a04.5.2.2, and use the access\ncategory for which there is a match for barring check. If the access\nattempt matches more than one rule, the access category of the lowest rule\nnumber shall be selected.\n\nTable\u00a04.5.2.2: Mapping table for access categories\n\n|Rule #   |Type of access   |Requirements to be met      |Access    |\n|         |attempt          |                            |Category  |\n|1        |Response to      |Access attempt is for MT    |0 (=      |\n|         |paging           |access                      |MT_acc)   |\n|2        |Emergency        |UE is attempting access for |2 (=      |\n|         |                 |an emergency session        |emergency)|\n|         |                 |(NOTE\u00a01, NOTE\u00a02)            |          |\n|3        |Access attempt   |UE was provided with        |32-63     |\n|         |for              |operator-defined access     |(= based  |\n|         |operator-defined |categories for the current  |on        |\n|         |access category  |PLMN, and access attempt is |operator  |\n|         |                 |matching criteria of an     |classifica|\n|         |                 |operator-defined access     |tion)     |\n|         |                 |category                    |          |\n|4        |Access attempt   |UE is configured for NAS    |1 (= delay|\n|         |for delay        |signalling low priority, the|tolerant) |\n|         |tolerant service |PLMN is broadcasting one of |          |\n|         |                 |the categories a, b or c,   |          |\n|         |                 |and the UE is a member of   |          |\n|         |                 |the broadcasted category in |          |\n|         |                 |the selected PLMN or        |          |\n|         |                 |RPLMN/equivalent PLMN       |          |\n|         |                 |(NOTE\u00a03, NOTE\u00a05)            |          |\n|5        |MO MMTel voice   |Access attempt is for MO    |4 (= MO   |\n|         |call             |MMTel voice call            |MMTel     |\n|         |                 |or for NAS signalling       |voice)    |\n|         |                 |connection recovery during  |          |\n|         |                 |ongoing MO MMTel voice call |          |\n|         |                 |(NOTE\u00a02)                    |          |\n|6        |MO MMTel video   |Access attempt is for MO    |5 (= MO   |\n|         |call             |MMTel video call            |MMTel     |\n|         |                 |or for NAS signalling       |video)    |\n|         |                 |connection recovery during  |          |\n|         |                 |ongoing MO MMTel video call |          |\n|         |                 |(NOTE\u00a02)                    |          |\n|7        |MO SMS over NAS  |Access attempt is for MO SMS|6 (= MO   |\n|         |or MO SMSoIP     |over NAS (NOTE\u00a04) or MO SMS |SMS and   |\n|         |                 |over SMSoIP transfer        |SMSoIP)   |\n|         |                 |or for NAS signalling       |          |\n|         |                 |connection recovery during  |          |\n|         |                 |ongoing MO SMS or SMSoIP    |          |\n|         |                 |transfer (NOTE\u00a02)           |          |\n|8        |UE NAS initiated |Access attempt is for MO    |3 (=      |\n|         |5GMM specific    |signalling                  |MO_sig)   |\n|         |procedures       |                            |          |\n|9        |UE NAS initiated |Access attempt is for MO    |7 (=      |\n|         |5GMM connection  |data                        |MO_data)  |\n|         |management       |                            |          |\n|         |procedures or    |                            |          |\n|         |5GMM NAS         |                            |          |\n|         |transport        |                            |          |\n|         |procedure        |                            |          |\n|NOTE\u00a01: This includes 5GMM specific procedures while the service is|\n|ongoing and 5GMM connection management procedures required to      |\n|establish a PDU session with request type = \"initial emergency     |\n|request\" or \"existing emergency PDU session\", or to re-establish   |\n|user-plane resources for such a PDU session. This further includes |\n|the service request procedure initiated with a SERVICE REQUEST     |\n|message with the Service type IE set to \"emergency services        |\n|fallback\".                                                         |\n|NOTE\u00a02: Access for the purpose of NAS signalling connection        |\n|recovery during an ongoing service is mapped to the access category|\n|of the ongoing service in order to derive an RRC establishment     |\n|cause, but barring checks will be skipped for this access attempt. |\n|NOTE\u00a03: If the UE selects a new PLMN, then the selected PLMN is    |\n|used to check the membership; otherwise the UE uses the RLPMN or a |\n|PLMN equivalent to the RPLMN.                                      |\n|NOTE\u00a04: This includes the 5GMM connection management procedures    |\n|triggered by the UE-initiated NAS transport procedure for          |\n|transporting the MO SMS.                                           |\n|NOTE\u00a05: The UE configured for NAS signalling low priority is not   |\n|supported in this release of specification.                        |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Operator-defined access categories", "numbering": "4.5.3", "title_level": 2, "desc": "4.5.3  Operator-defined access categories\n\nOperator-defined access categories can be signalled to the UE using NAS\nsignalling. Each operator-defined access category consists of the following\nparameters:\n\nEditor's note:  The encoding of the operator-defined access categories is\nFFS.\n\nEditor's note:  Whether the operator-defined access categories are sent to\nthe UE in a CONFIGURATION UPDATE COMMAND message, a DL NAS TRANSPORT\nmessage or another NAS message is FFS.\n\na) a precedence value which indicates in which order the UE shall evaluate\nthe operator-defined categories for a match;\n\nb) an access category number in the 32-63 range that uniquely identifies\nthe access category in the PLMN in which the access categories are being\nsent to the UE; and\n\nc) one or more access category criteria type and associated access category\ncriteria type values. The access category criteria type can be set to one\nof the following:\n\n1) DNN name;\n\n2) 5QI;\n\nEditor's note:  Whether the 5QI is a suitable access category criteria type\nis FFS.\n\n3) OS Id + OS App Id of application triggering the access attempt; or\n\n4) S-NSSAI; and\n\nd) optionally, a standardized access category, that is used in combination\nwith the access identities to determine the establishment cause.\n\nEditor's note:  Other access category criteria types, in particular whether\nQFI is a suitable parameter, are FFS.\n\nEditor's note:  When the standardized access category, that is used in\ncombination with the access identities to determine the establishment\ncause, is not provided, then it is FFS how the UE derives RRC establishment\ncause.\n\nNOTE:  An access category criteria type can be associated with more than\none access category criteria values. In this case, the access attempt\nmatches the access category if the access criteria for the access attempt\nmatch any of the associated access criteria type values.\n\nIf the UE is configured with operator-defined access categories for a PLMN,\nthen access control in 5GMM-IDLE mode will only be performed for the event\na) defined in subclause\u00a04.5.1.\n\nIf the UE is configured with operator-defined access categories for a PLMN,\nthen access control in 5GMM-CONNECTED mode and in 5GMM-CONNECTED mode with\nRRC inactive indication will only be performed for the events 1) to 5)\ndefined in subclause\u00a04.5.1.\n\nUpon receiving a NAS signalling message with operator-defined access\ncategory definitions, the UE shall store the operator-defined access\ncategory definitions for the registered PLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Access control and checking", "numbering": "4.5.4", "title_level": 2, "desc": "4.5.4  Access control and checking\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Access control and checking in 5GMM-IDLE mode", "numbering": "4.5.4.1", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Access control and checking in 5GMM-CONNECTED mode and in", "numbering": "4.5.4.2", "title_level": 3, "desc": "4.5.4.1  Access control and checking in 5GMM-IDLE mode\n\nWhen the UE is in 5GMM-IDLE mode, upon receiving a request from the upper\nlayers for an access attempt, the NAS shall categorize the access attempt\ninto access identities and an access category following subclause\u00a04.5.2,\ntable\u00a04.5.2.1 and table\u00a04.5.2.2, and subclause\u00a04.5.3, and provide the\napplicable access identities and the access category to the lower layers\nfor the purpose of access control checking. In this request to the lower\nlayer the NAS can also provide to the lower layer the RRC establishment\ncause determined as specified in subclause\u00a04.5.6 of this specification.\n\nNOTE\u00a01:  The access barring check is performed by the lower layers.\n\nNOTE\u00a02:  As an implementation option, the NAS can provide the RRC\nestablishment cause to the lower layers after being informed by the lower\nlayers that the access attempt is allowed.\n\nIf the lower layers indicate that the access attempt is allowed, the NAS\nshall initiate the procedure to send the initial NAS message for the access\nattempt.\n\nIf the lower layers indicate that the access attempt is barred, the NAS\nshall not initiate the procedure to send the initial NAS message for the\naccess attempt. Additionally, if the event which triggered the access\nattempt was an MO-MMTEL-voice-call-started indication, an MO-MMTEL-video-\ncall-started indication or an MO-SMSoIP-attempt-started indication, the NAS\nshall notify the upper layers that the access attempt is barred. Upon\nreceiving an indication from the lower layers that the barring is\nalleviated for the access category with which the access attempt was\nassociated , the NAS may initiate the procedure to send the initial NAS\nmessage, if still needed.\n\nNOTE\u00a03:  Barring timers, on a per access category basis, is run by the\nlower layers. At expiry of barring timers, the indication of alleviation of\naccess barring is indicated to the NAS on a per access category basis.\n\n\n4.5.4.2  Access control and checking in 5GMM-CONNECTED mode and in 5GMM-\n         CONNECTED mode with RRC inactive indication\n\nWhen the UE is in 5GMM-CONNECTED mode or 5GMM-CONNECTED mode with RRC\ninactive indication, upon detecting one of events 1) through 5) listed in\nsubclause\u00a04.5.1, the NAS shall categorize the corresponding access attempt\ninto access identities and an access category following subclause\u00a04.5.2,\ntable\u00a04.5.2.1 and table\u00a04.5.2.2, and subclause\u00a04.5.2.3, and provide the\naccess identities and the access category to the lower layers for the\npurpose of access control checking. In this request to the lower layer the\nNAS can also provide to the lower layer the RRC establishment cause\ndetermined as specified in subclause\u00a04.5.6 of this specification.\n\nNOTE\u00a01:  As an implementation option, the NAS can provide the RRC\nestablishment cause to the lower layers after being informed by the lower\nlayers that the access attempt is allowed.\n\nIf the lower layers indicate that the access attempt is allowed, the NAS\nshall take the following action depending on the event which triggered the\naccess attempt:\n\nEditor's note:  It is FFS whether the NAS layeris involved in determining t\nthe RRC resume cause when transiting over 3GPP access from 5GMM-CONNECTED\nmode with RRC inactive indication to 5GMM-CONNECTED mode due to an uplink\nuse-data packet via re-activated PDU session.\n\na) if the event which triggered the access attempt was an MO-MMTEL-voice-\ncall-started indication, an MO-MMTEL-video-call-started indication or an MO-\nSMSoIP-attempt-started indication, the NAS shall notify the upper layers\nthat the access attempt is allowed;\n\nb) if the event which triggered the access attempt was a request from upper\nlayers to send a mobile originated SMS over NAS, 5GMM shall initiate the\nNAS transport procedure as specified in subclause\u00a05.4.5 to send the SMS in\nan UL NAS TRANSPORT message;\n\nc) if the event which triggered the access attempt was a request from upper\nlayers to establish a new PDU session, 5GMM shall initiate the NAS\ntransport procedure as specified in subclause\u00a05.4.5 to send the PDU SESSION\nESTABLISHMENT REQUEST message;\n\nd) if the event which triggered the access attempt was a request from upper\nlayers to modify an existing PDU session, 5GMM shall initiate the NAS\ntransport procedure as specified in subclause\u00a05.4.5 to send the PDU SESSION\nMODIFICATION REQUEST message; and\n\ne) if the event which triggered the access attempt was a request to re-\nestablish the user-plane resources for an existing PDU session, 5GMM shall\ninitiate the service request procedure as specified in subclause\u00a05.6.1.\n\nIf the lower layers indicate that the access attempt is barred, the NAS\nshall take the following action depending on the event which triggered the\naccess attempt:\n\na) if the event which triggered the access attempt was an MO-MMTEL-voice-\ncall-started indication, an MO-MMTEL-video-call-started indication or an MO-\nSMSoIP-attempt-started indication, the NAS shall notify the upper layers\nthat the access attempt is barred. Upon receiving an indication from the\nlower layers that the barring is alleviated for the access category with\nwhich the access attempt was associated, the NAS shall notify the upper\nlayers that the barring is alleviated for the access category;\n\nNOTE\u00a02:  In this case prohibiting the initiation of the MMTEL voice\nsession, MMTEL video session or prohibiting sending of the SMS over IP is\nperformed by the upper layers.\n\nb) if the event which triggered the access attempt was a request from upper\nlayers to send a mobile originated SMS over NAS, 5GMM shall not initiate\nthe NAS transport procedure as specified in subclause\u00a05.4.5 to send the SMS\nin an UL NAS TRANSPORT message. Upon receiving an indication from the lower\nlayers that the barring is alleviated for the access category with which\nthe access attempt was associated, 5GMM may initiate the NAS transport\nprocedure as specified in subclause\u00a05.4.5 to send the SMS in an UL NAS\nTRANSPORT message, if still needed;\n\nc) if the event which triggered the access attempt was a request from upper\nlayers to establish a new PDU session, 5GMM shall not initiate the NAS\ntransport procedure to send the PDU SESSION ESTABLISHMENT REQUEST message.\nUpon receiving an indication from the lower layers that the barring is\nalleviated for the access category with which the access attempt was\nassociated, the NAS may initiate the NAS transport procedure as specified\nin subclause\u00a05.4.5, if still needed;\n\nd) if the event which triggered the access attempt was a request from upper\nlayers to modify an existing PDU session modification, 5GMM shall not\ninitiate the NAS transport procedure to send the PDU SESSION MODIFICATION\nREQUEST message. Upon receiving an indication from the lower layers that\nthe barring is alleviated for the access category with which the access\nattempt was associated, the NAS may initiate the NAS transport procedure as\nspecified in subclause\u00a05.4.5, if still needed; and\n\ne)-  if the event which triggered the access attempt was a request to re-\nestablish the user-plane resources for an existing PDU session, the NAS\nshall not initiate the service request procedure as specified in\nsubclause\u00a05.6.1. Upon receiving an indication from the lower layers that\nthe barring is alleviated for the access category with which the access\nattempt was associated, the NAS may initiate the service request procedure\nas specified in subclause\u00a05.6.1, if still needed.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Exception handling and avoiding double barring", "numbering": "4.5.5", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mapping between access categories/access identities and", "numbering": "4.5.6", "title_level": 2, "desc": "4.5.5  Exception handling and avoiding double barring\n\nThere are several services for which the NAS needs to be informed when the\nservice starts and stops,\n\n-  because, while the service is ongoing, the mapping of other access\nattempts to a specific access category can be affected; and\n\n-  in order to avoid double barring at the start of these services.\n\nThese services are:\n\na) emergency service;\n\nb) MMTEL voice;\n\nc) MMTEL video;\n\nd) SMSoIP; and\n\ne) SMS over NAS.\n\nThe UE considers an emergency service a) as started when 5GMM receives a\nrequest from upper layers to register for emergency services or to\nestablish a PDU session with request type = \"initial emergency request\" or\n\"existing emergency PDU session\". It considers the emergency service as\nstopped when this PDU session is released.\n\nIn addition, the UE considers an emergency service a) as started when the\n5GMM receives a request for emergency services from the upper layer and\nperforms emergency services fallback as specified in subclause\u00a04.13.4.2 of\n3GPP\u00a0TS\u00a023.502\u00a0[9]. In this case, the UE considers the emergency service as\nstopped when:\n\n-  the PDU session for emergency services established during the emergency\nservices fallback is released if the UE has moved to an E-UTRA cell\nconnected to 5GCN; or\n\n-  the service request procedure involved in the emergency services\nfallback is completed otherwise.\n\nWhile an emergency service a) is ongoing, any access attempt triggered by\nthe initiation of a registration, de-registration or service request\nprocedure is mapped to access category 2 = emergency.\n\nOnce the emergency service has successfully passed access control, then as\nlong as the service is ongoing, the following access attempts are allowed\nto proceed without further access control checking in order to avoid double\nbarring:\n\n-  any service request procedure related to the PDU session associated with\nrequest type = \"initial emergency request\" or \"existing emergency PDU\nsession\"; and\n\n-  any:\n\n1) service request procedure; or\n\n2) registration procedure;\n\n   initiated in 5GMM-IDLE mode for the purpose of NAS signalling connection\nrecovery.\n\nNOTE\u00a01:  Although the access control checking is skipped, the mapping is\nperformed in order to derive an RRC establishment cause.\n\nEditor's note:  If MT LCS are used during an emergency service to locate\nthe UE, the 5GMM will transfer LCS messages to the network. It is FFS based\non which criteria the UE will determine to skip access control for these\nmessages.\n\nFor services b) to e) the 5GMM receives explicit start and stop indications\nfrom the upper layers.\n\nEditor's note:  Whether explicit start and stop indications for SMS over\nNAS need to be defined is FFS.\n\nOnce the service has successfully passed access control, then as long as\nthe service is ongoing, the following access attempts are allowed to\nproceed without further access control checking in order to avoid double\nbarring:\n\n-  for services b), c) and d), any service request procedure related to the\nPDU session established for DNN = \"IMS\"; and\n\nEditor's note:  It has been observed that some operators use an APN\ndifferent from \"IMS\" for SMSoIP. How to handle that case when a DNN\ndifferent from \"IMS\" is used, is FFS.\n\n-  for services b), c), d) and e), any:\n\n1) service request procedure; or\n\n2) registration procedure;\n\n   initiated in 5GMM-IDLE mode for the purpose of NAS signalling connection\nrecovery.\n\nWhile an MMTEL voice call is ongoing:\n\n-  any service request procedure related to the PDU session established for\nDNN = \"IMS\" is mapped to access category 4; and\n\n-  any:\n\n1) service request procedure; or\n\n2) registration procedure;\n\n   initiated in 5GMM-IDLE mode for the purpose of NAS signalling connection\nrecovery is mapped to access category 4.\n\nWhile an MMTEL video call is ongoing and no MMTEL voice call is ongoing:\n\n-  any service request procedure related to the PDU session established for\nDNN = \"IMS\" is mapped to access category 5; and\n\n-  any:\n\n1) service request procedure; or\n\n2) registration procedure;\n\n   initiated in 5GMM-IDLE mode for the purpose of NAS signalling connection\nrecovery is mapped to access category 5.\n\nWhile an SMS over IMS is ongoing, no MMTEL video call is ongoing and no\nMMTEL voice call is ongoing:\n\n-  any service request procedure related to the PDU session established for\nDNN = \"IMS\" is mapped to access category 6; and\n\n-  any:\n\n1) service request procedure; or\n\n2) registration procedure;\n\n   initiated in 5GMM-IDLE mode for the purpose of NAS signalling connection\nrecovery is mapped to access category 6.\n\nWhile an SMS over NAS is ongoing, no SMS over IMS is ongoing, no MMTEL\nvideo call is ongoing and no MMTEL voice call is ongoing:\n\n-  any:\n\n1) service request procedure; or\n\n2) registration procedure;\n\n   initiated in 5GMM-IDLE mode for the purpose of NAS signalling connection\nrecovery is mapped to access category 6.\n\nNOTE\u00a02:  Although the access control checking is skipped, the mapping is\nperformed in order to derive an RRC establishment cause.\n\nIf an access category is determined and the access control checking is\nskipped, the NAS shall determine the establishment cause from one or more\ndetermined access identities and the access category as specified in\nsubclause\u00a04.5.6, the NAS shall initiate the procedure to send the initial\nNAS message for the access attempt and shall provide the establishment\ncause to lower layers.\n\n\n4.5.6  Mapping between access categories/access identities and RRC\n         establishment cause\n\nWhen 5GMM requests the establishment of a NAS-signalling connection, the\nRRC establishment cause used by the UE shall be selected according to one\nor more determined access identities and the access category as specified\nin table\u00a04.5.6.1. If the determined access category is an operator-defined\naccess category and there is a standardized access category associated with\nthe operator-defined access category as specified in subclause\u00a04.5.3, the\nRRC establishment cause used by the UE is selected according to one or more\ndetermined access identities and the standardized access category\nassociated with the operator-defined access category.\n\nTable\u00a04.5.6.1: Mapping table for access identities/access categories and\nRRC establishment cause\n\n|Access identities        |Access categories        |RRC establishment cause  |\n|                         |                         |is set to                |\n|0                        |0 (= MT_acc)             |MT access                |\n|                         |1 (= delay tolerant)     |FFS                      |\n|                         |2 (= emergency)          |Emergency call           |\n|                         |3 (= MO_sig)             |MO signalling            |\n|                         |4 (= MO MMTel voice)     |MO voice call            |\n|                         |5 (= MO MMTel video)     |FFS                      |\n|                         |6 (= MO SMS and SMSoIP)  |FFS                      |\n|                         |7 (= MO_data)            |MO data                  |\n|1                        |Any category             |\"High priority access\"   |\n|2                        |Any category             |\"High priority access\"   |\n|11, 15                   |Any category             |\"High priority access\"   |\n|12,13,14,                |Any category             |\"High priority access\"   |\n|NOTE: See subclause\u00a04.5.2, table\u00a04.5.2.1 for use of the access identities of|\n|0, 1, 2, and 11-15.                                                         |\n\n\nEditor's note:  It is FFS how to determine RRC establishment causes for the\naccess category 1, 5, 6.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network slicing", "numbering": "4.6", "title_level": 1, "desc": "4.6  Network slicing\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.6.1", "title_level": 2, "desc": "4.6.1  General\n\nThe 5GS supports network slicing as described in 3GPP\u00a0TS\u00a023.501\u00a0[8]. Within\na PLMN, a network slice is identified by an S-NSSAI, which is comprised of\na slice/service type (SST) and a slice differentiator (SD). Inclusion of an\nSD in an S-NSSAI is optional. A set of one or more S-NSSAIs is called the\nNSSAI. The following NSSAIs are defined in 3GPP\u00a0TS\u00a023.501\u00a0[8]:\n\na) configured NSSAI;\n\nb) requested NSSAI;\n\nc) allowed NSSAI; and\n\nd) subscribed S-NSSAIs;\n\nThe following NSSAIs are defined in the present document:\n\na) rejected NSSAI for the current PLMN; and\n\nb) rejected NSSAI for the current PLMN and registration area combination.\n\nThe HPLMN may configure a UE with the configured NSSAI per PLMN. In\naddition, the HPLMN may configure a UE with a configured NSSAI not\nassociated with a PLMN. The UE shall have a single configured NSSAI not\nassociated with a PLMN and consider the configured NSSAI as valid in a PLMN\nfor which the UE has neither configured NSSAI nor allowed NSSAI.\n\nThe allowed NSSAI is managed per access type independently, i.e. 3GPP\naccess or non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mobility management aspects", "numbering": "4.6.2", "title_level": 2, "desc": "4.6.2  Mobility management aspects\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.6.2.1", "title_level": 3, "desc": "4.6.2.1  General\n\nUpon registration to a PLMN, the UE shall send to the AMF the requested\nNSSAI which includes one or more S-NSSAIs of the allowed NSSAI for the PLMN\nor the configured NSSAI and corresponds to the network slice(s) to which\nthe UE wants to register if:\n\na) the UE has a configured NSSAI for the current PLMN;\n\nb) the UE has an allowed NSSAI for the current PLMN; or\n\nc) the UE has neither allowed NSSAI for the current PLMN nor configured\nNSSAI for the current PLMN and has a configured NSSAI not associated with a\nPLMN.\n\nThe UE NAS shall also provide the lower layers with the requested NSSAI, if\navailable and the UE is in 5GMM-IDLE mode. If the UE has neither a\nconfigured NSSAI nor an allowed NSSAI valid for a PLMN and does not have\nany configured NSSAI that is not associated with any PLMN, the UE does not\nsend a requested NSSAI when requesting registration towards the PLMN. In\nroaming scenarios the UE may also provide the mapping of each S-NSSAI of\nthe requested NSSAI to the S-NSSAIs of the configured NSSAI for the HPLMN,\nif available. The AMF verifies if the requested NSSAI is permitted based on\nthe subscribed S-NSSAIs in the UE subscription and optionally the mapping\ninformation provided by the UE, and if so then the AMF shall provide the UE\nwith the allowed NSSAI for the PLMN, and may also provide the UE with the\nmapping of each S-NSSAI of the allowed NSSAI for the PLMN to the S-NSSAI(s)\nof the configured NSSAI for the HPLMN if available. The AMF shall not\nprovide the UE with the mapping of multiple S-NSSAIs of the allowed NSSAI\nto the same S-NSSAI of the configured NSSAI for the HPLMN. The AMF may also\nquery the NSSF to determine the allowed NSSAI for a given registration area\nas defined in 3GPP\u00a0TS\u00a023.501\u00a0[8].\n\nThe set of network slice(s) for a UE can be changed at any time while the\nUE is registered to a PLMN, and the change may be initiated by the network,\nor the UE. In this case, the allowed NSSAI and associated registration area\nmay be changed during the registration procedure. The network may notify\nthe UE of the change of the supported network slice(s) in order to trigger\nthe registration procedure. Change in the allowed NSSAI may lead to AMF\nrelocation subject to operator policy. See subclause\u00a05.4.4 describing the\ngeneric UE configuration update procedure for further details.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NSSAI storage", "numbering": "4.6.2.2", "title_level": 3, "desc": "4.6.2.2  NSSAI storage\n\nIf available, the configured NSSAI(s) shall be stored in a non-volatile\nmemory in the ME as specified in annex\u00a0C.\n\nEach of the configured NSSAI stored in the UE is a set composed of at most\n16 S-NSSAIs. Each of the allowed NSSAI stored in the UE is a set composed\nof at most 8 S-NSSAIs and is associated with a PLMN identity and an access\ntype. Each of the configured NSSAI, and the rejected NSSAI is associated\nwith a PLMN identity. The S-NSSAI(s) in the rejected NSSAI for the current\nPLMN and registration area combination are further associated with a\nregistration area where the rejected S-NSSAI(s) is not available. The S-\nNSSAI(s) in the rejected NSSAI for the current PLMN shall be considered\nrejected for the current PLMN regardless of the access type. There shall be\nno duplicated PLMN identities in each of the list of configured NSSAI(s),\nallowed NSSAI(s), rejected NSSAI(s) for the current PLMN, and rejected\nNSSAI(s) for the current PLMN and registration area combination.\n\nThe UE stores NSSAIs as follows:\n\na) The configured NSSAI shall be stored until a new configured NSSAI is\nreceived for a given PLMN. The network may provide to the UE the mapping of\neach S-NSSAI of the new configured NSSAI to the S-NSSAI(s) of the\nconfigured NSSAI for the HPLMN which shall also be stored in the UE. When\nthe UE is provisioned with a new configured NSSAI for a PLMN, the UE shall:\n\n1) replace any stored configured NSSAI for this PLMN with the new\nconfigured NSSAI for this PLMN;\n\n2) delete any stored mapping of each S-NSSAI of the configured NSSAI to the\nS-NSSAI(s) of the configured NSSAI for the HPLMN and, if available, store\nthe mapping of each S-NSSAI of the new configured NSSAI to the S-NSSAI(s)\nof the configured NSSAI for the HPLMN;\n\n3) delete any stored allowed NSSAI for this PLMN and, if available, the\nstored mapping of each S-NSSAI of the allowed NSSAI to the S-NSSAI(s) of\nthe configured NSSAI for the HPLMN, if the UE received the new configured\nNSSAI for this PLMN and the \"registration requested\" indication in the same\nCONFIGURATION UPDATE COMMAND message but without any new allowed NSSAI for\nthis PLMN included; and\n\n4) delete any rejected NSSAI for the current PLMN, and rejected NSSAI for\nthe current PLMN and registration area combination.\n\n   If the UE receives an S-NSSAI associated with a PLMN ID from the network\nduring the PDN connection establishment procedure in EPS as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15], the UE may store the received S-NSSAI in the\nconfigured NSSAI for the PLMN identified by the PLMN ID associated with the\nS-NSSAI, if not already in the configured NSSAI.\n\nb) The allowed NSSAI shall be stored until a new allowed NSSAI is received\nfor a given PLMN. The network may provide to the UE the mapping of each S-\nNSSAI of the new allowed NSSAI to the S-NSSAI(s) of the configured NSSAI\nfor the HPLMN (see subclauses\u00a05.5.1.2 and 5.5.1.3) which shall also be\nstored in the UE. When a new allowed NSSAI for a PLMN is received, the UE\nshall:\n\n1) replace any stored allowed NSSAI for this PLMN with the new allowed\nNSSAI for this PLMN; and\n\n2) delete any stored mapping of each S-NSSAI of the allowed NSSAI to the S-\nNSSAI(s) of the configured NSSAI for the HPLMN and, if available, store the\nmapping of each S-NSSAI of the new allowed NSSAI to the S-NSSAI(s) of the\nconfigured NSSAI for the HPLMN.\n\n   The UE shall remove, if any, the stored rejected S-NSSAI(s) which is/are\nincluded in the new allowed NSSAI for the current PLMN.\n\nNOTE:  Whether the UE stores the allowed NSSAI and the mapping of the\nallowed NSSAI to the configured NSSAI for the HPLMN also when the UE is\nswitched off is implementation specific.\n\nc) When the UE receives the S-NSSAI(s) included in rejected NSSAI in the\nREGISTRATION ACCEPT message or in the CONFIGURATION UPDATE COMMAND message,\nthe UE shall store the S-NSSAI(s) into the rejected NSSAI based on the\nassociated rejection cause(s). Once the UE is deregistered over all access\ntypes, the rejected NSSAI for the current PLMN shall be deleted. Once the\nUE is deregistered over an access type, the rejected NSSAI for the current\nPLMN and registration area combination corresponding to the access type\nshall be deleted. The UE shall delete, if any, the stored rejected NSSAI\nfor the current PLMN and registration area combination if the UE moves out\nof the registration area.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Session management aspects", "numbering": "4.6.3", "title_level": 2, "desc": "4.6.3  Session management aspects\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.6.3.1", "title_level": 3, "desc": "4.6.3.1  General\n\nIn order to enable PDU transmission in a network slice, the UE may request\nestablishment of a PDU session in a network slice towards a data network\n(DN) which is associated with an S-NSSAI and a data network name (DNN) if\nthere is no established PDU session adequate for the PDU transmission. The\nS-NSSAI included is part of allowed NSSAI of the serving PLMN, which is an\nS-NSSAI value valid in the serving PLMN, and in roaming scenarios the\nmapped configured S-NSSAI(s) for the HPLMN is also included for the PDU\nsession if available. See subclause\u00a06.4.1 for further details. The UE\ndetermines whether to establish a new PDU session or use one of the\nestablished PDU session(s) based on the URSP rules which include S-NSSAIs,\nif any (see subclause\u00a06.2.9).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS over non-3GPP access", "numbering": "4.7", "title_level": 1, "desc": "4.7  NAS over non-3GPP access\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.7.1", "title_level": 2, "desc": "4.7.1  General\n\nFrom the UE's NAS perspective, in general the procedures and messages\ndefined for 5GMM and 5GSM are used over non-3GPP access as over 3GPP\naccess. However, a number of aspects are different as described in the\nfollowing subclauses.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS mobility management aspects", "numbering": "4.7.2", "title_level": 2, "desc": "4.7.2  5GS mobility management aspects\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.7.2.1", "title_level": 3, "desc": "4.7.2.1  General\n\nThe mobility management procedures defined over 3GPP access are re-used\nover non-3GPP access with the following exceptions:\n\na) the registration status of the UE's 3GPP access and non-3GPP access 5GMM\nstate machine instances are independent and can be different;\n\nb) single-registration mode and dual-registration mode do not apply for\n5GMM over non-3GPP access;\n\nc) the RPLMN over non-3GPP access can be different from the RPLMN over 3GPP\naccess. The MCC of the RPLMN over 3GPP access and the MCC of the RPLMN over\nthe non-3GPP access can also be different;\n\nd) the registration for 3GPP access and for non-3GPP access are performed\nseparately. Like for 3GPP access, an access stratum connection exists\nbefore the UE can perform the registration procedure for non-3GPP access.\nAs over non-3GPP access the 5GS operates one single common registration\narea for an entire PLMN, which is associated with the operator-specific\nN3GPP TAI for the PLMN, list management of registration areas is not\nrequired, and registration updating due to registration area change with\nthe registered PLMN is not performed. Furthermore, the periodic\nregistration update procedure is also not performed. New registration at\nchange of PLMN is required;\n\ne) the 5GMM over non-3GPP access considers that the N1 NAS signalling\nconnection is established when the lower layers indicate that the access\nstratum connection is established succcessfully;\n\nf) the UE-initiated service request procedure via non-3GPP access is\nsupported. Upon indication from the lower layers of non-3GPP access, that\nthe access stratum connection is established between the UE and the\nnetwork, the UE in 5GMM-REGISTERED state and in 5GMM-IDLE mode over non-\n3GPP access shall initiate the service request procedure via non-3GPP\naccess. The UE may indicate with the service request message the PDU\nsession(s) associated with non-3GPP access to re-activate user-plane\nresources for which the UE has pending user data to be sent;\n\ng) paging procedure is not performed via non-3GPP access;\n\nh) service area restrictions do not apply for non-3GPP access; and\n\ni) the establishment cause for non-3GPP access is determined according to\nsubclause\u00a04.7.2.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Establishment cause for non-3GPP access", "numbering": "4.7.2.2", "title_level": 3, "desc": "4.7.2.2  Establishment cause for non-3GPP access\n\nWhen establishment of a N1 NAS signalling connection over non-3GPP access\nis initiated, the UE shall determine one or more access identities to be\nassociated with the establishment of the N1 NAS signalling connection as\nspecified in subclause\u00a04.5.2 and table\u00a04.5.2.1, shall select the\nestablishment cause from the determined one or more access identities and\nthe event which triggered initiation of the NAS signalling connection over\nnon-3GPP access as specified in table\u00a04.7.2.2.1 and shall provide the\nselected establishment cause to the lower layers.\n\nTable\u00a04.7.2.2.1: Mapping table for determination of establishment cause for\nnon-3GPP access\n\n|Access identities |Type of access    |Requirements to be|Establishment     |\n|                  |attempt           |met               |cause             |\n|0                 |Emergency         |UE is attempting  |Emergency call    |\n|                  |                  |access for an     |                  |\n|                  |                  |emergency session |                  |\n|                  |                  |(NOTE\u00a01)          |                  |\n|                  |UE NAS initiated  |Access attempt is |MO signalling     |\n|                  |5GMM specific     |for MO signalling |                  |\n|                  |procedures        |                  |                  |\n|                  |UE NAS initiated  |Access attempt is |MO data           |\n|                  |5GMM connection   |for MO data       |                  |\n|                  |management        |                  |                  |\n|                  |procedures or 5GMM|                  |                  |\n|                  |NAS transport     |                  |                  |\n|                  |procedure         |                  |                  |\n|1                 |Any               |Any               |\"High priority    |\n|                  |                  |                  |access\"           |\n|2                 |Any               |Any               |\"High priority    |\n|                  |                  |                  |access\"           |\n|11, 15            |Any               |Any               |\"High priority    |\n|                  |                  |                  |access\"           |\n|12,13,14,         |Any               |Any               |\"High priority    |\n|                  |                  |                  |access\"           |\n|NOTE\u00a01: This includes 5GMM specific procedures while the service is ongoing|\n|and 5GMM connection management procedures required to establish a PDU      |\n|session with request type = \"initial emergency request\" or \"existing       |\n|emergency PDU session\", or to re-establish radio bearers for such a PDU    |\n|session.                                                                   |\n|NOTE\u00a02: See subclause\u00a04.5.2, table\u00a04.5.2.1 for use of the access identities|\n|of 0, 1, 2, and 11-15.                                                     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS session management aspects", "numbering": "4.7.3", "title_level": 2, "desc": "4.7.3  5GS session management aspects\n\nThe session management procedures defined over 3GPP access are re-used over\nnon-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Interworking with E-UTRAN connected to EPC", "numbering": "4.8", "title_level": 1, "desc": "4.8  Interworking with E-UTRAN connected to EPC\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.8.1", "title_level": 2, "desc": "4.8.1  General\n\nIn order to interwork with E-UTRAN connected to EPC, the UE supporting both\nS1 mode and N1 mode can operate in single-registration mode or dual-\nregistration mode (see 3GPP\u00a0TS\u00a023.501\u00a0[8]). Support of single-registration\nmode is mandatory for UEs supporting both S1 mode and N1 mode.\n\nDuring the EPS attach procedure (3GPP\u00a0TS\u00a024.301\u00a0[15]) or initial\nregistration procedure (see subclause\u00a05.5.1.2), the mode for inter-system\ninterworking is selected if the UE supports both S1 mode and N1 mode, and\nthe network supports inter-system interworking.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Single-registration mode", "numbering": "4.8.2", "title_level": 2, "desc": "4.8.2  Single-registration mode\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.8.2.1", "title_level": 3, "desc": "4.8.2.1  General\n\nIf the UE receives the indication that interworking without N26 is not\nsupported, the UE operates as described in subclause\u00a04.8.2.2. If the UE\nreceives the indication that interworking without N26 is supported and the\nUE does not support dual-registration mode, the UE operates as described in\nsubclause\u00a04.8.2.3.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Single-registration mode with N26 interface", "numbering": "4.8.2.2", "title_level": 3, "desc": "4.8.2.2  Single-registration mode with N26 interface\n\nSee subclause\u00a05.1.4.2 for coordination between 5GMM and EMM and\nsubclause\u00a06.1.4.1 for coordination between 5GSM and ESM.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Single-registration mode without N26 interface", "numbering": "4.8.2.3", "title_level": 3, "desc": "4.8.2.3  Single-registration mode without N26 interface\n\nAt inter-system change from N1 mode to S1 mode in EMM-IDLE mode when:\n\na) the UE supports non-IP PDN type and at least one PDU session is active;\nor\n\nb) the UE does not support non-IP PDN type and at least one PDU session\ncontext of IPv4, IPv6 or IPv4v6 PDU session type is active,\n\nthe UE shall proceed as follows:\n\na) if the UE supports sending an ATTACH REQUEST message containing a PDN\nCONNECTIVITY REQUEST message with request type set to \"handover\" to\ntransfer a PDU session from N1 mode to S1 mode and the UE has received an\n\"interworking without N26 supported\" indication from the network, the UE\nshall:\n\n1) enter substates EMM-DEREGISTERED.NORMAL-SERVICE and 5GMM-REGISTERED.NO-\nCELL-AVAILABLE;\n\n2) map each PDU session supporting interworking to EPS to the default EPS\nbearer context of the corresponding PDN connection(s) and set the state of\neach default EPS bearer context, as specified in subclause\u00a06.1.4.2; and\n\n3) initiate an EPS attach procedure and include a PDN CONNECTIVITY REQUEST\nmessage with request type set to \"handover\" in the ATTACH REQUEST message\nto activate a default EPS bearer context for one of the active PDU session\ncontexts.\n\n   After successful completion of the EPS attach procedure, the UE shall\nattempt to activate each of the other default EPS bearer contexts, if any,\nby initiating a stand-alone PDN connectivity procedure with request type\nset to \"handover\" in the PDN CONNECTIVITY REQUEST message; and\n\nb) otherwise, enter substates EMM-REGISTERED.NORMAL-SERVICE and 5GMM-\nREGISTERED.NO-CELL-AVAILABLE and initiate a tracking area update procedure\n(see 3GPP\u00a0TS\u00a024.301\u00a0[15]).\n\nAt inter-system change from N1 mode to S1 mode in EMM-IDLE mode when:\n\na) the UE supports non-IP PDN type and no PDU session is active; or\n\nb) the UE does not support non-IP PDN type and no PDU session context of\nIPv4, IPv6 or IPv4v6 PDU session type is active,\n\nthe UE shall enter substates EMM-DEREGISTERED.NORMAL-SERVICE and 5GMM-\nDEREGISTERED.NO-CELL-AVAILABLE, and initiate an attach procedure.\n\nAt inter-system change from S1 mode to N1 mode in 5GMM-IDLE mode, the UE\nshall:\n\na) enter substate 5GMM-REGISTERED.NORMAL-SERVICE and substate EMM-\nREGISTERED.NO-CELL-AVAILABLE;\n\nb) map the default EPS bearer context(s) of the PDN connection(s), if any,\nto the corresponding PDU session(s) and set the state of each PDU session,\nas specified in subclause\u00a06.1.4.2; and\n\nc) initiate the registration procedure for mobility and periodic\nregistration update indicating \"mobility registration updating\" in the 5GS\nregistration type IE of the REGISTRATION REQUEST message (see\nsubclause\u00a05.5.1.3).\n\nAfter having successfully registered in N1 mode the UE shall:\n\na) if the UE supports the PDU session establishment procedure with request\ntype set to \"existing PDU session\" to transfer a PDN connection from S1\nmode to N1 mode and the UE has received an \"interworking without N26\nsupported\" indication from the network, attempt to transfer all existing\nPDN connections, if any, from S1 mode to N1 mode by initiating the PDU\nsession establishment procedure with request type set to \"existing PDU\nsession\"; and\n\nb) otherwise, establish PDU sessions corresponding to all existing PDN\nconnections, if any, by initiating the PDU session establishment procedure\nwith request type set to \"initial request\".\n\nSee subclause\u00a05.1.4.3 for coordination between 5GMM and EMM and\nsubclause\u00a06.1.4.2 for coordination between 5GSM and ESM.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Dual-registration mode", "numbering": "4.8.3", "title_level": 2, "desc": "4.8.3  Dual-registration mode\n\nIf both 5GMM and EMM are enabled, a UE, which is capable of N1 mode and S1\nmode and is operating in the dual-registration mode shall maintain\nindependent registrations for 5GMM and EMM independently. Coordination\nbetween 5GMM and EMM is not needed, except as specified in the present\nsubclause.\n\na) A UE operating in the dual-registration mode may register to N1 mode\nonly, S1 mode only, or to both N1 mode and S1 mode.\n\nb) When the UE decides to operate in dual-registration mode (see\nsubclause\u00a05.5.1.2.4), NAS informs the lower layers about this.\n\nc) If a UE is registered in N1 mode only, then for registration in S1 mode\nit shall use the same PLMN to which it is registered in N1 mode or an\nequivalent PLMN.\n\nd) If a UE is registered in S1 mode only, then for registration in N1 mode\nit shall use the same PLMN to which it is registered in S1 mode or an\nequivalent PLMN.\n\nEditor's note:  When the UE registers in the other mode, it can receive an\nequivalent PLMN which is different from the equivalent PLMN list already\nstored in the UE. The handling of these 2 lists, e.g. whether they are\nmaintained independently or whether the new one overrides the old one, is\nFFS. Furthermore, if the UE is registered in both N1 mode and S1 mode, then\ndue to the UE's mobility the PLMNs to which the UE is registered in N1 mode\nand S1 mode, respectively, can become non-equivalent PLMNs. The UE reaction\nfor this case is FFS.\n\nWhen no PDU session is active and the UE has not registered to S1 mode yet,\nthe UE may initiate the attach procedure if EMM-REGISTERED without PDN\nconnection is not supported by the MME. If EMM-REGISTERED without PDN\nconnection is supported by the MME, the UE may initiate either the attach\nprocedure without PDN connection establishment or the attach procedure with\nPDN connection establishment.\n\nWhen at least one PDU session is active and the UE has not registered to S1\nmode yet, the UE may initiate the attach procedure. If necessary, the UE\nmay transfer an active PDU session from N1 mode to S1 mode by initiating\nthe attach procedure with request type set to \"handover\" in the PDN\nCONNECTIVITY REQUEST message. After successfully attached in S1 mode, if\nnecessary, the UE may transfer other active PDU sessions from N1 mode to S1\nmode by initiating the PDN connectivity procedure with request type set to\n\"handover\" in the PDN CONNECTIVITY REQUEST message.\n\nNOTE\u00a01:  It is up to UE implementation to determine which active PDU\nsession is transferred from N1 mode to S1 mode.\n\nWhen the UE has not registered to N1 mode, the UE may initiate the initial\nregistration procedure. After successfully registered in N1 mode, if\nnecessary, the UE may transfer one or more active PDN connections from S1\nmode to N1 mode by initiating the PDU session establishment procedure with\nrequest type set to \"existing PDU session\".\n\nNOTE\u00a02:  It is up to UE implementation to determine which active PDN\nconnection is transferred from S1 mode to N1 mode.\n\nIf both the UE and the MME support EMM-REGISTERED without PDN connection,\nthe UE that transferred all PDN connections to the 5GS, may stay in state\nEMM-REGISTERED. Otherwise, the UE shall enter state EMM-DEREGISTERED upon\ntransferring all PDN connection to the 5GS.\n\nSee subclause\u00a06.1.4 for coordination between 5GSM and ESM.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Core Network selection", "numbering": "4.8.4", "title_level": 2, "desc": "4.8.4  Core Network selection\n\nIf the UE is capable of both N1 mode and S1 mode, when the UE needs to use\none or more functionalities not supported in 5GS but supported in EPS and\nthe UE is in 5GMM-IDLE mode, the UE may disable the N1 mode capability for\n3GPP access (see subclause\u00a04.9.2).\n\nIf the UE is capable of both N1 mode and S1 mode and lower layers provide\nan indication that the current E-UTRA cell is connected to both EPC and\n5GCN, the UE shall select a core network type (EPC or 5GCN) based on the\nPLMN selection procedures as specified in 3GPP\u00a0TS\u00a023.122\u00a0[5] and provide\nthe selected core network type information to the lower layer during the\ninitial registration procedure.\n\nNOTE:  If the PLMN selection information provisioned in the USIM does not\ncontain any prioritization between E-UTRAN and NG-RAN for a PLMN, which\ncore network type to select for that PLMN is up to UE implementation.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Disabling and re-enabling of UE's N1 mode capability", "numbering": "4.9", "title_level": 1, "desc": "4.9  Disabling and re-enabling of UE's N1 mode capability\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "4.9.1", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Disabling and re-enabling of UE's N1 mode capability for 3GPP", "numbering": "4.9.2", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Disabling and re-enabling of UE's N1 mode capability for", "numbering": "4.9.3", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Elementary procedures for 5GS mobility management", "numbering": "5", "title_level": 0, "desc": "4.9.1  General\n\nThe UE shall re-enable the N1 mode capability when the UE powers off and\npowers on again or the USIM is removed.\n\nAs an implementation option, the UE may start a timer for re-enabling N1\nmode capability, after the N1 mode capability was disabled. On the expiry\nof this timer, the UE should re-enable the N1 mode capability.\n\n\n4.9.2  Disabling and re-enabling of UE's N1 mode capability for 3GPP access\n\nWhen the UE supporting both N1 mode and S1 mode is disabling the N1 mode\ncapability for 3GPP access, it should proceed as follows:\n\na) select an E-UTRA cell connected to EPC of the registered PLMN or a PLMN\nfrom the list of equivalent PLMNs;\n\nb) if an E-UTRA cell connected to EPC of the registered PLMN or a PLMN from\nthe list of equivalent PLMNs cannot be found, the UE may select another RAT\nof the registered PLMN or a PLMN from the list of equivalent PLMNs that the\nUE supports;\n\nc) if another RAT of the registered PLMN or a PLMN from the list of\nequivalent PLMNs cannot be found, or the UE does not have a registered\nPLMN, then perform PLMN selection as specified in 3GPP\u00a0TS\u00a023.122\u00a0[5]; or\n\nd) if no other allowed PLMN and RAT combinations are available, then the UE\nmay re-enable the N1 mode capability for 3GPP access and remain camped in\nNG-RAN of the registered PLMN, and may periodically scan for another PLMN\nand RAT combination which can provide EPS services or non-EPS services (if\nthe UE supports non-EPS services).\n\nWhen the UE supporting both N1 mode and S1 mode needs to stay in E-UTRA\nconnected to EPC (e.g. due to the domain selection for UE originating\nsessions as specified in subclause\u00a04.3.2), in order to prevent unwanted\nhandover or cell reselection from E-UTRA connected to EPC to NG-RAN\nconnected to 5GCN, the UE operating in single-registration mode shall\ndisable the N1 mode capability for 3GPP access and:\n\na) shall set the N1mode bit to \"N1 mode not supported\" in the UE network\ncapability IE (see 3GPP\u00a0TS\u00a024.301\u00a0[15]) of the ATTACH REQUEST message and\nthe TRACKING AREA UPDATE REQUEST message in EPC; and\n\nb) the UE NAS layer shall indicate the access stratum layer(s) of disabling\nof the N1 mode capability for 3GPP access.\n\nNOTE:  The UE can only disable the N1 mode capability for 3GPP access when\nin 5GMM-IDLE mode.\n\nThe UE shall re-enable the N1 mode capability for 3GPP access when the UE\nperforms PLMN selection.\n\nIf the disabling of N1 mode capability for 3GPP access was due to IMS voice\nis not available over 3GPP access and the UE\u2019s usage setting is \"voice\ncentric\", the UE shall re-enable the N1 mode capability for 3GPP access\nwhen the UE\u2019s usage setting is changed from \"voice centric\" to \"data\ncentric\" or when the IMS voice becomes available in 5GS, as specified in\nsubclauses\u00a04.3.3 and\u00a04.3.4.\n\nThe UE should memorize the identity of the PLMN where N1 mode capability\nfor 3GPP access was disabled and should not consider this PLMN in\nsubsequent PLMN selections as specified in 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\nIf the UE attempts to establish a PDU session for emergency services in a\nPLMN where N1 mode capability was disabled due to the UE's registration\nattempt counter have reached\u00a05, the UE may enable N1 mode capability for\nthat PLMN memorized by the UE.\n\n\n4.9.3  Disabling and re-enabling of UE's N1 mode capability for non-3GPP\n         access\n\nEditor's note:  The content of this subclause is still to be determined.\n\n\n5  Elementary procedures for 5GS mobility management\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "5.1", "title_level": 1, "desc": "5.1  Overview\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.1", "title_level": 2, "desc": "5.1.1  General\n\nThe main function of the 5GS mobility management (5GMM) sublayer is to\nsupport the identification, security, mobility of a UE as well as generic\nmessage transport.\n\nA further function of the 5GMM sublayer is to provide connection management\nservices to the other sublayer(s).\n\nEditor's note:  Sublayer design can be revisited after the protocol\nframework is identified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Types of 5GMM procedures", "numbering": "5.1.2", "title_level": 2, "desc": "5.1.2  Types of 5GMM procedures\n\nDepending on how they can be initiated, three types of 5GMM procedures can\nbe distinguished:\n\na) 5GMM common procedures\n\n   5GMM common procedure can always be initiated when the UE is in 5GMM-\nCONNECTED mode. The procedures belonging to this type are:\n\n1) Initiated by the network:\n\ni) network-initiated NAS transport.\n\nii)  primary authentication and key agreement procedure\n\niii) security mode control;\n\niv)  generic UE configuration update\n\nv) identification\n\n2) Initiated by the UE:\n\n   UE-initiated NAS transport.\n\n3) Initiated by the UE or the network and used to report certain error\nconditions detected upon receipt of 5GMM protocol data:\n\n   5GMM status.\n\nb) 5GMM specific procedures:\n\n   At any time only one UE initiated 5GMM specific procedure can be running\nfor each of the access network(s) that the UE is camping in. The procedures\nbelonging to this type are:\n\n1) Initiated by the UE and used e.g. to register to the network for 5GS\nservices and establish a 5GMM context, to update the location/parameter(s)\nof the UE:\n\n   registration.\n\n2) Initiated by the UE or the network and used to deregister from the\nnetwork for 5GS services and to release a 5GMM context:\n\n   de-registration.\n\n3) Initiated by the UE and used to deregister from the network for 5GS\nservices and to release a 5GMM context:\n\n   eCall inactivity procedure.\n\nc) 5GMM connection management procedures:\n\n1) Initiated by the UE and used to establish a secure connection to the\nnetwork or to request the resource reservation for sending data, or both:\n\n   service request.\n\n   The service request procedure can only be initiated if no UE initiated\n5GMM specific procedure is ongoing for each of the access network(s) that\nthe UE is camping in.\n\n2) Initiated by the network and used to request the establishment of an N1\nNAS signalling connection or to prompt the UE to perform re-registration if\nnecessary as a result of a network failure or to request re-establishment\nof the PDU session(s) associated with non-3GPP access over 3GPP access; not\napplicable for the non-3GPP access network:\n\n   paging.\n\n3) Initiated by the network and used to request re-establishment the PDU\nsession(s) associated with non-3GPP access over 3GPP access when the UE is\nin 5GMM-CONNECTED mode over 3GPP access and in 5GMM-IDLE mode over non-3GPP\naccess; or\n\n   Initiated by the network and used to request re-establishment of the PDU\nsession(s) associated with 3GPP access over 3GPP access when the UE is in\n5GMM-CONNECTED mode over non-3GPP access and in 5GMM-IDLE mode over 3GPP\naccess:\n\n   notification.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM sublayer states", "numbering": "5.1.3", "title_level": 2, "desc": "5.1.3  5GMM sublayer states\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.3.1", "title_level": 3, "desc": "5.1.3.1  General\n\nIn the following subclauses, the 5GS mobility management (5GMM) sublayer of\nthe UE and the network is described by means of different state machines.\nThe 5GMM sublayer states is managed per access type independently, i.e.\n3GPP access or non-3GPP access. In subclause\u00a05.1.3.2, the states of the\n5GMM sublayer are introduced.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM sublayer states", "numbering": "5.1.3.2", "title_level": 3, "desc": "5.1.3.2  5GMM sublayer states\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM sublayer states in the UE", "numbering": "5.1.3.2.1", "title_level": 4, "desc": "5.1.3.2.1   5GMM sublayer states in the UE\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.3.2.1.1", "title_level": 5, "desc": "5.1.3.2.1.1 General\n\nIn the following subclauses, the possible 5GMM sublayer states of the UE\nare described and shown in Figure\u00a05.1.3.2.1.1.1.\n\n[pic]\n\nNOTE:  Not all possible transitions are shown in this figure.\nEditor's note:  The fatal causes and non-fatal causes used in the 5GMM\nprocedures are FFS.\n\nFigure\u00a05.1.3.2.1.1.1: 5GMM main states in the UE\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Main states", "numbering": "5.1.3.2.1.2", "title_level": 5, "desc": "5.1.3.2.1.2 Main states\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-NULL", "numbering": "5.1.3.2.1.2.1", "title_level": 6, "desc": "5.1.3.2.1.2.1 5GMM-NULL\n\n5GS services are disabled in the UE. No 5GS mobility management function\nshall be performed in this state.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED", "numbering": "5.1.3.2.1.2.2", "title_level": 6, "desc": "5.1.3.2.1.2.2 5GMM-DEREGISTERED\n\nIn the state 5GMM-DEREGISTERED, no 5GMM context has been established and\nthe UE location is unknown to the network and hence it is unreachable by a\nnetwork. In order to establish a 5GMM context, the UE shall start the\ninitial registration procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED-INITIATED", "numbering": "5.1.3.2.1.2.3", "title_level": 6, "desc": "5.1.3.2.1.2.3 5GMM-REGISTERED-INITIATED\n\nA UE enters the state 5GMM-REGISTERED-INITIATED after it has started the\ninitial registration procedure or the non-initial registration procedure,\nand is waiting for a response from the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED", "numbering": "5.1.3.2.1.2.4", "title_level": 6, "desc": "5.1.3.2.1.2.4 5GMM-REGISTERED\n\nIn the state 5GMM-REGISTERED, a 5GMM context has been established.\nAdditionally, one or more PDU session(s) may be activated at the UE. The UE\nmay initiate the non-initial registration procedure (including the normal\nregistration update and periodic registration update) and the service\nrequest procedure. The UE in the state 5GMM-REGISTERED over non-3GPP access\nshall not initiate the periodic registration update procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED-INITIATED", "numbering": "5.1.3.2.1.2.5", "title_level": 6, "desc": "5.1.3.2.1.2.5 5GMM-DEREGISTERED-INITIATED\n\nA UE enters the state 5GMM-DEREGISTERED-INITIATED after it has requested\nrelease of the 5GMM context by starting the de-registration procedure and\nis waiting for a response from the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-SERVICE-REQUEST-INITIATED", "numbering": "5.1.3.2.1.2.6", "title_level": 6, "desc": "5.1.3.2.1.2.6 5GMM-SERVICE-REQUEST-INITIATED\n\nA UE enters the state 5GMM-SERVICE-REQUEST-INITIATED after it has started\nthe service request procedure and is waiting for a response from the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Substates of state 5GMM-DEREGISTERED", "numbering": "5.1.3.2.1.3", "title_level": 5, "desc": "5.1.3.2.1.3 Substates of state 5GMM-DEREGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.3.2.1.3.1", "title_level": 6, "desc": "5.1.3.2.1.3.1 General\n\nThe state 5GMM-DEREGISTERED is subdivided into a number of substates as\ndescribed in this subclause. The following substates are not applicable to\nnon-3GPP access:\n\na) 5GMM-DEREGISTERED.LIMITED-SERVICE;\n\nb) 5GMM-DEREGISTERED.PLMN-SEARCH:\n\nc) 5GMM-DEREGISTERED.NO-SUPI;\n\nd) 5GMM-DEREGISTERED.NO-CELL-AVAILABLE; and\n\ne) 5GMM-DEREGISTERED.eCALL-INACTIVE.\n\nValid subscriber data are available for the UE before it enters the\nsubstates, except for the substate 5GMM-DEREGISTERED.NO-SUPI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.NORMAL-SERVICE", "numbering": "5.1.3.2.1.3.2", "title_level": 7, "desc": "5.1.3.2.1.3.2 5GMM-DEREGISTERED.NORMAL-SERVICE\n\nThe substate 5GMM-DEREGISTERED.NORMAL-SERVICE is chosen in the UE when a\nsuitable cell has been found and the PLMN or tracking area is not in the\nforbidden list.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.LIMITED-SERVICE", "numbering": "5.1.3.2.1.3.3", "title_level": 7, "desc": "5.1.3.2.1.3.3 5GMM-DEREGISTERED.LIMITED-SERVICE\n\nThe substate 5GMM-DEREGISTERED.LIMITED-SERVICE is chosen in the UE, when it\nis known that a selected cell is unable to provide normal service (e.g. the\nselected cell is in a forbidden PLMN or is in a forbidden tracking area).\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION", "numbering": "5.1.3.2.1.3.4", "title_level": 7, "desc": "5.1.3.2.1.3.4 5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION\n\nThe substate 5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION is chosen in the UE\nif the initial registration procedure failed due to a missing response from\nthe network.\n\nEditor's note:  Other cases in which this substate is chosen are FFS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.PLMN-SEARCH", "numbering": "5.1.3.2.1.3.5", "title_level": 7, "desc": "5.1.3.2.1.3.5 5GMM-DEREGISTERED.PLMN-SEARCH\n\nThe substate 5GMM-DEREGISTERED.PLMN-SEARCH is chosen in the UE, if the UE\nis searching for PLMNs. This substate is left either when a cell has been\nselected (the new substate is NORMAL-SERVICE or LIMITED-SERVICE) or when it\nhas been concluded that no cell is available at the moment (the new\nsubstate is NO-CELL-AVAILABLE).\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.NO-SUPI", "numbering": "5.1.3.2.1.3.6", "title_level": 7, "desc": "5.1.3.2.1.3.6 5GMM-DEREGISTERED.NO-SUPI\n\nThe substate 5GMM-DEREGISTERED.NO-SUPI is chosen in the UE, if the UE has\nno valid subscriber data available (SIM/USIM not available, the SIM/USIM is\nconsidered invalid by the UE) and a cell has been selected.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.NO-CELL-AVAILABLE", "numbering": "5.1.3.2.1.3.7", "title_level": 7, "desc": "5.1.3.2.1.3.7 5GMM-DEREGISTERED.NO-CELL-AVAILABLE\n\nNo 5G cell can be selected. This substate is entered after a first\nintensive search failed when in substate 5GMM-DEREGISTERED.PLMN-SEARCH.\nCells are searched for at a low rhythm. No 5GS services are offered.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED.eCALL-INACTIVE", "numbering": "5.1.3.2.1.3.8", "title_level": 7, "desc": "5.1.3.2.1.3.8 5GMM-DEREGISTERED.eCALL-INACTIVE\n\nThe substate 5GMM-DEREGISTERED.eCALL-INACTIVE is chosen in the UE when:\n\na) the UE is configured for eCall only mode as specified in\n3GPP\u00a0TS\u00a031.102\u00a0[22];\n\nb) timer T3444 and timer T3445 have expired or are not running;\n\nc) a PLMN has been selected as specified in 3GPP\u00a0TS\u00a023.122\u00a0[5];\n\nd) the UE does not need to perform an eCall over IMS; and\n\ne) the UE does not need to perform a call to a non-emergency MSISDN or URI\nfor test or terminal reconfiguration service.\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\nIn this substate, the UE shall not initiate any signalling towards the\nnetwork, except to originate an eCall over IMS, or a call to a non-\nemergency MSISDN or URI for test or terminal reconfiguration service.\n\nEditor's note:  Other substates of state 5GMM-DEREGISTERED are FFS, e.g.\n5GMM-DEREGISTERED.REGISTRATION-NEEDED.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Substates of state 5GMM-REGISTERED", "numbering": "5.1.3.2.1.4", "title_level": 5, "desc": "5.1.3.2.1.4 Substates of state 5GMM-REGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.3.2.1.4.1", "title_level": 6, "desc": "5.1.3.2.1.4.1 General\n\nThe state 5GMM-REGISTERED is subdivided into a number of substates as\ndescribed in this subclause. The following substates are not applicable to\nnon-3GPP access:\n\na) 5GMM-REGISTERED.LIMITED-SERVICE;\n\nb) 5GMM-REGISTERED.PLMN-SEARCH:\n\nc) 5GMM-REGISTERED.NON-ALLOWED-SERVICE; and\n\nd) 5GMM-REGISTERED.NO-CELL-AVAILABLE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED.NORMAL-SERVICE", "numbering": "5.1.3.2.1.4.2", "title_level": 7, "desc": "5.1.3.2.1.4.2 5GMM-REGISTERED.NORMAL-SERVICE\n\nThe substate 5GMM-REGISTERED.NORMAL-SERVICE is chosen by the UE as the\nprimary substate when the UE enters the state 5GMM-REGISTERED, and for 3GPP\naccess, the cell the UE selected is known to be in an allowed area.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED.NON-ALLOWED-SERVICE", "numbering": "5.1.3.2.1.4.3", "title_level": 7, "desc": "5.1.3.2.1.4.3 5GMM-REGISTERED.NON-ALLOWED-SERVICE\n\nThe substate 5GMM-REGISTERED.NON-ALLOWED-SERVICE is chosen in the UE, if\nthe cell the UE selected is known to be in a non-allowed area.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE", "numbering": "5.1.3.2.1.4.4", "title_level": 7, "desc": "5.1.3.2.1.4.4 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE\n\nThe substate 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE is chosen by\nthe UE if the registration procedure for mobility and periodic registration\nupdate procedure failed due to a missing response from the network. No 5GMM\nprocedure except:\n\na) mobility and periodic registration update procedure over 3GPP access;\nand\n\nb) mobility registration procedure over non-3GPP access\n\nshall be initiated by the UE in this substate. No data shall be sent or\nreceived.\n\nNOTE:  The registration procedure for mobility and periodic registration\nupdate over non-3GPP access can be trigger by e.g. the change of UE network\ncapability or renegotiating some parameters.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED.LIMITED-SERVICE", "numbering": "5.1.3.2.1.4.5", "title_level": 7, "desc": "5.1.3.2.1.4.5 5GMM-REGISTERED.LIMITED-SERVICE\n\nThe substate 5GMM-REGISTERED.LIMITED-SERVICE is chosen in the UE, if the\ncell the UE selected is known not to be able to provide normal service.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED.PLMN-SEARCH", "numbering": "5.1.3.2.1.4.6", "title_level": 7, "desc": "5.1.3.2.1.4.6 5GMM-REGISTERED.PLMN-SEARCH\n\nThe substate 5GMM-REGISTERED.PLMN-SEARCH is chosen in the UE, while the UE\nis searching for PLMNs.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED.NO-CELL-AVAILABLE", "numbering": "5.1.3.2.1.4.7", "title_level": 7, "desc": "5.1.3.2.1.4.7 5GMM-REGISTERED.NO-CELL-AVAILABLE\n\n5G coverage has been lost or MICO mode is active in the UE. If MICO mode is\nactive, the UE can deactivate MICO mode at any time by activating the AS\nlayer when the UE needs to send mobile originated signalling or user data.\nOtherwise, the UE shall not initiate any 5GMM procedure except for cell and\nPLMN reselection.\n\nEditor's note:  Other substates of state 5GMM-REGISTERED are FFS, e.g. 5GMM-\nREGISTERED.UPDATE-NEEDED.\n\nThis substate is not applicable to non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS update status in the UE", "numbering": "5.1.3.2.2", "title_level": 4, "desc": "5.1.3.2.2   5GS update status in the UE\n\nIn order to describe the detailed UE behaviour, the 5GS update (5U) status\npertaining to a specific subscriber is defined.\n\nThe 5GS update status is stored in a non-volatile memory in the USIM if the\ncorresponding file is present in the USIM, else in the non-volatile memory\nin the ME, as described in annex\u00a0.\n\nThe 5GS update status value is changed only after the execution of a\nregistration, network-initiated de-registration, 5GS based primary\nauthentication and key agreement, service request or paging procedure.\n\n5U1: UPDATED\n\n   The last registration attempt was successful.\n\n5U2: NOT UPDATED\n\n   The last registration attempt failed procedurally, e.g. no response or\nreject message was received from the AMF.\n\n5U3: ROAMING NOT ALLOWED\n\n   The last registration, service request, or registration for mobility or\nperiodic registration update attempt was correctly performed, but the\nanswer from the AMF was negative (because of roaming or subscription\nrestrictions).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM sublayer states in the network side", "numbering": "5.1.3.2.3", "title_level": 4, "desc": "5.1.3.2.3   5GMM sublayer states in the network side\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.3.2.3.1", "title_level": 5, "desc": "5.1.3.2.3.1 General\n\nIn the following subclauses, the possible 5GMM sublayer states of the\nnetwork are described and shown in Figure\u00a05.1.3.2.3.1.1.\n\n[pic]\n\nNOTE:  Not all possible transitions are shown in this figure.\nEditor's note:  The fatal causes and non-fatal causes used in the 5GMM\nprocedures are FFS.\n\nFigure\u00a05.1.3.2.3.1.1: 5GMM main states in the network\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED", "numbering": "5.1.3.2.3.2", "title_level": 5, "desc": "5.1.3.2.3.2 5GMM-DEREGISTERED\n\nIn the state 5GMM-DEREGISTERED, no 5GMM context has been established or the\n5GMM context is marked as deregistered. The UE is deregistered. The network\nmay answer to an initial registration procedure initiated by the UE. The\nnetwork may also answer to a de-registration procedure initiated by the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-COMMON-PROCEDURE-INITIATED", "numbering": "5.1.3.2.3.3", "title_level": 5, "desc": "5.1.3.2.3.3 5GMM-COMMON-PROCEDURE-INITIATED\n\nThe network enters the state 5GMM-COMMON-PROCEDURE-INITIATED, after it has\nstarted a common 5GMM procedure and is waiting for a response from the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-REGISTERED", "numbering": "5.1.3.2.3.4", "title_level": 5, "desc": "5.1.3.2.3.4 5GMM-REGISTERED\n\nIn the state 5GMM-REGISTERED, a 5GMM context has been established.\nAdditionally, one or more PDU session(s) may be activated at the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-DEREGISTERED-INITIATED", "numbering": "5.1.3.2.3.5", "title_level": 5, "desc": "5.1.3.2.3.5 5GMM-DEREGISTERED-INITIATED\n\nThe network enters the state 5GMM-DEREGISTERED-INITIATED after it has\nstarted a de-registration procedure and is waiting for a response from the\nUE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between 5GMM and EMM", "numbering": "5.1.4", "title_level": 2, "desc": "5.1.4  Coordination between 5GMM and EMM\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.1.4.1", "title_level": 3, "desc": "5.1.4.1  General\n\nIf both 5GMM and EMM are enabled, a UE, which is capable of N1 mode and S1\nmode and operates in single-registration mode, shall maintain one common\nregistration for 5GMM and EMM.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between 5GMM and EMM with N26 interface", "numbering": "5.1.4.2", "title_level": 3, "desc": "5.1.4.2  Coordination between 5GMM and EMM with N26 interface\n\nA UE that is not registered shall be in state EMM-DEREGISTERED and state\n5GMM-DEREGISTERED.\n\nIn N1 mode, upon successful completion of a registration procedure, the UE\noperating in single-registration mode shall enter substates 5GMM-\nREGISTERED.NORMAL-SERVICE and EMM-REGISTERED.NO-CELL-AVAILABLE.\n\nAt inter-system change from S1 mode to N1 mode, the UE shall enter\nsubstates 5GMM-REGISTERED.NORMAL-SERVICE and EMM-REGISTERED.NO-CELL-\nAVAILABLE and initiate a registration procedure for mobility and peirodic\nregistration update indicating \"mobility registration updating\" in the 5GS\nregistration type IE of the REGISTRATION REQUEST message (see\nsubclause\u00a05.5.1.3).\n\nIn S1 mode, upon successful completion of an attach or tracking area\nupdating procedure, the UE operating in single-registration mode shall\nenter substates 5GMM-REGISTERED.NO-CELL-AVAILABLE and EMM-REGISTERED.NORMAL-\nSERVICE.\n\nAt inter-system change from N1 mode to S1 mode when there is no active PDU\nsession for which interworking to EPS is supported as specified in\nsubclause\u00a06.1.4.1, and EMM-REGISTERED without PDN connection is not\nsupported by the UE or the MME, the UE shall enter state 5GMM-DEREGISTERED\nand state EMM-DEREGISTERED and then initiate the EPS attach procedure. If\nEMM-REGISTERED without PDN connection is supported by the UE and the MME,\nthe UE shall enter substates EMM-REGISTERED.NORMAL-SERVICE and 5GMM-\nREGISTERED.NO-CELL-AVAILABLE and initiate a tracking area updating\nprocedure.\n\nAt inter-system change from N1 mode to S1 mode when there is at least one\nactive PDU session for which interworking to EPS is supported as specified\nin subclause\u00a06.1.4.1, the UE shall enter substates EMM-REGISTERED.NORMAL-\nSERVICE and 5GMM-REGISTERED.NO-CELL-AVAILABLE and initiate a tracking area\nupdating procedure (see 3GPP\u00a0TS\u00a024.301\u00a0[15]).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between 5GMM and EMM without N26 interface", "numbering": "5.1.4.3", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Behaviour of the UE in state 5GMM-DEREGISTERED and state", "numbering": "5.2", "title_level": 1, "desc": "5.1.4.3  Coordination between 5GMM and EMM without N26 interface\n\nA UE operating in the single-registration mode that is not registered shall\nbe in state EMM-DEREGISTERED and in state 5GMM-DEREGISTERED.\n\nIn N1 mode, upon successful completion of a registration procedure, the UE\noperating in the single-registration mode shall enter substates 5GMM-\nREGISTERED.NORMAL-SERVICE and EMM-REGISTERED.NO-CELL-AVAILABLE.\n\nAt inter-system change from N1 mode to S1 mode in 5GMM-IDLE mode, the UE\nshall behave as specified in subclause\u00a04.8.2.3.\n\nIn S1 mode, upon successful completion of an attach or tracking area\nupdating procedure, the UE operating in the single-registration mode shall\nenter substates 5GMM-REGISTERED.NO-CELL-AVAILABLE and EMM-REGISTERED.NORMAL-\nSERVICE.\n\nAt inter-system change from S1 mode to N1 mode in 5GMM-IDLE mode, the UE\noperating in the single-registration mode shall enter substates EMM-\nREGISTERED.NO-CELL-AVAILABLE and 5GMM- REGISTERED.NORMAL-SERVICE and then\ninitiate the registration procedure for mobility and periodic registration\nupdate indicating \"mobility registration updating\" in the 5GS registration\ntype IE of the REGISTRATION REQUEST message (see subclause\u00a05.5.1.3).\n\n\n5.2  Behaviour of the UE in state 5GMM-DEREGISTERED and state 5GMM-\n         REGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.2.1", "title_level": 2, "desc": "5.2.1  General\n\nIn this subclause, the detailed behaviour of the UE in the states 5GMM-\nDEREGISTERED and 5GMM-REGISTERED is described.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE behaviour in state 5GMM-DEREGISTERED", "numbering": "5.2.2", "title_level": 2, "desc": "5.2.2  UE behaviour in state 5GMM-DEREGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.2.2.1", "title_level": 3, "desc": "5.2.2.1  General\n\nThe state 5GMM-DEREGISTERED is entered in the UE, when:\n\na) the de-registration is performed either by the UE or by the network (see\nsubclause\u00a05.5.2);\n\nb) the registration request is rejected by the AMF (see subclause\u00a05.5.1.2.5\nand 5.5.1.3.5);\n\nc) the service request is rejected by the MME (see subclause\u00a05.6.1); or\n\nd) the UE is switched on.\n\nIn state 5GMM-DEREGISTERED, the UE shall behave according to the substate\nas explained in subclause\u00a05.2.2.1.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Primary substate selection", "numbering": "5.2.2.2", "title_level": 3, "desc": "5.2.2.2  Primary substate selection\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Selection of the substate after power on", "numbering": "5.2.2.2.1", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Detailed description of UE behaviour in state", "numbering": "5.2.2.2", "title_level": 3, "desc": "5.2.2.2.1   Selection of the substate after power on\n\nFor a UE configured for eCall only mode as specified in\n3GPP\u00a0TS\u00a031.102\u00a0[22], timers T3444 and T3445 are considered to have expired\nat power on. When the UE is switched on, the substate shall be PLMN-SEARCH\nif the USIM is available and valid. See 3GPP\u00a0TS\u00a023.122\u00a0[5] for further\ndetails.\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\nThe substate chosen after PLMN-SEARCH, following power on is:\n\na) if no cell can be selected, the substate shall be NO-CELL-AVAILABLE;\n\nb) if no USIM is present, the substate shall be NO-SUPI;\n\nc) if a suitable cell has been found and the PLMN or tracking area is not\nin one of the lists of forbidden tracking areas, then the substate shall be\nNORMAL-SERVICE;\n\nd) if the selected cell is known not to be able to provide normal service,\nthen the UE shall enter the substate LIMITED-SERVICE;\n\ne) if the UE is in manual network selection mode and no cell of the\nselected PLMN has been found, the UE shall enter the substate NO-CELL-\nAVAILABLE; and\n\nf) if the UE is configured for eCall only mode as specified in\n3GPP\u00a0TS\u00a031.102\u00a0[22], the substate shall be eCALL-INACTIVE.\n\n\n5.2.2.2  Detailed description of UE behaviour in state 5GMM-DEREGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NORMAL-SERVICE", "numbering": "5.2.2.2.1", "title_level": 4, "desc": "5.2.2.2.1   NORMAL-SERVICE\n\nThe UE shall initiate an initial registration procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LIMITED-SERVICE", "numbering": "5.2.2.2.2", "title_level": 4, "desc": "5.2.2.2.2   LIMITED-SERVICE\n\nThe UE shall initiate an initial registration procedure when entering a\ncell which provides normal service.\n\nThe UE may initiate initial registration for emergency services.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "ATTEMPTING-REGISTRATION", "numbering": "5.2.2.2.3", "title_level": 4, "desc": "5.2.2.2.3   ATTEMPTING-REGISTRATION\n\nThe UE in 3GPP access:\n\na) shall initiate an initial registration procedure on the expiry of timers\nT3502, T3511 or T3346;\n\nb) may initiate an initial registration procedure for emergency services\neven if timer T3346 is running;\n\nc) shall initiate an initial registration procedure when entering a new\nPLMN, if timer T3346 is running and the new PLMN is not equivalent to the\nPLMN where the UE started timer T3346, the PLMN identity of the new cell is\nnot in the forbidden PLMN lists and the tracking area is not in one of the\nlists of forbidden tracking areas; and\n\nd) shall initiate an initial registration procedure when the tracking area\nof the serving cell has changed, if timer T3346 is not running, the PLMN\nidentity of the new cell is not in one of the forbidden PLMN lists and the\ntracking area of the new cell is not in one of the lists of forbidden\ntracking areas.\n\nThe UE in non-3GPP access:\n\na) shall initiate an initial registration procedure on the expiry of timers\nT3502, T3511 or T3346.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PLMN-SEARCH", "numbering": "5.2.2.2.4", "title_level": 4, "desc": "5.2.2.2.4   PLMN-SEARCH\n\nThe UE shall perform PLMN selection. If a new PLMN is selected, the UE\nshall reset the registration attempt counter and initiate the registration\nprocedure for initial registration (see subclause\u00a05.5.1.2.2).\n\nIf the selected cell is known not to be able to provide normal service, the\nUE may initiate the registration procedure for initial registration for\nemergency services.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NO-SUPI", "numbering": "5.2.2.2.5", "title_level": 4, "desc": "5.2.2.2.5   NO-SUPI\n\nThe UE shall perform cell selection.\n\nThe UE may initiate the registration procedure for initial registration for\nemergency services.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NO-CELL-AVAILABLE", "numbering": "5.2.2.2.6", "title_level": 4, "desc": "5.2.2.2.6   NO-CELL-AVAILABLE\n\nThe UE shall perform cell selection and choose an appropriate substate when\na cell is found.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "eCALL-INACTIVE", "numbering": "5.2.2.2.7", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Substate when back to state 5GMM-DEREGISTERED from another", "numbering": "5.2.2.3", "title_level": 3, "desc": "5.2.2.2.7   eCALL-INACTIVE\n\nThe UE camps on a suitable cell or an acceptable cell in a PLMN selected as\nspecified in 3GPP\u00a0TS\u00a023.122\u00a0[5] but initiates no 5GMM signalling with the\nnetwork and ignores any paging requests.\n\nThe UE shall leave substate EMM-DEREGISTERED.eCALL-INACTIVE state only when\none of the following events occur:\n\na) if the USIM is removed, the UE enters substate 5GMM-DEREGISTERED.NO-\nSUPI;\n\nb) if coverage is lost, the UE enters substate 5GMM-DEREGISTERED.PLMN-\nSEARCH;\n\nc) if the UE is deactivated (e.g. powered off) by the user, the UE enters\nstate 5GMM-NULL;\n\nd) if the UE receives a request from upper layers to establish an eCall\nover IMS, the UE enters state 5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION.\nThe UE then uses the relevant 5GMM and 5GSM procedures to establish the\neCall over IMS at the earliest opportunity; or\n\ne) if the UE receives a request from upper layers to establish a call to an\nHPLMN designated non-emergency MSISDN or URI for test or terminal\nreconfiguration service, the UE enters state 5GMM-DEREGISTERED.ATTEMPTING-\nREGISTRATION. Once the registration procedure is completed, the UE uses the\nrelevant 5GMM and 5GSM procedures to establish the non-emergency call.\n\n\n5.2.2.3  Substate when back to state 5GMM-DEREGISTERED from another 5GMM\n         state\n\nWhen returning to state 5GMM-DEREGISTERED, the UE shall select a cell as\nspecified in 3GPP\u00a0TS\u00a038.304\u00a0[28].\n\nThe substate depends on the result of the cell selection procedure, the\noutcome of the previously performed 5GMM specific procedures, on the 5GS\nupdate status of the UE, on the tracking area data stored in the UE, on the\npresence of the USIM, on the UE configuration and on the reason for moving\nto 5GMM-DEREGISTERED:\n\na) If no cell has been found, the substate is NO-CELL-AVAILABLE, until a\ncell is found;\n\nb) If no USIM is present or if the inserted USIM is considered invalid by\nthe UE, the substate shall be NO-SUPI;\n\nc) If a suitable cell has been found and the PLMN or tracking area is not\nin one of the lists of forbidden tracking areas, the substate shall be\nNORMAL-SERVICE;\n\nd) If a registration shall be performed (e.g. network-requested re-\nregistration), the substate shall be ATTEMPTING-REGISTRATION;\n\ne) If a PLMN reselection (according to 3GPP\u00a0TS\u00a023.122\u00a0[5]) is needed, the\nsubstate shall be PLMN-SEARCH;\n\nf) If the selected cell is known not to be able to provide normal service,\nthe substate shall be LIMITED-SERVICE; and\n\ng) If the UE is configured for eCall only mode as specified in\n3GPP\u00a0TS\u00a031.102\u00a0[22], T3444 and T3445 have expired or are not running, and\nsubstate PLMN-SEARCH is not required, the substate shall be eCALL-INACTIVE.\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE behaviour in state 5GMM-REGISTERED", "numbering": "5.2.3", "title_level": 2, "desc": "5.2.3  UE behaviour in state 5GMM-REGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.2.3.1", "title_level": 3, "desc": "5.2.3.1  General\n\nThe state 5GMM-REGISTERED is entered at the UE, when:\n\n   the initial registration procedure is performed by the UE (see\nsubclause\u00a05.5.1.2.2).\n\nIn state 5GMM-REGISTERED, the UE shall behave according to the substate as\nexplained in subclause\u00a05.2.3.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Detailed description of UE behaviour in state 5GMM-REGISTERED", "numbering": "5.2.3.2", "title_level": 3, "desc": "5.2.3.2  Detailed description of UE behaviour in state 5GMM-REGISTERED\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NORMAL-SERVICE", "numbering": "5.2.3.2.1", "title_level": 4, "desc": "5.2.3.2.1   NORMAL-SERVICE\n\nThe UE:\n\na) shall initiate the mobility or the periodic registration update\nprocedure (according to conditions given in subclause\u00a05.5.1.3.2), except\nthat the periodic registration update procedure shall not be initiated over\nnon-3GPP access;\n\nb) shall initiate the service request procedure (according to conditions\ngiven in subclause\u00a05.6.1);\n\nc) shall respond to paging; and\n\nd) if configured for eCall only mode as specified in 3GPP\u00a0TS\u00a031.102\u00a0[22],\nshall perform the eCall inactivity procedure at expiry of timer T3444 or\ntimer T3445 (see subclause\u00a05.5.3).\n\nNOTE\u00a01:  Paging is not supported over non-3GPP access.\n\nNOTE\u00a02:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NON-ALLOWED-SERVICE", "numbering": "5.2.3.2.2", "title_level": 4, "desc": "5.2.3.2.2   NON-ALLOWED-SERVICE\n\nThe UE shall behave as specified in subclause\u00a05.3.5.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "ATTEMPTING-REGISTRATION-UPDATE", "numbering": "5.2.3.2.3", "title_level": 4, "desc": "5.2.3.2.3   ATTEMPTING-REGISTRATION-UPDATE\n\nThe UE in 3GPP access:\n\na) shall not send any user data;\n\nb) shall initiate a registration procedure for mobility and periodic\nregistration update on the expiry of timers T3502, T3511 or T3346;\n\nc) shall initiate a registration procedure for mobility and periodic\nregistration update when entering a new PLMN, if timer T3346 is running and\nthe new PLMN is not equivalent to the PLMN where the UE started timer\nT3346, the PLMN identity of the new cell is not in the forbidden PLMN\nlists, and the tracking area is not in one of the lists of forbidden\ntracking areas;\n\nd) shall initiate a registration procedure for mobility and periodic\nregistration update when the tracking area of the serving cell has changed,\nif timer T3346 is not running, the PLMN identity of the new cell is not in\none of the forbidden PLMN lists and the tracking area is not in one of the\nlists of forbidden tracking areas;\n\ne) may initiate a registration procedure for mobility and periodic\nregistration update upon request of the upper layers to establish a PDU\nsession for emergency services;\n\nf) may perform de-registration locally and initiate a registration\nprocedure for initial registration for emergency services even if timer\nT3346 is running;\n\ng) shall initiate registration procedure for mobility and periodic\nregistration update upon reception of paging or NOTIFICATION message with\naccess type indicating 3GPP access; and\n\nh) if configured for eCall only mode as specified in 3GPP\u00a0TS\u00a031.102\u00a0[22],\nshall perform the eCall inactivity procedure at expiry of timer T3444 or\ntimer T3445 (see subclause\u00a05.5.3).\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\nThe UE in non-3GPP access:\n\na) shall not send any user data; and\n\nb) shall initiate the registration procedure for mobility and periodic\nregistration update on the expiry of timers T3502, T3511 or T3346.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LIMITED-SERVICE", "numbering": "5.2.3.2.4", "title_level": 4, "desc": "5.2.3.2.4   LIMITED-SERVICE\n\nThe UE:\n\na) shall perform cell selection/reselection;\n\nb) may initiate registration for emergency services; and\n\nc) if configured for eCall only mode as specified in 3GPP\u00a0TS\u00a031.102\u00a0[22],\nshall perform the eCall inactivity procedure at expiry of timer T3444 or\ntimer T3445 (see subclause\u00a05.5.3).\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PLMN-SEARCH", "numbering": "5.2.3.2.5", "title_level": 4, "desc": "5.2.3.2.5   PLMN-SEARCH\n\nThe UE shall perform PLMN selection. If a new PLMN is selected, the UE\nshall reset the registration attempt counter and initiate the initial\nregistration procedure (see subclause\u00a05.5.1.2).\n\nIf the selected cell is known not to be able to provide normal service, the\nUE may initiate registration for emergency services.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NO-CELL-AVAILABLE", "numbering": "5.2.3.2.6", "title_level": 4, "desc": "5.2.3.2.6   NO-CELL-AVAILABLE\n\nThe UE shall perform cell selection and choose an appropriate substate when\na cell is found.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General on elementary 5GMM procedures", "numbering": "5.3", "title_level": 1, "desc": "5.3  General on elementary 5GMM procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM modes and N1 NAS signalling connection", "numbering": "5.3.1", "title_level": 2, "desc": "5.3.1  5GMM modes and N1 NAS signalling connection\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Establishment of the N1 NAS signalling connection", "numbering": "5.3.1.1", "title_level": 3, "desc": "5.3.1.1  Establishment of the N1 NAS signalling connection\n\nWhen the UE is in 5GMM-IDLE mode over 3GPP access and needs to transmit an\ninitial NAS message, the UE shall request the lower layer to establish an\nRRC connection. Upon indication from the lower layers that the RRC\nconnection has been established, the UE shall consider that the N1 NAS\nsignalling connection over 3GPP access is established and enter 5GMM-\nCONNECTED mode over 3GPP access.\n\nWhen the UE is in 5GMM-IDLE mode over non-3GPP access, and the UE receives\nan indication from the lower layers of access stratum connection\nestablishment, the UE shall consider the N1 NAS signalling connection\nestablished enter 5GMM-CONNECTED mode over non-3GPP access and send an\ninitial NAS message.\n\nInitial NAS messages are:\n\na) REGISTRATION REQUEST message;\n\nb) DEREGISTRATION REQUEST message; and\n\nc) SERVICE REQUEST message.\n\nIf the UE is capable of both N1 mode and S1 mode and lower layers provide\nan indication that the current E-UTRA cell is connected to both EPC and\n5GCN, for the routing of the REGISTRATION REQUEST message during the\ninitial registration procedure to the appropriate core network (EPC or\n5GCN), the UE NAS provides the lower layers with the selected core network\ntype information.\n\nFor the routing of the initial NAS message to the appropriate AMF, if the\nUE holds a valid 5G-GUTI, the UE NAS provides the lower layers with either\nthe 5G-S-TMSI or the registered GUAMI, or neither the 5G-S-TMSI nor\nregistered GUAMI according to the following rules:\n\na) if the registration procedure for mobility and periodic update was\ntriggered due to the update of the allowed NSSAI or the configured NSSAI\nincluded in the last CONFIGURATION UPDATE COMMAND message, the UE NAS shall\nnot provide the lower layers with the 5G-S-TMSI or the registered GUAMI; or\n\nb) otherwise:\n\n1) if the tracking area of the current cell is in the registration area,\nthe UE NAS shall provide the lower layers with the 5G-S-TMSI, but shall not\nprovide the registered GUAMI to the lower layers; or\n\n2) if the tracking area of the current cell is not in the registration\narea, the UE NAS shall provide the lower layers with the registered GUAMI,\nbut shall not provide the lower layers with the 5G-S-TMSI.\n\nIf the UE does not hold a valid 5G-GUTI, the UE NAS does not provide the\nlower layers with the 5G-S-TMSI or the registered GUAMI.\n\nThe UE NAS also provides the lower layers with the identity of the selected\nPLMN (see 3GPP\u00a0TS\u00a038.331\u00a0[30]). In a shared network, the UE shall choose\none of the PLMN identities as specified in 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Release of the N1 NAS signalling connection", "numbering": "5.3.1.2", "title_level": 3, "desc": "5.3.1.2  Release of the N1 NAS signalling connection\n\nThe signalling procedure for the release of the N1 NAS signalling\nconnection is initiated by the network.\n\nIn N1 mode, upon indication from lower layers that the access stratum\nconnection has been released, the UE shall enter 5GMM-IDLE mode and\nconsider the N1 NAS signalling connection released.\n\nIf the UE is configured for eCall only mode as specified in\n3GPP\u00a0TS\u00a031.102\u00a0[22] then:\n\n-  if the N1 NAS signalling connection that was released had been\nestablished for eCall over IMS, the UE shall start timer T3444; and\n\n-  if the N1 NAS signalling connection that was released had been\nestablished for a call to an HPLMN designated non-emergency MSISDN or URI\nfor test or terminal reconfiguration service, the UE shall start timer\nT3445.\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\nTo allow the network to release the N1 NAS signalling connection, the UE:\n\na) shall start the timer T3540 if the UE receives any of the 5GMM cause\nvalues #11, #12, #13 (not applicable to the service request procedure);\n\nb) shall start the timer T3540 if:\n\n1) the UE receives a REGISTRATION ACCEPT message;\n\n2) the UE has not set the \"follow-on request pending\" indication in the\nREGISTRATION REQUEST message;\n\n3) the UE has not included the Uplink data status IE in the REGISTRATION\nREQUEST message;\n\n4) the UE has not included the Allowed PDU session status IE in the\nREGISTRATION REQUEST message;\n\n5) the registration for mobility and periodic registration update procedure\nhas been initiated in 5GMM-IDLE mode; and\n\n6) the user-plane resources for PDU sessions have not been set up;\n\nc) shall start the timer T3540 if the UE receives a REGISTRATION REJECT\nmessage indicating:\n\n   the 5GMM cause value #9 or #10;\n\nd) shall start the timer T3540 if the UE receives a SERVICE REJECT message\nindicating:\n\n   the 5GMM cause value #9 or #10; and\n\ne) shall start the timer T3540 if:\n\n1) the UE receives a CONFIGURATION UPDATE COMMAND message indicating\nregistration requested with either new allowed NSSAI information or new\nconfigured NSSAI information or both included; and\n\n2) the user-plane resources for PDU sessions have not been set up.\n\nUpon expiry of T3540,\n\n-  in cases a) and b), the UE shall locally release the established NAS\nsignalling connection;\n\n-  in cases c) and d) the UE shall locally release the established N1 NAS\nsignalling connection and the UE shall initiate the registration procedure\nas described in subclause\u00a05.5.1.2.2 or 5.5.1.3.2; or\n\n-  in case e), the UE shall locally release the established N1 NAS\nsignalling connection and perform a new registration procedure as specified\nin subclause\u00a05.5.1.3.2.\n\nIn case b),\n\n-  upon an indication from the lower layers that the user-plane resources\nfor PDU sessions are set up, the UE shall stop timer T3540 and may send\nuplink signalling via the existing N1 NAS signalling connection or user\ndata via user plane. If the uplink signalling is associated with emergency\nservices fallback or establishing a PDU session for emergency services, the\nUE shall stop timer T3540 and send the uplink signalling via the existing\nNAS signalling connection; or\n\n-  upon receipt of a DEREGISTRATION REQUEST message, the UE shall stop\ntimer T3540 and respond to the network-initiated de-registration request as\nspecified in subclause\u00a05.5.2.3.\n\nIn case c),\n\n-  upon an indication from the lower layers that the access stratum\nconnection has been released, the UE shall stop timer T3540 and perform a\nnew registration procedure as specified in subclause\u00a05.5.1.2.2 or\n5.5.1.2.3.\n\n-  upon receiving a request from upper layers to send NAS signalling\nassociated with emergency services fallback or establishing a PDU session\nfor emergency services, the UE shall stop timer T3540 and shall locally\nrelease the NAS signalling connection, before proceeding as specified in\nsubclause\u00a05.5.1.\n\nIn case d),\n\n-  upon an indication from the lower layers that the RRC connection has\nbeen released, the UE shall stop timer T3540 and perform a new registration\nprocedure as specified in subclause\u00a05.5.1.2.2 or 5.5.1.2.3.\n\n-  upon receiving a request from upper layers to send NAS signalling\nassociated with emergency services fallback or establishing a PDU session\nfor emergency services, the UE shall stop timer T3540 and shall locally\nrelease the NAS signalling connection, before proceeding as specified in\nsubclause\u00a05.5.1.\n\nIn case e),\n\n-  upon an indication from the lower layers that the RRC connection has\nbeen released, the UE shall stop timer T3540 and perform a new registration\nprocedure as specified in subclause\u00a05.5.1.3.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-CONNECTED mode with RRC inactive indication", "numbering": "5.3.1.3", "title_level": 3, "desc": "5.3.1.3  5GMM-CONNECTED mode with RRC inactive indication\n\nThis subclause is only applicable for UE's 5GMM mode over 3GPP access.\n\nThe UE is in 5GMM-CONNECTED mode with RRC inactive indication when the UE\nis in:\n\na) 5GMM-CONNECTED mode over 3GPP access at the NAS layer; and\n\nb) RRC_INACTIVE state at the AS layer (see 3GPP\u00a0TS\u00a038.300\u00a0[27]).\n\nUnless stated otherwise, the UE behavior in 5GMM-CONNECTED mode with RRC\ninactive indication follows the UE behavior in 5GMM-CONNECTED over 3GPP\naccess, except that:\n\na) the UE shall apply the mobility restrictions; and\n\nb) the UE shall perform the PLMN selection procedures\n\nas in 5GMM-IDLE mode over 3GPP access.\n\nThe UE shall transition from 5GMM-CONNECTED mode over 3GPP access to 5GMM-\nCONNECTED mode with RRC inactive indication upon indication from the lower\nlayers that the UE has transitioned to RRC_INACTIVE state.\n\nUpon trigger of a procedure which requires sending of a NAS message, the UE\nin 5GMM-CONNECTED mode with RRC inactive indication over 3GPP access shall\nrequest the lower layers to transition to RRC_CONNECTED state (see\n3GPP\u00a0TS\u00a038.300\u00a0[27]).\n\nThe UE shall transition from 5GMM-CONNECTED mode with RRC inactive\nindication to 5GMM-CONNECTED mode over 3GPP access upon receving from the\nlower layers indication that the UE has transitioned to RRC_CONNECTED state\n(see 3GPP\u00a0TS\u00a038.300\u00a0[27]).\n\nNOTE:  The AMF can be aware of the transition between 5GMM-CONNECTED mode\nand 5GMM-CONNECTED mode with RRC inactive indication for a UE (see\n3GPP\u00a0TS\u00a023.502\u00a0[9]).\n\nThe UE shall trigger a transition from 5GMM-CONNECTED mode with RRC\ninactive indication to 5GMM-IDLE mode upon selection of a PLMN that is not\nan equivalent PLMN to the registered PLMN.\n\nIf the UE requests the lower layers to transition to RRC_CONNECTED state at\ninitiation of a registration procedure, a service request procedure or a de-\nregistration procedure, upon fallback indication from lower layers, the UE\nshall:\n\n-  enter 5GMM-IDLE mode; and\n\n-  proceed with the pending procedure.\n\nIf the UE requests the lower layers to transition to RRC_CONNECTED state\nfor other reason than initiation of a registration procedure, a service\nrequest procedure or a de-registration procedure, upon fallback indication\nfrom lower layers, the UE shall:\n\n-  enter 5GMM-IDLE mode;\n\n-  initiate service request procedure; and\n\n-  upon successful service request procedure completion, proceed with any\npending procedure.\n\nThe UE shall transition from 5GMM-CONNECTED mode with RRC inactive\nindication to 5GMM-IDLE mode over 3GPP access and initiate the registration\nprocedure for mobility and periodic registration update (i.e. the 5GS\nregistration type IE set to \"mobility registration updating\" in the\nREGISTRATION REQUEST message) for NAS signalling connection recovery as\nspecified in subclause\u00a05.5.1.3.2, upon receving from the lower layers:\n\na) indication that the transition from RRC_INACTIVE state to RRC_CONNECTED\nstate has failed.\n\nThe UE shall transition from 5GMM-CONNECTED mode with RRC inactive\nindication to 5GMM-IDLE mode over 3GPP access upon receving from the lower\nlayers:\n\na) indication of transition from RRC_INACTIVE to RRC_IDLE;\n\nb) AMF paging indication; or\n\nc) indication of cell selection to E-UTRAN or another RAT that the UE\nsupports.\n\nThe UE shall not trigger a transition from 5GMM-CONNECTED mode with RRC\ninactive indication to 5GMM-IDLE mode upon entering a new PLMN which is in\nthe list of equivalent PLMNs.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Permanent identifiers", "numbering": "5.3.2", "title_level": 2, "desc": "5.3.2  Permanent identifiers\n\nA globally unique permanent identity, the 5G subscription permanent\nidentifier (SUPI), is allocated to each subscriber for 5GS-based services.\nIn the current release, the IMSI and the network access identifier (NAI)\nare valid SUPI types. Though non-IMSI based SUPIs are possible by using\nNAI, the IMSI can be contained within the NAI for the SUPI. The structure\nof the SUPI and its derivatives will be specified in 3GPP\u00a0TS\u00a023.003\u00a0[4].\n\nA UE supporting NG-RAN includes a SUCI:\n\na) in the REGISTRATION REQUEST message when the UE is attempting initial\nregistration procedure and a valid 5G-GUTI is not available; or\n\nb) in the IDENTITY RESPONSE message, if the SUCI is requested by the\nnetwork during the identification procedure.\n\nThe SUCI is a privacy preserving identifier containing the concealed SUPI.\n\nNOTE:  If the home network has not provisioned the public key needed to\ngenerate a SUCI, the UE uses \"null-scheme\" as specified in\n3GPP\u00a0TS\u00a033.501\u00a0[24] to generate a SUCI which equals to the SUPI.\n\nEach UE supporting NG-RAN contains a permanent equipment identifier (PEI)\nfor accessing 5GS-based services. In the current release, the IMEI and the\nIMEISV are the only PEI format supported by 5GS.The structure of the PEI\nand its formats will be specified in 3GPP\u00a0TS\u00a023.003\u00a0[4].\n\nA UE supporting NG-RAN includes a PEI:\n\na) when neither SUPI nor valid 5G-GUTI is available to use for emergency\nservices in the REGISTRATION REQUEST message with 5GS registration type IE\nset to \"emergency registration\"; and\n\nb) when the network requests the PEI by using the identification procedure,\nin the IDENTIFICATION RESPONSE message.\n\nThe AMF can request the PEI at any time by using the identification\nprocedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Temporary identities", "numbering": "5.3.3", "title_level": 2, "desc": "5.3.3  Temporary identities\n\nA globally unique temporary user identity for 5GS-based services, the 5G\nglobally unique temporary identity (5G-GUTI), is used for identification\nwithin the signalling procedures. The 5G-GUTI is common to both 3GPP and\nnon-3GPP access. In the paging and service request procedures, a shortened\nform of the 5G-GUTI, the 5G S-temporary mobile subscriber identity (5G-S-\nTMSI), is used to enable more efficient radio signalling. The purpose of\nthe 5G-GUTI and 5G-S-TMSI is to provide identity confidentiality, i.e., to\nprotect a user from being identified and located by an intruder. The\nstructure of the 5G-GUTI and its derivatives is specified in\n3GPP\u00a0TS\u00a023.003\u00a0[4]. The 5G-GUTI has two main components:\n\na) the globally unique AMF id (GUAMI) that uniquely identifies the AMF that\nallocated the 5G-GUTI, and\n\nb) the 5G-TMSI that provides for an unambiguous identity of the UE within\nthis AMF.\n\nThe 5G-S-TMSI has three main components:\n\na) the AMF set ID that uniquely identifies the AMF set within the AMF\nregion;\n\nb) the AMF pointer that uniquely identifies the AMF within the AMF set; and\n\nc) the 5G-TMSI.\n\nA UE supporting N1 mode includes a valid 5G-GUTI, if any is available, in\nthe REGISTRATION REQUEST and DEREGISTRATION REQUEST messages. In the\nSERVICE REQUEST message, the UE includes a valid 5G-S-TMSI as user\nidentity. The AMF may assign a new 5G-GUTI for a particular UE at\nsuccessful registration and generic UE configuration update procedures.\n\nIf a new 5G-GUTI is assigned by the AMF, the UE and the AMF handle the 5G-\nGUTI as follows:\n\na) Upon receipt of a 5GMM message containing a new 5G-GUTI the UE considers\nthe new 5G-GUTI as valid and the old 5G-GUTI as invalid, stops timer T3519\nif running, and deletes any stored SUCI. The new 5G-GUTI is stored in a non-\nvolatile memory in the USIM if the corresponding file is present in the\nUSIM, else in the non-volatile memory in the ME, as described in annex\u00a0C.\n\nb) The AMF considers the old 5G-GUTI as invalid as soon as an\nacknowledgement for a registration or generic UE configuration update\nprocedure is received.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration areas", "numbering": "5.3.4", "title_level": 2, "desc": "5.3.4  Registration areas\n\nWithin the 5GS, the registration area is managed independently per access\ntype, i.e., 3GPP access or non-3GPP access. The AMF assigns a registration\narea to the UE during the registration procedure. A registration area is\ndefined as a set of tracking areas and each of these tracking areas\nconsists of one or more cells that cover a geographical area. Tracking\nareas cannot overlap each other. Within the 5GS, the concept of\n\"registration to multiple tracking areas\" applies:\n\na) A tracking area is identified by a TAI which is broadcast in the cells\nof the tracking area. The TAI is constructed from a TAC and a PLMN\nidentifier. In case of a shared network, one or more TAC and multiple PLMN\nidentifiers are broadcast.\n\nb) In order to reduce the tracking area update signalling within the 5GS,\nthe AMF can assign several tracking areas to the UE. These tracking areas\nconstruct a list of tracking areas which is identified by a TAI list. When\ngenerating the TAI list, the AMF shall include only TAIs that are\napplicable on the access where the TAI list is sent. The AMF shall be able\nto allocate a TAI List over different NG-RAN access technologies.\n\nc) The UE considers itself registered to a list of tracking areas and does\nnot need to trigger the registration procedure for mobility and periodic\nregistration update (i.e. the 5GS registration type IE set to \"mobility\nregistration updating\" in the REGISTRATION REQUEST message) as long as the\nUE stays in one of the tracking areas of the list of tracking areas\nreceived from the AMF.\n\nd) The UE will consider the TAI list as valid, until it receives a new TAI\nlist in the next registration procedure for mobility and periodic\nregistration update or generic UE configuration update procedure, or the UE\nis commanded by the network to delete the TAI list by a reject message or\nit is deregistered from the 5GS. If the registration request is accepted or\nthe TAI list is reallocated by the AMF, the AMF shall provide at least one\nentry in the TAI list. If the new and the old TAI list are identical, the\nAMF does not need to provide the new TAI list to the UE during mobility\nregistration update or periodic registration update.\n\ne) The TAI list can be reallocated by the AMF.\n\nf)-  When the UE is deregistered from the 5GS, the TAI list in the UE is\ninvalid.\n\ng) The AMF allocates one 5G-GUTI, which is common between 3GPP access and\nnon-3GPP access, to the UE.\n\nh) The UE includes the last visited registered TAI, if available, to the\nAMF. The last visited registered TAI is stored in a non-volatile memory in\nthe USIM if the corresponding file is present in the USIM, else in the non-\nvolatile memory in the ME, as described in annex\u00a0C.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service area restrictions", "numbering": "5.3.5", "title_level": 2, "desc": "5.3.5  Service area restrictions\n\nService area restrictions are applicable only to 3GPP access.\n\nThe service area restrictions consist of either an allowed area, or a non-\nallowed area. The allowed area can contain up to 16 tracking areas or\ninclude all tracking areas in a PLMN. The non-allowed area can contain up\nto 16 tracking areas. The network conveys the service area restrictions to\nthe UE by including either an allowed area, or a non-allowed area, but not\nboth, in the Service area list IE of a REGISTRATION ACCEPT message or a\nCONFIGURATION UPDATE COMMAND message.\n\nIf the network does not convey the service area restrictions to the UE in\nthe Service area list IE of a REGISTRATION ACCEPT message, the UE shall\ntreat all tracking areas in the registered PLMN and its equivalent PLMN(s)\nas allowed area and delete the stored list of \"allowed tracking areas\" or\nthe stored list of \"non-allowed tracking areas\" for the registered PLMN and\nits equivalent PLMN(s).\n\nWhen the UE receives a Service area list IE with an allowed area indication\nduring a registration procedure or a generic UE configuration update\nprocedure:\n\na) if the \"Type of list\" included in the Service area list IE does not\nindicate all TAIs belonging to the PLMN are allowed area, the UE shall\ndelete the old list of \"allowed tracking areas\" and store the tracking\nareas in the allowed area as the list of \"allowed tracking areas\". If the\nUE has a stored list of \"non-allowed tracking areas\" for the registered\nPLMN, the UE shall delete that list; or\n\nb) if the \"Type of list\" included in the Service area list IE indicates all\nTAIs belonging to the PLMN are allowed area, the UE shall treat all\ntracking areas in the registered PLMN are allowed area and delete the\nstored list of \"allowed tracking areas\" or the stored list of \"non-allowed\ntracking areas\" for the registered PLMN.\n\nWhen the UE receives a Service area list IE with a non-allowed area\nindication during a registration procedure or a generic UE configuration\nupdate procedure, the UE shall delete the old list of \"non-allowed tracking\nareas\" and store the tracking areas in the non-allowed area as the list of\n\"non-allowed tracking areas\". If the UE has a stored list of \"allowed\ntracking areas\" for the registered PLMN, the UE shall delete that list.\n\nIf the UE has a stored list of \"allowed tracking areas\":\n\na) while camped on a cell whose TAI is in the list of \"allowed tracking\nareas\", the UE is allowed to initiate any 5GMM and 5GSM procedures; and\n\nb) while camped on a cell whose TAI is not in the list of \"allowed tracking\nareas\":\n\n1) if the UE is in 5GMM-IDLE mode over 3GPP access, the UE:\n\ni) shall not perform the registration procedure for mobility and periodic\nregistration update with Uplink data status IE except for emergency\nservices; and\n\nii)  shall not initiate a service request procedure except for emergency\nservices, high priority access or for responding to core network paging;\nand\n\n2) if the UE is in 5GMM-CONNECTED mode or 5GMM-CONNECTED mode with RRC\ninactive indication over 3GPP access, the UE:\n\ni) shall not perform the registration procedure for mobility and periodic\nregistration update with Uplink data status IE except for emergency\nservices;\n\nii)  shall not initiate a service request procedure except for emergency\nservices or high priority access; and\n\niii) shall not initiate a 5GSM procedure except for emergency services.\n\nIf the UE has a stored list of \"non-allowed tracking areas\":\n\na) while camped on a cell whose TAI is not in the list of \"non-allowed\ntracking areas\", the UE is allowed to initiate any 5GMM and 5GSM\nprocedures; and\n\nb) while camped on a cell whose TAI is in the list of \"non-allowed tracking\nareas\":\n\n1) if the UE is in 5GMM-IDLE mode over 3GPP access, the UE:\n\ni) shall not perform the registration procedure for mobility and periodic\nregistration update with Uplink data status IE except for emergency\nservices; and\n\nii)  shall not initiate a service request procedure except for emergency\nservices, high priority access or for responding to core network paging;\nand\n\n2) if the UE is in 5GMM-CONNECTED mode or 5GMM-CONNECTED mode with RRC\ninactive indication over 3GPP access, the UE:\n\ni) shall not perform the registration procedure for mobility and\nregistration update with the Uplink data status IE except for emergency\nservices;\n\nii)  shall not initiate a service request procedure except for emergency\nservices or high priority access; and\n\niii) shall not initiate a 5GSM procedure except for emergency services.\n\nThe list of \"allowed tracking areas\", as well as the list of \"non-allowed\ntracking areas\" shall be erased when:\n\na) the UE is switched off;\n\nb) the UICC containing the USIM is removed; and\n\nc) periodically (with a period in the range 12 to 24 hours).\n\nWhen the list of \"allowed tracking areas\" or the list of \"non-allowed\ntracking areas\" is erased, the UE performs cell selection procedure.\n\nThe UE shall evaluate the information in the list of \"5GS forbidden\ntracking areas for roaming\" and in the list of \"5GS forbidden tracking\nareas for regional provision of service\" before evaluating the information\nin the list of \"allowed tracking areas\" or the list of \"non-allowed\ntracking areas\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mobile initiated connection only mode", "numbering": "5.3.6", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of the periodic registration update timer and", "numbering": "5.3.7", "title_level": 2, "desc": "5.3.6  Mobile initiated connection only mode\n\nThe UE can request the use of mobile initiated connection only (MICO) mode\nduring the registration procedure (see 3GPP\u00a0TS\u00a023.501\u00a0[8] and\n3GPP\u00a0TS\u00a023.502\u00a0[9]). The UE shall not request use of MICO mode over non-\n3GPP access. Furthermore, the UE in 3GPP access shall not request the use\nof MICO mode during:\n\na) a registration procedure for initial registration for emergency services\n(see subclause\u00a05.5.1.2);\n\nb) a registration procedure for mobility and periodic registration update\n(see subclause\u00a05.5.1.3) for initiating a PDU session for emergency services\nif the UE is in the state 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE;\nor\n\nc)-  a registration procedure for mobility and periodic registration update\n(see subclause\u00a05.5.1.3) when the UE has a PDU session for emergency\nservices established.\n\nIf the UE requests the use of MICO mode, the network can accept the use of\nMICO mode by providing a MICO indication when accepting the registration\nprocedure. The UE may use MICO mode only if the network has provided the\nMICO indication IE during the last registration procedure.\n\nIf the network accepts the use of MICO mode, the AMF may include an \"all\nPLMN registration area allocated\" indication in the MICO indication IE to\nthe UE.\n\nIf the network accepts the use of MICO mode, the UE may deactivate the AS\nlayer and activate MICO mode by entering the state 5GMM-REGISTERED.NO-CELL-\nAVAILABLE if:\n\na) the UE is in 5GMM-IDLE mode for 3GPP access; and\n\nb) in the 5GMM-REGISTERED.NORMAL-SERVICE state for 3GPP access.\n\nWhen MICO mode is activated all NAS timers are stopped and associated\nprocedures aborted except for timers T3512, T3346, T3396, T35cd, T35ef, any\nback-off timers, and the timer T controlling the periodic search for HPLMN\nor EHPLMN or higher prioritized PLMNs (see 3GPP\u00a0TS\u00a023.122\u00a0[5]).\n\nNOTE:  When MICO mode is activated and if the UE is also registered over\nthe non-3GPP access, the AMF will not send a NOTIFICATION message with\naccess type indicating 3GPP access over the non-3GPP access for PDU\nsessions associated with 3GPP access.\n\nThe UE may deactivate MICO mode and activate the AS layer at any time. Upon\ndeactivating MICO mode, the UE may initiate 5GMM procedures (e.g. for the\ntransfer of mobile originated signalling or user data).\n\nWhen a PDU session for emergency services is successfully established after\nthe MICO mode was enabled, the UE the UE and the AMF shall locally disable\nMICO mode. The UE and the AMF shall not enable MICO mode until the AMF\naccepts the use of MICO mode in the next registration procedure. To enable\nan emergency call back, the UE should wait for a UE implementation-specific\nduration of time before requesting the use of MICO mode after the release\nof the emergency PDU session\n\nIf the AMF accepts the use of MICO mode, the AMF starts the implicit de-\nregistration timer for 3GPP access when entering 5GMM-IDLE mode for 3GPP\naccess.\n\nUpon successful completion of an attach procedure or tracking area updating\nprocedure after inter-system change from N1 mode to S1 mode (see\n3GPP\u00a0TS\u00a024.301\u00a0[15]), the UE operating in single-registration mode shall\nlocally disable MICO mode. After inter-system change from S1 mode to N1\nmode, the UE operating in single-registration mode may re-negotiate MICO\nmode with the network during the registration procedure for mobility and\nperiodic registration update.\n\n\n5.3.7  Handling of the periodic registration update timer and mobile\n         reachable timer\n\nThe periodic registration update procedure is used over 3GPP access to\nperiodically notify the availability of the UE to the network. The\nprocedure is controlled in the UE by the periodic registration update\ntimer, T3512.\n\nIf the UE is registered over the 3GPP access, the AMF maintains an implicit\nde-registration timer to control when the UE is considered implicitly de-\nregistered over the 3GPP access. If the UE is registered over the non-3GPP\naccess, the AMF also maintains a non-3GPP implicit de-registration timer to\ncontrol when the UE is considered implicitly de-registered over the non-\n3GPP access. The UE registered over the non-3GPP access maintains a non-\n3GPP de-registration timer to control when the UE is considered implicitly\nde-registered for the non-3GPP access.\n\nThe AMF shall start a non-3GPP implicit de-registration timer for the UE\nregistered over non-3GPP access when the N1 NAS signalling connection over\nnon-3GPP access is released.\n\nThe UE registered over non-3GPP access shall reset and start a non-3GPP de-\nregistration timer when the N1 NAS signalling connection over non-3GPP\naccess is released. The non-3GPP de-registration timer is stopped when the\nUE enters 5GMM-CONNECTED mode over non-3GPP access or the 5GMM-DEREGISTERED\nstate over non-3GPP access.\n\nThe non-3GPP implicit de-registration timer shall be longer than the non-\n3GPP de-registration timer.\n\nThe value of timer T3512 is sent by the network to the UE in the\nREGISTRATION ACCEPT message. The UE shall apply this value in all tracking\nareas of the list of tracking areas assigned to the UE until a new value is\nreceived. The periodic registration update timer only applies to the UE\nregistered to the 5GS services over 3GPP access.\n\nIf timer T3512 received by the UE in a REGISTRATION ACCEPT message contains\nan indication that the timer is deactivated or the timer value is zero,\nthen timer T3512 is deactivated and the UE shall not perform the periodic\nregistration update procedure.\n\nNOTE:  The UE does not perform the periodic registration update procedure\nfor non-3GPP access.\n\nTimer T3512 is reset and started with its initial value, when the UE\nchanges from 5GMM-CONNECTED over 3GPP access to 5GMM-IDLE mode over 3GPP\naccess. Timer T3512 is stopped when the UE enters 5GMM-CONNECTED mode over\n3GPP access or the 5GMM-DEREGISTERED state over 3GPP access.\n\nIf the UE is registered for emergency services, and timer T3512 expires,\nthe UE shall not initiate a periodic registration update procedure, but\nshall locally de-register from the network. When the UE is camping on a\nsuitable cell, it may re-register to regain normal service.\n\nWhen a UE is not registered for emergency services, and timer T3512\nexpires, the periodic registration update procedure shall be started.\n\nIf the UE is not registered for emergency services, and is in a state other\nthan 5GMM-REGISTERED.NORMAL-SERVICE over 3GPP access when timer T3512\nexpires, the periodic registration update procedure is delayed until the UE\nreturns to 5GMM-REGISTERED.NORMAL-SERVICE over 3GPP access.\n\nThe network supervises the periodic registration update procedure of the UE\nby means of the mobile reachable timer.\n\nIf the UE is not registered for emergency services, the mobile reachable\ntimer shall be longer than T3512. In this case, by default, the mobile\nreachable timer is 4 minutes greater than timer T3512.\n\nThe network behaviour upon expiry of the mobile reachable timer is network\ndependent, but typically the network stops sending paging messages to the\nUE on the first expiry, and may take other appropriate actions.\n\nIf the UE is registered for emergency services, the AMF shall set the\nmobile reachable timer with a value equal to timer T3512. When the mobile\nreachable timer expires, the AMF shall locally de-register the UE.\n\nThe mobile reachable timer shall be reset and started with the value as\nindicated above, when the AMF releases the NAS signalling connection for\nthe UE. The mobile reachable timer shall be stopped when a NAS signalling\nconnection is established for the UE.\n\nUpon expiry of the mobile reachable timer the network shall start the\nimplicit de-registration timer over 3GPP access. The value of the implicit\nde-registration timer over 3GPP access is network dependent. If MICO is\nactivated, the default value of the implicit de-registration timer over\n3GPP access is 4 minutes greater than timer T3512.\n\nIf the implicit de-registration timer expires before the UE contacts the\nnetwork, the network shall implicitly de-register the UE. The implicit de-\nregistration timer shall be stopped when a NAS signalling connection is\nestablished for the UE.\n\nIf the non-3GPP implicit de-registration timer expires before the UE\ncontacts the network over the non-3GPP access, the network shall implicitly\nde-register the UE and enter the state 5GMM-DEREGISTERED over non-3GPP\naccess for the UE. The non-3GPP implicit de-registration timer shall be\nstopped when a NAS signalling connection over non-3GPP access is\nestablished for the UE.\n\nIf the non-3GPP de-registration timer expires before the UE contacts the\nnetwork over the non-3GPP access, the UE shall enter the state 5GMM-\nDEREGISTERED over non-3GPP access. The non-3GPP de-registration timer shall\nbe stopped when a NAS signalling connection over non-3GPP access is\nestablished for the UE.\n\nIf the AMF provides T3346 value IE in the mobility management messages and\nT3346 value is greater than timer T3512, the AMF sets the mobile reachable\ntimer and the implicit de-registration timer such that the sum of the timer\nvalues is greater than timer T3346 value.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of timer T3502", "numbering": "5.3.8", "title_level": 2, "desc": "5.3.8  Handling of timer T3502\n\nThe value of timer T3502 can be sent by the network to the UE in the\nREGISTRATION ACCEPT message. The UE shall apply this value in all tracking\nareas of the registration area assigned to the UE, until a new value is\nreceived.\n\nThe value of timer T3502 can be sent by the network to the UE in the\nREGISTRATION REJECT message during the initial registration. If a\nREGISTRATION REJECT message including timer T3502 value was received\nintegrity protected, the UE shall apply this value until a new value is\nreceived with integrity protection or a new PLMN is selected. Otherwise,\nthe default value of this timer is used.\n\nThe default value of this timer is also used by the UE in the following\ncases:\n\na) REGISTRATION ACCEPT message is received without a value specified;\n\nb) the UE does not have a stored value for this timer; or\n\nc) a new PLMN which is not in the list of equivalent PLMNs has been\nentered, the registration procedure fails, the registration attempt counter\nis equal to 5 and no REGISTRATION REJECT message was received from the new\nPLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of NAS level mobility management congestion control", "numbering": "5.3.9", "title_level": 2, "desc": "5.3.9  Handling of NAS level mobility management congestion control\n\nThe AMF may detect 5GMM signalling congestion and perform general NAS level\ncongestion control. Under the 5GMM signalling congestion conditions the AMF\nmay reject 5GMM signalling requests from UEs as specified in\n3GPP\u00a0TS\u00a023.501\u00a0[8]. The AMF should not reject the following request:\n\na) requests for emergency services; and\n\nb) requests from UEs configured for high priority access in selected PLMN.\n\nWhen general NAS level congestion control is active, the AMF may include a\nvalue for the mobility management back-off timer T3346 in the reject\nmessages. The UE starts the timer T3346 with the value received in the 5GMM\nreject messages. To avoid that large numbers of UEs simultaneously initiate\ndeferred requests, the AMF should select the value for the timer T3346 for\nthe rejected UEs so that timeouts are not synchronised.\n\nIf the timer T3346 is running when the UE enters state 5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\nthe timer T3346 is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T3346 is running, the UE shall\nbehave as follows when the UE is switched on and the USIM in the UE remains\nthe same:\n\n   let t1 be the time remaining for T3346 timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1\u00a0\u2013\u00a0t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nIf the UE enters a new PLMN while timer T3346 is running, and the new PLMN\nis not equivalent to the PLMN where the UE started timer T3346, the UE\nshall stop timer T3346 when initiating 5GMM procedures in the new PLMN.\n\nIf timer T3346 is running or is deactivated, and the UE is a UE configured\nfor high priority access in selected PLMN, or the UE wants to initiate\nsignalling for emergency services or emergency services fallback, then the\nUE is allowed to initiate 5GMM procedures.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of DNN based congestion control", "numbering": "5.3.10", "title_level": 2, "desc": "5.3.10 Handling of DNN based congestion control\n\nThe AMF may detect and start performing DNN based congestion control when\none or more DNN congestion criteria as specified in 3GPP\u00a0TS\u00a023.501\u00a0[8] are\nmet. The AMF may store a DNN congestion back-off timer on a per UE and\ncongested DNN basis. If the UE does not provide a DNN for a non-emergency\nPDU session, then the AMF uses the selected DNN or the DNN associated with\nthe PDU session corresponding to the 5GSM procedure.\n\nWhen DNN based congestion control is activated at the AMF, the AMF performs\nthe congestion control as specified in subclause\u00a05.4.5 and the UE performs\nthe congestion control as specified in subclause\u00a05.4.5 and subclause\u00a06.2.7.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of S-NSSAI based congestion control", "numbering": "5.3.11", "title_level": 2, "desc": "5.3.11 Handling of S-NSSAI based congestion control\n\nThe AMF may detect and start performing S-NSSAI based congestion control\nwhen one or more S-NSSAI congestion criteria as specified in\n3GPP\u00a0TS\u00a023.501\u00a0[8] are met. The AMF may store an S-NSSAI congestion back-\noff timer on a per UE, congested S-NSSAI, and optionally DNN basis. If the\nUE does not provide a DNN for a non-emergency PDU session, then the AMF\nuses the selected DNN or the DNN associated with the PDU session\ncorresponding to the 5GSM procedure.\n\nWhen S-NSSAI based congestion control is activated at the AMF, the AMF\nperforms the congestion control as specified in subclause\u00a05.4.5 and the UE\nperforms the congestion control as specified in subclause\u00a05.4.5 and\nsubclause\u00a06.2.8.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of local emergency numbers", "numbering": "5.3.12", "title_level": 2, "desc": "5.3.12 Handling of local emergency numbers\n\nThe network may send a Local emergency numbers list or an Extended local\nemergency numbers list or both, in the REGISTRATION UPDATE ACCEPT message,\nby including the Emergency number list IE and the Extended emergency number\nlist IE, respectively.\n\nThe user equipment shall store the Local emergency numbers list and the\nExtended local emergency numbers list, as provided by the network. The\nLocal emergency numbers list stored in the user equipment shall be replaced\non each receipt of the Emergency number list IE. The Extended local\nemergency numbers list stored in the user equipment shall be replaced on\neach receipt of the Extended emergency number list IE.\n\nThe emergency number(s) received in the Emergency number list IE and the\nExtended emergency number list IE are valid only in networks in the same\ncountry as the cell on which this IE is received. If no Emergency number\nlist IE or Extended emergency number list IE is contained in the\nREGISTRATION UPDATE ACCEPT message, then the stored Local emergency numbers\nlist or Extended local emergency numbers list, respectively, in the user\nequipment shall be kept, except if the user equipment has successfully\nregistered to a PLMN in a country different from that of the PLMN that sent\nthe list.\n\nEditor's note:  It is FFS if the Extended local emergency numbers list is\ndeleted if upon a registration update the PLMN provide only the Emergency\nnumber list IE.\n\nThe Local emergency numbers list and the Extended local emergency numbers\nlist shall be deleted at switch off and removal of the USIM. The user\nequipment shall be able to store up to ten entries in the Local emergency\nnumbers list and up to twenty entries in the Extended local emergency\nnumbers list, received from the network.\n\nFor the use of the Local emergency numbers list and the Extended local\nemergency numbers list by the UE see 3GPP\u00a0TS\u00a024.301\u00a0[15], subclause\u00a05.3.7.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Lists of 5GS forbidden tracking areas", "numbering": "5.3.13", "title_level": 2, "desc": "5.3.13 Lists of 5GS forbidden tracking areas\n\nThe UE shall store a list of \"5GS forbidden tracking areas for roaming\", as\nwell as a list of \"5GS forbidden tracking areas for regional provision of\nservice\". These lists shall be erased when\n\na) the UE is switched off or the UICC containing the USIM is removed; and\n\nb) periodically (with a period in the range 12 to 24 hours).\n\nWhen the lists are erased, the UE performs cell selection according to\n3GPP\u00a0TS\u00a038.304\u00a0[28]. A tracking area shall be removed from the list of \"5GS\nforbidden tracking areas for roaming\", as well as the list of \"5GS\nforbidden tracking areas for regional provision of service\", if the UE\nreceives the tracking area in Service area list of \"allowed tracking areas\"\nin REGISTRATION ACCEPT message or a CONFIGURATION UPDATE COMMAND message.\nThe UE shall not remove the tracking area from \"5GS forbidden tracking\nareas for roaming\" or \"5GS forbidden tracking areas for regional provision\nof service\" if the UE is registered for emergency services.\n\nIn N1 mode, the UE shall update the suitable list whenever a REGISTRATION\nREJECT, SERVICE REJECT or DEREGISTRATION REQUEST message is received with\nthe 5GMM cause #12 \"tracking area not allowed\" or #13 \"roaming not allowed\nin this tracking area\".\n\nEach list shall accommodate 40 or more TAIs. When the list is full and a\nnew entry has to be inserted, the oldest entry shall be deleted.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "List of equivalent PLMNs", "numbering": "5.3.14", "title_level": 2, "desc": "5.3.14 List of equivalent PLMNs\n\nThe UE shall store a list of equivalent PLMNs. These PLMNs shall be\nregarded by the UE as equivalent to each other for PLMN selection and cell\nselection/re-selection. The same list is used by 5GMM, EMM, GMM and MM (see\n3GPP\u00a0TS\u00a024.301\u00a0[15] and 3GPP\u00a0TS\u00a024.008\u00a0[12]).\n\nThe UE shall update or delete this list at the end of each registration\nupdate procedure. The stored list consists of a list of equivalent PLMNs as\ndownloaded by the network plus the PLMN code of the registered PLMN that\ndownloaded the list. When the UE is switched off, the UE shall keep the\nstored list so that it can be used for PLMN selection after switch on. The\nUE shall delete the stored list if the USIM is removed or when the UE\nregistered for emergency services enters the state 5GMM-DEREGISTERED. The\nUE shall delete the stored list if the USIM is removed or when the UE\nregistered for emergency services enters the state 5GMM-DEREGISTERED. The\nmaximum number of possible entries in the stored list is 16.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Transmission failure abnormal case in the UE", "numbering": "5.3.15", "title_level": 2, "desc": "5.3.15 Transmission failure abnormal case in the UE\n\nThe abnormal case 5GMM uplink message transmission failure indication by\nlower layers can be identified for 5GMM procedures:\n\n   When it is specified in the relevant procedure that it is up to the UE\nimplementation to re-run the ongoing procedure that triggered that\nprocedure, the procedure can typically be re-initiated using a\nretransmission mechanism of the uplink message (i.e. the one that has\npreviously failed to be transmitted) with new sequence number and message\nauthentication code information thus avoiding to re-start the whole\nprocedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM common procedures", "numbering": "5.4", "title_level": 1, "desc": "5.4  5GMM common procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Primary authentication and key agreement procedure", "numbering": "5.4.1", "title_level": 2, "desc": "5.4.1  Primary authentication and key agreement procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.1", "title_level": 3, "desc": "5.4.1.1  General\n\nThe purpose of the primary authentication and key agreement procedure is to\nenable mutual authentication between the UE and the network and to provide\nkeying material that can be used between the UE and network in subsequent\nsecurity procedures, as specified in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nTwo methods are defined:\n\na) EAP based primary authentication and key agreement procedure.\n\nb) 5G AKA based primary authentication and key agreement procedure.\n\nThe UE and the AMF shall support the EAP based primary authentication and\nkey agreement procedure and the 5G AKA based primary authentication and key\nagreement procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP based primary authentication and key agreement procedure", "numbering": "5.4.1.2", "title_level": 3, "desc": "5.4.1.2  EAP based primary authentication and key agreement procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.2.1", "title_level": 4, "desc": "5.4.1.2.1   General\n\nThe purpose of the EAP based primary authentication and key agreement\nprocedure is to provide mutual authentication between the UE and the\nnetwork and to agree on a key KAMF (see 3GPP\u00a0TS\u00a033.501\u00a0[24]).\n\nExtensible authentication protocol (EAP) as specified in IETF\u00a0RFC\u00a03748\u00a0[34]\nenables authentication using various EAP methods.\n\nEAP defines four types of EAP messages:\n\na) an EAP-request message;\n\nb) an EAP-response message;\n\nc) an EAP-success message; and\n\nd) an EAP-failure message.\n\nSeveral rounds of exchanges of an EAP-request message and a related EAP-\nresponse message can be required to achieve the authentication (see example\nin figure\u00a05.4.1.2.1.1).\n\nThe EAP based primary authentication and key agreement procedure is always\ninitiated and controlled by the network.\n\nThe EAP-request message is transported from the network to the UE using the\nAUTHENTICATION REQUEST message of the EAP message reliable transport\nprocedure.\n\nThe EAP-response message is transported from the UE to the network using\nthe AUTHENTICATION RESPONSE message of the EAP message reliable transport\nprocedure.\n\nIf the authentication of the UE completes successfully and the serving AMF\nintends to initiate a security mode control procedure after the EAP based\nprimary authentication and key agreement procedure, then the EAP-success\nmessage is transported from the network to the UE using the SECURITY MODE\nCOMMAND message of the security mode control procedure (see\nsubclause\u00a05.4.2).\n\nIf the authentication of the UE completes successfully and the serving AMF\ndoes not intend to initiate a security mode control procedure after the EAP\nbased primary authentication and key agreement procedure, then the EAP-\nsuccess message is transported from the network to the UE using the\nAUTHENTICATION RESULT message of the EAP result message transport\nprocedure.\n\nNOTE\u00a01:  The serving AMF will not initiate a security mode control\nprocedure after the EAP based primary authentication and key agreement\nprocedure e.g. in case of AMF relocation during registration procedure.\n\nIf the authentication of the UE completes unsuccessfully, the EAP-failure\nmessage is transported from the network to the UE using the AUTHENTICATION\nRESULT message of the EAP result message transport procedure or in a\nresponse of the initial 5GMM procedure as part of which the EAP based\nprimary authentication and key agreement procedure is performed.\n\nThe AMF shall set the authenticator retransmission timer specified in\nIETF\u00a0RFC\u00a03748\u00a0[34] subclause\u00a04.3 to infinite value.\n\nNOTE\u00a02:  The EAP message reliable transport procedure provides a reliable\ntransport of EAP messages and therefore retransmissions at the EAP layer do\nnot occur.\n\nThe AUSF and the AMF support exchange of EAP messages using N12.\n\nEditor's note:  The ngKSI handling at EAP authentication is FFS.\n\nEditor's note:  establishment of 5GS security context is FFS.\n\n[pic]\n\nFigure\u00a05.4.1.2.1.1: EAP based primary authentication and key agreement\nprocedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP-AKA' related procedures", "numbering": "5.4.1.2.2", "title_level": 4, "desc": "5.4.1.2.2   EAP-AKA' related procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.2.2.1", "title_level": 5, "desc": "5.4.1.2.2.1 General\n\nThe UE shall support acting as EAP-AKA' peer as specified in\nIETF\u00a0RFC\u00a05448\u00a0[40]. The AUSF may support acting as EAP-AKA' server as\nspecified in IETF\u00a0RFC\u00a05448\u00a0[40].\n\nThe EAP-AKA' enables mutual authentication of the UE and the network.\n\nThe UE can reject the EAP-request/AKA'-challenge message sent by the\nnetwork. The UE shall proceed with an EAP-request/AKA'-challenge message\nonly if a USIM is present.\n\nDuring a successful EAP based primary authentication and key agreement\nprocedure, the CK and IK are computed by the USIM. CK and IK are then used\nby the ME as key material to compute a new key, KAMF. KAMF is stored in the\n5GS security contexts (see 3GPP\u00a0TS\u00a033.501\u00a0[24]) of both the network and in\nthe volatile memory of the ME while registered to the network, and is the\nroot for the 5GS integrity protection and ciphering key hierarchy.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Initiation", "numbering": "5.4.1.2.2.2", "title_level": 5, "desc": "5.4.1.2.2.2 Initiation\n\nIn order to initiate the EAP based primary authentication and key agreement\nprocedure using EAP-AKA', the AUSF shall send an EAP-request/AKA'-challenge\nmessage as specified in IETF\u00a0RFC\u00a05448\u00a0[40]. The AUSF shall set the\nAT_KDF_INPUT attribute of the EAP-request/AKA'-challenge message to the\nSNN. The SNN is in format described in subclause\u00a09.9.1. The AUSF may\ninclude AT_RESULT_IND attribute in the EAP-request/AKA'-challenge message.\n\nUpon receiving an EAP-request/AKA'-challenge message, the UE shall check\nwhether the UE has a USIM, shall check the key derivation function\nindicated in AT_KDF attributes as specified in IETF\u00a0RFC\u00a05448\u00a0[40], and if\nthe value of the Key Derivation Function field within the received AT_KDF\nattribute, is of value 1, shall check:\n\na) whether the network name field of the AT_KDF_INPUT attribute is the SNN\nconstructed according to subclause\u00a09.9.1; and\n\nb) whether the network name field of the AT_KDF_INPUT attribute matches the\nPLMN identity saved in the UE.\n\nEditor's Note:  It is FFS what the UE should do if the Key Derivation\nFuntion field is of a value not equal to 1.\n\nThe PLMN identity the UE uses for the above network name check is as\nfollows:\n\na) when the UE moves from 5GMM-IDLE mode to 5GMM-CONNECTED mode, until the\nfirst handover, the UE shall use the PLMN identity of the selected PLMN;\nand\n\nb) after handover or inter-system change to N1 mode in 5GMM-CONNECTED mode:\n\n1) if the target cell is not a shared network cell, the UE shall use the\nPLMN identity received as part of the broadcast system information;\n\n2) if the target cell is a shared network cell and the UE has a valid 5G-\nGUTI, the UE shall use the PLMN identity that is part of the 5G-GUTI; and\n\n3) if the target cell is a shared network cell and the UE has a valid 4G-\nGUTI and TAI, but not a valid 5G-GUTI, the UE shall use the PLMN identity\nthat is part of the TAI.\n\nEditor's Note:  In the eventuality that RAN2 decides to use different TAI\nfor 4G and for 5G, the above requirements will need to be revisited.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE successfully authenticates network", "numbering": "5.4.1.2.2.3", "title_level": 5, "desc": "5.4.1.2.2.3 UE successfully authenticates network\n\nIf a USIM is present and the SNN check is successful, the UE shall handle\nthe EAP-request/AKA'-challenge message specified in IETF\u00a0RFC\u00a05448\u00a0[40]. The\nUSIM shall derive CK and IK and compute the authentication response (RES)\nusing the 5G authentication challenge data received from the ME, and pass\nRES to the ME. The ME shall derive CK\u2019 and IK\u2019 from CK and IK. Furthermore,\nthe ME shall generate KAUSF, KSEAF, KAMF and MAC as described in\n3GPP\u00a0TS\u00a033.501\u00a0[24] and shall send an EAP-response/AKA'-challenge message\nas specified in IETF\u00a0RFC\u00a05448\u00a0[40].\n\nIf the EAP-request/AKA'-challenge message contains AT_RESULT_IND attribute,\nthe UE may include AT_RESULT_IND attribute in the EAP-response/AKA'-\nchallenge message as specified in IETF\u00a0RFC\u00a05448\u00a0[40].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Errors when handling EAP-request/AKA'-challenge message", "numbering": "5.4.1.2.2.4", "title_level": 5, "desc": "5.4.1.2.2.4 Errors when handling EAP-request/AKA'-challenge message\n\nIf a USIM is present, the SNN check fails or the UE does not accept AUTN\nduring handling of the EAP-request/AKA'-challenge message as specified in\nIETF\u00a0RFC\u00a05448\u00a0[40], the UE shall send an EAP-response/AKA'-authentication-\nreject message as specified in IETF\u00a0RFC\u00a05448\u00a0[40].\n\nIf a USIM is present, the SNN check is successful but the UE detects that\nthe sequence number in AUTN is not correct during handling of the EAP-\nrequest/AKA'-challenge message as specified in IETF\u00a0RFC\u00a05448\u00a0[40], the UE\nshall send an EAP-response/AKA'-synchronization-failure message as\nspecified in IETF\u00a0RFC\u00a05448\u00a0[40].\n\nIf a USIM is present, the SNN check is successful, the sequence number in\nAUTN is correct and the UE detects another error during handling of the EAP-\nrequest/AKA'-challenge message as specified in IETF\u00a0RFC\u00a05448\u00a0[40], the UE\nshall send an EAP-response/AKA'-client-error message as specified in\nIETF\u00a0RFC\u00a05448\u00a0[40].\n\nIf a USIM is not present, the UE shall send an EAP-response/AKA'-client-\nerror message as specified in IETF\u00a0RFC\u00a05448\u00a0[37].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network successfully authenticates UE", "numbering": "5.4.1.2.2.5", "title_level": 5, "desc": "5.4.1.2.2.5 Network successfully authenticates UE\n\nUpon reception of the EAP-response/AKA'-challenge message, if procedures\nfor handling an EAP-response/AKA'-challenge message as specified in\nIETF\u00a0RFC\u00a05448\u00a0[40] are successful, the AUSF may generate KAUSF and shall\ngenerate KSEAF as described in 3GPP\u00a0TS\u00a033.501\u00a0[24] and checks whether the\nAT_RESULT_IND attribute is included in the EAP-response/AKA'-challenge\nmessage and:\n\na) if the AT_RESULT_IND attribute is included in the EAP-response/AKA'-\nchallenge message, the AUSF shall send an EAP-request/AKA'-notification\nmessage as specified in IETF\u00a0RFC\u00a05448\u00a0[40]; and\n\nb) if the AT_RESULT_IND attribute is not included in the EAP-response/AKA'-\nchallenge message, the AUSF shall send an EAP-success message as specified\nin IETF\u00a0RFC\u00a05448\u00a0[40] along with the KSEAF and shall consider the procedure\ncomplete.\n\nNOTE:  SEAF generates KAMF based on the received KSEAF immediately\nfollowing the primary authentication and key agreement procedure and\nprovides KAMF to AMF.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE handling EAP-AKA' notification", "numbering": "5.4.1.2.2.6", "title_level": 5, "desc": "5.4.1.2.2.6 UE handling EAP-AKA' notification\n\nUpon receiving an EAP-request/AKA'-notification message, the UE shall send\nan EAP-response/AKA'-notification message as specified in\nIETF\u00a0RFC\u00a05448\u00a0[37].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network sending EAP-success message", "numbering": "5.4.1.2.2.7", "title_level": 5, "desc": "5.4.1.2.2.7 Network sending EAP-success message\n\nUpon reception of the EAP-response/AKA'-notification message, if earlier\nprocedures for handling an EAP-request/AKA'-challenge message as specified\nin IETF\u00a0RFC\u00a05448\u00a0[40] were successful, the AUSF shall send an EAP-success\nmessage as specified in IETF\u00a0RFC\u00a05448\u00a0[40] along with the KSEA and shall\nconsider the procedure complete.\n\nNOTE:  SEAF generates KAMF based on the received KSEAF immediately\nfollowing the primary authentication and key agreement procedure and\nprovides KAMF to AMF.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE handling EAP-success message", "numbering": "5.4.1.2.2.8", "title_level": 5, "desc": "5.4.1.2.2.8 UE handling EAP-success message\n\nUpon receiving an EAP-success message, the UE shall consider the procedure\ncomplete.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network not successfully authenticates UE", "numbering": "5.4.1.2.2.9", "title_level": 5, "desc": "5.4.1.2.2.9 Network not successfully authenticates UE\n\nUpon reception of the EAP-response/AKA'-challenge message, if procedures\nfor handling an EAP-response/AKA'-challenge message as specified in\nIETF\u00a0RFC\u00a05448\u00a0[40] are not successful, the AUSF shall send an EAP-\nrequest/AKA'-notification message that implies failure as specified in\nIETF\u00a0RFC\u00a05448\u00a0[40].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network sending EAP-failure message", "numbering": "5.4.1.2.2.10", "title_level": 5, "desc": "5.4.1.2.2.10  Network sending EAP-failure message\n\nUpon reception of the EAP-response/AKA'-notification message, if earlier\nprocedures for handling an EAP-request/AKA'-challenge message as specified\nin IETF\u00a0RFC\u00a05448\u00a0[40] were not successful, the AUSF shall send an EAP-\nfailure message as specified in IETF\u00a0RFC\u00a05448\u00a0[40] and shall consider the\nprocedure complete.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE handling EAP-success", "numbering": "5.4.1.2.2.11", "title_level": 5, "desc": "5.4.1.2.2.11  UE handling EAP-success\n\nUpon receiving an EAP-failure message, the UE shall consider the procedure\ncomplete.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP-TLS related procedures", "numbering": "5.4.1.2.3", "title_level": 4, "desc": "5.4.1.2.3   EAP-TLS related procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.2.3.1", "title_level": 5, "desc": "5.4.1.2.3.1 General\n\nThe UE may support acting as EAP-TLS peer as specified in\n3GPP\u00a0TS\u00a033.501\u00a0[24]. The AUSF may support acting as EAP-TLS server as\nspecified in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nThe EAP-TLS enables mutual authentication of the UE and the network.\n\nWhen EAP-TLS is used, upon generation of EMSK, the UE shall generate KAUSF,\nKSEAF, and KAMF as described in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message reliable transport procedure", "numbering": "5.4.1.2.4", "title_level": 4, "desc": "5.4.1.2.4   EAP message reliable transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.2.4.1", "title_level": 5, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message reliable transport procedure initiation by", "numbering": "5.4.1.2.4.2", "title_level": 5, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message reliable transport procedure accepted by the", "numbering": "5.4.1.2.4.3", "title_level": 5, "desc": "5.4.1.2.4.1 General\n\nThe purpose of the EAP message reliable transport procedure is to provide a\nreliable transport of an EAP-request message from the network to the UE and\nof an EAP-response message from the UE to the network.\n\nThe EAP message reliable transport procedure is initiated by an\nAUTHENTICATION REQUEST message with the EAP message IE.\n\n\n5.4.1.2.4.2 EAP message reliable transport procedure initiation by the\nnetwork\n\nIn order to initiate the EAP message reliable transport procedure, the AMF\nshall create an AUTHENTICATION REQUEST message.\n\nThe AMF shall set the EAP message IE of the AUTHENTICATION REQUEST message\nto the EAP-request message to be sent to the UE.\n\nThe AMF shall send the AUTHENTICATION REQUEST message to the UE, and the\nAMF shall start timer T3560 (see example in figure\u00a05.4.1.2.4.2.1).\n\n[pic]\n\nFigure\u00a05.4.1.2.4.2.1: EAP message reliable transport procedure\n\nUpon receipt of an AUTHENTICATION REQUEST message with the EAP message IE,\nthe UE handles the EAP message received in the EAP message IE of the\nAUTHENTICATION REQUEST message.\n\n\n5.4.1.2.4.3 EAP message reliable transport procedure accepted by the UE\n\nThe UE shall create an AUTHENTICATION RESPONSE message.\n\nIf the received EAP message is an EAP-request message, the UE shall set the\nEAP message IE of the AUTHENTICATION RESPONSE message to the EAP-response\nmessage responding to the received EAP-request message.\n\nThe UE shall send the AUTHENTICATION RESPONSE message to the AMF.\n\nUpon receipt of an AUTHENTICATION RESPONSE message, the AMF shall stop\ntimer T3560. If the EAP message IE is included in the AUTHENTICATION\nRESPONSE message, the AMF handles the EAP message received in the EAP\nmessage IE of the AUTHENTICATION RESPONSE message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.4.1.2.4.4", "title_level": 5, "desc": "5.4.1.2.4.4 Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3560.\n\n   The AMF shall, on the first expiry of the timer T3560, retransmit the\nAUTHENTICATION REQUEST message and shall reset and start timer T3560. This\nretransmission is repeated four times, i.e. on the fifth expiry of timer\nT3560, the AMF shall abort the EAP based primary authentication and key\nagreement procedure and any ongoing 5GMM specific procedure, and release\nthe N1 NAS signalling connection.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.4.1.2.4.5", "title_level": 5, "desc": "5.4.1.2.4.5 Abnormal cases in the UE\n\nEditor's note:  Abnormal cases are FFS\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP result message transport procedure", "numbering": "5.4.1.2.5", "title_level": 4, "desc": "5.4.1.2.5   EAP result message transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.2.5.1", "title_level": 5, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP result message transport procedure initiation by", "numbering": "5.4.1.2.5.2", "title_level": 5, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5G AKA based primary authentication and key agreement", "numbering": "5.4.1.3", "title_level": 3, "desc": "5.4.1.2.5.1 General\n\nThe purpose of the EAP result message transport procedure is to provide an\nEAP-success message or an EAP-failure message from the network to the UE,\nwhen the EAP message cannot be piggybacked by another NAS message.\n\nThe EAP result message transport procedure is initiated by an\nAUTHENTICATION RESULT message with the EAP message IE.\n\n\n5.4.1.2.5.2 EAP result message transport procedure initiation by the\nnetwork\n\nIn order to initiate the EAP result message transport procedure, the AMF\nshall create an AUTHENTICATION RESULT message.\n\nThe AMF shall set the EAP message IE of the AUTHENTICATION RESULT message\nto an EAP-success message or an EAP-failure message to be sent to the UE.\n\nThe AMF shall send the AUTHENTICATION RESULT message to the UE (see example\nin figure\u00a05.4.1.2.5.2.1).\n\n[pic]\n\nFigure\u00a05.4.1.2.5.2.1: EAP result message transport procedure\n\nUpon receipt of an AUTHENTICATION RESULT message with the EAP message IE,\nthe UE handles the EAP message received in the EAP message IE of the\nAUTHENTICATION RESULT message.\n\n\n5.4.1.3  5G AKA based primary authentication and key agreement procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.1.3.1", "title_level": 4, "desc": "5.4.1.3.1   General\n\nThe purpose of the 5G AKA based primary authentication and key agreement\nprocedure is to provide mutual authentication between the UE and the\nnetwork and to agree on a key KAMF (see 3GPP\u00a0TS\u00a033.501\u00a0[24]). The cases\nwhen the 5G AKA based primary authentication and key agreement procedure is\nused are defined in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nThe 5G AKA based primary authentication and key agreement procedure is\nalways initiated and controlled by the network. However, the UE can reject\nthe 5G authentication challenge sent by the network.\n\nThe UE shall proceed with a 5G authentication challenge only if a USIM is\npresent.\n\nA partial native 5G NAS security context is established in the UE and the\nnetwork when a 5G authentication is successfully performed. During a\nsuccessful 5G AKA based primary authentication and key agreement procedure,\nthe CK and IK are computed by the USIM. CK and IK are then used by the ME\nas key material to compute a new key, KAMF. KAMF is stored in the 5G NAS\nsecurity contexts (see 3GPP\u00a0TS\u00a033.501\u00a0[24]) of both the network and in the\nvolatile memory of the ME while registered to the network, and is the root\nfor the 5GS integrity protection and ciphering key hierarchy.\n\nThe 5G AKA based primary authentication and key agreement procedure is\ninitiated by an AUTHENTICATION REQUEST message without the EAP message IE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication initiation by the network", "numbering": "5.4.1.3.2", "title_level": 4, "desc": "5.4.1.3.2   Authentication initiation by the network\n\nThe network may initiate a 5G AKA based primary authentication and key\nagreement procedure for a UE in 5GMM-CONNECTED mode at any time. For\nrestrictions applicable after handover or inter-system change to N1 mode in\n5GMM-CONNECTED mode, see subclause\u00a05.4.1.2.3.\n\nThe network initiates the 5G AKA based primary authentication and key\nagreement procedure by sending an AUTHENTICATION REQUEST message to the UE\nand starting the timer T3560 (see example in figure\u00a05.4.1.3.2.1). The\nAUTHENTICATION REQUEST message contains the parameters necessary to\ncalculate the authentication response (see 3GPP\u00a0TS\u00a033.501\u00a0[24]).\n\nIf an ngKSI is contained in an initial NAS message during a 5GMM procedure,\nthe network shall include a different ngKSI value in the AUTHENTICATION\nREQUEST message when it initiates a 5G AKA based primary authentication and\nkey agreement procedure.\n\n[pic]\n\nFigure\u00a05.4.1.3.2.1: 5G AKA based primary authentication and key agreement\nprocedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication response by the UE", "numbering": "5.4.1.3.3", "title_level": 4, "desc": "5.4.1.3.3   Authentication response by the UE\n\nThe UE shall respond to an AUTHENTICATION REQUEST message. With the\nexception of the cases described in subclause\u00a05.4.1.3.5, the UE shall\nprocess the 5G authentication challenge data and respond with an\nAUTHENTICATION RESPONSE message to the network.\n\nUpon a successful 5G authentication challenge, the UE shall determine the\nPLMN identity to be used for the calculation of the new KAMF from the 5G\nauthentication challenge data according to the following rules:\n\na) When the UE moves from 5GMM-IDLE mode to 5GMM-CONNECTED mode, until the\nfirst handover, the UE shall use the PLMN identity of the selected PLMN;\nand\n\nb) After handover or inter-system change to N1 mode in 5GMM-CONNECTED mode,\n\n1) if the target cell is not a shared network cell, the UE shall use the\nPLMN identity received as part of the broadcast system information;\n\n2) if the target cell is a shared network cell and the UE has a valid 5G-\nGUTI, the UE shall use the PLMN identity that is part of the 5G-GUTI; and\n\n3) if the target cell is a shared network cell and the UE has a valid 4G-\nGUTI and TAI, but not a valid 5G-GUTI, the UE shall use the PLMN identity\nthat is part of the TAI.\n\nEditor's note:  Security context coordination between EPS and 5GS is FFS.\n\nUpon a successful 5G authentication challenge, the new KAMF calculated from\nthe 5G authentication challenge data shall be stored in a new 5G NAS\nsecurity context in the volatile memory of the ME.\n\nThe USIM will compute the authentication response (RES) using the 5G\nauthentication challenge data received from the ME, and pass RES to the ME.\nFrom the RES, RES* is then generated according to Annex A of\n3GPP\u00a0TS\u00a033.501\u00a0[24].\n\nIn order to avoid a synchronisation failure, when the UE receives an\nAUTHENTICATION REQUEST message, the UE shall store the received RAND\ntogether with the RES*, in the volatile memory of the ME. When the UE\nreceives a subsequent AUTHENTICATION REQUEST message, if the stored RAND\nvalue is equal to the new received value in the AUTHENTICATION REQUEST\nmessage, then the ME shall not pass the RAND to the USIM, but shall send\nthe AUTHENTICATION RESPONSE message with the stored RES*. If there is no\nvalid stored RAND in the ME or the stored RAND is different from the new\nreceived value in the AUTHENTICATION REQUEST message, the ME shall pass the\nRAND to the USIM, shall override any previously stored RAND and RES* with\nthe new ones and start, or reset and restart timer T3516.\n\nThe RAND and RES* values stored in the ME shall be deleted and timer T3516,\nif running, shall be stopped:\n\na) upon receipt of a\n\n1) SECURITY MODE COMMAND message,\n\n2) SERVICE REJECT message,\n\n3) REGISTRATION REJECT message,\n\n4) REGISTRATION ACCEPT message, or\n\n5) AUTHENTICATION REJECT message;\n\nb) upon expiry of timer T3516;\n\n1) if the UE enters the 5GMM state 5GMM-DEREGISTERED or 5GMM-NULL; or\n\n2) if the UE enters 5GMM-IDLE mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication completion by the network", "numbering": "5.4.1.3.4", "title_level": 4, "desc": "5.4.1.3.4   Authentication completion by the network\n\nUpon receipt of an AUTHENTICATION RESPONSE message, the network stops the\ntimer T3560 and checks the correctness of RES* (see 3GPP\u00a0TS\u00a033.501\u00a0[24]).\n\nIf the 5G AKA based primary authentication and key agreement procedure has\nbeen completed successfully and the related ngKSI is stored in the 5G NAS\nsecurity context of the network, the network shall include a different\nngKSI value in the AUTHENTICATION REQUEST message when it initiates a new\n5G AKA based primary authentication and key agreement procedure.\n\nUpon receipt of an AUTHENTICATION FAILURE message, the network stops the\ntimer T3560. In the case where the 5GMM cause #21 \"synch failure\" is\nreceived, the core network may renegotiate with the UDM/AUSF and provide\nthe UE with new authentication parameters.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication not accepted by the network", "numbering": "5.4.1.3.5", "title_level": 4, "desc": "5.4.1.3.5   Authentication not accepted by the network\n\nEditor's note:  Authentication not accepted for normal services by the\nnetwork is FFS.\n\nDepending on local requirements or operator preference for emergency\nservices, if the UE initiates a registration procedure with 5GS\nregistration type IE set to \"emergency registration\" and the AMF is\nconfigured to allow emergency registration without user identity, the AMF\nneeds not follow the procedures specified for the authentication failure in\nthe present subclause. The AMF may continue a current 5GMM specific\nprocedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication not accepted by the UE", "numbering": "5.4.1.3.6", "title_level": 4, "desc": "5.4.1.3.6   Authentication not accepted by the UE\n\nIn the 5G authentication challenge, the UE shall check the 5G\nauthentication challenge data (RAND, AUTN and ngKSI) received in the\nAUTHENTICATION REQUEST message to verify authenticity of the 5G core\nnetwork.\n\nThe ME shall check that ngKSI received in the AUTHENTICATION REQUEST\nmessage is not already in use. The ME shall forward the RAND and AUTN to\nthe USIM to check.\n\nThe UE may reject the core network due to an incorrect, AUTN or ngKSI\nparameter. If the UE has to reject the 5G authentication challenge, the UE\nshall return AUTHENTICATION FAILURE message to the network with a cause\nvalue indicating the reason for the failure (see 3GPP\u00a0TS\u00a033.501\u00a0[24]).\n\nIncorrect 5G authentication challenge data contains four possible causes\nfor authentication failure:\n\na) MAC code failure:\n\n   If the UE finds the MAC code (supplied by the core network in the AUTN\nparameter) to be invalid, the UE shall send an AUTHENTICATION FAILURE\nmessage to the network, with the 5GMM cause #20 \"MAC failure\". The UE shall\nthen follow the procedure described in subclause\u00a05.4.1.3.7, item c.\n\nb) Non-5G authentication unacceptable:\n\n   If the UE finds that the \"separation bit\" in the AMF field of AUTN\nsupplied by the core network is set to 0, the UE shall send an\nAUTHENTICATION FAILURE message to the network, with the 5GMM cause #26 \"non-\n5G authentication unacceptable\" (see subclause\u00a06.1.3 in\n3GPP\u00a0TS\u00a033.501\u00a0[24]). The UE shall then follow the procedure described in\nsubclause\u00a05.4.1.3.7, item d.\n\nc)   ngKSI already in use:\n\n   If the UE detects that ngKSI received in the AUTHENTICATION REQUEST\nmessage is already in use in the UE shall send an AUTHENTICATION FAILURE\nmessage to the network, with the 5GMM cause #29 \"ngKSI already in use\". The\nUE shall then follow the procedure described in subclause\u00a05.4.1.3.7, item\ne.\n\nd) SQN failure:\n\n   If the UE finds the sequence number SQN (supplied by the core network in\nthe AUTN parameter) to be out of range, the UE shall send an AUTHENTICATION\nFAILURE message to the network, with the 5GMM cause #21 \"synch failure\" and\na re-synchronization token AUTS provided by the USIM (see\n3GPP\u00a0TS\u00a033.102\u00a0[23]). The UE shall then follow the procedure described in\nsubclause\u00a05.4.1.3.7, item f.\n\nIf the UE returns an AUTHENTICATION FAILURE message to the network, the UE\nshall delete any previously stored RAND and RES and shall stop timer T3516,\nif running.\n\nIf the UE has a PDU session for emergency services established or is\nestablishing such a PDU session, additional UE requirements are specified\nin subclause\u00a05.4.1.3.7, under \"for items c, d, e and f\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases", "numbering": "5.4.1.3.7", "title_level": 4, "desc": "5.4.1.3.7   Abnormal cases\n\na) Lower layer failure.\n\n   Upon detection of lower layer failure before the AUTHENTICATION RESPONSE\nmessage is received, the network shall abort the procedure.\n\nb) Expiry of timer T3560.\n\n   The network shall, on the first expiry of the timer T3560, retransmit\nthe AUTHENTICATION REQUEST message and shall reset and start timer T3560.\nThis retransmission is repeated four times, i.e. on the fifth expiry of\ntimer T3560, the network shall abort the 5G AKA based primary\nauthentication and key agreement procedure and any ongoing 5GMM specific\nprocedure and release the N1 NAS signalling connection.\n\nc) Authentication failure (5GMM cause #20 \"MAC failure\").\n\n   The UE shall send an AUTHENTICATION FAILURE message, with 5GMM cause #20\n\"MAC failure\" according to subclause\u00a05.4.1.3.6, to the network and start\ntimer T3520 (see example in figure\u00a05.4.1.3.7.1). Furthermore, the UE shall\nstop any of the retransmission timers that are running (e.g. T3510, T3517\nor T3521). Upon the first receipt of an AUTHENTICATION FAILURE message from\nthe UE with 5GMM cause #20 \"MAC failure\", the network may initiate the\nidentification procedure described in subclause\u00a05.4.3. This is to allow the\nnetwork to obtain the SUCI from the UE. The network may then check that the\n5G-GUTI originally used in the 5G authentication challenge corresponded to\nthe correct SUPI. Upon receipt of the IDENTITY REQUEST message from the\nnetwork, the UE shall proceed as specified in subclause\u00a05.4.3.3.\n\nNOTE\u00a01:  Upon receipt of an AUTHENTICATION FAILURE message from the UE with\n5GMM cause #20 \"MAC failure\", the network may also terminate the 5G AKA\nbased primary authentication and key agreement procedure (see\nsubclause\u00a05.4.1.3.5).\n\n   If the mapping of 5G-GUTI to SUPI in the network was incorrect, the\nnetwork should respond by sending a new AUTHENTICATION REQUEST message to\nthe UE. Upon receiving the new AUTHENTICATION REQUEST message from the\nnetwork, the UE shall stop the timer T3520, if running, and then process\nthe 5G challenge information as normal. If the mapping of 5G-GUTI to SUPI\nin the network was correct, the network should terminate the 5G AKA based\nprimary authentication and key agreement procedure by sending an\nAUTHENTICATION REJECT message (see subclause\u00a05.4.1.3.5).\n\n   If the network is validated successfully (an AUTHENTICATION REQUEST\nmessage that contains a valid SQN and MAC is received), the UE shall send\nthe AUTHENTICATION RESPONSE message to the network and shall start any\nretransmission timers (e.g. T3510, T3517 or T3521) if they were running and\nstopped when the UE received the first failed AUTHENTICATION REQUEST\nmessage.\n\n   If the UE receives the second AUTHENTICATION REQUEST message while T3520\nis running, and the MAC value cannot be resolved, the UE shall follow the\nprocedure specified in this subclause, item\u00a0c, starting again from the\nbeginning, or if the message contains a UMTS authentication challenge, the\nUE shall follow the procedure specified in item\u00a0d. If the SQN is invalid,\nthe UE shall proceed as specified in item\u00a0f.\n\n[pic]\n\nFigure\u00a05.4.1.3.7.1: Authentication failure during 5G AKA based primary\nauthentication and key agreement procedure\n\nd) Authentication failure (5GMM cause #26 \"non-5G authentication\nunacceptable\").\n\n   The UE shall send an AUTHENTICATION FAILURE message, with 5GMM cause #26\n\"non-5G authentication unacceptable\", to the network and start the timer\nT3520 (see example in figure 5.4.1.3.7.1). Furthermore, the UE shall stop\nany of the retransmission timers that are running (e.g. T3510, T3517 or\nT3521). Upon the first receipt of an AUTHENTICATION FAILURE message from\nthe UE with 5GMM cause #26 \"non-5G authentication unacceptable\", the\nnetwork may initiate the identification procedure described in\nsubclause\u00a05.4.3. This is to allow the network to obtain the SUCI from the\nUE. The network may then check that the 5G-GUTI originally used in the 5G\nauthentication challenge corresponded to the correct SUPI. Upon receipt of\nthe IDENTITY REQUEST message from the network, the UE shall proceed as\nspecified in subclause\u00a05.4.3.3.\n\nNOTE\u00a02:  Upon receipt of an AUTHENTICATION FAILURE message from the UE with\n5GMM cause #26 \"non-5G authentication unacceptable\", the network may also\nterminate the 5G AKA based primary authentication and key agreement\nprocedure (see subclause\u00a05.4.1.3.5).\n\n   If the mapping of 5G-GUTI to SUPI in the network was incorrect, the\nnetwork should respond by sending a new AUTHENTICATION REQUEST message to\nthe UE. Upon receiving the new AUTHENTICATION REQUEST message from the\nnetwork, the UE shall stop the timer T3520, if running, and then process\nthe 5G challenge information as normal. If the mapping of 5G-GUTI to SUPI\nin the network was correct, the network should terminate the 5G AKA based\nprimary authentication and key agreement authentication procedure by\nsending an AUTHENTICATION REJECT message (see subclause\u00a05.4.1.3.5).\n\ne) Authentication failure (5GMM cause #29 \"ngKSI already in use\").\n\n   The UE shall send an AUTHENTICATION FAILURE message, with 5GMM cause #29\n\"ngKSI already in use\", to the network and start the timer T3520 (see\nexample in figure 5.4.1.3.7.1). Furthermore, the UE shall stop any of the\nretransmission timers that are running (e.g. T3510, T3517 or T3521). Upon\nthe first receipt of an AUTHENTICATION FAILURE message from the UE with\n5GMM cause #29 \"ngKSI already in use\", the network performs necessary\nactions to select a new ngKSI and send the same 5G authentication challenge\nto the UE.\n\nNOTE\u00a03:  Upon receipt of an AUTHENTICATION FAILURE message from the UE with\n5GMM cause #29 \"ngKSI already in use\", the network may also re-initiate the\n5G AKA based primary authentication and key agreement procedure (see\nsubclause\u00a05.4.1.3.2).\n\n   Upon receiving the new AUTHENTICATION REQUEST message from the network,\nthe UE shall stop the timer T3520, if running, and then process the 5G\nchallenge information as normal.\n\nf) Authentication failure (5GMM cause #21 \"synch failure\").\n\n   The UE shall send an AUTHENTICATION FAILURE message, with 5GMM cause #21\n\"synch failure\", to the network and start the timer T3520 (see example in\nfigure\u00a05.4.1.3.7.1). Furthermore, the UE shall stop any of the\nretransmission timers that are running (e.g. T3510, T3517 or T3521). Upon\nthe first receipt of an AUTHENTICATION FAILURE message from the UE with the\n5GMM cause #21 \"synch failure\", the network shall use the returned AUTS\nparameter from the authentication failure parameter IE in the\nAUTHENTICATION FAILURE message, to re-synchronise. The re-synchronisation\nprocedure requires the AMF to delete all unused authentication vectors for\nthat SUPI and obtain new vectors from the UDM/AUSF. When re-synchronisation\nis complete, the network shall initiate the 5G AKA based primary\nauthentication and key agreement procedure. Upon receipt of the\nAUTHENTICATION REQUEST message, the UE shall stop the timer T3520, if\nrunning.\n\nNOTE\u00a04:  Upon receipt of two consecutive AUTHENTICATION FAILURE messages\nfrom the UE with 5GMM cause #21 \"synch failure\", the network may terminate\nthe 5G AKA based primary authentication and key agreement procedure by\nsending an AUTHENTICATION REJECT message.\n\n   If the network is validated successfully (a new AUTHENTICATION REQUEST\nmessage is received which contains a valid SQN and MAC) while T3520 is\nrunning, the UE shall send the AUTHENTICATION RESPONSE message to the\nnetwork and shall start any retransmission timers (e.g. T3510, T3517 or\nT3521), if they were running and stopped when the UE received the first\nfailed AUTHENTICATION REQUEST message.\n\n   Upon receipt of an AUTHENTICATION REJECT message, the UE shall perform\nthe actions as specified in subclause\u00a05.4.1.3.5.\n\ng) Network failing the authentication check.\n\n   If the UE deems that the network has failed the authentication check,\nthen it shall request RRC to locally release the RRC connection and treat\nthe active cell as barred (see 3GPP\u00a0TS\u00a038.304\u00a0[28]). The UE shall start any\nretransmission timers (e.g. T3510, T3517 or T3521), if they were running\nand stopped when the UE received the first AUTHENTICATION REQUEST message\ncontaining an invalid MAC or SQN or if the new ngKSI was already in use.\n\nEditor's note:  It is FFS if the RRC will provide the barring service.\n\nh) Transmission failure of AUTHENTICATION RESPONSE message or\nAUTHENTICATION FAILURE message indication from lower layers (if the 5G AKA\nbased primary authentication and key agreement procedure is triggered by a\nregistration procedure for mobility and periodic registration update).\n\n   The UE shall stop the timer T3520, if running, and re-initiate the\nregistration procedure for mobility and periodic registration update.\n\ni) Transmission failure of AUTHENTICATION RESPONSE message or\nAUTHENTICATION FAILURE message indication with TAI change from lower layers\n(if the 5G AKA based primary authentication and key agreement procedure is\ntriggered by a service request procedure).\n\n   The UE shall stop the timer T3520, if running.\n\n   If the current TAI is not in the TAI list, the 5G AKA based primary\nauthentication and key agreement procedure shall be aborted and a\nregistration procedure for mobility and periodic registration update shall\nbe initiated.\n\n   If the current TAI is still part of the TAI list, it is up to the UE\nimplementation how to re-run the ongoing procedure that triggered the 5G\nAKA based primary authentication and key agreement procedure.\n\nj) Transmission failure of AUTHENTICATION RESPONSE message or\nAUTHENTICATION FAILURE message indication without TAI change from lower\nlayers (if the authentication procedure is triggered by a service request\nprocedure).\n\n   The UE shall stop the timer T3520, if running. It is up to the UE\nimplementation how to re-run the ongoing procedure that triggered the 5G\nAKA based primary authentication and key agreement procedure.\n\nk) Lower layers indication of non-delivered NAS PDU due to handover.\n\n   If the AUTHENTICATION REQUEST message could not be delivered due to an\nintra AMF handover and the target TA is included in the TAI list, then upon\nsuccessful completion of the intra AMF handover the AMF shall retransmit\nthe AUTHENTICATION REQUEST message. If a failure of handover procedure is\nreported by the lower layer and the N1 NAS signalling connection exists,\nthe AMF shall retransmit the AUTHENTICATION REQUEST message.\n\nFor items\u00a0c, d, e, and f whether or not the UE is registered for emergency\nservices:\n\n   The UE shall stop timer T3520, if the timer is running and the UE enters\n5GMM-IDLE mode, e.g. upon detection of a lower layer failure, release of\nthe N1 NAS signalling connection, or as the result of an inter-system\nchanger in 5GMM-CONNECTED mode from N1 mode to S1 mode.\n\n   The UE shall deem that the network has failed the authentication check\nor assume that the authentication is not genuine and proceed as described\nin item\u00a0g above if any of the following occurs:\n\n-  the timer T3520 expires;\n\n-  the UE detects any combination of the 5G authentication failures: 5GMM\ncauses #20 \"MAC failure\", #21 \"synch failure\", #26 \"non-5G authentication\nunacceptable\" or #29 \u201cngKSI already in use\u201d, during three consecutive\nauthentication challenges. The 5G authentication challenges shall be\nconsidered as consecutive only, if the 5G authentication challenges causing\nthe second and third 5G authentication failure are received by the UE,\nwhile the timer T3520 started after the previous 5G authentication failure\nis running.\n\nFor items\u00a0c, d, e, and f:\n\n   Depending on local requirements or operator preference for emergency\nservices, if the UE has a PDU session for emergency services established or\nis establishing a PDU session for emergency services, the AMF need not\nfollow the procedures specified for the authentication failure specified in\nthe present subclause. The AMF may respond to the AUTHENTICATION FAILURE\nmessage by initiating the security mode control procedure selecting the\n\"null integrity protection algorithm\" 5G-IA0, null ciphering algorithm 5G-\nEA0 or may abort the 5G AKA based primary authentication and key agreement\nprocedure and continue using the current security context, if any. The AMF\nshall release all non-emergency PDU sessions, if any, by initiating a PDU\nsession release procedure. If there is an ongoing PDU session establishment\nprocedure, the AMF shall release all non-emergency PDU sessions upon\ncompletion of the PDU session establishment procedure. The network shall\nconsider the UE to be registered for emergency services.\n\n   If a UE has a PDU session for emergency services established or is\nestablishing a PDU session for emergency services and sends an\nAUTHENTICATION FAILURE message to the AMF with the 5GMM cause appropriate\nfor these cases (#20, #21, #26, or #29 respectively) and receives the\nSECURITY MODE COMMAND message before the timeout of timer T3520, the UE\nshall deem that the network has passed the authentication check\nsuccessfully, stop timer T3520, respectively, and execute the security mode\ncontrol procedure.\n\n   If a UE has a PDU session for emergency services established or is\nestablishing a PDU session for emergency services when timer T3520 expires,\nthe UE shall not deem that the network has failed the authentication check\nand not behave as described in item g. Instead the UE shall continue using\nthe current security context, if any, release all non-emergency PDU\nsessions, if any, by initiating UE-requested PDU session release procedure.\nIf there is an ongoing PDU session establishment procedure, the UE shall\nrelease all non-emergency PDU sessions upon completion of the PDU session\nestablishment procedure. The UE shall start any retransmission timers (e.g.\nT3510, T3517 or T3521) if:\n\n-  they were running and stopped when the UE received the AUTHENTICATION\nREQUEST message and detected an authentication failure;\n\n-  the procedures associated with these timers have not yet been completed.\n\nThe UE shall consider itself to be registered for emergency services.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Security mode control procedure", "numbering": "5.4.2", "title_level": 2, "desc": "5.4.2  Security mode control procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.2.1", "title_level": 3, "desc": "5.4.2.1  General\n\nThe purpose of the NAS security mode control procedure is to take a 5G NAS\nsecurity context into use, and initialise and start NAS signalling security\nbetween the UE and the AMF with the corresponding 5G NAS keys and 5G NAS\nsecurity algorithms.\n\nFurthermore, the network may also initiate the security mode control\nprocedure in the following cases:\n\na)-  in order to change the 5G NAS security algorithms for a current 5G NAS\nsecurity context already in use; and\n\nb) in order to change the value of uplink NAS COUNT used in the latest\nSECURITY MODE COMPLETE message as described in\n3GPP\u00a0TS\u00a033.501\u00a0[24],\u00a0subclause\u00a06.9.4.4.\n\nFor restrictions concerning the concurrent running of a security mode\ncontrol procedure with other security related procedures in the AS or\ninside the core network see 3GPP\u00a0TS\u00a033.501\u00a0[24], subclause\u00a06.9.5.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS security mode control initiation by the network", "numbering": "5.4.2.2", "title_level": 3, "desc": "5.4.2.2  NAS security mode control initiation by the network\n\nThe AMF initiates the NAS security mode control procedure by sending a\nSECURITY MODE COMMAND message to the UE and starting timer T3560 (see\nexample in figure\u00a05.4.2.2).\n\nThe AMF shall reset the downlink NAS COUNT counter and use it to integrity\nprotect the initial SECURITY MODE COMMAND message if the security mode\ncontrol procedure is initiated:\n\na) to take into use the security context created after a successful\nexecution of the 5G AKA based primary authentication and key agreement\nprocedure or the EAP based primary authentication and key agreement\nprocedure; or\n\nb) upon receipt of REGISTRATION REQUEST message, if the AMF wants to create\na mapped 5G NAS security context (i.e. the type of security context flag is\nset to \"mapped security context\" in the NAS key set identifier IE included\nin the SECURITY MODE COMMAND message).\n\nThe AMF shall send the SECURITY MODE COMMAND message unciphered, but shall\nintegrity protect the message with the 5G NAS integrity key based on KAMF\nor mapped K'AMF indicated by the ngKSI included in the message. The AMF\nshall set the security header type of the message to \"integrity protected\nwith new 5G NAS security context\".\n\nEditor's note:  Handling at emergency registration and emergency PDU\nsessions is FFS.\n\nUpon receipt of a REGISTRATION REQUEST message, if the AMF does not have\nthe valid current 5G NAS security context indicated by the UE, the AMF\nshall indicate the use of the new mapped 5G NAS security context to the UE\nby setting the type of security context flag in the NAS key set identifier\nIE to \"mapped security context\" and the KSI value related to the security\ncontext of the source system.\n\nEditor's note:  Handling at non-existing 5G NAS security context indicated\nby the UE when an emergency PDU session exists is FFS.\n\nWhile having a current mapped 5G NAS security context with the UE, if the\nAMF wants to take the native 5G NAS security context into use, the AMF\nshall include the ngKSI that indicates the native 5G NAS security context\nin the SECURITY MODE COMMAND message.\n\nThe AMF shall include the replayed security capabilities of the UE\n(including the security capabilities with regard to NAS, RRC and UP (user\nplane) ciphering as well as NAS and RRC integrity, and other possible\ntarget network security capabilities, i.e. E-UTRAN if the UE included them\nin the message to network) and if the UE included it in the message to the\nnetwork, the selected 5GS ciphering and integrity algorithms and the ngKSI.\n\nIf the UE is connected to the same AMF and the same PLMN through both 3GPP\naccess and non 3GPP access, then after the UE performs the authentication\nprocedure over:\n\na) the 3GPP access, the AMF may include the ngKSI in the SECURITY MODE\nCOMMAND message identifying the 5GS NAS security context currently used\nover the non-3GPP access; and\n\nb) the non 3GPP access, the AMF may include the ngKSI in the SECURITY MODE\nCOMMAND message identifying the 5GS NAS security context currently used\nover the 3GPP access.\n\nThe AMF may initiate a SECURITY MODE COMMAND in order to change the 5G\nsecurity algorithms for a current 5G NAS security context already in use.\nThe AMF re-derives the 5G NAS keys from KAMF with the new 5G algorithm\nidentities as input and provides the new 5GS algorithm identities within\nthe SECURITY MODE COMMAND message. The AMF shall set the security header\ntype of the message to \"integrity protected with new 5G NAS security\ncontext\".\n\nIf, during an ongoing registration procedure, the AMF is initiating a\nSECURITY MODE COMMAND (i.e. after receiving the REGISTRATION REQUEST\nmessage, but before sending a response to that message) and the\nREGISTRATION REQUEST message does not successfully pass the integrity check\nat the AMF, the AMF shall calculate the HASHAMF of the entire plain\nREGISTRATION REQUEST message as described in 3GPP\u00a0TS\u00a033.501\u00a0[24] and shall\ninclude the HASHAMF in the SECURITY MODE COMMAND message.\n\nAdditionally, the AMF may request the UE to include its IMEISV in the\nSECURITY MODE COMPLETE message.\n\nIf the AMF does not support interworking procedures without N26 interface\nand the UE set the S1 mode bit to \"S1 mode supported\" in the 5GMM\ncapability IE of the REGISTRATION REQUEST message, the AMF shall select\nciphering and integrity algorithms to be used in the EPS and indicate them\nto the UE via the Selected EPS NAS security algorithms IE in the SECURITY\nMODE COMMAND message.\n\nNOTE\u00a02:  The AS and NAS security capabilities will be the same, i.e. if the\nUE supports one algorithm for NAS, the same algorithm is also supported for\nAS.\n\n[pic]\n\nFigure\u00a05.4.2.2: Security mode control procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS security mode command accepted by the UE", "numbering": "5.4.2.3", "title_level": 3, "desc": "5.4.2.3  NAS security mode command accepted by the UE\n\nUpon receipt of the SECURITY MODE COMMAND message, the UE shall check\nwhether the security mode command can be accepted or not. This is done by\nperforming the integrity check of the message and by checking that the\nreceived replayed UE security capabilities have not been altered compared\nto the latest values that the UE sent to the network.\n\nEditor's note:  Handling at emergency PDU sessions is FFS.\n\nEditor's note:  Handling of \"null algorithms\" is FFS.\n\nIf the type of security context flag included in the SECURITY MODE COMMAND\nmessage is set to \"native security context\" and if the KSI matches a valid\nnon-current native 5G NAS security context held in the UE while the UE has\na mapped 5G NAS security context as the current 5G NAS security context,\nthe UE shall take the non-current native 5G NAS security context into use\nwhich then becomes the current native 5G NAS security context and delete\nthe mapped 5G NAS security context.\n\nIf the SECURITY MODE COMMAND message can be accepted, the UE shall take the\n5G NAS security context indicated in the message into use. The UE shall in\naddition reset the uplink NAS COUNT counter if:\n\na) the SECURITY MODE COMMAND message is received in order to take a 5G NAS\nsecurity context into use created after a successful execution of the 5G\nAKA based primary authentication and key agreement procedure or the EAP\nbased primary authentication and key agreement procedure; or\n\nb) the SECURITY MODE COMMAND message received includes the type of security\ncontext flag set to \"mapped security context\" in the NAS key set identifier\nIE the ngKSI does not match the current 5G NAS security context, if it is a\nmapped 5G NAS security context.\n\nIf the SECURITY MODE COMMAND message can be accepted and a new 5G NAS\nsecurity context is taken into use and SECURITY MODE COMMAND message does\nnot indicate the \"null integrity protection algorithm\"5G-IA0 as the\nselected NAS integrity algorithm, the UE shall:\n\n-  if the SECURITY MODE COMMAND message has been successfully integrity\nchecked using an estimated downlink NAS COUNT equal to 0, then the UE shall\nset the downlink NAS COUNT of this new 5G NAS security context to 0;\n\n-  otherwise the UE shall set the downlink NAS COUNT of this new 5G NAS\nsecurity context to the downlink NAS COUNT that has been used for the\nsuccessful integrity checking of the SECURITY MODE COMMAND message.\n\nIf the SECURITY MODE COMMAND message can be accepted, the UE shall send a\nSECURITY MODE COMPLETE message integrity protected with the selected 5GS\nintegrity algorithm and the 5G NAS integrity key based on the KAMF or\nmapped K'AMF if the type of security context flag is set to \"mapped\nsecurity context\" indicated by the ngKSI. When the SECURITY MODE COMMAND\nmessage includes the type of security context flag set to \"mapped security\ncontext\" in the NAS key set identifier IE, then the UE shall check whether\nthe SECURITY MODE COMMAND message indicates the ngKSI of the current 5GS\nsecurity context, if it is a mapped 5G NAS security context, in order not\nto re-generate the K'AMF.\n\nFurthermore, if the SECURITY MODE COMMAND message can be accepted, the UE\nshall cipher the SECURITY MODE COMPLETE message with the selected 5GS\nciphering algorithm and the 5GS NAS ciphering key based on the KAMF or\nmapped K'AMF indicated by the ngKSI. The UE shall set the security header\ntype of the message to \"integrity protected and ciphered with new 5G NAS\nsecurity context\".\n\nFrom this time onward the UE shall cipher and integrity protect all NAS\nsignalling messages with the selected 5GS integrity and ciphering\nalgorithms.\n\nIf the AMF indicated in the SECURITY MODE COMMAND message that the IMEISV\nis requested, the UE shall include its IMEISV in the SECURITY MODE COMPLETE\nmessage.\n\nIf, during an ongoing registration procedure, the SECURITY MODE COMMAND\nmessage includes a HASHAMF, the UE shall compare HASHAMF with a hash value\nlocally calculated as described in 3GPP\u00a0TS\u00a033.501\u00a0[24] from the entire\nplain REGISTRATION REQUEST message that the UE had sent to initiate the\nprocedure. If HASHAMF and the locally calculated hash value are different,\nthe UE shall include the complete REGISTRATION REQUEST message which the UE\nhad previously sent in the Replayed NAS message container IE of the\nSECURITY MODE COMPLETE message.\n\nIf, prior to receiving the SECURITY MODE COMMAND message, the UE had sent\nan initial NAS message containing a limited set of IEs needed to establish\nsecurity context, the UE shall include the complete initial message in the\nNAS SECURITY MODE COMPLETE message.\n\nIf the UE operating in the single-registration mode receives the Selected\nEPS NAS security algorithms IE, the UE shall use the IE according to\n3GPP\u00a0TS\u00a033.501\u00a0[24].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS security mode control completion by the network", "numbering": "5.4.2.4", "title_level": 3, "desc": "5.4.2.4  NAS security mode control completion by the network\n\nThe AMF shall, upon receipt of the SECURITY MODE COMPLETE message, stop\ntimer T3560. From this time onward the AMF shall integrity protect and\nencipher all signalling messages with the selected 5GS integrity and\nciphering algorithms.\n\nIf the SECURITY MODE COMPLETE message contains a Replayed NAS container\nmessage IE with an REGISTRATION REQUEST message, the AMF shall complete the\nongoing registration procedure by considering the REGISTRATION REQUEST\nmessage contained in the Replayed NAS message container IE as the message\nthat triggered the procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS security mode command not accepted by the UE", "numbering": "5.4.2.5", "title_level": 3, "desc": "5.4.2.5  NAS security mode command not accepted by the UE\n\nIf the security mode command cannot be accepted, the UE shall send a\nSECURITY MODE REJECT message. The SECURITY MODE REJECT message contains a\n5GMM cause that typically indicates one of the following cause values:\n\n#23  UE security capabilities mismatch.\n\n#24  security mode rejected, unspecified.\n\nUpon receipt of the SECURITY MODE REJECT message, the AMF shall stop timer\nT3560. The AMF shall also abort the ongoing procedure that triggered the\ninitiation of the NAS security mode control procedure.\n\nBoth the UE and the AMF shall apply the 5G NAS security context in use\nbefore the initiation of the security mode control procedure, if any, to\nprotect the SECURITY MODE REJECT message and any other subsequent messages\naccording to the rules in subclause\u00a04.4.4 and\u00a04.4.5.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.4.2.6", "title_level": 3, "desc": "5.4.2.6  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Transmission failure of SECURITY MODE COMPLETE message or SECURITY MODE\nREJECT message indication from lower layers (if the security mode control\nprocedure is triggered by a registration procedure).\n\n   The UE shall abort the security mode control procedure and re-initiate\nthe registration procedure.\n\nb) Transmission failure of SECURITY MODE COMPLETE message or SECURITY MODE\nREJECT message indication with TAI change from lower layers (if the\nsecurity mode control procedure is triggered by a service request\nprocedure).\n\n   If the current TAI is not in the TAI list, the security mode control\nprocedure shall be aborted and a registration procedure shall be initiated.\n\n   If the current TAI is still part of the TAI list, the security mode\ncontrol procedure shall be aborted and it is up to the UE implementation\nhow to re-run the ongoing procedure that triggered the security mode\ncontrol procedure.\n\nc) Transmission failure of SECURITY MODE COMPLETE message or SECURITY MODE\nREJECT message indication without TAI change from lower layers (if the\nsecurity mode control procedure is triggered by a service request\nprocedure).\n\n   The security mode control procedure shall be aborted and it is up to the\nUE implementation how to re-run the ongoing procedure that triggered the\nsecurity mode control procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.4.2.7", "title_level": 3, "desc": "5.4.2.7  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Lower layer failure before the SECURITY MODE COMPLETE or SECURITY MODE\nREJECT message is received.\n\n   The network shall abort the security mode control procedure.\n\nb) Expiry of timer T3560.\n\n   The network shall, on the first expiry of the timer T3560, retransmit\nthe SECURITY MODE COMMAND message and shall reset and start timer T3560.\nThis retransmission is repeated four times, i.e. on the fifth expiry of\ntimer T3560, the procedure shall be aborted.\n\nc) Collision between security mode control procedure and registration,\nservice request or de-registration procedure not indicating switch off.\n\n   The network shall abort the security mode control procedure and proceed\nwith the UE initiated procedure.\n\nd) Collision between security mode control procedure and other 5GMM\nprocedures than in item\u00a0c.\n\n   The network shall progress both procedures.\n\ne) Lower layers indication of non-delivered NAS PDU due to handover:\n\n   If the SECURITY MODE COMMAND message could not be delivered due to an\nintra AMF handover and the target TA is included in the TAI list, then upon\nsuccessful completion of the intra AMF handover the AMF shall retransmit\nthe SECURITY MODE COMMAND message. If a failure of the handover procedure\nis reported by the lower layer and the N1 signalling connection exists, the\nAMF shall retransmit the SECURITY MODE COMMAND message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Identification procedure", "numbering": "5.4.3", "title_level": 2, "desc": "5.4.3  Identification procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.3.1", "title_level": 3, "desc": "5.4.3.1  General\n\nThe purpose of this procedure is to request a particular UE to provide\nspecific identification parameters, e.g. the SUCI or the IMEI. The SUCI is\na privacy preserving identifier containing the concealed SUPI and IMEI is a\nformat of PEI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Identification initiation by the network", "numbering": "5.4.3.2", "title_level": 3, "desc": "5.4.3.2  Identification initiation by the network\n\nThe AMF initiates the identification procedure by sending an IDENTITY\nREQUEST message to the UE and starting timer T3570 (see example in\nfigure\u00a05.4.3.2.1). The IDENTITY REQUEST message specifies the requested\nidentification parameters in the Identity type information element.\n\n[pic]\n\nFigure\u00a05.4.3.2.1: Identification procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Identification response by the UE", "numbering": "5.4.3.3", "title_level": 3, "desc": "5.4.3.3  Identification response by the UE\n\nA UE shall be ready to respond to an IDENTITY REQUEST message at any time\nwhilst in 5GMM-CONNECTED mode.\n\nUpon receipt of the IDENTITY REQUEST message:\n\na) if the identity type IE in the IDENTITY REQUEST message is not set to\n\"SUCI\", the UE shall send an IDENTITY RESPONSE message to the network. The\nIDENTITY RESPONSE message shall contain the identification parameters as\nrequested by the network; and\n\nb) if the identity type IE in the IDENTITY REQUEST message is set to\n\"SUCI\", the UE shall:\n\n1) if timer T3519 is not running, generate a fresh SUCI as specified in\n3GPP\u00a0TS\u00a033.501\u00a0[24], send an IDENTITY RESPONSE message with the SUCI, start\ntimer T3519 and store the value of the SUCI sent in the IDENTITY RESPONSE\nmessage; and\n\n2) if timer T3519 is running, send an IDENTITY RESPONSE message with the\nstored SUCI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Identification completion by the network", "numbering": "5.4.3.4", "title_level": 3, "desc": "5.4.3.4  Identification completion by the network\n\nUpon receipt of the IDENTITY RESPONSE the network shall stop the timer\nT3570.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.4.3.5", "title_level": 3, "desc": "5.4.3.5  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Transmission failure of the IDENTITY RESPONSE message (if the\nidentification procedure is triggered by a registration procedure).\n\n   The UE shall re-initiate the registration procedure.\n\nb) Requested identity is not available\n\n   If the UE cannot encode the requested identity in the IDENTITY RESPONSE\nmessage, e.g. because no valid USIM is available, then it shall encode the\nidentity type as \"No identity\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.4.3.6", "title_level": 3, "desc": "5.4.3.6  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Lower layer failure.\n\n   Upon detection of a lower layer failure before the IDENTITY RESPONSE is\nreceived, the network shall abort any ongoing 5GMM procedure.\n\nb) Expiry of timer T3570.\n\n   The network shall, on the first expiry of the timer T3570, retransmit\nthe IDENTITY REQUEST message and reset and restart the timer T3570. This\nretransmission is repeated four times, i.e. on the fifth expiry of timer\nT3570, the network shall abort the identification procedure and any ongoing\n5GMM procedure.\n\nc) Collision of an identification procedure with a registration procedure\nfor initial registration.\n\n   If the network receives a REGISTRATION REQUEST message indicating either\n\"initial registration\" or \"5GS emergency registration\" in the 5GS\nregistration type IE before the ongoing identification procedure has been\ncompleted and no registration procedure is pending on the network (i.e. no\nREGISTRATION ACCEPT/REJECT message has still to be sent as an answer to a\nREGISTRATION REQUEST message), the network shall proceed with the\nregistration procedure for initial registration.\n\nd) Collision of an identification procedure with a registration procedure\nfor initial registration when the identification procedure has been caused\nby a registration procedure for initial registration.\n\n   If the network receives a REGISTRATION REQUEST message indicating either\n\"initial registration\" or \"5GS emergency registration\" in the 5GS\nregistration type IE before the ongoing identification procedure has been\ncompleted and a registration procedure for initial registration is pending\n(i.e. a REGISTRATION ACCEPT/REJECT message has to be sent as an answer to\nan earlier REGISTRATION REQUEST message), then:\n\n-  If one or more of the information elements in the REGISTRATION REQUEST\nmessage differ from the ones received within the previous REGISTRATION\nREQUEST message, the network shall proceed with the new registration\nprocedure for initial registration; or\n\n-  If the information elements do not differ, then the network shall not\ntreat any further this new REGISTRATION REQUEST message.\n\ne) Collision of an identification procedure with a registration procedure\nfor mobility and periodic registration update.\n\n   If the network receives a REGISTRATION REQUEST message indicating either\n\"mobility registration updating\" or \"mobility registration updating\" in the\n5GS registration type IE before the ongoing identification procedure has\nbeen completed, the network shall progress both procedures.\n\nf) Collision of an identification procedure with a UE initiated de-\nregistration procedure.\n\n   If the network receives a DEREGISTRATION REQUEST message with \"switch\noff\" indication in the De-registration type IE before the ongoing\nidentification procedure has been completed, the network shall abort the\nidentification procedure and shall progress the UE-initiated de-\nregistration procedure;\n\n   Else the network shall complete the identification procedure and shall\nrespond to the UE-initiated de-registration procedure as described in\nsubclause\u00a05.5.2.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Generic UE configuration update procedure", "numbering": "5.4.4", "title_level": 2, "desc": "5.4.4  Generic UE configuration update procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.4.1", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Generic UE configuration update procedure initiated by the", "numbering": "5.4.4.2", "title_level": 3, "desc": "5.4.4.1  General\n\nThe purpose of this procedure is to:\n\na) allow the AMF to update the UE configuration for access and mobility\nmanagement-related parameters decided and provided by the AMF by providing\nnew parameter information within the command; or\n\nb) request the UE to perform a registration procedure for mobility and\nperiodic registration update towards the network to update access and\nmobility management-related parameters decided and provided by the AMF (see\nsubclause\u00a05.5.1.3).\n\nThe procedure may be initiated by the network and can only be used when the\nUE has an established 5GMM context, and the UE is in 5GMM-CONNECTED mode.\nThe AMF may require a confirmation response in order to ensure that the\nparameter has been updated by the UE.\n\nThe following parameters are supported by the generic UE configuration\nupdate procedure without the need for triggering the UE to perform the\nregistration procedure for mobility and periodic registration update:\n\na) 5G-GUTI;\n\nb) TAI list;\n\nc) Service area list;\n\nd) Network identity and time zone information (Full name for network, short\nname for network, local time zone, universal time and local time zone,\nnetwork daylight saving time);\n\ne) LADN information; and\n\nf) Rejected NSSAI.\n\nThe following parameters may trigger the UE to perform the registration\nprocedure for mobility and periodic registration update:\n\na) Allowed NSSAI; or\n\nb) Configured NSSAI.\n\nThe following parameter requires triggering the UE to perform the\nregistration procedure for mobility and periodic registration update:\n\na) MICO.\n\nEditor's note:  Other parameters requiring negotiation are FFS.\n\n[pic]\n\nFigure\u00a05.4.4.1.1: Generic UE configuration update procedure\n\n\n5.4.4.2  Generic UE configuration update procedure initiated by the network\n\n\n\nThe AMF shall initiate the generic UE configuration procedure by sending\nthe CONFIGURATION UPDATE COMMAND message to the UE.\n\nThe AMF shall in the CONFIGURATION UPDATE COMMAND message either:\n\na) include one or more of 5G-GUTI, TAI list, allowed NSSAI that may include\nthe mapping to the configured NSSAI for the HPLMN, LADN information,\nservice area list, MICO indication NITZ information, configured NSSAI that\nmay include the mapping to the configured NSSAI for the HPLMN, or rejected\nNSSAI;\n\nb) indicate registration requested; or\n\nc) a combination of both.\n\nIf an acknowledgement from the UE is requested, the AMF shall indicate\nacknowledgement requested in the Configuration update indication IE in the\nCONFIGURATION UPDATE COMMAND message and shall start timer T3555.\nAcknowledgement shall be requested for all parameters except when only NITZ\nis included.\n\nTo initiate parameter re-negotiation between the UE and network, the AMF\nshall indicate \"registration requested\" in the Configuration update\nindication IE in the CONFIGURATION UPDATE COMMAND message. In this case,\nthe acknowledgement shall be requested.\n\nIf a new allowed NSSAI information or AMF re-configuration of supported S-\nNSSAIs requires an AMF relocation, the AMF shall indicate \"registration\nrequested\" in the Configuration update indication IE and include the\nAllowed NSSAI IE in the CONFIGURATION UPDATE COMMAND message. In this case,\nthe acknowledgement shall be requested.\n\nIf the AMF includes a new configured NSSAI in the CONFIGURATION UPDATE\nCOMMAND message and the new configured NSSAI requires an AMF relocation as\nspecified in 3GPP\u00a0TS\u00a023.501\u00a0[8], the AMF shall indicate \"registration\nrequested\" in the Configuration update indication IE in the message.\n\nDuring an established 5GMM context, the network may send none, one, or more\nCONFIGURATION UPDATE COMMAND messages to the UE. If more than one\nCONFIGURATION UPDATE COMMAND message is sent, the messages need not have\nthe same content.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Generic UE configuration update accepted by the UE", "numbering": "5.4.4.3", "title_level": 3, "desc": "5.4.4.3  Generic UE configuration update accepted by the UE\n\nUpon receiving the CONFIGURATION UPDATE COMMAND message, the UE shall use\nthe contents to update appropriate information stored within the UE.\n\nIf acknowledgement requested is indicated in the Configuration update\nindication IE in the CONFIGURATION UPDATE COMMAND message and:\n\na) if all information elements included are successfully accepted by the\nUE; or\n\nb) if \"registration requested\" in the Configuration update indication IE is\nindicated;\n\nthe UE shall send a CONFIGURATION UPDATE COMPLETE message.\n\nIf the UE receives a new 5G-GUTI in the CONFIGURATION UPDATE COMMAND\nmessage, the UE shall consider the new 5G-GUTI as valid, the old 5G-GUTI as\ninvalid, stop timer T3519 if running, and delete any stored SUCI;\notherwise, the UE shall consider the old 5G-GUTI as valid.\n\nIf the UE receives a new TAI list in the CONFIGURATION UPDATE COMMAND\nmessage, the UE shall consider the new TAI list as valid and the old TAI\nlist as invalid; otherwise, the UE shall consider the old TAI list as\nvalid.\n\nIf the UE receives a new service area list in the CONFIGURATION UPDATE\nCOMMAND message, the UE shall consider the new service area list as valid\nand the old service area list as invalid; otherwise, the UE shall consider\nthe old service area list, if any, as valid.\n\nIf the UE receives new NITZ information in the CONFIGURATION UPDATE COMMAND\nmessage, the UE considers the new NITZ information as valid and the old\nNITZ information as invalid; otherwise, the UE shall consider the old NITZ\ninformation as valid.\n\nIf the UE receives a LADN information IE in the CONFIGURATION UPDATE\nCOMMAND message, the UE shall consider the old LADN information as invalid\nand the new LADN information as valid, if any; otherwise, the UE shall\nconsider the old LADN information as valid.\n\nIf the UE receives a new allowed NSSAI for the associated access type in\nthe CONFIGURATION UPDATE COMMAND message, the UE shall consider the new\nallowed NSSAI as valid for the associated access type, store the allowed\nNSSAI for the associated access type as specified in subclause\u00a04.6.2.2 and\nconsider the old allowed NSSAI for the associated access type as invalid;\notherwise, the UE shall consider the old Allowed NSSAI as valid for the\nassociated access type.\n\nIf the UE receives an allowed NSSAI in the CONFIGURATION UPDATE COMMAND\nmessage and the UE has one or more PDU sessions associated with S-NSSAI(s)\nnot included in the received allowed NSSAI, the UE shall locally release\nall such PDU session(s).\n\nIf the UE receives a new configured NSSAI in the CONFIGURATION UPDATE\nCOMMAND message, the UE shall consider the new configured NSSAI for the\nregistered PLMN as valid and the old configured NSSAI for the registered\nPLMN as invalid; otherwise, the UE shall consider the old configured NSSAI\nfor the registered PLMN as valid The UE shall store the new configured\nNSSAI as specified in subclause\u00a04.6.2.2.\n\nIf the CONFIGURATION UPDATE COMMAND message indicates \"registration\nrequested\" in the Configuration update indication IE and:\n\n-  either a new allowed NSSAI or a new configured NSSAI or both are\nincluded, the UE shall, after the completion of the generic UE\nconfiguration update procedure, and the release of the existing N1 NAS\nsignalling connection, start a registration procedure for mobility and\nperiodic registration update as specified in subclause\u00a05.5.1.3; or\n\n-  an MICO indication is included, the UE shall, after the completion of\nthe generic UE configuration update procedure, start a mobility\nregistration update procedure as specified in subclause\u00a05.5.1.3 to re-\nnegotiate MICO mode with the network.\n\nThe UE receiving the rejected NSSAI in the CONFIGURATION UPDATE COMMAND\nmessage takes the following actions based on the rejection cause in the\nrejected NSSAI:\n\n\"S-NSSAI not available in the current PLMN\"\n\n   The UE shall add the rejected S-NSSAI(s) in the rejected NSSAI for the\ncurrent PLMN as specified in subclause\u00a04.6.2.2 and not attempt to use this\nS-NSSAI in the current PLMN until switching off the UE or the UICC\ncontaining the USIM is removed.\n\n\"S-NSSAI not available in the current registration area\"\n\n   The UE shall add the rejected S-NSSAI(s) in the rejected NSSAI for the\ncurrent PLMN and registration area combination as specified in\nsubclause\u00a04.6.2.2 and not attempt to use this S-NSSAI in the current\nregistration area until switching off the UE, the UE moving out of the\ncurrent registration area or the UICC containing the USIM is removed.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Generic UE configuration update completion by the network", "numbering": "5.4.4.4", "title_level": 3, "desc": "5.4.4.4  Generic UE configuration update completion by the network\n\nUpon receipt of the CONFIGURATION UPDATE COMPLETE message, the AMF shall\nstop the timer T3555.\n\nIf a new 5G-GUTI was included in the CONFIGURATION UPDATE COMMAND message,\nthe AMF shall consider the new 5G-GUTI as valid and the old 5G-GUTI as\ninvalid.\n\nIf a new TAI list was included in the CONFIGURATION UPDATE COMMAND message,\nthe AMF shall consider the new TAI list as valid and the old TAI list as\ninvalid.\n\nIf a new service area list was included in the CONFIGURATION UPDATE COMMAND\nmessage, the AMF shall consider the new service area list as valid and the\nold service area list as invalid.\n\nIf new allowed NSSAI information was included in the CONFIGURATION UPDATE\nCOMMAND message, the AMF shall consider the new Allowed NSSAI information\nas valid and the old allowed NSSAI information as invalid. In addition, if\nregistration requested was indicated in the CONFIGURATION UPDATE COMMAND\nmessage, the AMF shall initiate the release of the N1 NAS signalling\nconnection.\n\nIf a LADN information IE was included in the CONFIGURATION UPDATE COMMAND\nmessage, the AMF shall consider the old LADN information as invalid and the\nnew LADN information as valid, if any. In this case, if the tracking area\nidentity list received in the new LADN information does not include the\ncurrent TA, the AMF shall indicate the SMF to release the PDU session for\nLADN or release the user-plane resources for the PDU session for LADN (see\n3GPP\u00a0TS\u00a023.501\u00a0[8] and 3GPP\u00a0TS\u00a023.502\u00a0[9]).\n\nEditor's note:  Further details on handling of specific IEs are FFS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.4.4.5", "title_level": 3, "desc": "5.4.4.5  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Transmission failure of the CONFIGURATION UPDATE COMPLETE message with\nTAI change from lower layers\n\n   If the current TAI is not in the TAI list, the generic UE configuration\nupdate procedure shall be aborted and a registration procedure for mobility\nand periodic registration update shall be initiated.\n\n   If the current TAI is still part of the TAI list, it is up to the UE\nimplementation how to re-run the ongoing procedure that triggered the\ngeneric UE configuration update procedure.\n\nb) Transmission failure of CONFIGURATION UPDATE COMPLETE message indication\nwithout TAI change from lower layers\n\n   It is up to the UE implementation how to re-run the ongoing procedure\nthat triggered the generic UE configuration update procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.4.4.6", "title_level": 3, "desc": "5.4.4.6  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3555.\n\n   The network shall, on the first expiry of the timer T3555, retransmit\nthe CONFIGURATION UPDATE COMMAND message and shall reset and start timer\nT3555. This retransmission is repeated four times, i.e. on the fifth expiry\nof timer T3555, the procedure shall be aborted.\n\nb) Lower layer failure.\n\n   If a lower layer failure is detected before the CONFIGURATION UPDATE\nCOMPLETE message is received, the old and the new 5G-GUTI shall be\nconsidered as valid until the old 5G-GUTI can be considered as invalid by\nthe AMF. If a new TAI list was provided in the CONFIGURATION UPDATE COMMAND\nmessage, the old and new TAI list shall also be considered as valid until\nthe old TAI list can be considered as invalid by the AMF.\n\n   During this period the AMF:\n\n1) may first use the old 5G-S-TMSI from the old 5G-GUTI for paging within\nthe area defined by the old TAI list for an implementation dependent number\nof paging attempts for network originated transactions. If a new TAI list\nwas provided with old 5G-GUTI in the CONFIGURATION UPDATE COMMAND message,\nthe new TAI list should also be used for paging. Upon response from the UE,\nthe AMF may re-initiate the CONFIGURATION UPDATE COMMAND. If the response\nis received from a tracking area within the old and new TAI list, the\nnetwork shall re-initiate the CONFIGURATION UPDATE COMMAND message. If no\nresponse is received to the paging attempts, the network may use the new 5G-\nS-TMSI from the new 5G-GUTI for paging for an implementation dependent\nnumber of paging attempts. In this case, if a new TAI list was provided\nwith new 5G-GUTI in the CONFIGURATION UPDATE COMMAND message, the new TAI\nlist shall be used instead of the old TAI list. Upon response from the UE\nthe AMF shall consider the new 5G-GUTI as valid and the old 5G-GUTI as\ninvalid.\n\n2) shall consider the new 5G-GUTI as valid if it is used by the UE and,\nadditionally, the new TAI list as valid if it was provided with this 5G-\nGUTI in the CONFIGURATION UPDATE COMMAND message; and\n\n3) may use the identification procedure followed by a new generic UE\nconfiguration update procedure if the UE uses the old 5G-GUTI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS transport procedure(s)", "numbering": "5.4.5", "title_level": 2, "desc": "5.4.5  NAS transport procedure(s)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.5.1", "title_level": 3, "desc": "5.4.5.1  General\n\nThe purpose of the NAS transport procedures is to provide a transport of\npayload between the UE and the AMF. The type of the payload is identified\nby the Payload container type IE and includes one of the following:\n\na) a single 5GSM message;\n\nb) SMS;\n\nc) an LPP message (see 3GPP\u00a0TS\u00a036.355\u00a0[26]);\n\nd) a transparent container; or\n\ne) a UE policy container.\n\nEditor's note:  Other types of payload, such as generic application\npayload, are FFS.\n\nAlong with the payload, the NAS transport procedure may transport the\nassociated information (e.g. PDU session information for 5GSM message\npayload).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated NAS transport procedure", "numbering": "5.4.5.2", "title_level": 3, "desc": "5.4.5.2  UE-initiated NAS transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.5.2.1", "title_level": 4, "desc": "5.4.5.2.1   General\n\nThe purpose of the UE-initiated NAS transport procedure is to provide a\ntransport of:\n\na) a single 5GSM message as defined in subclause\u00a08.3;\n\nb) SMS (see 3GPP\u00a0TS\u00a024.011\u00a0[13]);\n\nc) an LPP message;\n\nd) a transparent container; or\n\ne) a UE policy container.\n\nand optional associated payload routing information from the UE to the AMF\nin a 5GMM message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated NAS transport procedure initiation", "numbering": "5.4.5.2.2", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated NAS transport of messages accepted by the", "numbering": "5.4.5.2.3", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated NAS transport of messages not accepted by", "numbering": "5.4.5.2.4", "title_level": 4, "desc": "5.4.5.2.2   UE-initiated NAS transport procedure initiation\n\nIn the connected mode, the UE initiates the NAS transport procedure by\nsending the UL NAS TRANSPORT message, as shown in figure\u00a05.4.5.2.2.1.\n\nIn case a) in subclause\u00a05.4.5.2.1, the UE shall:\n\na) include the PDU session information (PDU session ID, old PDU session ID,\nS-NSSAI, DNN, request type), if available:\n\nb) set the Payload container type IE to \"N1 SM information\"; and\n\nc) set the Payload container IE to the 5GSM message.\n\nThe UE shall set the PDU session ID IE to the PDU session ID. If an old PDU\nsession ID is to be included, the UE shall set the Old PDU session ID IE to\nthe old PDU session ID.\n\nIf an S-NSSAI is to be included, the UE shall set the S-NSSAI IE to the S-\nNSSAI selected for the PDU session from the allowed NSSAI for the serving\nPLMN, associated with the mapped configured NSSAI for the HPLMN if\navailable in roaming scenarios.\n\nIf a DNN is to be included, the UE shall set the DNN IE to the DNN. 5GSM\nprocedures specified in clause\u00a09 describe conditions for inclusion of the S-\nNSSAI and the DNN.\n\nIf a request type is to be included, the UE shall set the Request type IE\nto the request type. The request type is not provided along 5GSM messages\nother than the PDU SESSION ESTABLISHMENT REQUEST message.\n\nThe UE shall send the UL NAS TRANSPORT message to the AMF (see example in\nfigure\u00a05.4.5.2.2.1).\n\nIn case b) in subclause\u00a05.4.5.2.1, the UE shall:\n\n-  set the Payload container type IE to \"SMS\"; and\n\n-  set the Payload container IE to the SMS payload.\n\nBased on the UE preferences regarding access selection for mobile\noriginated (MO) transmission of SMS over NAS as described in\n3GPP\u00a0TS\u00a023.501\u00a0[8]:\n\na) when SMS over NAS is preferred to be sent over 3GPP access: the UE\nattempts to deliver MO SMS over NAS via the 3GPP access if the UE is\nregistered over both 3GPP access and non-3GPP access;\n\nb) when SMS over NAS is preferred to be sent over non-3GPP access: the UE\nattempts to deliver MO SMS over NAS via the non-3GPP access if the UE is\nregistered over both 3GPP access and non-3GPP access. If the delivery of\nSMS over NAS via the non-3GPP access is not available, the UE attempts to\ndeliver MO SMS over NAS via the 3GPP access.\n\nIn case c) in subclause\u00a05.4.5.2.1, the UE shall:\n\n-  set the Payload container type IE to \"LTE Positioning Protocol (LPP)\nmessage container\";\n\n-  set the Payload container IE to the LPP message payload; and\n\n-  set the Additional information IE to the routing information provided by\nthe upper layer location services application.\n\nIn case d) in subclause\u00a05.4.5.2.1, the UE shall:\n\n-  set the Payload container type IE to \"transparent container\"; and\n\n-  set the Payload container IE to the transparent container.\n\nEditor's note:  The trigger for the UE to send a transparent container and\nthe encoding of the transparent container are FFS.\n\nIn case e) in subclause\u00a05.4.5.2.1, the UE shall:\n\n-  set the Payload container type IE to \"UE policy container\"; and\n\n-  set the contents of the Payload container IE as specified in Annex\u00a0D.\n\n[pic]\n\nFigure\u00a05.4.5.2.2.1: UE-initiated NAS transport procedure\n\n\n5.4.5.2.3   UE-initiated NAS transport of messages accepted by the network\n\nUpon reception of a UL NAS TRANSPORT message, if the Payload container type\nIE is set to:\n\na) \"N1 SM information\", the AMF looks up a PDU session routing context for:\n\n1) the UE and the PDU session ID IE in case the Old PDU session ID IE is\nnot included, and:\n\nNOTE\u00a01:  If the Old PDU session ID IE is not included in the UL NAS\nTRANSPORT message and the AMF has received a reallocation requested\nindication from the SMF, the AMF needs to ignore the reallocation requested\nindication.\n\ni) if the AMF has a PDU session routing context for the PDU session ID and\nthe UE, and the Request type IE is not included, the AMF shall forward the\n5GSM message, and the PDU session ID IE towards the SMF identified by the\nSMF ID of the PDU session routing context;\n\nii)  if the AMF has a PDU session routing context for the PDU session ID\nand the UE, the PDU session routing context indicates that the PDU session\nis not an emergency PDU session, and the Request type IE is included and is\nset to \"existing PDU session\", the AMF shall forward the 5GSM message, the\nPDU session ID, the S-NSSAI (if received), the DNN (if received) and the\nrequest type towards the SMF identified by the SMF ID of the PDU session\nrouting context;\n\niii) if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, and the Request type IE is included and is set to\n\"initial request\":\n\nA) the AMF shall select an SMF with following handlings:\n\n   If the S-NSSAI IE is not included and the user\u2019s subscription context\nobtained from UDM:\n\n-  contains one default S-NSSAI, the AMF shall use the default S-NSSAI as\nthe S-NSSAI;\n\n-  contains two or more default S-NSSAIs, the AMF shall use one of the\ndefault S-NSSAIs selected by operator policy as the S-NSSAI; and\n\n-  does not contain a default S-NSSAI, the AMF shall use an S-NSSAI\nselected based on operator policy as the S-NSSAI.\n\n   If the DNN IE is not included or the DNN is not valid, and the user\u2019s\nsubscription context obtained from UDM:\n\n-  contains the default DNN for the S-NSSAI, the AMF shall use the default\nDNN as the DNN; and\n\n-  does not contain the default DNN for the S-NSSAI, the AMF shall use a\nlocally configured DNN as the DNN; and\n\n   If the DNN is a LADN DNN, the AMF shall determine the UE presence in\nLADN service area.\n\nNOTE\u00a02:  SMF selection is out of scope of CT1.\n\nB) if the SMF selection is successful:\n\n-  the AMF shall store a PDU session routing context for the PDU session ID\nand the UE, shall set the SMF ID in the stored PDU session routing context\nto the SMF ID corresponding to the DNN in the user\u2019s subscription context\nobtained from the UDM; and\n\n-  the AMF shall forward the 5GSM message, the PDU session ID, the S-NSSAI\n(if received), the DNN (if received), the request type and UE presence in\nLADN service area (if DNN received corresponds to an LADN DNN) towards the\nSMF identified by the SMF ID of the PDU session routing context;\n\niv)  if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is included and is set to\n\"existing PDU session\", and the user\u2019s subscription context obtained from\nthe UDM contains an SMF ID for the PDU session ID such that the SMF ID\nincludes a PLMN identity corresponding to the UE's HPLMN or the current\nPLMN, then:\n\nA) the AMF shall store a PDU session routing context for the PDU session ID\nand the UE, shall set the SMF ID in the stored PDU session routing context\nto the SMF ID contained in the user's subscription context obtained from\nthe UDM; and\n\nB) the AMF shall forward the 5GSM message, the PDU session ID, the S-NSSAI\n(if received), the DNN (if received) and the request type towards the SMF\nidentified by the SMF ID of the PDU session routing context;\n\nv) if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is included and is set to\n\"initial emergency request\", and the AMF does not have a PDU session\nrouting context for another PDU session ID of the UE indicating that the\nPDU session is an emergency PDU session:\n\nA) the AMF shall select an SMF. The AMF shall use the emergency DNN from\nthe AMF emergency configuration data as the DNN, if configured. The AMF\nshall derive the SMF from the emergency DNN or use the statically\nconfigured SMF from the AMF emergency configuration data, if configured;\nand\n\nB) if the SMF selection is successful:\n\n-  the AMF shall store a PDU session routing context for the PDU session ID\nand the UE, shall set the SMF ID in the stored PDU session routing context\nto the SMF ID of the selected SMF, and shall store an indication that the\nPDU session is an emergency PDU session in the stored PDU session routing\ncontext; and\n\n-  the AMF shall forward the 5GSM message, the PDU session ID, the S-NSSAI\n(if configured in the AMF emergency configuration data), the DNN (if\nconfigured in the AMF emergency configuration data), and the request type\ntowards the SMF identified by the SMF ID of the PDU session routing\ncontext; and\n\nvi)  if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is included and is set to\n\"initial emergency request\", and the AMF has a PDU session routing context\nindicating that the PDU session is an emergency PDU session for another PDU\nsession ID of the UE:\n\nA) the AMF shall store a PDU session routing context for the PDU session ID\nand the UE and shall set the SMF ID in the stored PDU session routing\ncontext to the SMF ID of the PDU session routing context for the other PDU\nsession ID of the UE; and\n\nB) the AMF shall forward the 5GSM message, the PDU session ID, the S-NSSAI\n(if configured in the AMF emergency configuration data), the DNN (if\nconfigured in the AMF emergency configuration data) and the request type\ntowards the SMF identified by the SMF ID of the PDU session routing\ncontext; or\n\nvii) if the AMF has a PDU session routing context for the PDU session ID\nand the UE, the PDU session routing context indicates that the PDU session\nis an emergency PDU session, and the Request type IE is included and is set\nto \"existing emergency PDU session\", the AMF shall forward the 5GSM\nmessage, the PDU session ID, the S-NSSAI (if configured in the AMF\nemergency configuration data), the DNN (if configured in the AMF emergency\nconfiguration data), and the request type towards the SMF identified by the\nSMF ID of the PDU session routing context; and\n\nviii)  if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is included and is set to\n\"existing emergency PDU session\", and the user's subscription context\nobtained from the UDM contains an SMF ID for the PDU session ID such that\nthe SMF ID includes a PLMN identity corresponding to the current PLMN,\nthen:\n\nA) the AMF shall store a PDU session routing context for the PDU session ID\nand the UE, shall set the SMF ID in the stored PDU session routing context\nto the SMF ID contained in the user's subscription context obtained from\nthe UDM; and\n\nB) the AMF shall forward the 5GSM message, the PDU session ID, the S-NSSAI\n(if configured in the AMF emergency configuration data), the DNN (if\nconfigured in the AMF emergency configuration data), and the request type\ntowards the SMF identified by the SMF ID of the PDU session routing\ncontext; or\n\n2) the UE and the Old PDU session ID IE in case the Old PDU session ID IE\nis included, and:\n\ni) the AMF has a PDU session routing context for the old PDU session ID and\nthe UE and does not have a PDU session routing context for the PDU session\nID and the UE, the Request type IE is included and is set to \"initial\nrequest\", and the AMF received a reallocation requested indication from the\nSMF indicating that the SMF is to be reused, the AMF shall store a PDU\nsession routing context for the PDU session ID and the UE, set the SMF ID\nin the stored PDU session routing context to the SMF ID of the PDU session\nrouting context for the old PDU session ID and the UE. If the DNN is a LADN\nDNN, the AMF shall determine the UE presence in LADN service area. The AMF\nshall forward the 5GSM message, the PDU session ID, the old PDU session ID,\nthe S-NSSAI (if received), the DNN (if received), the request type and UE\npresence in LADN service area (if DNN received corresponds to an LADN DNN)\ntowards the SMF identified by the SMF ID of the PDU session routing\ncontext;\n\nii)  the AMF has a PDU session routing context for the old PDU session ID\nand the UE and does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is included and is set to\n\"initial request\", the AMF received a reallocation requested indication\nfrom the SMF indicating that the SMF is to be reallocated:\n\nA) the AMF shall select an SMF with following handlings;\n\n   If the S-NSSAI IE is not included and the user\u2019s subscription context\nobtained from UDM:\n\n-  contains one default S-NSSAI, the AMF shall use the default S-NSSAI as\nthe S-NSSAI;\n\n-  contains two or more default S-NSSAIs, the AMF shall use one of the\ndefault S-NSSAIs selected by operator policy as the S-NSSAI; and\n\n-  does not contain a default S-NSSAI, the AMF shall use an S-NSSAI\nselected based on operator policy as the S-NSSAI.\n\n   If the DNN IE is not included or the DNN is not valid, and the user\u2019s\nsubscription context obtained from UDM:\n\n-  contains the default DNN for the S-NSSAI, the AMF shall use the default\nDNN as the DNN; and\n\n-  does not contain the default DNN for the S-NSSAI, the AMF shall use a\nlocally configured DNN as the DNN; and\n\n   If the DNN is a LADN DNN, the AMF shall determine the UE presence in\nLADN service area.\n\nB) if the SMF selection is successful:\n\n-  the AMF shall store a PDU session routing context for the PDU session ID\nand the UE and set the SMF ID of the PDU session routing context to the SMF\nID of the selected SMF; and\n\n-  the AMF shall forward the 5GSM message, the PDU session ID, the old PDU\nsession ID, the S-NSSAI (if received), the DNN (if received), the request\ntype and UE presence in LADN service area (if DNN received corresponds to\nan LADN DNN) towards the SMF identified by the SMF ID of the PDU session\nrouting context for the PDU session ID and the UE;\n\nb) \"SMS\", the AMF shall forward the content of the Payload container IE to\nthe SMSF associated with the UE;\n\nc) \"LTE Positioning Protocol (LPP) message container\", the AMF shall\nforward the content of the Payload container IE to the LMF associated with\nthe routing information included in the Additional information IE of the UL\nNAS TRANSPORT message;\n\nd) \"transparent container\", the AMF shall forward the content of the\nPayload container IE to the UDM; and\n\ne) \"UE policy container\", the AMF shall forward the content of the Payload\ncontainer IE to the PCF.\n\n\n5.4.5.2.4   UE-initiated NAS transport of messages not accepted by the\n         network\n\nUpon reception of a UL NAS TRANSPORT message, if the Payload container type\nIE is set to \"N1 SM information\", the Request type IE is set to \"initial\nrequest\" or \"existing PDU session\", the UE is not configured for high\npriority access in selected PLMN and:\n\na) DNN based congestion control is activated for the DNN included in the UL\nNAS TRANSPORT message, or DNN based congestion control is activated for the\nselected DNN in case of no DNN included in the UL NAS TRANSPORT message,\ne.g. configured by operation and maintenance, the AMF shall send back to\nthe UE the 5GSM message which was not forwarded, a back-off timer value and\n5GMM cause #22 \"congestion\" as specified in subclause\u00a05.4.5.3.1 case f);\n\nb) S-NSSAI and DNN based congestion control is activated for the S-NSSAI\nand DNN included in the UL NAS TRANSPORT message, or S-NSSAI and DNN based\ncongestion control is activated for the S-NSSAI included in the UL NAS\nTRANSPORT message and the selected DNN in case of no DNN included in the UL\nNAS TRANSPORT message, or S-NSSAI and DNN based congestion control is\nactivated for the selected S-NSSAI in case of no S-NSSAI included in the UL\nNAS TRANSPORT message and the DNN included in the UL NAS TRANSPORT message,\nor S-NSSAI and DNN based congestion control is activated for the selected S-\nNSSAI and the selected DNN in case of no S-NSSAI and no DNN included in the\nUL NAS TRANSPORT message, e.g. configured by operation and maintenance, the\nAMF shall send back to the UE the 5GSM message which was not forwarded, a\nback-off timer value and 5GMM cause #67 \"insufficient resources for\nspecific slice and DNN\" as specified in subclause\u00a05.4.5.3.1 case f); or\n\nc) S-NSSAI only based congestion control is activated for the S-NSSAI\nincluded in the UL NAS TRANSPORT message, or S-NSSAI based congestion\ncontrol is activated for the selected S-NSSAI in case of no S-NSSAI\nincluded in the UL NAS TRANSPORT message, e.g. configured by operation and\nmaintenance, the AMF shall send back to the UE the 5GSM message which was\nnot forwarded, a back-off timer value and 5GMM cause #69 \"insufficient\nresources for specific slice\" as specified in subclause\u00a05.4.5.3.1 case f).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.4.5.2.5", "title_level": 4, "desc": "5.4.5.2.5   Abnormal cases on the network side\n\nThe following abnormal cases in AMF are identified:\n\na) if the Old PDU session ID IE is not included in the UL NAS TRANSPORT\nmessage, the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is set to \"initial request\", and\nthe SMF selection fails then the AMF may send back to the UE the 5GSM\nmessage which was not forwarded as specified in subclause\u00a05.4.5.3.1 case\ne).\n\nb) if the Old PDU session ID IE is included in the UL NAS TRANSPORT\nmessage, the AMF has a PDU session routing context for the old PDU session\nID and the UE and does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is set to \"initial request\", the\nAMF received a reallocation requested indication from the SMF indicating\nthat the SMF is to be reallocated, and the SMF selection fails then the AMF\nmay send back to the UE the 5GSM message which was not forwarded as\nspecified in subclause\u00a05.4.5.3.1 case e).\n\nc) if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, the Request type IE is set to \"existing PDU\nsession\", and the user's subscription context obtained from the UDM does\nnot contain an SMF ID for the PDU session ID such that the SMF ID includes\na PLMN identity corresponding to the UE's HPLMN or the current PLMN, then\nthe AMF may send back to the UE the 5GSM message which was not forwarded as\nspecified in subclause\u00a05.4.5.3.1 case e).\n\nd) if the Old PDU session ID IE is included in the UL NAS TRANSPORT\nmessage, and the AMF has a PDU session routing context for the old PDU\nsession ID and the UE and does not have a PDU session routing context for\nthe PDU session ID and the UE, the Request type IE is set to \"initial\nrequest\" and the AMF has not received a reallocation requested indication,\nthe AMF should select an SMF with following handlings:\n\n   If the S-NSSAI IE is not included and the user\u2019s subscription context\nobtained from UDM:\n\n1) contains one default S-NSSAI, the AMF shall use the default S-NSSAI as\nthe S-NSSAI;\n\n2) contains two or more default S-NSSAIs, the AMF shall use one of the\ndefault S-NSSAIs selected by operator policy as the S-NSSAI; and\n\n3) does not contain a default S-NSSAI, the AMF shall use an S-NSSAI\nselected based on operator policy as the S-NSSAI.\n\n   If the DNN IE is not included or the DNN is not valid, and the user\u2019s\nsubscription context obtained from UDM:\n\n1) contains the default DNN for the S-NSSAI, the AMF shall use the default\nDNN as the DNN; and\n\n2) does not contain the default DNN for the S-NSSAI, the AMF shall use a\nlocally configured DNN as the DNN; and\n\n   If the DNN is a LADN DNN, the AMF shall determine the UE presence in\nLADN service area.\n\n   If the SMF selection is successful, the AMF should store a PDU session\nrouting context for the PDU session ID and the UE, set the SMF ID in the\nstored PDU session routing context to the selected SMF ID, and forward the\n5GSM message, the PDU session ID, the old PDU session ID, the S-NSSAI (if\nreceived), the DNN (if received), the request type and UE presence in LADN\nservice area (if DNN received corresponds to an LADN DNN) towards the SMF\nID of the PDU session routing context.\n\ne) if the AMF has a PDU session routing context for the PDU session ID and\nthe UE, the PDU session routing context indicates that the PDU session is\nan emergency PDU session, the Request type IE is set to \"initial emergency\nrequest\", the AMF should forward the 5GSM message, the PDU session ID, the\nS-NSSAI (if configured in the AMF emergency configuration data), the DNN\n(if configured in the AMF emergency configuration data) and the request\ntype towards the SMF ID of the PDU session routing context.\n\nf) if the Request type IE is set to \"initial emergency request\" and the S-\nNSSAI or the DNN is received, the AMF ignores the received S-NSSAI or the\nDNN and uses the emergency DNN from the AMF emergency configuration data,\nif any.\n\ng) if the AMF does not have a PDU session routing context for the PDU\nsession ID and the UE, and the Request type IE of the UL NAS TRANSPORT\nmessage is not provided, then the AMF may send back to the UE the 5GSM\nmessage which was not forwarded as specified in subclause\u00a05.4.5.3.1 case\ne).\n\nh) if the AMF unsuccessfully attempted to forward the 5GSM message, the PDU\nsession ID, the S-NSSAI (if received), the DNN (if received) and the\nrequest type (if received) towards a SMF ID, then the AMF may send back to\nthe UE the 5GSM message which was not forwarded as specified in\nsubclause\u00a05.4.5.3.1 case e).\n\ni) the Old PDU session ID IE is included in the UL NAS TRANSPORT message,\nthe AMF does not have a PDU session routing context for the old PDU session\nID and the UE, the AMF does not have a PDU session routing context for the\nPDU session ID and the UE, the Request type IE is set to \"initial request\",\nthe AMF should select an SMF with following handlings\n\n   If the S-NSSAI IE is not included and the user\u2019s subscription context\nobtained from UDM:\n\n1) contains one default S-NSSAI, the AMF shall use the default S-NSSAI as\nthe S-NSSAI;\n\n2) contains two or more default S-NSSAIs, the AMF shall use one of the\ndefault S-NSSAIs selected by operator policy as the S-NSSAI; and\n\n3) does not contain a default S-NSSAI, the AMF shall use an S-NSSAI\nselected based on operator policy as the S-NSSAI.\n\n   If the DNN IE is not included or the DNN is not valid, and the user\u2019s\nsubscription context obtained from UDM:\n\n1) contains the default DNN for the S-NSSAI, the AMF shall use the default\nDNN as the DNN; and\n\n2) does not contain the default DNN for the S-NSSAI, the AMF shall use a\nlocally configured DNN as the DNN; and\n\n   If the DNN is a LADN DNN, the AMF shall determine the UE presence in\nLADN service area.\n\n   If the SMF selection is successful, the AMF should store a PDU session\nrouting context for the PDU session ID and the UE, set the SMF ID in the\nstored PDU session routing context to the selected SMF ID, and forward the\n5GSM message, the PDU session ID, the old PDU session ID, the S-NSSAI (if\nreceived), the DNN (if received), the request type and UE presence in LADN\nservice area (if DNN received corresponds to an LADN DNN) towards the SMF\nID of the PDU session routing context. If the SMF selection fails then the\nAMF may send back to the UE the 5GSM message which was not forwarded as\nspecified in subclause\u00a05.4.5.3.1 case e).\n\nj) if the AMF has a PDU session routing context for the PDU session ID and\nthe UE, the PDU session routing context indicates that the PDU session is\nnot an emergency PDU session, and the Request type IE is included and is\nset to \"existing emergency PDU session\", the AMF may send back to the UE\nthe 5GSM message which was not forwarded as specified in\nsubclause\u00a05.4.5.3.1 case e).\n\nk) if the AMF has a PDU session routing context for the PDU session ID and\nthe UE, the PDU session routing context indicates that the PDU session is\nan emergency PDU session, and the Request type IE is included and is set to\n\"existing PDU session\", the AMF may forward the 5GSM message, the PDU\nsession ID, the S-NSSAI (if configured in the AMF emergency configuration\ndata), the DNN (if configured in the AMF emergency configuration data), and\nthe request type towards the SMF identified by the SMF ID of the PDU\nsession routing context.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated NAS transport procedure", "numbering": "5.4.5.3", "title_level": 3, "desc": "5.4.5.3  Network-initiated NAS transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.5.3.1", "title_level": 4, "desc": "5.4.5.3.1   General\n\nThe purpose of the network-initiated NAS transport procedure is to provide\na transport of:\n\na) a single 5GSM message;\n\nb) SMS;\n\nc) an LPP message;\n\nd) a transparent container;\n\ne) a single uplink 5GSM message which was not forwarded due to routing\nfailure;\n\nf) a single uplink 5GSM message which was not forwarded due to congestion\ncontrol; or\n\ng) a UE policy container.\n\nfrom the AMF to the UE in a 5GMM message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated NAS transport procedure initiation", "numbering": "5.4.5.3.2", "title_level": 4, "desc": "5.4.5.3.2   Network-initiated NAS transport procedure initiation\n\nIn connected mode, the AMF initiates the NAS transport procedure by sending\nthe DL NAS TRANSPORT message, as shown in figure\u00a05.4.5.3.2.1.\n\nIn case a) in subclause\u00a05.4.5.3.1, i.e. upon reception from an SMF of a\n5GSM message without an N1 SM delivery skip allowed indication for a UE or\na 5GSM message with an N1 SM delivery skip allowed indication for a UE in\nthe 5GMM-CONNECTED mode, the AMF shall:\n\na) include the PDU session information (PDU session ID) in the PDU session\nID IE;\n\nb) set the Payload container type IE to \"N1 SM information\"; and\n\nc) set the Payload container IE to the 5GSM message.\n\nIn case b) in subclause\u00a05.4.5.3.1, i.e. upon reception from an SMSF of an\nSMS payload, the AMF shall:\n\na) set the Payload container type IE to \"SMS\";\n\nb) set the Payload container IE to the SMS payload; and\n\nc) select the access type to deliver the DL NAS TRANSPORT message as\nfollows in case the access type selection is required:\n\n1) if the UE to receive the DL NAS TRANSPORT message is registered to the\nnetwork via both 3GPP access and non-3GPP access, and the SMS allowed IE in\nthe 5GMM context of the UE is set to \"both 3GPP access and non-3GPP\naccess\", then the AMF selects non-3GPP access if the UE is in MICO mode and\nin 5GMM-IDLE state for 3GPP access. Otherwise, the AMF selects either 3GPP\naccess or non-3GPP access; and\n\n2) otherwise, the AMF selects 3GPP access.\n\nNOTE:  The AMF selects an access type between 3GPP access and non-3GPP\naccess based on operator policy.\n\nIn case c) in subclause\u00a05.4.5.3.1 i.e. upon reception from an LMF of an LPP\nmessage payload, the AMF shall:\n\na) set the Payload container type IE to \"LTE Positioning Protocol (LPP)\nmessage container\";\n\nb) set the Payload container IE to the LPP message payload received from\nthe LMF; and\n\nc) set the Additional information IE to the routing information associated\nwith the LMF from which the LPP message was received.\n\nIn case d) in subclause\u00a05.4.5.3.1 i.e. upon reception of a transparent\ncontainer from the UDM to be forwarded to the UE, the AMF shall:\n\na) set the Payload container type IE to \"transparent container\"; and\n\nb) set the Payload container IE to the transparent container received from\nthe UDM.\n\nIn case e) in subclause\u00a05.4.5.3.1, i.e. upon sending a single uplink 5GSM\nmessage which was not forwarded due to routing failure, the AMF shall:\n\na) include the PDU session ID in the PDU session ID IE;\n\nb) set the Payload container type IE to \"N1 SM information\";\n\nc) set the Payload container IE to the 5GSM message which was not\nforwarded; and\n\nd) set the 5GMM cause IE to the 5GMM cause #90 \"payload was not forwarded\".\n\nIn case f) in subclause\u00a05.4.5.3.1, i.e. upon sending a single uplink 5GSM\nmessage which was not forwarded due to congestion control, the AMF shall:\n\na) include the PDU session ID in the PDU session ID IE;\n\nb) set the Payload container type IE to \"N1 SM information\";\n\nc) set the Payload container IE to the 5GSM message which was not\nforwarded;\n\nd) set the 5GMM cause IE to the 5GMM cause #22 \"Congestion\", the 5GMM cause\n#67 \"insufficient resources for specific slice and DNN\" or the 5GMM cause\n#69 \"insufficient resources for specific slice\"; and\n\ne) include the Back-off timer value IE.\n\nIn case g) in subclause\u00a05.4.5.3.1 i.e. upon reception of a UE policy\ncontainer from the PCF to be forwarded to the UE, the AMF shall:\n\na) set the Payload container type IE to \"UE policy container\"; and\n\nb) set the Payload container IE to the UE policy container received from\nthe PCF.\n\n[pic]\n\nFigure\u00a05.4.5.3.2.1: Network-initiated NAS transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated NAS transport of messages", "numbering": "5.4.5.3.3", "title_level": 4, "desc": "5.4.5.3.3   Network-initiated NAS transport of messages\n\nUpon reception of a DL NAS TRANSPORT message, if the Payload container type\nIE is set to:\n\na)  \"N1 SM information\" and the 5GMM cause IE set to the 5GMM cause #90\n\"payload was not forwarded\" is not included in the DL NAS TRANSPORT\nmessage, the 5GSM message in the Payload container IE and the PDU session\nID are handled in the 5GSM procedures specified in clause\u00a09;\n\nb) \"SMS\", the UE shall forward the content of the Payload container IE to\nthe SMS stack entity;\n\nc) \"LTE Positioning Protocol (LPP) message container\", the UE shall forward\nthe content of the Payload container IE and the routing information\nincluded in the Additional information IE to the upper layer location\nservices application;\n\nd) \"transparent container\", the UE shall pass the payload to the\nappropriate entity;\n\nEditor's note:  How the UE determines the appropriate entity is FFS and\nrequires input from SA3.\n\ne)  \"N1 SM information\" and the 5GMM cause IE is set to the 5GMM cause #90\n\"payload was not forwarded\" in the DL NAS TRANSPORT message, the UE passes\nto the 5GSM sublayer an indication that the 5GSM message was not forwarded\nalong with the 5GSM message from the Payload container IE of the DL NAS\nTRANSPORT message;\n\nf) \"N1 SM information\" and:\n\n1) the 5GMM cause IE is set to the 5GMM cause #22 \"Congestion\", the UE\npasses to the 5GSM sublayer an indication that the 5GSM message was not\nforwarded due to DNN based congestion control along with the 5GSM message\nfrom the Payload container IE of the DL NAS TRANSPORT message, and the time\nvalue from the Back-off timer value IE;\n\n2) the 5GMM cause IE is set to the 5GMM cause #67 \"insufficient resources\nfor specific slice and DNN\", the UE passes to the 5GSM sublayer an\nindication that the 5GSM message was not forwarded due to S-NSSAI and DNN\nbased congestion control along with the 5GSM message from the Payload\ncontainer IE of the DL NAS TRANSPORT message, and the time value from the\nBack-off timer value IE; or\n\n3) the 5GMM cause IE is set to the 5GMM cause #69 \"insufficient resources\nfor specific slice\", the UE passes to the 5GSM sublayer an indication that\nthe 5GSM message was not forwarded due to S-NSSAI only based congestion\ncontrol along with the 5GSM message from the Payload container IE of the DL\nNAS TRANSPORT message, and the time value from the Back-off timer value IE;\nand\n\ng) \"UE policy container\", the UE policy container in the Payload container\nIE is handled in the UE policy delivery procedures specified in Annex\u00a0D.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM status procedure", "numbering": "5.4.6", "title_level": 2, "desc": "5.4.6  5GMM status procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.4.6.1", "title_level": 3, "desc": "5.4.6.1  General\n\nThe purpose of the 5GMM STATUS procedure is to report at any time in the\n5GMM STATUS message certain error conditions detected upon receipt of 5GMM\nprotocol data in the UE. The 5GMM STATUS message can be sent by both the\nAMF and the UE (see example in figure\u00a05.4.6.1).\n\n[pic]\n\nFigure\u00a05.4.6.1: 5GMM status procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM status received in the UE", "numbering": "5.4.6.2", "title_level": 3, "desc": "5.4.6.2  5GMM status received in the UE\n\nOn receipt of a 5GMM STATUS message, no state transition and no specific\naction shall be taken as seen from the radio interface, i.e. local actions\nare possible. The local actions to be taken by UE on receipt of a 5GMM\nSTATUS message are implementation dependent.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM status received in the network", "numbering": "5.4.6.3", "title_level": 3, "desc": "5.4.6.3  5GMM status received in the network\n\nOn receipt of a 5GMM STATUS message in the AMF, no state transition and no\nspecific action shall be taken as seen from the radio interface, i.e. local\nactions are possible. The local actions to be taken by the AMF on receipt\nof a 5GMM STATUS message are implementation dependent.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM specific procedures", "numbering": "5.5", "title_level": 1, "desc": "5.5  5GMM specific procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration procedure", "numbering": "5.5.1", "title_level": 2, "desc": "5.5.1  Registration procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.5.1.1", "title_level": 3, "desc": "5.5.1.1  General\n\nThe registration procedure is always initiated by the UE and used for\ninitial registration as specified in subclause\u00a05.5.1.2.2 or mobility and\nperiodic registration update as specified in subclause\u00a05.5.1.3.2.\n\nWhen the UE wants to initiate registration over both 3GPP access and non-\n3GPP access in the same PLMN (e.g. the 3GPP access and the selected N3IWF\nare located in the same PLMN), the UE:\n\na) in 5GMM-REGISTERED-INITIATED over 3GPP access shall not initiate\nregistration over non-3GPP access; or\n\nb) in 5GMM-REGISTERED-INITIATED over non-3GPP access shall not initiate\nregistration over 3GPP access.\n\nNOTE:  To which access (i.e. 3GPP access or non-3GPP access) the UE\ninitiates registration first is up to UE implementation.\n\nWhen the UE is registered with a PLMN over a non-3GPP access, the AMF and\nthe UE maintain:\n\na) registration state and state machine over non-3GPP access;\n\nb) 5G NAS security context;\n\nc) 5G-GUTI;\n\nd) registration area for non-3GPP access, which is associated with a fixed\nwell-known N3GPP TAI; and\n\ne) non-3GPP de-registration timer in the UE and non-3GPP implicit de-\nregistration timer in the AMF.\n\nEditor\u2019s note:  What information the N3IWF maintains for a registered UE is\nFFS.\n\nA registration attempt counter is used to limit the number of subsequently\nrejected registration attempts. The registration attempt counter shall be\nincremented as specified in subclause\u00a05.5.1.2.7 or subclause\u00a05.5.1.3.6.\nDepending on the value of the registration attempt counter, specific\nactions shall be performed. The registration attempt counter shall be reset\nwhen:\n\n-  the UE is powered on;\n\n-  a USIM is inserted;\n\n-  a registration procedure is successfully completed; or\n\nEditor's note:  Other reasons to reset the registration attempt counter are\nFFS.\n\n-  a new PLMN is selected.\n\nAdditionally, the registration attempt counter shall be reset when the UE\nis in substate 5GMM-DEREGISTERED.ATTEMPTING-REGISTRATION and:\n\n-  a new registration area is entered;\n\n-  timer T3502 expires; or\n\n-  timer T3346 is started.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration procedure for initial registration", "numbering": "5.5.1.2", "title_level": 3, "desc": "5.5.1.2  Registration procedure for initial registration\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.5.1.2.1", "title_level": 4, "desc": "5.5.1.2.1   General\n\nThis procedure can be used by a UE for initial registration for 5GS\nservices.\n\nWhen the UE initiates the registration procedure for initial registration,\nthe UE shall indicate \"initial registration\" in the 5GS registration type\nIE. When the UE initiates the registration procedure for emergency\nservices, the UE shall indicate \"emergency registration\" in the 5GS\nregistration type IE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Initial registration initiation", "numbering": "5.5.1.2.2", "title_level": 4, "desc": "5.5.1.2.2   Initial registration initiation\n\nThe UE in state 5GMM-DEREGISTERED shall initiate the registration procedure\nfor initial registration by sending a REGISTRATION REQUEST message to the\nAMF,\n\na) when the UE performs initial registration for 5GS services;\n\nb) when the UE performs initial registration for emergency services;\n\nc) when the UE performs initial registration for SMS over NAS; and\n\nd) when the UE moves from GERAN to NG-RAN coverage or the UE moves from a\nUTRAN to NG-RAN coverage.\n\nThe UE initiates the registration procedure for initial registration by\nsending a REGISTRATION REQUEST message to the AMF, starting timer T3510. If\ntimer T3502 is currently running, the UE shall stop timer T3502. If timer\nT3511 is currently running, the UE shall stop timer T3511.\n\nIf the UE holds a valid 5G-GUTI, the UE shall indicate the 5G-GUTI in the\n5GS mobile identity IE. Otherwise, if a SUCI is available, the UE shall\ninclude the SUCI in the 5GS mobile identity IE. If the UE is initiating the\nregistration procedure for emergency services and does not hold a valid 5G-\nGUTI or SUCI, the PEI shall be included in the 5GS mobile identity IE.\n\nIf the UE is operating in the dual-registration mode and it is in EMM state\nEMM-REGISTERED, the UE shall include the UE status IE with the EMM\nregistration status set to \"UE is in EMM-REGISTERED state\".\n\nNOTE\u00a01:  Inclusion of the UE status IE with this setting corresponds to the\nindication that the UE is \"moving from EPC\" as specified in\n3GPP\u00a0TS\u00a023.502\u00a0[9].\n\nIf the last visited registered TAI is available, the UE shall include the\nlast visited registered TAI in the REGISTRATION REQUEST message.\n\nIf the UE requests the use of SMS over NAS, the UE shall include the SMS\nrequested IE in the REGISTRATION REQUEST message and set the SMS requested\nbit of the SMS requested IE to \"SMS over NAS supported\".\n\nIf the UE supports MICO mode and requests the use of MICO mode, then the UE\nshall include the MICO indication IE in the REGISTRATION REQUEST message.\n\nIf the UE wants to use the UE specific DRX parameters, the UE shall include\nthe Requested DRX parameters IE in the REGISTRATION REQUEST message.\n\nThe UE shall include the requested NSSAI containing the S-NSSAI(s)\ncorresponding to the slice(s) to which the UE wants to register and may\ninclude the mapping of the requested NSSAI which is the mapping of each S-\nNSSAI of the requested NSSAI to the S-NSSAI(s) of the configured NSSAI for\nthe HPLMN, if available, in the REGISTRATION REQUEST message. If the UE has\nallowed NSSAI or configured NSSAI for the current PLMN, the requested NSSAI\nshall be either:\n\na) the configured NSSAI for the current PLMN, or a subset thereof as\ndescribed below, if the UE has no allowed NSSAI for the current PLMN;\n\nb) the allowed NSSAI for the current PLMN, or a subset thereof as described\nbelow, if the UE has an allowed NSSAI for the current PLMN; or\n\nc) the allowed NSSAI for the current PLMN, or a subset thereof as described\nbelow, plus one or more S-NSSAIs from the configured NSSAI for which no\ncorresponding S-NSSAI is present in the allowed NSSAI and those are neither\nin the rejected NSSAI for the current PLMN nor in the rejected NSSAI for\nthe current PLMN and registration area combination.\n\nIf the UE has neither allowed NSSAI for the current PLMN nor configured\nNSSAI for the current PLMN and has a configured NSSAI not associated with a\nPLMN, the UE shall include the S-NSSAI(s) in the Requested NSSAI IE of the\nREGISTRATION REQUEST message using the configured NSSAI not associated with\na PLMN. If the UE has no allowed NSSAI for the current PLMN, no configured\nNSSAI for the current PLMN, and no configured NSSAI not associated with a\nPLMN, the UE shall not include a requested NSSAI in the REGISTRATION\nmessage.\n\nThe subset of configured NSSAI provided in the requested NSSAI consists of\none or more S-NSSAIs in the configured NSSAI applicable to the current\nPLMN, if the S-NSSAI is neither in the rejected NSSAI for the current PLMN\nnor in the rejected NSSAI for the current PLMN and registration area\ncombination.\n\nThe subset of allowed NSSAI provided in the requested NSSAI consists of one\nor more S-NSSAIs in the allowed NSSAI for the current PLMN, if the rejected\nS-NSSAI(s) is added by the configuration update procedure and the S-NSSAI\nis neither in the rejected NSSAI for the current PLMN nor in the rejected\nNSSAI for the current PLMN and registration area combination.\n\nNOTE\u00a02:  How the UE selects the subset of configured NSSAI or allowed NSSAI\nto be provided in the requested NSSAI is implementation.\n\nNOTE\u00a03:  The number of S-NSSAI(s) included in the requested NSSAI cannot\nexceed eight.\n\nIf the UE initiates an initial registration for emergency services or needs\nto prolong the established NAS signalling connection after the completion\nof the initial registration procedure (e.g. due to uplink signalling\npending), it shall set the \"follow-on request pending\" indication to 1.\n\nIf the UE supports S1 mode, the UE shall:\n\n-  set the S1 mode bit to \"S1 mode supported\" in the 5GMM capability IE of\nthe REGISTRATION REQUEST message;\n\n-  include the S1 UE network capability IE in the REGISTRATION REQUEST\nmessage; and\n\n-  if the UE supports sending an ATTACH REQUEST message containing a PDN\nCONNECTIVITY REQUEST message with request type set to \"handover\" to\ntransfer a PDU session from N1 mode to S1 mode, set the HO attach bit to\n\"attach request message containing PDN connectivity request with request\ntype set to handover to transfer PDU session from N1 mode to S1 mode\nsupported\" in the 5GMM capability IE of the REGISTRATION REQUEST message.\n\nIf the UE has one or more stored UE policy sections, the UE shall include\nthe UPSI LIST TRANSPORT message (see annex\u00a0D) in the Payload container IE\nof the REGISTRATION REQUEST message.\n\n[pic]\n\nFigure\u00a05.5.1.2.2.1: Registration procedure for initial registration\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM common procedure initiation", "numbering": "5.5.1.2.3", "title_level": 4, "desc": "5.5.1.2.3   5GMM common procedure initiation\n\nThe network may initiate 5GMM common procedures, e.g. the identification,\nauthentication and security procedures during the registration procedure,\ndepending on the information received in the REGISTRATION REQUEST message.\n\nDuring a registration procedure with 5GS registration type IE set to\n\"emergency registration\", if the AMF is configured to support emergency\nregistration for unauthenticated SUCIs, the AMF may choose to skip the\nauthentication procedure even if no 5G NAS security context is available\nand proceed directly to the execution of the security mode control\nprocedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Initial registration accepted by the network", "numbering": "5.5.1.2.4", "title_level": 4, "desc": "5.5.1.2.4   Initial registration accepted by the network\n\nDuring a registration procedure with 5GS registration type IE set to\n\"emergency registration\", the AMF shall not check for mobility and access\nrestrictions, regional restrictions or subscription restrictions, when\nprocessing the REGISTRATION REQUEST message.\n\nIf the initial registration request is accepted by the network, the AMF\nshall send a REGISTRATION ACCEPT message to the UE.\n\nThe AMF shall assign and include a TAI list as a registration area the UE\nis registered to in the REGISTRATION ACCEPT message. The UE, upon receiving\na REGISTRATION ACCEPT message, shall delete its old TAI list and store the\nreceived TAI list. If the REGISTRATION REQUEST message was received over\nnon-3GPP access, the AMF shall include only the N3GPP TAI in the TAI list.\n\nNOTE:  The N3GPP TAI is operator-specific.\n\nThe AMF may include service area restrictions in the Service area list IE\nin the REGISTRATION ACCEPT message. The UE, upon receiving a REGISTRATION\nACCEPT message with the service area restrictions shall act as described in\nsubclause\u00a05.3.5.\n\nIf the Service area list IE is not included in the REGISTRATION ACCEPT\nmessage, any tracking area in the registered PLMN and its equivalent\nPLMN(s) is considered as an allowed tracking area as described in\nsubclause\u00a05.3.5.\n\nThe AMF shall include the LADN information in the LADN information IE of\nthe REGISTRATION ACCEPT message, if there are valid LADN service area(s)\nfor the subscribed DNN(s) of the UE in the current registration area. The\nUE, upon receiving the REGISTRATION ACCEPT message with the LADN\ninformation, shall store the received LADN information.\n\nThe 5G-GUTI reallocation may be part of the initial registration procedure.\nWhen the REGISTRATION REQUEST message includes the SUCI or PEI, or the AMF\nconsiders the 5G-GUTI provided by the UE is invalid, or the 5G-GUTI\nprovided by the UE was assigned by another AMF, the AMF shall allocate a\nnew 5G-GUTI to the UE. The AMF shall include in the REGISTRATION ACCEPT\nmessage the new assigned 5G-GUTI together with the assigned TAI list. In\nthis case the AMF shall start timer T3550 and enter state 5GMM-COMMON-\nPROCEDURE-INITIATED as described in subclause\u00a05.1.3.2.3.3.\n\nThe AMF shall include the MICO indication IE in the REGISTRATION ACCEPT\nmessage only if the MICO indication IE was included in the REGISTRATION\nREQUEST message, the AMF supports and accepts the use of MICO mode. If the\nAMF supports and accepts the use of MICO mode, the AMF may indicate \"all\nPLMN registration area allocated\" in the MICO indication IE in the\nREGISTRATION ACCEPT message. If \"all PLMN registration area allocated\" is\nindicated in the MICO indication IE, the AMF shall not assign and include\nthe TAI list in the REGISTRATION ACCEPT message. If the REGISTRATION ACCEPT\nmessage included an MICO indication IE indicating \"all PLMN registration\narea allocated\", the UE shall treat all TAIs in the current PLMN as a\nregistration area and delete its old TAI list.\n\nThe AMF shall include the T3512 value IE in the REGISTRATION ACCEPT message\nonly if the REGISTRATION REQUEST message was sent over the 3GPP access.\n\nThe AMF shall include the non-3GPP de-registration timer value IE in the\nREGISTRATION ACCEPT message only if the REGISTRATION REQUEST message was\nsent for the non-3GPP access.\n\nIf the REGISTRATION ACCEPT message included a T3512 value IE, the UE shall\nuse the value in the T3512 value IE as periodic registration update timer\n(T3512).\n\nIf the REGISTRATION ACCEPT message included a non-3GPP de-registration\ntimer value IE, the UE shall use the value in non-3GPP de-registration\ntimer value IE as non-3GPP de-registration timer.\n\nIf the REGISTRATION ACCEPT message contained a 5G-GUTI, the UE shall return\na REGISTRATION COMPLETE message to the AMF to acknowledge the received 5G-\nGUTI, stop timer T3519 if running, and delete any stored SUCI.\n\nUpon receiving a REGISTRATION COMPLETE message, the AMF shall stop timer\nT3550 and change to state 5GMM-REGISTERED. The 5G-GUTI, if sent in the\nREGISTRATION ACCEPT message, shall be considered as valid.\n\nIf the REGISTRATION REQUEST message contained the SMS requested IE with the\nSMS requested bit set to \"SMS over NAS supported\", and SMSF selection is\nsuccessful, then the AMF shall send the REGISTRATION ACCEPT message after\nthe SMSF has confirmed that the activation of the SMS service was\nsuccessful. When sending the REGISTRATION ACCEPT message, the AMF shall:\n\na) include the SMS allowed IE in the REGISTRATION ACCEPT message with the\nSMS allowed bit of the SMS allowed IE set to \"SMS over NAS allowed\" if the\nUE has set the SMS requested bit of the SMS requested IE to \"SMS over NAS\nsupported\" and the network allows the SMS delivery over NAS; and\n\nb) store the SMSF address and the contents of the SMS allowed IE in the UE\n5GMM context, and consider the UE available for SMS.\n\nIf SMSF selection in the AMF or SMS activation via the SMSF is not\nsuccessful, then the AMF shall not include the SMS allowed IE in the\nREGISTRATION ACCEPT message. If the AMF does not allow the use of SMS over\nNAS, then the AMF shall not include the SMS allowed IE in the REGISTRATION\nACCEPT message.\n\nIf the AMF includes an SMS allowed IE in the REGISTRATION ACCEPT message\nand the UE is also registered over another access to the same PLMN, the UE\nconsiders the new value indicated by the SMS allowed IE as applicable for\nboth accesses over which the UE is registered.\n\nThe AMF shall include the allowed NSSAI for the current PLMN and may\ninclude the mapping of each S-NSSAI of the allowed NSSAI to the S-NSSAI(s)\nof the configured NSSAI for the HPLMN contained in the requested NSSAI from\nthe UE if available, in the REGISTRATION ACCEPT message if the UE included\nthe requested NSSAI in the REGISTRATION REQUEST message and the AMF allows\none or more S-NSSAIs in the requested NSSAI. The AMF may also include\nrejected NSSAI in the REGISTRATION ACCEPT message. Rejected NSSAI contains\nS-NSSAI(s) which was included in the requested NSSAI but rejected by the\nnetwork associated with rejection cause(s).\n\nThe AMF may include a new configured NSSAI for the current PLMN in the\nREGISTRATION ACCEPT message if the REGISTRATION REQUEST message did not\ninclude the requested NSSAI, or the REGISTRATION REQUEST message included\nthe requested NSSAI containing an S-NSSAI that is not valid in the serving\nPLMN. If a new configured NSSAI for the current PLMN is included, the AMF\nmay also include the mapping of the configured NSSAI for the current PLMN\nto the configured NSSAI for the HPLMN in the REGISTRATION ACCEPT message.\n\nThe UE receiving the rejected NSSAI in the REGISTRATION ACCEPT message\ntakes the following actions based on the rejection cause in the rejected\nNSSAI:\n\n\"S-NSSAI not available in the current PLMN\"\n\n   The UE shall add the rejected S-NSSAI(s) in the rejected NSSAI for the\ncurrent PLMN as specified in subclause\u00a04.6.2.2 and not attempt to use this\nS-NSSAI in the current PLMN until switching off the UE or the UICC\ncontaining the USIM is removed.\n\n\"S-NSSAI not available in the current registration area\"\n\n   The UE shall add the rejected S-NSSAI(s) in the rejected NSSAI for the\ncurrent PLMN and registration area combination as specified in\nsubclause\u00a04.6.2.2 and not attempt to use this S-NSSAI in the current\nregistration area until switching off the UE, the UE moving out of the\ncurrent registration area or the UICC containing the USIM is removed.\n\nIf the UE did not include the requested NSSAI in the REGISTRATION REQUEST\nmessage or none of the requested NSSAI are present in the subscribed S-\nNSSAIs, and one or more subscribed S-NSSAIs (containing one or more S-\nNSSAIs each of which may be associated with a new S-NSSAI) marked as\ndefault are available, the AMF shall put the subscribed S-NSSAIs marked as\ndefault in the allowed NSSAI of the REGISTRATION ACCEPT message. The AMF\nshall determine a registration area such that all S-NSSAIs of the allowed\nNSSAI are available in the registration area.\n\nIf the REGISTRATION ACCEPT message contains the allowed NSSAI, then the UE\nshall store the included allowed NSSAI together with the PLMN identity of\nthe registered PLMN and the registration area as specified in\nsubclause\u00a04.6.2.2.\n\nIf the REGISTRATION ACCEPT message contains a configured NSSAI IE with a\nnew configured NSSAI for the current PLMN and optionally the mapping of the\nconfigured NSSAI for the current PLMN to the configured NSSAI for the\nHPLMN, the UE shall store the contents of the configured NSSAI IE as\nspecified in subclause\u00a04.6.2.2.\n\nIf the UE included S1 mode supported indication in the REGISTRATION REQUEST\nmessage, the AMF supporting inter-system change with EPS shall set the IWK\nN26 bit to either:\n\na) \"interworking without N26 not supported\" if the AMF does not support\ninterworking procedures without N26 interface; or\n\nb) \"interworking without N26 supported\" if the AMF supports interworking\nprocedures without N26 interface\n\nin the 5GS network feature support IE in the REGISTRATION ACCEPT message.\n\nThe UE supporting S1 mode shall operate in the mode for inter-system\ninterworking with EPS as follows:\n\na) if the IWK N26 bit in the 5GS network feature support IE is set to\n\"interworking without N26 not supported\", the UE shall operate in single-\nregistration mode;\n\nb) if the IWK N26 bit in the 5GS network feature support IE is set to\n\"interworking without N26 supported\" and the UE supports dual-registration\nmode, the UE may operate in dual-registration mode; or\n\nNOTE:  The registration mode used by the UE is implementation dependent.\n\nc) if the IWK N26 bit in the 5GS network feature support IE is set to\n\"interworking without N26 supported\" and the UE only supports single-\nregistration mode, the UE shall operate in single-registration mode.\n\nThe UE shall treat the received interworking without N26 supported\nindication for inter-system change with EPS as valid in the entire PLMN and\nits equivalent PLMN(s).\n\nThe network informs the UE about the support of specific features, such as\nIMS voice over PS session, emergency services or emergency services\nfallback, in the 5GS network feature support information element. In a UE\nwith IMS voice over PS session capability, the IMS voice over PS session\nindicator, the emergency service support indicator, and the emergency\nservices fallback indicator shall be provided to the upper layers. The\nupper layers take the IMS voice over PS session indicator into account when\nselecting the access domain for voice sessions or calls. When initiating an\nemergency call, the upper layers also take the IMS voice over PS session\nindicator, the emergency service support indicator, and the emergency\nservices fallback indicator into account for the access domain selection.\n\nThe AMF shall set the EMF bit in the 5GS network feature support IE to:\n\na) \"Emergency services fallback supported in NR connected to 5GCN and E-\nUTRA connected to 5GCN\" if the network supports the emergency services\nfallback procedure when the UE is in an NR cell connected to 5GCN or an E-\nUTRA cell connected to 5GCN;\n\nb) \"Emergency services fallback supported in NR connected to 5GCN only\" if\nthe network supports the emergency services fallback procedure when the UE\nis in an NR cell connected to 5GCN and does not support the emergency\nservices fallback procedure when the UE is in an E-UTRA cell connected to\n5GCN;\n\nc) \"Emergency services fallback supported in E-UTRA connected to 5GCN only\"\nif the network supports the emergency services fallback procedure when the\nUE is in an E-UTRA cell connected to 5GCN and does not support the\nemergency services fallback procedure when the UE is in an NR cell\nconnected to 5GCN; or\n\nd) \"Emergency services fallback not supported\" if network does not support\nthe emergency services fallback procedure when the UE is in any cell\nconnected to 5GCN.\n\nThe network informs the UE that the use of access identity 1 is valid in\nthe RPLMN or equivalent PLMN by setting the MPS indicator bit of the 5GS\nnetwork feature support IE to \"Access identity 1 valid in RPLMN or\nequivalent PLMN\", in the REGISTRATION ACCEPT message. Based on operator\npolicy, the AMF sets the MPS indicator bit in the REGISTRATION ACCEPT\nmessage based on the MPS priority information in the user\u2019s subscription\ncontext obtained from the UDM.\n\nUpon receiving a REGISTRATION ACCEPT message with the MPS indicator bit set\nto \"Access identity 1 valid in RPLMN or equivalent PLMN\", if the UE is not\nin the country of its HPLMN, the UE shall act as a UE with access identity\n1 configured for MPS as described in subclause\u00a04.5.2, in all NG-RAN TAs of\nthe registered PLMN and its equivalent PLMNs. The MPS indicator bit in the\n5GS network feature support IE provided in the REGISTRATION ACCEPT message\nis valid until the UE receives a REGISTRATION ACCEPT message with the MPS\nindicator bit set to \"Access identity 1 not valid in RPLMN or equivalent\nPLMN\" or until the UE selects a non-equivalent PLMN. Access identity 1 is\nonly applicable while the UE is in N1 mode.\n\nIf the UE has indicated \"follow-on request pending\" in REGISTRATION REQUEST\nmessage, or the network has downlink signalling pending, the AMF shall not\nimmediately release the NAS signalling connection after the completion of\nthe registration procedure.\n\nIf the Requested DRX Parameters IE was included in the REGISTRATION REQUEST\nmessage, the AMF shall include the UE specific DRX parameters IE in the\nREGISTRATION ACCEPT message. The AMF may set the UE specific DRX parameters\nIE based on the received Requested DRX Parameters IE and operator policy if\navailable.\n\nIf:\n\na) the UE\u2019s USIM is configured with indication that the UE is to receive\nthe Transparent container IE, the Transparent container IE is not included\nin the REGISTRATION ACCEPT message or the Transparent container IE does not\nsuccessfully pass the integrity check (see 3GPP\u00a0TS\u00a033.501\u00a0[24]); and\n\nb) if the UE attempts obtaining service on another PLMNs as specified in\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C;\n\nthen the UE shall locally release the established N1 NAS signalling\nconnection.\n\nIf the REGISTRATION ACCEPT message includes the Transparent container IE\nand the Transparent container IE successfully passes the integrity check\n(see 3GPP\u00a0TS\u00a033.501\u00a0[24]):\n\na) the UE shall proceed with the behavior as specified in\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C; and\n\nb) if the UE attempts obtaining service on another PLMNs as specified in\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C, then the UE may locally release the established\nN1 NAS signalling connection, otherwise the UE shall send a REGISTRATION\nCOMPLETE message. If an acknowledgement is requested in the Transparent\ncontainer IE of the REGISTRATION ACCEPT message, the UE acknowledgement is\nincluded in the Transparent container IE of the REGISTRATION COMPLETE\nmessage.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Initial registration not accepted by the network", "numbering": "5.5.1.2.5", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Initial registration for emergency services not accepted by", "numbering": "5.5.1.2.6", "title_level": 4, "desc": "5.5.1.2.5   Initial registration not accepted by the network\n\nIf the initial registration request cannot be accepted by the network, the\nAMF shall send a REGISTRATION REJECT message to the UE including an\nappropriate 5GMM cause value.\n\nIf the initial registration request is rejected due to general NAS level\nmobility management congestion control, the network shall set the 5GMM\ncause value to #22 \"congestion\" and assign a back-off timer T3346.\n\nThe UE shall take the following actions depending on the 5GMM cause value\nreceived in the REGISTRATION REJECT message.\n\n#3 (Illegal UE);\n\n#6 (Illegal ME); or\n\n#7 (5GS services not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall\nconsider the USIM as invalid for 5GS services until switching off or the\nUICC containing the USIM is removed. The UE shall enter the state 5GMM-\nDEREGISTERED.\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the attach request procedure is\nrejected with the EMM cause with the same value. The USIM shall be\nconsidered as invalid also for non-EPS services until switching off or the\nUICC containing the USIM is removed.\n\n#11  (PLMN not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall delete\nthe list of equivalent PLMNs and reset the registration attempt counter and\nstore the PLMN identity in the \"forbidden PLMN list\". The UE shall perform\na PLMN selection according to 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n   If the UE is operating in single-registration mode, the UE shall in\naddition delete any 4G-GUTI, last visited registered TAI, TAI list and eKSI\nas specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the attach request\nprocedure is rejected with the EMM cause with the same value.\n\n#12  (Tracking area not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. Additionally, the UE\nshall reset the registration attempt counter.\n\n   The UE shall store the current TAI in the list of \"5GS forbidden\ntracking areas for regional provision of service\" and enter the state 5GMM-\nDEREGISTERED.LIMITED-SERVICE.\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the attach request procedure is\nrejected with the EMM cause with the same value.\n\n#13  (Roaming not allowed in this tracking area).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. Additionally, the UE\nshall delete the list of equivalent PLMNs and reset the registration\nattempt counter.\n\n   The UE shall store the current TAI in the list of \"5GS forbidden\ntracking areas for roaming\" and enter the state 5GMM-DEREGISTERED.LIMITED-\nSERVICE or optionally 5GMM-DEREGISTERED.PLMN-SEARCH. The UE shall perform a\nPLMN selection according to 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the attach request procedure is\nrejected with the EMM cause with the same value.\n\n#22  (Congestion).\n\n   If the T3346 value IE is present in the REGISTRATION REJECT message and\nthe value indicates that this timer is neither zero nor deactivated, the UE\nshall proceed as described below; otherwise it shall be considered as an\nabnormal case and the behaviour of the UE for this case is specified in\nsubclause\u00a05.5.1.2.7.\n\n   The UE shall abort the initial registration procedure, set the 5GS\nupdate status to 5U2 NOT UPDATED and enter state 5GMM-\nDEREGISTERED.ATTEMPTING-REGISTRATION.\n\n   The UE shall stop timer T3346 if it is running.\n\n   If the REGISTRATION REJECT message is integrity protected, the UE shall\nstart timer T3346 with the value provided in the T3346 value IE.\n\n   If the REGISTRATION REJECT message is not integrity protected, the UE\nshall start timer T3346 with a random value from the default range\nspecified in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n   The UE stays in the current serving cell and applies the normal cell\nreselection process. The initial registration procedure is started if still\nneeded when timer T3346 expires or is stopped.\n\n#27  (N1 mode not allowed).\n\n   The UE capable of S1 mode shall disable the N1 mode capability for both\n3GPP access and non-3GPP access (see subclause\u00a04.9).\n\nOther values are considered as abnormal cases. The behaviour of the UE in\nthose cases is specified in subclause\u00a05.5.1.2.7.\n\n\n5.5.1.2.6   Initial registration for emergency services not accepted by the\n         network\n\nUpon receiving the REGISTRATION REJECT message including 5GMM cause #5 \"PEI\nnot accepted\", the UE shall enter the state 5GMM-DEREGISTERED.NO-SUPI.\n\nUpon receiving the REGISTRATION REJECT message including 5GMM cause value\nwhich is not #5 \"PEI not accepted\", the UE shall perform the actions as\ndescribed in subclause\u00a05.5.1.2.5 with the following addition: the UE shall\ninform the upper layers of the failure of the procedure.\n\nNOTE\u00a01:  This can result in the upper layers requesting implementation\nspecific mechanisms, e.g. procedures specified in 3GPP\u00a0TS\u00a024.229\u00a0[14] can\nresult in the emergency call being attempted to another IP-CAN.\n\nIf the initial registration request for emergency services fails due to\nabnormal cases, the UE shall perform the actions as described in\nsubclause\u00a05.5.1.2.7 and inform the upper layers of the failure to access\nthe network or the failure of the procedure.\n\nNOTE\u00a02:  This can result in the upper layers requesting other\nimplementation specific mechanisms, e.g. procedures specified in\n3GPP\u00a0TS\u00a024.229\u00a0[14] can result in the emergency call being attempted to\nanother IP-CAN.\n\nIn a shared network, upon receiving the REGISTRATION REJECT message, the UE\nshall perform the actions as described in subclause\u00a05.5.1.2.5, and shall:\n\na) inform the upper layers of the failure of the procedure; or\n\nNOTE\u00a03:  The upper layers may request implementation specific mechanisms,\ne.g. procedures specified in 3GPP\u00a0TS\u00a024.229\u00a0[14] that can result in the\nemergency call being attempted to another IP-CAN.\n\nb) attempt to perform a PLMN selection in the shared network and initiate\nan initial registration for emergency services to the selected PLMN.\n\nIn a shared network, if the initial registration request for emergency\nservices fails due to abnormal cases, the UE shall perform the actions as\ndescribed in subclause\u00a05.5.1.2.7 and shall:\n\na) inform the upper layers of the failure of the procedure; or\n\nNOTE\u00a04:  The upper layers may request implementation specific mechanisms,\ne.g. procedures specified in 3GPP\u00a0TS\u00a024.229\u00a0[14] that can result in the\nemergency call being attempted to another IP-CAN.\n\nb) attempt the initial registration for emergency services to another PLMN\nin the shared network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.5.1.2.7", "title_level": 4, "desc": "5.5.1.2.7   Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Timer T3346 is running.\n\n   The UE shall not start the registration procedure for initial\nregistration unless:\n\n1) the UE is a UE configured for high priority access in selected PLMN; or\n\n2) the UE needs to perform the registration procedure for initial\nregistration for emergency services.\n\n   The UE stays in the current serving cell and applies the normal cell\nreselection process.\n\nNOTE\u00a01:  It is considered an abnormal case if the UE needs to initiate a\nregistration procedure for initial registration while timer T3346 is\nrunning independent on whether timer T3346 was started due to an abnormal\ncase or a non-successful case.\n\nb) The lower layers indicate that the access attempt is barred.\n\n   The UE shall not start the initial registration procedure. The UE stays\nin the current serving cell and applies the normal cell reselection\nprocess.\n\n   The initial registration procedure is started, if still needed, when the\nlower layers indicate that the barring is alleviated for the access\ncategory with which the access attempt was associated.\n\nEditor's note:  Abnormal case handling for N1 NAS signalling connection\nestablishment rejected by the network with \"Extended wait time\" received\nfrom lower layers is FFS.\n\nc) T3510 timeout\n\n   The UE shall abort the registration procedure for initial registration\nand the NAS signalling connection, if any, shall be released locally if the\ninitial registration request is not for emergency services, the\nregistration attempt counter shall be incremented, unless it was already\nset to 5.\n\nd) REGISTRATION REJECT message, other 5GMM cause values than those treated\nin subclause\u00a05.5.1.2.5, and cases of 5GMM cause value #22, if considered as\nabnormal cases according to subclause\u00a05.5.1.2.5.\n\n   If the registration request is not an initial registration request for\nemergency services, upon reception of the 5GMM causes #95, #96, #97, #99\nand #111 the UE should set the registration attempt counter to 5.\n\nFor the cases c and d the UE shall proceed as follows:\n\n   If the registration attempt counter is less than 5:\n\n-  if the initial registration request is not for emergency services, timer\nT3511 is started and the state is changed to 5GMM-DEREGISTERED.ATEMPTING-\nREGISTRATION. When timer T3511 expires the registration procedure for\ninitial registration shall be restarted, if still required.\n\n   If the registration attempt counter is equal to 5\n\n-  the UE shall delete 5G-GUTI, TAI list, last visited TAI, list of\nequivalent PLMNs and ngKSI, start timer T3502 and shall set the 5GS update\nstatus to 5U2 NOT UPDATED. The state is changed to 5GMM-\nDEREGISTERED.ATTEMPTING-REGISTRATION or optionally to 5GMM-\nDEREGISTERED.PLMN-SEARCH in order to perform a PLMN selection according to\n3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n-  if the UE is operating in single registration mode:\n\n-  the UE shall in addition handle the EPS update status, EMM parameters,\nEMM state as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the abnormal cases when\nan EPS attach procedure fails and the tracking area attempt counter is\nequal to 5; and\n\n-  the UE shall attempt to select E-UTRAN radio access technology and\nproceed with appropriate EMM specific procedures. Additionally, The UE may\ndisable N1 mode capability as specified in subclause\u00a04.9.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.5.1.2.8", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration procedure for mobility and periodic", "numbering": "5.5.1.3", "title_level": 3, "desc": "5.5.1.2.8   Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Lower layer failure\n\n   If a lower layer failure occurs before the REGISTRATION COMPLETE message\nhas been received from the UE, the AMF shall locally abort the registration\nprocedure for initial registration, enter state 5GMM-DEREGISTERED and shall\nnot resend the REGISTRATION ACCEPT message. If a new 5G-GUTI was assigned\nto the UE in the registration procedure for initial registration, the AMF\nshall consider both the old and the new 5G-GUTI as valid until the old 5G-\nGUTI can be considered as invalid by the AMF or the 5GMM context which has\nbeen marked as deregistered in the AMF is released.\n\n   If the old 5G-GUTI was allocated by an AMF other than the current AMF,\nthe current AMF does not need to retain the old 5G-GUTI. If the old 5G-GUTI\nis used by the UE in a subsequent REGISTRATION REQUEST message, the network\nmay use the identification procedure to request the UE's SUPI.\n\nb) Protocol error\n\n   If the REGISTRATION REQUEST message is received with a protocol error,\nthe AMF shall return a REGISTRATION REJECT message with one of the\nfollowing 5GMM cause values:\n\n#96  invalid mandatory information;\n\n#99  information element non-existent or not implemented;\n\n#100 conditional IE error; or\n\n#111 protocol error, unspecified.\n\nc) T3550 time-out\n\n   On the first expiry of the timer, the AMF shall retransmit the\nREGISTRATION ACCEPT message and shall reset and restart timer T3550.\n\n   This retransmission is repeated four times, i.e. on the fifth expiry of\ntimer T3550, the registration procedure for initial registration shall be\naborted and the AMF enters state 5GMM-DEREGISTERED. If a new 5G-GUTI was\nallocated in the REGISTRATION ACCEPT message, the AMF shall consider both\nthe old and the new 5G-GUTI as valid until the old 5G-GUTI can be\nconsidered as invalid by the AMF or the 5GMM context which has been marked\nas de-registered in the AMF is released. If the old 5G-GUTI was allocated\nby an AMF other than the current AMF, the current AMF does not need to\nretain the old 5G-GUTI.\n\n   If the old 5G-GUTI is used by the UE in a subsequent REGISTRATION\nREQUEST message, the AMF acts as specified for case\u00a0a above.\n\nd) REGISTRATION REQUEST message received after the REGISTRATION ACCEPT\nmessage has been sent and before the REGISTRATION COMPLETE message is\nreceived.\n\n1) If one or more of the information elements in the REGISTRATION REQUEST\nmessage differ from the ones received within the previous REGISTRATION\nREQUEST message, the previously initiated the registration procedure for\ninitial registration shall be aborted if the REGISTRATION COMPLETE message\nhas not been received and the new registration procedure for initial\nregistration shall be progressed; or\n\n2) if the information elements do not differ, then the REGISTRATION ACCEPT\nmessage shall be resent and the timer T3550 shall be restarted if an\nREGISTRATION COMPLETE message is expected. In that case, the retransmission\ncounter related to T3550 is not incremented.\n\ne) More than one REGISTRATION REQUEST message with 5GS registration type IE\nset to \"initial registration\" received and no REGISTRATION ACCEPT or\nREGISTRATION REJECT message has been sent.\n\n1) If one or more of the information elements in the REGISTRATION REQUEST\nmessage with 5GS registration type IE set to \"initial registration\" differs\nfrom the ones received within the previous REGISTRATION REQUEST message\nwith 5GS registration type IE set to \"initial registration\", the previously\ninitiated the registration procedure for initial registration shall be\naborted and the new the registration procedure for initial registration\nshall be executed;\n\n2) if the information elements do not differ, then the network shall\ncontinue with the previous the registration procedure for initial\nregistration and shall ignore the second REGISTRATION REQUEST message.\n\nf) REGISTRATION REQUEST message with 5GS registration type IE set to\n\"initial registration\" received in state 5GMM-REGISTERED.\n\n   If an REGISTRATION REQUEST message with 5GS registration type IE set to\n\"initial registration\" is received in state 5GMM-REGISTERED the network may\ninitiate the 5GMM common procedures; if it turned out that the REGISTRATION\nREQUEST message was sent by a UE that has already been registered, the 5GMM\ncontext, if any, are deleted and the new REGISTRATION REQUEST is\nprogressed.\n\ng) REGISTRATION REQUEST message with 5GS registration type IE set to\n\"mobility registration updating\" or \"periodic registration updating\"\nreceived before REGISTRATION COMPLETE message.\n\n   Timer T3550 shall be stopped. The allocated 5G-GUTI in the registration\nprocedure for initial registration shall be considered as valid and the\nregistration procedure for mobility and periodic update shall be rejected\nwith the 5GMM cause #10 \"implicitly de-registered\" as described in\nsubclause\u00a05.5.1.3.5.\n\nh) DEREGISTRATION REQUEST message received before REGISTRATION COMPLETE\nmessage.\n\n   The AMF shall abort the registration procedure for initial registration\nand shall progress the de-registration procedure as described in\nsubclause\u00a05.5.2.2.\n\n\n5.5.1.3  Registration procedure for mobility and periodic registration\n         update\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.5.1.3.1", "title_level": 4, "desc": "5.5.1.3.1   General\n\nThis procedure is used by a UE for mobility and periodic registration\nupdate of 5GS services. This procedure, when used for periodic registration\nupdate of 5GS service, is performed only in 3GPP access.\n\nThe periodic registration update procedure of 5GS services is controlled in\nthe UE by timer T3512. When timer T3512 expires, the registration procedure\nfor mobility and periodic registration area updating is started. Start and\nreset of timer T3512 is described in subclause\u00a010.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mobility and periodic registration update initiation", "numbering": "5.5.1.3.2", "title_level": 4, "desc": "5.5.1.3.2   Mobility and periodic registration update initiation\n\nThe UE in state 5GMM-REGISTERED shall initiate the registration procedure\nfor mobility and periodic registration update by sending a REGISTRATION\nREQUEST message to the AMF,\n\na) when the UE detects entering a tracking area that is not in the list of\ntracking areas that the UE previously registered in the AMF;\n\nb) when the periodic registration updating timer T3512 expires;\n\nc) when requested by the CONFIGURATION UPDATE COMMAND message;\n\nd) when the UE in state 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE\neither receives a paging or the UE receives a NOTIFICATION message with\naccess type indicating 3GPP access over the non-3GPP access for PDU\nsessions associated with 3GPP access;\n\ne) upon inter-system change from S1 mode to N1 mode;\n\nf) when the UE receives an indication of \"RRC Connection failure\" from the\nlower layers and has no signalling or user uplink data pending (i.e. when\nthe lower layer requests NAS signalling connection recovery);\n\ng) when the UE changes the 5GMM capability or the S1 UE network capability\nor both;\n\nh) when the UE's usage setting changes;\n\n  i) when the UE needs to change the slice(s) it is currently registered\n    to;\n\n  j) when the UE changes the UE specific DRX parameters;\n\n  k) when the UE in state 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE\n    receives a request from the upper layers to establish a PDU session for\n    emergency services; or\n\nl) when the UE needs to register for SMS over NAS, indicate a change in the\nrequirements to use SMS over NAS, or de-register from SMS over NAS.\n\nIf item b) is the only reason for initiating the registration procedure for\nmobility and periodic registration update, the UE shall indicate \"periodic\nregistration updating\" in the 5GS registration type IE; otherwise the UE\nshall indicate \"mobility registration updating\".\n\nIf the UE indicates \"mobility registration updating\" in the 5GS\nregistration type IE and the UE supports S1 mode, the UE shall:\n\n-  set the S1 mode bit to \"S1 mode supported\" in the 5GMM capability IE of\nthe REGISTRATION REQUEST message;\n\n-  include the S1 UE network capability IE in the REGISTRATION REQUEST\nmessage; and\n\n-  if the UE supports sending an ATTACH REQUEST message containing a PDN\nCONNECTIVITY REQUEST message with request type set to \"handover\" to\ntransfer a PDU session from N1 mode to S1 mode, set the HO attach bit to\n\"attach request message containing PDN connectivity request with request\ntype set to handover to transfer PDU session from N1 mode to S1 mode\nsupported\" in the 5GMM capability IE of the REGISTRATION REQUEST message.\n\nIf the UE operating in the single-registration mode performs inter-system\nchange from S1 mode to N1 mode and has one or more stored UE policy\nsections, the UE shall include the UPSI LIST TRANSPORT message (see\nannex\u00a0D) in the Payload container IE of the REGISTRATION REQUEST message.\n\nThe UE in state 5GMM-REGISTERED shall initiate the registration procedure\nfor mobility and periodic update by sending a REGISTRATION REQUEST message\nto the AMF when the UE needs to request the use of SMS over NAS transport\nor the current requirements to use SMS over NAS transport change in the UE.\nThe UE shall include the SMS requested IE in the REGISTRATION REQUEST\nmessage as specified in subclause\u00a05.5.1.2.2.\n\nWhen initiating a registration procedure for mobility and periodic\nregistration update for periodic registration update of 5GS services (i.e.\nthe 5GS registration type IE is set to \"periodic registration updating\")\nand the requirements to use SMS over NAS have not changed in the UE, the UE\nshall not include the SMS requested IE in the REGISTRATION REQUEST message.\n\nIf the UE no longer requires the use of SMS over NAS, then the UE shall\ninclude the SMS requested IE in the REGISTRATION REQUEST message with the\nSMS requested bit set to \"SMS over NAS not supported\".\n\nAfter sending the REGISTRATION REQUEST message to the AMF the UE shall\nstart timer T3510. If timer T3502 is currently running, the UE shall stop\ntimer T3502. If timer T3511 is currently running, the UE shall stop timer\nT3511.\n\nIf the last visited registered TAI is available, the UE shall include the\nlast visited registered TAI in the REGISTRATION REQUEST message.\n\nThe UE shall handle the 5GS mobility identity IE in the REGISTRATION\nREQUEST message as follows:\n\na) if the UE is operating in the single-registration mode, performs inter-\nsystem change from S1 mode to N1 mode, and the UE holds a valid 4G-GUTI,\nthe UE shall include the 5G-GUTI mapped from the 4G-GUTI as specified in\n3GPP\u00a0TS\u00a023.003\u00a0[4] in the 5GS mobility identity IE. Additionally, if the UE\nholds a valid 5G-GUTI, the UE shall include the 5G-GUTI in the Additional\nGUTI IE in the REGISTRATION REQUEST message; and\n\nb) for all other cases, if the UE holds a valid 5G-GUTI, the UE shall\nindicate the 5G-GUTI in the 5GS mobile identity IE.\n\nIf the UE supports MICO mode and requests the use of MICO mode, then the UE\nshall include the MICO indication IE in the REGISTRATION REQUEST message.\n\nIf the UE wants to change the UE specific DRX parameters, the UE shall\ninclude the Requested DRX parameters IE in the REGISTRATION REQUEST\nmessage.\n\nIf the UE is initiating the registration procedure for mobility and\nperiodic registration update, the UE may include the Uplink data status IE\nto indicate which PDU session(s) have pending user data to be sent. If the\nUE has one or more active always-on PDU sessions and the user-plane\nresources for these PDU sessions are not established, the UE shall include\nthe Uplink data status IE and indicate that the UE has pending user data to\nbe sent for those PDU sessions. If the UE is located outside the LADN\nservice area, the UE shall not include the PDU session for LADN in the\nUplink data status IE.\n\nWhen the registration procedure for mobility and periodic registration\nupdate is initiated in 5GMM-IDLE mode, the UE may include a PDU session\nstatus IE in the REGISTRATION REQUEST message, indicating which PDU\nsessions associated with the access type the REGISTRATION REQUEST message\nis sent over are active in the UE.\n\nIf the UE received a paging message with the access type indicating non-\n3GPP access, the UE shall include the Allowed PDU session status IE in the\nREGISTRATION REQUEST message indicating the PDU session(s) that the UE\nallows to re-establish over 3GPP access.\n\nIf the UE operating in the single-registration mode performs inter-system\nchange from S1 mode to N1 mode, the UE:\n\na) shall include the UE status IE with the EMM registration status set to\n\"UE is in EMM-REGISTERED state\" in the REGISTRATION REQUEST message;\n\nNOTE\u00a01:  Inclusion of the UE status IE with this setting corresponds to the\nindication that the UE is \"moving from EPC\" as specified in\n3GPP\u00a0TS\u00a023.502\u00a0[9], subclause\u00a04.11.1.3.3 and 4.11.2.3.\n\nb) may include the PDU session status IE in the REGISTRATION REQUEST\nmessage indicating the status of the PDU session(s) mapped during the inter-\nsystem change from S1 mode to N1 mode from the PDN connection(s) for which\nthe EPS indicated that interworking to 5GS is supported, if any (see\nsubclause\u00a06.1.4.1); and\n\nc) shall include a TRACKING AREA UPDATE REQUEST message as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] in the EPS NAS message container IE in the REGISTRATION\nREQUEST message.\n\nIf the UE operating in the single-registration mode performs inter-system\nchange from S1 mode to N1 mode and the UE has at least one PDN connection\nwith active EPS bearer context(s) for which interworking to 5GS is\nsupported as specified in subclause\u00a06.1.4.1, the UE shall include the S-\nNSSAI(s) associated with the established PDN connection(s) for which\ninterworking to 5GS is supported in the Requested NSSAI IE of the\nREGISTRATION REQUEST message.\n\nThe UE shall include the requested NSSAI containing the S-NSSAI(s)\ncorresponding to the slices to which the UE wants to register and may\ninclude the mapping of requested NSSAI which is the mapping of each S-NSSAI\nof the requested NSSAI to the S-NSSAI(s) of the configured NSSAI for the\nHPLMN, if available, in the REGISTRATION REQUEST message. If the UE has\nallowed NSSAI or configured NSSAI for the current PLMN, the requested NSSAI\nshall be either:\n\na) the configured NSSAI for the current PLMN, or a subset thereof as\ndescribed below, if the UE has no allowed NSSAI for the current PLMN;\n\nb) the allowed NSSAI for the current PLMN, or a subset thereof as described\nbelow, if the UE has an allowed NSSAI for the current PLMN; or\n\nc) the allowed NSSAI for the current PLMN, or a subset thereof as described\nbelow, plus one or more S-NSSAIs from the configured NSSAI for which no\ncorresponding S-NSSAI is present in the allowed NSSAI and those are neither\nin the rejected NSSAI for the current PLMN nor in the rejected NSSAI for\nthe current PLMN and registration area combination.\n\nIf the UE has neither allowed NSSAI for the current PLMN nor configured\nNSSAI for the current PLMN and has a configured NSSAI not associated with a\nPLMN, the UE shall include the S-NSSAI(s) in the Requested NSSAI IE of the\nREGISTRATION REQUEST message using the configured NSSAI not associated with\na PLMN. If the UE has no allowed NSSAI for the current PLMN, no configured\nNSSAI for the current PLMN, and no configured NSSAI not associated with a\nPLMN, the UE shall not include a requested NSSAI in the REGISTRATION\nREQUEST message.\n\nThe subset of configured NSSAI provided in the requested NSSAI consists of\none or more S-NSSAIs in the configured NSSAI applicable to this PLMN, if\nthe S-NSSAI is neither in the rejected NSSAIs for the current PLMN nor in\nthe rejected NSSAI for the current PLMN and registration area combination.\n\nThe subset of allowed NSSAI provided in the requested NSSAI consists of one\nor more S-NSSAIs in the allowed NSSAI for this PLMN, if the rejected S-\nNSSAI(s) is added by the configuration update procedure and the S-NSSAI is\nneither in the rejected NSSAI for the current PLMN nor in the rejected\nNSSAI for the current PLMN and registration area combination.\n\nNOTE\u00a02:  How the UE selects the subset of configured NSSAI or allowed NSSAI\nto be provided in the requested NSSAI is implementation.\n\nNOTE\u00a03:  The number of S-NSSAI(s) included in the requested NSSAI cannot\nexceed eight.\n\nIf the UE initiates the mobility and periodic registration updating\nprocedure upon request of the upper layers to establish a PDU session for\nemergency services or needs to prolong the established NAS signalling\nconnection after the completion of the registration procedure for mobility\nand periodic registration update (e.g. due to uplink signalling pending but\nno user data pending), it shall set the \"follow-on request pending\"\nindication to 1.\n\n[pic]\n\nFigure\u00a05.5.1.3.2.1: Registration procedure for mobility and periodic\nregistration update\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM common procedure initiation", "numbering": "5.5.1.3.3", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mobility and periodic registration update accepted by", "numbering": "5.5.1.3.4", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mobility and periodic registration update not accepted by", "numbering": "5.5.1.3.5", "title_level": 4, "desc": "5.5.1.3.3   5GMM common procedure initiation\n\nThe AMF may initiate 5GMM common procedures, e.g. the identification,\nauthentication and security procedures during the registration procedure,\ndepending on the information received in the REGISTRATION REQUEST message.\n\n\n5.5.1.3.4   Mobility and periodic registration update accepted by the\n         network\n\nIf the registration update request has been accepted by the network, the\nAMF shall send a REGISTRATION ACCEPT message to the UE. If the AMF assigns\na new 5G-GUTI for the UE, a 5G-GUTI shall be included in the REGISTRATION\nACCEPT message or if the transparent container IE is included in the\nREGISTRATION ACCEPT message, the AMF shall start timer T3550 and enter\nstate 5GMM-COMMON-PROCEDURE-INITIATED as described in\nsubclause\u00a05.1.3.2.3.3.\n\nIf timer T3513 is running in the AMF, the AMF shall stop timer T3513 if a\npaging request was sent with the access type indicating non-3GPP and the\nREGISTRATION REQUEST message includes the Allowed PDU session status IE.\n\nIf timer T3565 is running in the AMF, the AMF shall stop timer T3565 when a\nREGISTRATION REQUEST message is received.\n\nThe AMF may include a new TAI list for the UE in the REGISTRATION ACCEPT\nmessage. The UE, upon receiving a REGISTRATION ACCEPT message, shall delete\nits old TAI list and store the received TAI list. If there is no TAI list\nreceived, the UE shall consider the old TAI list as valid.\n\nThe AMF may include new service area restrictions in the Service area list\nIE in the REGISTRATION ACCEPT message. The UE, upon receiving a\nREGISTRATION ACCEPT message with new service area restrictions shall act as\ndescribed in subclause\u00a05.3.5.\n\nIf the Service area list IE is not included in the REGISTRATION ACCEPT\nmessage, any tracking area in the registered PLMN and its equivalent\nPLMN(s) is considered as an allowed tracking area as described in\nsubclause\u00a05.3.5.\n\nThe AMF shall include the MICO indication IE in the REGISTRATION ACCEPT\nonly if the MICO indication IE was included in the REGISTRATION REQUEST\nmessage, the AMF supports and accepts the use of MICO mode. If the AMF\nsupports and accepts the use of MICO mode, the AMF may indicate \"all PLMN\nregistration area allocated\" in the MICO indication IE in the REGISTRATION\nACCEPT message. If \"all PLMN registration area allocated\" is indicated in\nthe MICO indication IE, the AMF shall not assign and include the TAI list\nin the REGISTRATION ACCEPT message. If the REGISTRATION ACCEPT message\nincludes an MICO indication IE indicating \"all PLMN registration area\nallocated\", the UE shall treat all TAIs in the current PLMN as a\nregistration area and delete its old TAI list.\n\nThe AMF may include the T3512 value IE in the REGISTRATION ACCEPT message\nonly if the REGISTRATION REQUEST message was sent over the 3GPP access.\n\nThe AMF may include the non-3GPP de-registration timer value IE in the\nREGISTRATION ACCEPT message only if the REGISTRATION REQUEST message was\nsent for the non-3GPP access.\n\nIf the REGISTRATION ACCEPT message includes an MICO indication IE\nindicating \"all PLMN registration area allocated\", the UE shall treat all\nTAIs in the current PLMN as a registration area and delete its old TAI\nlist.\n\nIf the REGISTRATION ACCEPT message included a T3512 value IE, the UE shall\nuse the value in T3512 value IE as periodic registration update timer\n(T3512). If the T3512 value IE is not included, the UE shall use the value\ncurrently stored, e.g. from a prior REGISTRATION ACCEPT message.\n\nIf the REGISTRATION ACCEPT message included a non-3GPP de-registration\ntimer value IE, the UE shall use the value in non-3GPP de-registration\ntimer value IE as non-3GPP de-registration timer. If non-3GPP de-\nregistration timer value IE is not included, the UE shall use the value\ncurrently stored, e.g. from a prior REGISTRATION ACCEPT message.\n\nIf the REGISTRATION ACCEPT message contains a 5G-GUTI, the UE shall return\na REGISTRATION COMPLETE message to the AMF to acknowledge the received 5G-\nGUTI, stop timer T3519 if running, and delete any stored SUCI.\n\nUpon receiving a REGISTRATION COMPLETE message, the AMF shall stop timer\nT3550 and change to state 5GMM-REGISTERED. The 5G-GUTI, if sent in the\nREGISTRATION ACCEPT message, shall be considered as valid.\n\nIf the REGISTRATION REQUEST message contained the SMS requested bit\nindicating that the UE supports SMS delivery over NAS and:\n\na) the SMSF address is stored in the UE 5GMM context and:\n\n1) the UE is considered available for SMS; or\n\n2) the UE is considered not available for SMS and the SMSF has confirmed\nthat the activation of the SMS service is successful; or\n\nb) the SMSF address is not stored in the UE 5GMM context, the SMSF\nselection is successful and the SMSF has confirmed that the activation of\nthe SMS service is successful;\n\nthen the AMF shall include the SMS allowed IE in the REGISTRATION ACCEPT\nmessage as specified in subclause\u00a05.5.1.2.4. If the UE 5GMM context does\nnot contain an SMSF address or the UE is not considered available for SMS,\nthen the AMF shall:\n\na) store the SMSF address in the UE 5GMM context if not stored already; and\n\nb) store the contents of the SMS allowed IE in the UE 5GMM context and\nconsider the UE available for SMS.\n\nIf SMSF selection in the AMF or SMS activation via the SMSF is not\nsuccessful, then the AMF shall not include the SMS allowed IE in the\nREGISTRATION ACCEPT message. If the AMF does not allow the use of SMS over\nNAS, then the AMF shall not include the SMS allowed IE in the REGISTRATION\nACCEPT message.\n\nIf the REGISTRATION REQUEST message contained the SMS requested bit set to\n\"SMS over NAS not supported\", then the AMF shall:\n\na) mark the 5GMM context to indicate that the UE is not available for SMS\nover NAS; and\n\nNOTE:  The AMF can notify the SMSF that the UE is deregistered from SMS\nover NAS based on local configuration.\n\nb) not include the SMS allowed IE in the REGISTRATION ACCEPT message.\n\nIf the AMF includes an SMS allowed IE in the REGISTRATION ACCEPT message\nand the UE is also registered over another access to the same PLMN, the UE\nconsiders the new value indicated by the SMS allowed IE as applicable for\nboth accesses over which the UE is registered.\n\nThe AMF shall include the allowed NSSAI for the current PLMN and may\ninclude the mapping of each S-NSSAI of the allowed NSSAI to the S-NSSAI(s)\nof the configured NSSAI for the HPLMN contained in the requested NSSAI from\nthe UE if available, in the REGISTRATION ACCEPT message if the UE included\nthe requested NSSAI in the REGISTRATION REQUEST message and the AMF allows\none or more S-NSSAIs in the requested NSSAI. The AMF may also include\nrejected NSSAI in the REGISTRATION ACCEPT message. Rejected NSSAI contains\nS-NSSAI(s) which was included in the requested NSSAI but rejected by the\nnetwork associated with rejection cause(s).\n\nThe AMF may include a new configured NSSAI for the current PLMN in the\nREGISTRATION ACCEPT message if the REGISTRATION REQUEST message did not\ninclude the requested NSSAI, or the REGISTRATION REQUEST message included\nthe requested NSSAI containing an S-NSSAI that is not valid in the serving\nPLMN. If a new configured NSSAI for the current PLMN is included, the AMF\nmay also include the mapping of the configured NSSAI for the current PLMN\nto the configured NSSAI for the HPLMN in the REGISTRATION ACCEPT message.\n\nIf the S-NSSAI(s) associated with the existing PDU session(s) of the UE is\nnot included in the requested NSSAI of the REGISTRATION REQUEST message,\nthe AMF shall release the PDU session(s) associated with the S-NSSAI(s)\nlocally and shall request the SMF to release those PDU session(s) locally,\nwithout peer-to-peer signalling between the SMF and the UE.\n\nThe UE receiving the rejected NSSAI in the REGISTRATION ACCEPT message\ntakes the following actions based on the rejection cause in the rejected\nNSSAI:\n\n\"S-NSSAI not available in the current PLMN\"\n\n   The UE shall add the rejected S-NSSAI(s) in the rejected NSSAI for the\ncurrent PLMN as specified in subclause\u00a04.6.2.2 and not attempt to use this\nS-NSSAI in the current PLMN until switching off the UE or the UICC\ncontaining the USIM is removed.\n\n\"S-NSSAI not available in the current registration area\"\n\n   The UE shall add the rejected S-NSSAI(s) in the rejected NSSAI for the\ncurrent PLMN and registration area combination as specified in\nsubclause\u00a04.6.2.2 and not attempt to use this S-NSSAI in the current\nregistration area until switching off the UE, the UE moving out of the\ncurrent registration area or the UICC containing the USIM is removed.\n\nIf the UE did not include the requested NSSAI in the REGISTRATION REQUEST\nmessage or none of the requested NSSAI are present in the subscribed S-\nNSSAIs, and one or more subscribed S-NSSAIs marked as default are\navailable, the AMF shall put the subscribed S-NSSAIs marked as default in\nthe allowed NSSAI of the REGISTRATION ACCEPT message. The AMF shall\ndetermine a registration area such that all S-NSSAIs of the allowed NSSAI\nare available in the registration area.\n\nIf the REGISTRATION ACCEPT message contains the allowed NSSAI, then the UE\nshall store the included allowed NSSAI together with the PLMN identity of\nthe registered PLMN and the registration area as specified in\nsubclause\u00a04.6.2.2. If the UE has one or more PDU sessions associated with S-\nNSSAI(s) not included in the received allowed NSSAI, the UE shall locally\nrelease all such PDU session(s).\n\nIf the REGISTRATION ACCEPT message contains a configured NSSAI IE with a\nnew configured NSSAI for the current PLMN and optionally the mapping of the\nconfigured NSSAI for the current PLMN to the configured NSSAI for the\nHPLMN, the UE shall store the contents of the configured NSSAI IE as\nspecified in subclause\u00a04.6.2.2.\n\nIf the Uplink data status IE is included in the REGISTRATION REQUEST\nmessage, the AMF shall:\n\na) indicate the SMF to re-establish the user-plane resources for the\ncorresponding PDU session; and\n\nb) include PDU session reactivation result IE in the REGISTRATION ACCEPT\nmessage to indicate the user-plane resources reactivation result of the PDU\nsessions the UE requested to re-establish.\n\nIf the Uplink data status IE is not included in the REGISTRATION REQUEST\nmessage and the REGISTRATION REQUEST message is sent for the trigger d) in\nsubclause\u00a05.5.1.3.2, the AMF may indicate the SMF to re-establish the user-\nplane resources for the PDU sessions.\n\nIf a PDU session status IE is included in the REGISTRATION REQUEST message,\nthe AMF shall:\n\na) release all those PDU session locally (without peer-to-peer signalling\nbetween the SMF and the UE) which are in 5GSM state PDU SESSION ACTIVE on\nthe AMF side associated with the access type the REGISTRATION REQUEST\nmessage is sent over, but are indicated by the UE as being in 5GSM state\nPDU SESSION INACTIVE; and\n\nb) include a PDU session status IE in the REGISTRATION ACCEPT message to\nindicate which PDU sessions associated with the access type the\nREGISTRATION REQUEST message is sent over are active in the AMF.\n\nIf the Allowed PDU session status IE is included in the REGISTRATION\nREQUEST message, the AMF shall:\n\na) indicate the SMF to re-establish the user-plane resources for the\ncorresponding PDU sessions allowed to be re-established over 3GPP access\nand have indicated pending downlink data if there is at least one PDU\nsession indicated in the Allowed PDU session status IE that can be re-\nestablished over 3GPP access;\n\nb) notify the SMF that have indicated pending downlink data, that\nreactivation of the user-plane resources for the corresponding PDU sessions\ncannot be performed if not allowed to be re-established over 3GPP access,\nif any; and\n\nc) include the PDU session reactivation result IE in the REGISTRATION\nACCEPT message to indicate the successfully re-established user-plane\nresources for the corresponding PDU sessions, if any.\n\nIf the AMF has included the PDU session reactivation result IE in the\nREGISTRATION ACCEPT message and there exist one or more PDU sessions for\nwhich the user-plane resources cannot be re-established, then the AMF may\ninclude the PDU session reactivation result error cause IE to indicate the\ncause of failure to re-establish the user-plane resources.\n\nIf the AMF needs to initiate PDU session status synchronization the AMF\nshall include a PDU session status IE in the REGISTRATION ACCEPT message to\nindicate the UE which PDU sessions are active in the AMF.\n\nThe AMF may include the LADN information in the REGISTRATION ACCEPT message\nas described in subclause\u00a05.5.1.2.4. The UE, upon receiving the\nREGISTRATION ACCEPT message with the LADN information, shall delete its old\nLADN information (if any) and store the received new LADN information.\n\nIf the AMF does not include the LADN information in the REGISTATION ACCEPT\nmessage during registration procedure for mobility and registration update,\nthe UE shall delete its old LADN information.\n\nIf the PDU session status IE is included in the REGISTRATION ACCEPT\nmessage, the UE shall release all those PDU sessions locally (without peer-\nto-peer signalling between the SMF and the UE) which are in 5GSM state PDU\nSESSION ACTIVE on the UE side, but are indicated by the AMF as being in\n5GSM state PDU SESSION INACTIVE.\n\nThe network informs the UE about the support of specific features, such as\nIMS voice over PS session, emergency services or emergency services\nfallback, in the 5GS network feature support information element. In a UE\nwith IMS voice over PS session capability, the IMS voice over PS session\nindicator, emergency services and emergency services fallback indicator\nshall be provided to the upper layers. The upper layers take the IMS voice\nover PS session indicator into account when selecting the access domain for\nvoice sessions or calls. When initiating an emergency call, the upper\nlayers take the IMS voice over PS session indicator, emergency services\nindicator and emergency services fallback indicator into account for the\naccess domain selection. When the UE determines via the IMS voice over PS\nsession indicator that the network does not support IMS voice over PS\nsessions in N1 mode, then the UE shall not locally release any persistent\nPDU session. When the UE determines via the emergency service support\nindicator that the network does not support emergency services in N1 mode,\nthen the UE shall not locally release any emergency PDU session if there is\na radio bearer associated with that context.\n\nThe AMF shall set the EMF bit in the 5GS network feature support IE to:\n\na) \"Emergency services fallback supported in NR connected to 5GCN and E-\nUTRA connected to 5GCN\" if the network supports the emergency services\nfallback procedure when the UE is in an NR cell connected to 5GCN or an E-\nUTRA cell connected to 5GCN;\n\nb) \"Emergency services fallback supported in NR connected to 5GCN only\" if\nthe network supports the emergency services fallback procedure when the UE\nis in an NR cell connected to 5GCN and does not support the emergency\nservices fallback procedure when the UE is in an E-UTRA cell connected to\n5GCN;\n\nc) \"Emergency services fallback supported in E-UTRA connected to 5GCN only\"\nif the network supports the emergency services fallback procedure when the\nUE is in an E-UTRA cell connected to 5GCN and does not support the\nemergency services fallback procedure when the UE is in an NR cell\nconnected to 5GCN; or\n\nd) \"Emergency services fallback not supported\" if network does not support\nthe emergency services fallback procedure when the UE is in any cell\nconnected to 5GCN.\n\nThe network informs the UE that the use of access identity 1 is valid in\nthe RPLMN or equivalent PLMN by setting the MPS indicator bit of the 5GS\nnetwork feature support IE to \"Access identity 1 valid in RPLMN or\nequivalent PLMN\", in the REGISTRATION ACCEPT message. Based on operator\npolicy, the AMF sets the MPS indicator bit in the REGISTRATION ACCEPT\nmessage based on the MPS priority information in the user\u2019s subscription\ncontext obtained from the UDM.\n\nUpon receiving a REGISTRATION ACCEPT message with the MPS indicator bit set\nto \"Access identity 1 valid in RPLMN or equivalent PLMN\", if the UE is not\nin the country of its HPLMN, the UE shall act as a UE with access identity\n1 configured for MPS as described in subclause\u00a04.5.2, in all NG-RAN TAs of\nthe registered PLMN and its equivalent PLMNs. The MPS indicator bit in the\n5GS network feature support IE provided in the REGISTRATION ACCEPT message\nis valid until the UE receives a REGISTRATION ACCEPT message with the MPS\nindicator bit set to \"Access identity 1 not valid in RPLMN or equivalent\nPLMN\" or until the UE selects a non-equivalent PLMN. Access identity 1 is\nonly applicable while the UE is in N1 mode.\n\nDuring ongoing active PDU sessions that were set up relying on the MPS\nindicator bit being set to \"Access identity 1 valid in RPLMN or equivalent\nPLMN\", if the network indicates in a registration update that the MPS\nindicator bit is reset to \"Access identity 1 not valid in RPLMN or\nequivalent PLMN\", then the UE shall no longer act as a UE with access\nidentity 1 configured for MPS as described in subclause\u00a04.5.2 unless the\nUSIM contains a valid configuration for access identity 1 in RPLMN or\nequivalent PLMN. In the UE, the ongoing active PDU sessions are not\naffected by the change of the MPS indicator bit.\n\nIf the UE has indicated \"follow-on request pending\" in REGISTRATION REQUEST\nmessage, or the network has downlink signalling pending, the AMF shall not\nimmediately release the NAS signalling connection after the completion of\nthe registration procedure.\n\nIf the Requested DRX Parameters IE was included in the REGISTRATION REQUEST\nmessage, the AMF shall include the UE specific DRX parameters IE in the\nREGISTRATION ACCEPT message. The AMF may set the UE specific DRX parameters\nIE based on the received Requested DRX Parameters IE and operator policy if\navailable.\n\nIf the UE included in the REGISTRATION REQUEST message the UE status\ninformation IE with the EMM registration status set to \"UE in EMM-\nREGISTERED state\" and the AMF does not support N26 interface, the AMF shall\noperate as described in subclause\u00a05.5.1.2.4.\n\nIf due to regional subscription restrictions or access restrictions the UE\nis not allowed to access the TA, but the UE has a PDU session for emergency\nservices established, the AMF may accept the REGISTRATION REQUEST message\nand indicate to the SMF to release all non-emergency PDU sessions when the\nregistration procedure is initiated in 5GMM-CONNECTED mode. When the\nregistration procedure is initiated in 5GMM-IDLE mode, the AMF indicates to\nthe SMF to release all non-emergency PDU sessions and informs the UE via\nthe PDU session status IE in the REGISTRATION ACCEPT message. The AMF shall\nnot indicate to the SMF to release the emergency PDU session. The network\nshall consider the UE to be registered for emergency service.\n\nIf the REGISTRATION ACCEPT message includes the transparent container IE\nand:\n\na) the transparent container IE does not successfully pass the integrity\ncheck (see 3GPP\u00a0TS\u00a033.501\u00a0[24]); and\n\nb) if the UE attempts obtaining service on another PLMNs as specified in\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C;\n\nthen the UE shall locally release the established NAS signalling\nconnection.\n\nIf the REGISTRATION ACCEPT message includes the transparent container IE\nand the transparent container IE successfully passes the integrity check\n(see 3GPP\u00a0TS\u00a033.501\u00a0[24]):\n\na) the UE shall proceed with the behavior as specified in\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C; and\n\nb) if the UE attempts obtaining service on another PLMNs as specified in\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C then the UE may locally release the established\nNAS signalling connection, otherwise the UE shall send a REGISTRATION\nCOMPLETE message. If an acknowledgement is requested in the transparent\ncontainer IE of the REGISTRATION ACCEPT message, the UE acknowledgement is\nincluded in the transparent container IE of the REGISTRATION COMPLETE\nmessage.\n\n\n5.5.1.3.5   Mobility and periodic registration update not accepted by the\n         network\n\nIf the mobility and periodic registration update request cannot be accepted\nby the network, the AMF shall send a REGISTRATION REJECT message to the UE\nincluding an appropriate 5GMM cause value.\n\nThe UE shall take the following actions depending on the 5GMM cause value\nreceived in the REGISTRATION REJECT message.\n\n#3   (Illegal UE);\n\n#6   (Illegal ME); or\n\n#7   (5GS services not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall\nconsider the USIM as invalid for 5GS services until switching off or the\nUICC containing the USIM is removed. The UE shall delete the list of\nequivalent PLMNs and shall move to 5GMM-DEREGISTERED state.\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the normal tracking area updating\nprocedure is rejected with the EMM cause with the same value. The USIM\nshall be considered as invalid also for non-EPS services until switching\noff or the UICC containing the USIM is removed. If the UE is in EMM-\nREGISTERED state, the UE shall move to EMM-DEREGISTERED state.\n\n#9 (UE identity cannot be derived by the network).\n\n   The UE shall set the 5GS update status to 5U2 NOT UPDATED (and shall\nstore it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-GUTI,\nlast visited registered TAI, TAI list and ngKSI. The UE shall enter the\nstate 5GMM-DEREGISTERED.\n\n   If the rejected request was not for initiating a PDU session for\nemergency services, the UE shall subsequently, automatically initiate the\ninitial registration procedure.\n\nNOTE\u00a01:  User interaction is necessary in some cases when the UE cannot re-\nestablish the PDU session(s) automatically.\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the normal tracking area updating\nprocedure is rejected with the EMM cause with the same value.\n\n#10  (implicitly de-registered).\n\n   The UE shall enter the state 5GMM-DEREGISTERED.NORMAL-SERVICE. The UE\nshall delete any mapped 5G security context or partial native 5G security\ncontext.\n\n   If the registration rejected request was not for initiating a PDU\nsession for emergency bearer services, the UE shall perform a new\nregistration procedure for initial registration.\n\nNOTE\u00a02:  User interaction is necessary in some cases when the UE cannot re-\nestablish the PDU session(s) automatically.\n\n   If the UE is operating in single-registration mode and the UE is in EMM-\nREGISTERED state, the UE shall move to EMM-DEREGISTERED state.\n\n#11  (PLMN not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall store\nthe PLMN identity in the \"forbidden PLMN list\", delete the list of\nequivalent PLMNs, reset the registration attempt counter and enter the\nstate 5GMM-DEREGISTERED.PLMN-SEARCH. The UE shall perform a PLMN selection\naccording to 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n   If the UE is operating in single-registration mode, the UE shall in\naddition delete any 4G-GUTI, last visited registered TAI, TAI list and eKSI\nas specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the normal tracking\narea updating procedure is rejected with the EMM cause with the same value.\nThe UE shall move to EMM-DEREGISTERED state.\n\n#12  (Tracking area not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. Additionally, the UE\nshall reset the registration attempt counter.\n\n   The UE shall store the current TAI in the list of \"5GS forbidden\ntracking areas for regional provision of service\" and enter the state 5GMM-\nDEREGISTERED.LIMITED-SERVICE.\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the normal tracking area updating\nprocedure is rejected with the EMM cause with the same value.\n\n#13  (Roaming not allowed in this tracking area).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. Additionally, the UE\nshall delete the list of equivalent PLMNs and reset the registration\nattempt counter.\n\n   The UE shall store the current TAI in the list of \"5GS forbidden\ntracking areas for roaming\" and enter the state 5GMM-DEREGISTERED.LIMITED-\nSERVICE or optionally 5GMM-DEREGISTERED.PLMN-SEARCH. The UE shall perform a\nPLMN selection according to 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n   If the UE is operating in single-registration mode, the UE shall handle\n4G-GUTI, last visited registered TAI, TAI list and eKSI as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the normal tracking area updating\nprocedure is rejected with the EMM cause with the same value.\n\n#22  (Congestion).\n\n   If the T3346 value IE is present in the REGISTRATION REJECT message and\nthe value indicates that this timer is neither zero nor deactivated, the UE\nshall proceed as described below, otherwise it shall be considered as an\nabnormal case and the behaviour of the UE for this case is specified in\nsubclause\u00a05.5.1.3.6.\n\n   The UE shall abort the registration procedure for mobility and periodic\nregistration update. If the rejected request was not for initiating a PDU\nsession for emergency services, the UE shall set the 5GS update status to\n5U2 NOT UPDATED and change to state 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-\nUPDATE.\n\n   The UE shall stop timer T3346 if it is running.\n\n   If the REGISTRATION REJECT message is integrity protected, the UE shall\nstart timer T3346 with the value provided in the T3346 value IE.\n\n   If the REGISTRATION REJECT message is not integrity protected, the UE\nshall start timer T3346 with a random value from the default range\nspecified in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n   The UE stays in the current serving cell and applies the normal cell\nreselection process. The registration procedure for mobility and periodic\nregistration update is started, if still necessary, when timer T3346\nexpires or is stopped.\n\n#27  (N1 mode not allowed).\n\n   The UE capable of S1 mode shall disable the N1 mode capability for both\n3GPP access and non-3GPP access (see subclause\u00a04.9).\n\nOther values are considered as abnormal cases. The behaviour of the UE in\nthose cases is specified in subclause\u00a05.5.1.3.6.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.5.1.3.6", "title_level": 4, "desc": "5.5.1.3.6   Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Timer T3346 is running.\n\n   The UE shall not start the registration procedure for mobility and\nperiodic registration update unless:\n\n1) the UE is in 5GMM-CONNECTED mode;\n\n2) the UE received a paging;\n\n3) the UE receives a NOTIFICATION message over non-3GPP access when the UE\nis in 5GMM-CONNECTED mode over non-3GPP access and in 5GMM-IDLE mode over\n3GPP access;\n\n4) the UE is a UE configured for high priority access in selected PLMN; or\n\n5) the UE has a PDU session for emergency services established or is\nestablishing a PDU session for emergency services\n\n   The UE stays in the current serving cell and applies the normal cell\nreselection process.\n\nNOTE:  It is considered an abnormal case if the UE needs to initiate a\nregistration procedure for mobility and periodic registration update while\ntimer T3346 is running independent on whether timer T3346 was started due\nto an abnormal case or a non-successful case.\n\nb) The lower layers indicate that the access attempt is barred.\n\n   The UE shall not start the registration procedure for mobility and\nperiodic registration update. The UE stays in the current serving cell and\napplies the normal cell reselection process.\n\n   The registration procedure for mobility and periodic registration update\nis started, if still needed, when the lower layers indicate that the\nbarring is alleviated for the access category with which the access attempt\nwas associated.\n\nEditor's note:  Abnormal case handling for N1 NAS signalling connection\nestablishment rejected by the network with \"Extended wait time\" received\nfrom lower layers is FFS.\n\nc) T3510 timeout.\n\n   The UE shall abort the registration update procedure and the NAS\nsignalling connection, if any, shall be released locally, the registration\nattempt counter shall be incremented, unless it was already set to 5.\n\nd) REGISTRATION REJECT message, other 5GMM cause values than those treated\nin subclause\u00a05.5.1.3.5, and cases of 5GMM cause value #22, if considered as\nabnormal cases according to subclause\u00a05.5.1.3.5.\n\n   upon reception of the 5GMM causes #95, #96, #97, #99 and #111 the UE\nshould set the registration attempt counter to 5.\n\nFor the cases c and d the UE shall proceed as follows:\n\n   If the registration attempt counter is less than 5:\n\n-  if the TAI of the current serving cell is not included in the TAI list\nor the 5GS update status is different to 5U1 UPDATED, the UE shall start\ntimer T3511, shall set the 5GS update status to 5GU2 NOT UPDATED and change\nto state 5GMM-REGISTERED.ATTEMPTING-TO-UPDATE. When timer T3511 expires the\nregistration update procedure is triggered again.\n\n-  if the TAI of the current serving cell is included in the TAI list and\nthe 5GS update status is equal to 5U1 UPDATED, the UE shall keep the 5GS\nupdate status to 5GU1 UPDATED and enter statue 5GMM-REGISTERED.NORMAL-\nSERVICE. The UE shall start timer T3511.\n\n-  If the UE is operating in single registration mode, the UE shall in\naddition handle the EPS update status as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15]\nfor the abnormal cases when a normal or periodic tracking area updating\nprocedure fails and the tracking area attempt counter is less than 5 and\nthe EPS update status is different from EU1 UPDATED\n\n   If the registration attempt counter is equal to 5\n\n-  the UE shall start timer T3502, shall set the 5GS update status to 5U2\nNOT UPDATED.\n\n-  the UE shall delete the list of equivalent PLMNs and shall change to\nstate 5GMM-REGISTERED.ATTEMPTING-TO-UPDATE or optionally to 5GMM-\nREGISTERED.PLMN-SEARCH in order to perform a PLMN selection according to\n3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n-  if the UE is operating in single registration mode:\n\n-  the UE shall in addition handle the EPS update status as specified in\n3GPP\u00a0TS\u00a024.301\u00a0[15] for the abnormal cases when a normal or periodic\ntracking area updating procedure fails and the tracking area attempt\ncounter is equal to 5; and\n\n-  if the UE does not change to state 5GMM-REGISTERED.PLMN-SEARCH, the UE\nshall attempt to select E-UTRAN radio access technology. The UE may disable\nN1 mode capability as specified in subclause\u00a04.9.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.5.1.3.7", "title_level": 4, "desc": "5.5.1.3.7   Abnormal cases on the network side\n\nEditor's note:  Abnormal cases in the network are FFS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "De-registration procedure", "numbering": "5.5.2", "title_level": 2, "desc": "5.5.2  De-registration procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.5.2.1", "title_level": 3, "desc": "5.5.2.1  General\n\nThe de-registration procedure is used:\n\na) by the UE to de-register for 5GS services over 3GPP access when the UE\nis registered over 3GPP access;;\n\nb) by the UE to de-register for 5GS services over 3GPP access, non-3GPP\naccess, or both when the UE is registered in the same PLMN over both\naccesses;\n\nc) by the network to inform the UE that it is deregistered for 5GS services\nover 3GPP access when the UE is registered over 3GPP access;\n\nd) by the network to inform the UE that it is deregistered for 5GS services\nover 3GPP access, non-3GPP access, or both when the UE is registered in the\nsame PLMN over both accesses; and\n\ne) by the network to inform the UE to re-register to the network.\n\nThe de-registration procedure with appropriate de-registration type shall\nbe invoked by the UE:\n\na) if the UE is switched off; and\n\nb) as part of the eCall inactivity procedure defined in subclause\u00a05.5.3.\n\nThe de-registration procedure with appropriate de-registration type shall\nbe invoked by the network:\n\na) if the network informs whether the UE should re-register to the network.\n\nThe de-registration procedure with appropriate access type shall be invoked\nby the UE:\n\na) if the UE wants to de-register for 5GS services over 3GPP access when\nthe UE is registered over 3GPP access; or\n\nb) the UE wants to de-register for 5GS services over 3GPP access, non-3GPP\naccess, or both when the UE is registered in the same PLMN over both\naccesses.\n\nIf the de-registration procedure is triggered due to USIM removal, the UE\nshall indicate \"switch off\" in the de-registration type IE.\n\nIf the de-registration procedure is requested by the UDM for a UE that has\nPDU sessions for emergency services, the AMF shall not send a\nDEREGISTRATION REQUEST message to the UE.\n\nIf the de-registration procedure for 5GS services is performed, the PDU\nsessions, if any, for this particular UE are released locally without peer-\nto-peer signalling between the UE and the network.\n\nThe UE is allowed to initiate the de-registration procedure even if the\ntimer T3346 is running.\n\nNOTE:  When the UE has no PDU sessions over non-3GPP access, or the UE\nmoves all the PDU sessions over a non-3GPP access to a 3GPP access, the UE\nand the AMF need not initiate de-registration over the non-3GPP access.\n\nThe AMF shall provide the UE with a non-3GPP de-registration timer.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated de-registration procedure", "numbering": "5.5.2.2", "title_level": 3, "desc": "5.5.2.2  UE-initiated de-registration procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated de-registration procedure initiation", "numbering": "5.5.2.2.1", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated de-registration procedure completion -", "numbering": "5.5.2.2.2", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated de-registration procedure completion for", "numbering": "5.5.2.2.3", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated de-registration procedure completion for", "numbering": "5.5.2.2.4", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-initiated de-registration procedure completion for", "numbering": "5.5.2.2.5", "title_level": 4, "desc": "5.5.2.2.1   UE-initiated de-registration procedure initiation\n\nThe de-registration procedure is initiated by the UE by sending a\nDEREGISTRATION REQUEST message (see example in figure\u00a05.5.2.2.1). The De-\nregistration type IE included in the message indicates whether the de-\nregistration procedure is due to a \"switch off\" or not. The access type\nincluded in the message indicates whether the de-registration procedure is:\n\na) for 5GS services over 3GPP access when the UE is registered over 3GPP\naccess only;\n\nb) for 5GS services over non-3GPP access when the UE is registered over non-\n3GPP access only; or\n\nc) for 5GS services over 3GPP access, non-3GPP access or both 3GPP access\nand non-3GPP access when the UE is registered in the same PLMN over both\naccesses.\n\nIf the UE has a valid 5G-GUTI, the UE shall populate the 5GS mobile\nidentity IE with the valid 5G-GUTI. If the UE does not have a valid 5G-\nGUTI, the UE shall populate the 5GS mobile identity IE with its SUCI.\n\nIf the UE does not have a valid 5G-GUTI and it does not have a valid SUCI,\nthen the UE shall populate the5GSmobile identity IE with its PEI.\n\nIf the de-registration request is not due to switch off and the UE is in\nthe state 5GMM-REGISTERED or 5GMM-REGISTERED-INITIATED, timer T3521 shall\nbe started in the UE after the DEREGISTRATION REQUEST message has been\nsent. The UE shall enter the state 5GMM-DEREGISTERED-INITIATED.\n\nIf the UE is to be switched off, the UE shall try for a period of 5 seconds\nto send the DEREGISTRATION REQUEST message. During this period, the UE may\nbe switched off as soon as the DEREGISTRATION REQUEST message has been\nsent.\n\n[pic]\n\nFigure\u00a05.5.2.2.1.1: UE-initiated de-registration procedure\n\n\n5.5.2.2.2   UE-initiated de-registration procedure completion - common\n         procedure\n\nWhen the DEREGISTRATION REQUEST message is received by the AMF, the AMF\nshall send a DEREGISTRATION ACCEPT message to the UE, if the De-\nregistration type IE does not indicate \"switch off\". Otherwise, the\nprocedure is completed when the AMF receives the DEREGISTRATION REQUEST\nmessage.\n\nThe UE, when receiving the DEREGISTRATION ACCEPT message, shall stop timer\nT3521.\n\n\n5.5.2.2.3   UE-initiated de-registration procedure completion for 5GS\n         services over 3GPP access\n\nIf the access type in the DEREGISTRATION REQUEST message indicates that the\nde-registration procedure is for 3GPP access, the AMF shall trigger the SMF\nto release the PDU session context(s) established over 3GPP access, if any,\nlocally for this UE without peer-to-peer signalling between the UE and the\nSMF. The UE shall release the PDU session context(s) established over 3GPP\naccess, if any, locally without peer-to-peer signalling between the UE and\nthe SMF. The UE is marked as inactive in the AMF for 5GS services for 3GPP\naccess. The AMF shall enter the state 5GMM-DEREGISTERED for 3GPP access.\n\nIf the UE supports N1 mode only then:\n\na) if the de-registration procedure was performed due to disabling of 5GS\nservices, then the UE shall enter the 5GMM-NULL state for 3GPP access;\n\nb) otherwise, the UE shall enter the 5GMM-DEREGISTERED state for 3GPP\naccess.\n\n\n5.5.2.2.4   UE-initiated de-registration procedure completion for 5GS\n         services non-3GPP access\n\nIf the access type in the DEREGISTRATION REQUEST indicates that the de-\nregistration procedure is for non-3GPP access, the AMF shall trigger SMF to\nrelease the PDU session context(s) established over non-3GPP access, if\nany, locally for this UE without peer-to-peer signalling between the UE and\nthe SMF. The UE shall release the PDU session context(s) established over\nnon-3GPP access, if any, locally without peer-to-peer signalling between\nthe UE and the SMF. The UE is marked as inactive in the AMF for 5GS\nservices for non-3GPP access. The AMF shall enter the state 5GMM-\nDEREGISTERED over non-3GPP access.\n\nThe UE shall:\n\n-  if the de-registration procedure was performed due to disabling of 5GS\nservices, enter the 5GMM-NULL state for non-3GPP access;\n\n-  otherwise, enter the 5GMM-DEREGISTERED state for non-3GPP access.\n\n\n5.5.2.2.5   UE-initiated de-registration procedure completion for 5GS\n         services over both 3GPP access and non-3GPP access\n\nIf the access type in the DEREGISTRATION REQUEST indicates that the de-\nregistration procedure is for both 3GPP access and non-3GPP access when the\nUE is registered in the same PLMN over both accesses, the descriptions for\nUE-initiated de-registration procedure completion for 5GS services over\n3GPP access and over non-3GPP access, as specified in subclauses\u00a05.5.2.2.3\nand 5.5.2.2.4, shall be followed.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.5.2.2.6", "title_level": 4, "desc": "5.5.2.2.6   Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Lower layer failure or release of the N1 NAS signalling connection\nbefore reception of DEREGISTRATION ACCEPT message.\n\n   The de-registration procedure shall be aborted and the UE proceeds as\nfollows:\n\n1) if the de-registration procedure was performed due to disabling of 5GS\nservices, the UE shall enter the 5GMM-NULL state; or\n\n2) if the de-registration type \"normal de-registration\" was requested for\nreasons other than disabling of 5GS services, the UE shall enter the 5GMM-\nDEREGISTERED state.\n\nb) The lower layers indicate that the access attempt is barred.\n\n   The UE shall not start the de-registration procedure. The UE stays in\nthe current serving cell and applies the normal cell reselection process.\n\n   The UE may perform a local de-registration either immediately or after\nan implementation-dependent time.\n\n   The de-registration procedure is started, if still needed, when the\nlower layers indicate that the barring is alleviated for the access\ncategory with which the access attempt was associated.\n\nEditor's note:  Abnormal case handling for N1 NAS signalling connection\nestablishment rejected by the network with \"Extended wait time\" received\nfrom lower layers is FFS.\n\nc) T3521 timeout.\n\n   On the first four expiries of the timer, the UE shall retransmit the\nDEREGISTRATION REQUEST message and shall reset and restart timer T3521. On\nthe fifth expiry of timer T3521, the detach procedure shall be aborted and\nthe UE proceeds as follows:\n\n1) if the de-registration procedure was performed due to disabling of 5GS\nservices, the UE shall enter the 5GMM-NULL state; or\n\n2) if the de-registration type \"normal de-registration\" was requested for\nreasons other than disabling of 5GS services, the UE shall enter the 5GMM-\nDEREGISTERED state.\n\nd) De-registration procedure collision.\n\n   De-registration containing de-registration type \"switch off\":\n\n-  If the UE receives a DEREGISTRATION REQUEST message before the UE-\ninitiated de-registration procedure has been completed, this message shall\nbe ignored and the UE-initiated de-registration procedure shall continue.\n\n   Otherwise:\n\n-  If the UE receives a DEREGISTRATION REQUEST message before the UE-\ninitiated de-registration procedure has been completed, it shall treat the\nmessage as specified in subclause\u00a05.5.2.3.2 with the following\nmodification:\n\n-  If the DEREGISTRATION REQUEST message received by the UE contains de-\nregistration type \"re-registration required\", and the UE-initiated de-\nregistration procedure is with de-registration type \"normal de-\nregistration\", the UE need not initiate the registration procedure for\ninitial registration.\n\ne) De-registration and 5GMM common procedure collision.\n\n   De-registration containing de-registration type \"switch off\":\n\n-  If the UE receives a message used in a 5GMM common procedure before the\nde-registration procedure has been completed, this message shall be ignored\nand the de-registration procedure shall continue.\n\n   Otherwise:\n\n-  If the UE receives a message used in a 5GMM common procedure before the\nde-registration procedure has been completed, both the 5GMM common\nprocedure and the de-registration procedure shall continue.\n\nf) Change of cell into a new tracking area.\n\n   If a cell change into a new tracking area that is not in the stored TAI\nlist occurs before the UE-initiated de-registration procedure is completed,\nthe de-registration procedure shall be aborted and re-initiated after\nsuccessfully performing a registration procedure for mobility or periodic\nupdate. If the de-registration procedure was initiated due to removal of\nthe USIM or the UE is to be switched off, the UE shall abort the de-\nregistration procedure and enter the state 5GMM-DEREGISTERED.\n\ng) Transmission failure of DEREGISTRATION REQUEST message indication with\nTAI change from lower layers.\n\n   If the current TAI is not in the TAI list, the de-registration procedure\nshall be aborted and re-initiated after successfully performing a\nregistration procedure for mobility or periodic update. If the detach\nprocedure was initiated due to removal of the USIM or the UE is to be\nswitched off, the UE shall abort the de-registration procedure and enter\nthe state 5GMM-DEREGISTERED.\n\n   If the current TAI is still part of the TAI list, the UE shall restart\nthe de-registration procedure.\n\nh) Transmission failure of DEREGISTRATION REQUEST message indication\nwithout TAI change from lower layers.\n\n   The UE shall restart the de-registration procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the network side", "numbering": "5.5.2.2.7", "title_level": 4, "desc": "5.5.2.2.7   Abnormal cases in the network side\n\nApart from the case described in subclauses\u00a05.5.2.2.2 and 5.5.2.2.3, no\nabnormal cases have been identified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated de-registration procedure", "numbering": "5.5.2.3", "title_level": 3, "desc": "5.5.2.3  Network-initiated de-registration procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated de-registration procedure initiation", "numbering": "5.5.2.3.1", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated de-registration procedure completion by", "numbering": "5.5.2.3.2", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-initiated de-registration procedure completion by", "numbering": "5.5.2.3.3", "title_level": 4, "desc": "5.5.2.3.1   Network-initiated de-registration procedure initiation\n\nThe network initiates the de-registration procedure by sending a\nDEREGISTRATION REQUEST message to the UE (see example in\nfigure\u00a05.5.2.3.1.1).\n\nNOTE:  If the AMF performs a local de-registration, it will inform the UE\nwith a 5GMM messages (e.g. SERVICE REJECT message or REGISTRATION REJECT\nmessage) with 5GMM cause #10 \"implicitly de-registered\" only when the UE\ninitiates a 5GMM procedure.\n\nThe network may include a 5GMM cause IE to specify the reason for the\nDEREGISTRATION REQUEST message. The network shall start timer T3522. The\nnetwork shall indicate whether re-registration is needed or not in the De-\nregistration type IE. The network shall also indicate via the access type\nwhether the de-registration procedure is:\n\na) for 3GPP access; or\n\nb) for 3GPP access, non-3GPP access or both when the UE is registered in\nthe same PLMN for both accesses.\n\nThe AMF shall trigger the SMF to release the PDU session context(s) over\nthe indicated access(es), if any, for the UE locally and enter state 5GMM-\nDEREGISTERED-INITIATED.\n\n[pic]\n\nFigure\u00a05.5.2.3.1.1: Network-initiated de-registration procedure\n\n\n5.5.2.3.2   Network-initiated de-registration procedure completion by the\n         UE\n\nUpon receiving the DEREGISTRATION REQUEST message, and the DEREGISTRATION\nREQUEST message indicates \"re-registration required\" and the de-\nregistration request is for 3GPP access, the UE shall release the PDU\nsessions over 3GPP access, if any, locally without peer-to-peer signalling\nbetween the UE and the SMF. The UE shall stop the timer(s) T3346, T3396,\nT35cd and T35ef, if any is running. The UE shall ignore the 5GMM cause IE\nif received. The UE shall send a DEREGISTRATION ACCEPT message to the\nnetwork and enter the state 5GMM-DEREGISTERED for 3GPP access. Furthermore,\nthe UE shall, after the completion of the de-registration procedure, and\nthe release of the existing NAS signalling connection, initiate an initial\nregistration. The UE should also re-establish any previously established\nPDU sessions.\n\nEditor's note:  It is FFS to use which timer for T35cd.\n\nEditor's note:  It is FFS to use which timer for T35ef.\n\nUpon receiving the DEREGISTRATION REQUEST message and the DEREGISTRATION\nREQUEST message indicates \"re-registration required\" and the de-\nregistration request is for non-3GPP access, the UE shall release the PDU\nsessions over non-3GPP access, if any, locally without peer-to-peer\nsignalling between the UE and the SMF. The UE shall stop the timer(s)\nT3346, T3396, T35cd and T35ef, if any is running. The UE shall ignore the\n5GMM cause IE if received. The UE shall send a DEREGISTRATION ACCEPT\nmessage to the network and enter the state 5GMM-DEREGISTERED for non-3GPP\naccess. Furthermore, the UE shall, after the completion of the de-\nregistration procedure, and the release of the existing NAS signalling\nconnection, initiate an initial registration over non-3GPP. The UE should\nalso re-establish any previously established PDU sessions.\n\nUpon receiving the DEREGISTRATION REQUEST message and the DEREGISTRATION\nREQUEST message indicates \"re-registration required\" and the de-\nregistration request is for both 3GPP access and non-3GPP access when the\nUE is registered in the same PLMN for both accesses, the UE shall release\nthe PDU sessions over both 3GPP access and non-3GPP access, if any, locally\nwithout peer-to-peer signalling between the UE and the SMF. The UE shall\nstop the timer(s) T3346, T3396, T35cd and T35ef, if any is running. The UE\nshall ignore the 5GMM cause IE if received. The UE shall send a\nDEREGISTRATION ACCEPT message to the network and enter the state 5GMM-\nDEREGISTERED for both 3GPP access and non-3GPP access. Furthermore, the UE\nshall, after the completion of the de-registration procedure, and the\nrelease of the existing NAS signalling connection, initiate an initial\nregistration over both 3GPP access and non-3GPP access. The UE should also\nre-establish any previously established PDU sessions.\n\nNOTE\u00a01:  When the de-registration type indicates \"re-registration\nrequired\", user interaction is necessary in some cases when the UE cannot\nre-establish the PDU session (s), if any, automatically.\n\nUpon receiving the DEREGISTRATION REQUEST message and the DEREGISTRATION\nREQUEST message indicates \"re-registration not required\" and the de-\nregistration request is for 3GPP access, the UE shall release the PDU\nsessions over 3GPP access, if any, locally without peer-to-peer signalling\nbetween the UE and the SMF. The UE shall send a DEREGISTRATION ACCEPT\nmessage to the network and enter the state 5GMM-DEREGISTERED for 3GPP\naccess.\n\nUpon receiving the DEREGISTRATION REQUEST message and the DEREGISTRATION\nREQUEST message indicates \"re-registration not required\" and the de-\nregistration request is for non-3GPP access, the UE shall release the PDU\nsessions over non-3GPP access, if any, locally without peer-to-peer\nsignalling between the UE and the SMF. The UE shall send a DEREGISTRATION\nACCEPT message to the network and enter the state 5GMM-DEREGISTERED for non-\n3GPP access.\n\nUpon receiving the DEREGISTRATION REQUEST message and the DEREGISTRATION\nREQUEST message indicates \"re-registration not required\" and the de-\nregistration request is for both 3GPP access and non-3GPP access when the\nUE is registered in the same PLMN for both accesses, the UE shall release\nthe PDU sessions over both 3GPP access and non-3GPP access, if any, locally\nwithout peer-to-peer signalling between the UE and the SMF. The UE shall\nsend a DEREGISTRATION ACCEPT message to the network and enter the state\n5GMM-DEREGISTERED for both 3GPP access and non-3GPP access.\n\nUpon sending a DEREGISTRATION ACCEPT message, the UE shall delete the\nrejected NSSAI as specified in subclause\u00a04.6.2.2.\n\nIf the de-registration type indicates \"re-registration required\", then the\nUE shall ignore the 5GMM cause IE if received.\n\nIf the de-registration type indicates \"re-registration not required\", the\nUE shall take the actions depending on the received 5GMM cause value:\n\n#3 (Illegal UE);\n\n#6 (Illegal ME); or\n\n#7 (5GS services not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall\nconsider the USIM as invalid for 5GS services until switching off or the\nUICC containing the USIM is removed. The UE shall delete the list of\nequivalent PLMNs and shall enter the state 5GMM-DEREGISTERED.\n\n   A UE operating in single-registration mode shall handle the EMM\nparameters, EMM state, 4G-GUTI, last visited registered TAI, TAI list and\neKSI as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when a DETACH REQUEST\nis received with the EMM cause with the same value and with detach type set\nto \"re-attach not required\".\n\nNOTE\u00a02:  The possibility to configure a UE so that the radio transceiver\nfor a specific radio access technology is not active, although it is\nimplemented in the UE, is out of scope of the present specification.\n\n#11  (PLMN not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall delete\nthe list of equivalent PLMNs, shall reset the registration attempt counter\nand enter the state 5GMM-DEREGISTERED.PLMN-SEARCH.\n\n   The UE shall store the PLMN identity in the \"forbidden PLMN list\".\n\n   The UE shall perform a PLMN selection according to 3GPP\u00a0TS\u00a023.122\u00a0[5].\n\n   A UE operating in single-registration mode shall handle the EMM\nparameters, EMM state, 4G-GUTI, last visited registered TAI, TAI list and\neKSI as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when a DETACH REQUEST\nis received with the EMM cause with the same value and with detach type set\nto \"re-attach not required\".\n\n#12  (Tracking area not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall reset\nthe registration attempt counter and shall enter the state 5GMM-\nDEREGISTERED.LIMITED-SERVICE.\n\n   The UE shall store the current TAI in the list of \"forbidden tracking\nareas for regional provision of service\".\n\n   A UE operating in single-registration mode shall handle the EMM\nparameters, EMM state, 4G-GUTI, last visited registered TAI, TAI list and\neKSI as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when a DETACH REQUEST\nis received with the EMM cause with the same value and with detach type set\nto \"re-attach not required\".\n\n#13  (Roaming not allowed in this tracking area).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall reset\nthe registration attempt counter and shall change to state 5GMM-\nDEREGISTERED.PLMN-SEARCH.\n\n   The UE shall store the current TAI in the list of \"forbidden tracking\nareas for roaming\".\n\n   The UE shall perform a PLMN selection according to 3GPP\u00a0TS\u00a023.122\u00a0[5]\n\n   A UE operating in single-registration mode the UE shall handle the EMM\nparameters, EMM state, 4G-GUTI, last visited registered TAI, TAI list and\neKSI as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when a DETACH REQUEST\nis received with the EMM cause with the same value and with detach type set\nto \"re-attach not required\".\n\n#27  (N1 mode not allowed).\n\n   The UE capable of S1 mode shall disable the N1 mode capability for both\n3GPP access and non-3GPP access (see subclause\u00a04.9).\n\n\n5.5.2.3.3   Network-initiated de-registration procedure completion by the\n         network\n\nThe network shall stop timer T3522 upon receipt of the DEREGISTRATION\nACCEPT message. The network shall enter state 5GMM-DEREGISTERED for 3GPP\naccess if the de-registration request is for 3GPP access. The network shall\nenter state 5GMM-DEREGISTERED for non-3GPP access if the de-registration\nrequest is for non-3GPP access. The network shall enter state 5GMM-\nDEREGISTERED for both 3GPP access and non-3GPP access if the de-\nregistration request is for both 3GPP access and non-3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.5.2.3.4", "title_level": 4, "desc": "5.5.2.3.4   Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Transmission failure of DEREGISTRATION ACCEPT message indication from\nlower layers.\n\n   The de-registration procedure shall be progressed and the UE shall send\nthe DEREGISTRATION ACCEPT message.\n\nb) DEREGISTRATION REQUEST, other 5GMM cause values than those treated in\nsubclause\u00a05.5.2.3.2 or no 5GMM cause IE is included, and the De-\nregistration type IE indicates \"re-registration not required\".\n\n   The UE shall delete 5G-GUTI, TAI list, last visited registered TAI, list\nof equivalent PLMNs, ngKSI, shall set the 5GS update status to 5U2 NOT\nUPDATED and shall start timer T3502.\n\n   A UE not supporting S1 mode may enter the state 5GMM-DEREGISTERED.PLMN-\nSEARCH in order to perform a PLMN selection according to\n3GPP\u00a0TS\u00a023.122\u00a0[5]; otherwise the UE shall enter the state 5GMM-\nDEREGISTERED.ATTEMPTING-REGISTRATION.\n\n   A UE operating in single-registration mode shall set the EPS update\nstatus to EU2 NOT UPDATED and shall delete the EMM parameters 4G-GUTI, last\nvisited registered TAI, TAI list and eKSI and shall enter the state EMM-\nDEREGISTERED.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the network side", "numbering": "5.5.2.3.5", "title_level": 4, "desc": "5.5.2.3.5   Abnormal cases in the network side\n\nThe following abnormal cases can be identified:\n\na) T3522 time-out\n\n   On the first expiry of the timer, the network shall retransmit the\nDEREGISTRATION REQUEST message and shall start timer T3522. This\nretransmission is repeated four times, i.e. on the fifth expiry of timer\nT3522, the de-registration procedure shall be aborted.\n\nb) Lower layer failure\n\n   The de-registration procedure is aborted.\n\nc) De-registration procedure collision\n\n   If the network receives a DEREGISTRATION REQUEST message with \"switch\noff\" indication, before the network-initiated de-registration procedure has\nbeen completed, both procedures shall be considered completed.\n\n   If the network receives a DEREGISTRATION REQUEST message without \"switch\noff\" indication, before the network-initiated de-registration procedure has\nbeen completed, the network shall send a DEREGISTRATION ACCEPT message to\nthe UE.\n\nd) De-registration and registration procedure for initial registration\ncollision\n\n   If the network receives a REGISTRATION REQUEST message indicating either\n\"initial registration\" or \"5GS emergency registration\" in the 5GS\nregistration type IE before the network-initiated de-registration procedure\nwith de-registration type \"re-registration required\" has been completed,\nthe network shall aborted the de-registration procedure and the\nregistration procedure shall be progressed after the PDU sessions\nassociated with the access type the REGISTRATION REQUEST message is sent\nover have been deleted.\n\ne) De-registration and registration procedure for mobility and periodic\nregistration update collision\n\n   If the network sent a DEREGISTRATION REQUEST message indicating \"re-\nregistration required\" in the De-registration type IE and the network\nreceives a REGISTRATION REQUEST message indicating either \"mobility\nregistration updating\" or \"mobility registration updating\" in the 5GS\nregistration type IE before the network-initiated de-registration procedure\nhas been completed, the de-registration procedure shall be progressed, i.e.\nthe REGISTRATION REQUEST message shall be ignored.\n\nf) De-registration and service request procedure collision\n\n   If the network receives a SERVICE REQUEST message before the network-\ninitiated de-registration procedure has been completed (e.g. the\nDEREGISTRATION REQUEST message is pending to be sent to the UE) and the\nDEREGISTRATION REQUEST contains de-registration type \"re-registration\nrequired\", the network shall progress the de-registration procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "eCall inactivity procedure", "numbering": "5.5.3", "title_level": 2, "desc": "5.5.3  eCall inactivity procedure\n\nThe eCall inactivity procedure is applicable only to a UE configured for\neCall only mode as specified in 3GPP\u00a0TS\u00a031.102\u00a0[22]. The procedure shall be\nstarted when:\n\na) the UE is in any 5GMM-REGISTERED substate except substates 5GMM-\nREGISTERED.PLMN-SEARCH or 5GMM-REGISTERED.NO-CELL-AVAILABLE;\n\nb) the UE is in 5GMM-IDLE mode; and\n\nc) one of the following conditions applies:\n\n1) timer T3444 expires or is found to have already expired and timer T3445\nis not running;\n\n2) timer T3445 expires or is found to have already expired and timer T3444\nis not running; or\n\n3) timers T3444 and T3445 expire or are found to have already expired.\n\nNOTE:  Timers T3444 and T3445 are specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\nThe UE shall then perform the following actions:\n\na) stop other running timers (e.g. T3511, T3512);\n\nb) if the UE is currently registered to the network for 5GS services,\nperform a de-registration procedure;\n\nc) delete any 5G-GUTI, TAI list, last visited registered TAI, list of\nequivalent PLMNs, and ngKSI; and\n\nd) enter 5GMM-DEREGISTERED.eCALL-INACTIVE state.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM connection management procedures", "numbering": "5.6", "title_level": 1, "desc": "5.6  5GMM connection management procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service request procedure", "numbering": "5.6.1", "title_level": 2, "desc": "5.6.1  Service request procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.6.1.1", "title_level": 3, "desc": "5.6.1.1  General\n\nThe purpose of the service request procedure is to change the 5GMM mode\nfrom 5GMM-IDLE to 5GMM-CONNECTED mode, and/or to request the establishment\nof user-plane resources for PDU sessions which are activated without user-\nplane resources. In latter case, the 5GMM mode can be the 5GMM-IDLE mode or\nthe 5GMM-CONNECTED mode if the UE requires to activate user-plane resources\nfor PDU sessions. This procedure is used when:\n\n-  the network has downlink signalling pending over 3GPP access and the UE\nis in 5GMM-IDLE mode over 3GPP access;\n\n-  the network has downlink signalling pending over non-3GPP access, the UE\nis in 5GMM-IDLE mode over non-3GPP access and in 5GMM-IDLE or 5GMM-\nCONNECTED mode over 3GPP access;\n\n-  the UE has uplink signalling pending over 3GPP access and the UE is in\n5GMM-IDLE mode over 3GPP access;\n\n-  the network has downlink user data pending over 3GPP access and the UE\nis in 5GMM-IDLE mode over 3GPP access;\n\n-  the network has downlink user data pending over non-3GPP access, the UE\nis in 5GMM-IDLE mode over non-3GPP access and in 5GMM-IDLE or 5GMM-\nCONNECTED mode over 3GPP access;\n\n-  the UE has user data pending over 3GPP access and the UE is in 5GMM-IDLE\nor 5GMM-CONNECTED mode over 3GPP access;\n\n-  the UE has user data pending over non-3GPP access and the UE is in 5GMM-\nCONNECTED mode over non-3GPP access;\n\n-  the UE in 5GMM-IDLE mode over non-3GPP access, receives an indication\nfrom the lower layers of non-3GPP access, that the access stratum\nconnection is established between UE and network; or\n\n-  the UE in 5GMM-IDLE or 5GMM-CONNECTED mode over 3GPP access receives a\nrequest for emergency service from the upper layer and performs emergency\nservices fallback as specified in subclause\u00a04.13.4.2 of 3GPP\u00a0TS\u00a023.502\u00a0[9].\n\nThis procedure shall not be used for initiating user data transfer or PDU\nsession related signalling related to a PDU session for LADN when the UE is\nlocated outside the LADN service area.\n\nThe service request procedure is initiated by the UE, however, it can be\ntriggered by the network by means of:\n\n-  the paging procedure (see subclause\u00a05.6.2) for the transfer of downlink\nsignalling or user data pending over 3GPP access to a UE in 5GMM-IDLE mode\nover 3GPP access;\n\n-  the paging procedure (see subclause\u00a05.6.2) for the transfer of downlink\nsignalling or user data pending over non-3GPP access to a UE in 5GMM-IDLE\nmode over 3GPP access and in 5GMM-IDLE mode over non-3GPP access;\n\n-  the notification procedure (see subclause\u00a05.6.3) for the transfer of\ndownlink signalling or user data pending over non-3GPP access to a UE in\n5GMM-CONNECTED mode over3GPP access and in 5GMM-IDLE mode over non-3GPP\naccess; or\n\n-  the notification procedure (see subclause\u00a05.6.3) for the transfer of\ndownlink signalling or user data pending over 3GPP access to a UE in 5GMM-\nIDLE mode over 3GPP access and in 5GMM-CONNECTED mode over non-3GPP access.\n\nNOTE:  In case the UE is in 5GMM-IDLE mode over 3GPP access and in 5GMM-\nCONNECTED mode over non-3GPP access and downlink signalling or user data\npending over 3GPP access needs to be transferred, the AMF can trigger\neither the notification procedure or the paging procedure based on\nimplementation.\n\nThe UE shall invoke the service request procedure when:\n\na) the UE, in 5GMM-IDLE mode over 3GPP access, receives a paging request\nfrom the network;\n\nb) the UE, in 5GMM-CONNECTED mode over 3GPP access, receives a notification\nfrom the network with access type indicating non-3GPP access;\n\nc) the UE, in 5GMM-IDLE mode over 3GPP access, has uplink signalling\npending;\n\nd) the UE, in 5GMM-IDLE mode over 3GPP access, has uplink user data\npending;\n\ne) the UE, in 5GMM-CONNECTED mode, has user data pending due to no user-\nplane resources established for PDU session(s) used for user data\ntransport;\n\nf) the UE in 5GMM-IDLE mode over non-3GPP access, receives an indication\nfrom the lower layers of non-3GPP access, that the access stratum\nconnection is established between UE and network;\n\ng) the UE, in 5GMM-IDLE mode over 3GPP access, receives a notification from\nthe network with access type indicating 3GPP access when the UE is in 5GMM-\nCONNECTED mode over non-3GPP access; or\n\nh) the UE in 5GMM-IDLE or 5GMM-CONNECTED mode over 3GPP access receives a\nrequest for emergency service from the upper layer and performs emergency\nservices fallback as specified in subclause\u00a04.13.4.2 of 3GPP\u00a0TS\u00a023.502\u00a0[9].\n\nThe UE shall not invoke the service request procedure when the UE is in the\nstate 5GMM-SERVICE-REQUEST-INITIATED.\n\n[pic]\n\nFigure\u00a05.6.1.1.1: Service Request procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service request procedure initiation", "numbering": "5.6.1.2", "title_level": 3, "desc": "5.6.1.2  Service request procedure initiation\n\nThe UE initiates the service request procedure by sending a SERVICE REQUEST\nmessage to the AMF and starts timer T3517.\n\nFor case a), b) and g) in subclause\u00a05.6.1.1, the service type IE in the\nSERVICE REQUEST message shall be set to \"mobile terminated services\".\n\nFor case c), d), e) and f) in subclause\u00a05.6.1.1, if the UE is a UE\nconfigured for high priority access in selected PLMN, the service type IE\nin the SERVICE REQUEST message shall be set to \"high priority access\".\n\nFor case a) in subclause\u00a05.6.1.1:\n\na) if the paging request includes an indication for non-3GPP access type,\nthe Allowed PDU session status IE shall be included in the SERVICE REQUEST\nmessage to indicate the PDU session(s) for which the UE allows the user-\nplane resources to be re-establish over 3GPP access or if there is no PDU\nsession(s) for which the UE allows the user-plane resources to be re-\nestablished over 3GPP access;\n\nb) if the UE has uplink user data pending to be sent, the Uplink data\nstatus IE shall be included in the SERVICE REQUEST message to indicate the\nPDU session(s) for which the UE has pending user data to be sent; or\n\nc) otherwise, the Uplink data status IE shall not be included in the\nSERVICE REQUEST message.\n\nFor case b) in subclause\u00a05.6.1.1, the Allowed PDU session status IE shall\nbe included in the SERVICE REQUEST message to indicate the PDU session(s)\nfor which the UE allows the user-plane resources to be re-established over\n3GPP access or if there is no PDU session(s) for which the UE allows the\nuser-plane resources to be re-established over 3GPP access.\n\nFor case c) in subclause\u00a05.6.1.1, the Uplink data status IE shall not be\nincluded in the SERVICE REQUEST message except if the UE has one or more\nactive always-on PDU sessions. The UE shall set the service type IE in the\nSERVICE REQUEST message to \"emergency services\", if the SERVICE REQUEST\nmessage is triggered by a request for emergency services from the upper\nlayer and both the UE and the network support emergency services in N1\nmode. Otherwise, if the UE is not a UE configured for high priority access\nin selected PLMN, the UE shall set the service type IE to \"signalling\".\n\nFor cases d) and e) in subclause\u00a05.6.1.1, the Uplink data status IE shall\nbe included in the SERVICE REQUEST message to indicate the PDU session(s)\nthe UE has pending user data to be sent. If the UE is not a UE configured\nfor high priority access in selected PLMN, the service type IE in the\nSERVICE REQUEST message shall be set to \"data\".\n\nFor case f) in subclause\u00a05.6.1.1:\n\na) if the UE has uplink user data pending to be sent, the Uplink data\nstatus IE shall be included in the SERVICE REQUEST message to indicate the\nPDU session(s) the UE has pending user data to be sent. If the UE is not a\nUE configured for high priority access in selected PLMN, the service type\nIE in the SERVICE REQUEST message shall be set to \"data\";\n\nb) otherwise, if the UE is not a UE configured for high priority access in\nselected PLMN, the service type IE in the SERVICE REQUEST message shall be\nset to \"signalling\".\n\nFor case g) in subclause\u00a05.6.1.1, if the UE has uplink user data pending to\nbe sent, the Uplink data status IE shall be included in the SERVICE REQUEST\nmessage to indicate the PDU session(s) the UE has pending user data to be\nsent.\n\nFor case h) in subclause\u00a05.6.1.1, if the UE receives a request for\nemergency service from the upper layer and performs emergency services\nfallback as specified in subclause\u00a04.13.4.2 of 3GPP\u00a0TS\u00a023.502\u00a0[9], the UE\nshall send a SERVICE REQUEST message with service type set to \"emergency\nservices fallback\".\n\nThe UE shall include a valid 5G-S-TMSI in the 5G-S-TMSI IE of the SERVICE\nREQUEST message.\n\nIf the UE has one or more active always-on PDU sessions and the user-plane\nresources for these PDU sessions are not established, the UE shall include\nthe Uplink data status IE in the SERVICE REQUEST message and indicate that\nthe UE has pending user data to be sent for those PDU sessions.\n\nThe PDU session status information element may be included in the SERVICE\nREQUEST message to indicate the PDU session(s) available in the UE\nassociated with the access type the SERVICE REQUEST message is sent over.\nIf the PDU session status information element is included in the SERVICE\nREQUEST message, then the AMF shall release all those PDU sessions locally\n(without peer-to-peer signalling between the UE and the network) which are\nin active on the AMF side associated with the access type the SERVICE\nREQUEST message is sent over, but are indicated by the UE as being\ninactive, and shall request the SMF to release all those PDU sessions\nlocally.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Common procedure initiation", "numbering": "5.6.1.3", "title_level": 3, "desc": "5.6.1.3  Common procedure initiation\n\nUpon receipt of the SERVICE REQUEST message, the AMF may initiate the\ncommon procedures e.g. the 5G AKA based primary authentication and key\nagreement procedure or the EAP based primary authentication and key\nagreement procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service request procedure accepted by the network", "numbering": "5.6.1.4", "title_level": 3, "desc": "5.6.1.4  Service request procedure accepted by the network\n\nFor cases a), b), c), d), e), f) and g) in subclause\u00a05.6.1.1, the UE shall\ntreat the reception of the SERVICE ACCEPT message as successful completion\nof the procedure and stop timer T3517 and enter the state 5GMM-REGISTERED.\n\nFor case h) in subclause\u00a05.6.1.1, the UE shall treat the indication from\nthe lower layers when the UE has changed to S1 mode or E-UTRA connected to\n5GCN (see 3GPP\u00a0TS\u00a023.502\u00a0[9]) as successful completion of the procedure and\nstop timer T3517.\n\nIf the AMF needs to initiate PDU session status synchronization or a PDU\nsession status IE was included in the SERVICE REQUEST message, the AMF\nshall include a PDU session status IE in the SERVICE ACCEPT message to\nindicate which PDU sessions associated with the access type the SERVICE\nACCEPT message is sent over are active in the AMF. If the PDU session\nstatus information element is included in the SERVICE ACCEPT message, then\nthe UE shall release all those PDU sessions locally (without peer-to-peer\nsignalling between the network and the UE) which are in active on the UE\nside associated with the access type the SERVICE ACCEPT message is sent\nover, but are indicated by the AMF as being inactive.\n\nIf the Uplink data status IE is included in the SERVICE REQUEST message,\nthe AMF shall:\n\na) indicate the SMF to re-establish the user-plane resources for the\ncorresponding PDU sessions;\n\nb) include the PDU session reactivation result IE in the SERVICE ACCEPT\nmessage to indicate the user-plane resources reactivation result of the PDU\nsessions the UE requested to re-establish ;\n\nc) determine the UE presence in LADN service area and forward the UE\npresence in LADN service area towards the SMF, if the corresponding PDU\nsession is a PDU session for LADN; and\n\nd) include a cause #43 \"LADN not available\" to indicate the user-plane\nresources of the PDU session is not activated in the PDU session\nreactivation result error cause IE of the SERVICE ACCEPT message, if the\ncorresponding PDU session is a PDU session for LADN and the SMF indicated\nto the AMF that the UE is located outside the LADN service area.\n\nIf the Allowed PDU session status IE is included in the SERVICE REQUEST\nmessage, the AMF shall:\n\na) indicate the SMF to re-establish the user-plane resources for the\ncorresponding PDU sessions allowed to be re-established over 3GPP access\nand have indicated pending downlink data if there is at least one PDU\nsession that indicated in the Allowed PDU session status IE can be re-\nestablished over 3GPP access;\n\nb) notify the SMF that have indicated pending downlink data, that\nreactivation of the user-plane resources for the corresponding PDU sessions\ncannot be performed if not allowed to be re-established over 3GPP access;\nand\n\nc) include the PDU session reactivation result IE in the SERVICE ACCEPT\nmessage to indicate the successfully reactivated user-plane resources for\nthe corresponding PDU sessions, if any.\n\nIf the AMF has included the PDU session reactivation result IE in the\nSERVICE ACCEPT message and there exist one or more PDU sessions for which\nthe user-plane resources cannot be re-established, then the AMF may include\nthe PDU session reactivation result error cause IE to indicate the cause of\nfailure to re-establish the user-plane resources.\n\nIf the SERVICE REQUEST message is for emergency services fallback, the AMF\ntriggers the emergency services fallback procedure as specified in\nsubclause\u00a04.13.4.2 of 3GPP\u00a0TS\u00a023.502\u00a0[9].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service request procedure not accepted by the network", "numbering": "5.6.1.5", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service request procedure for initiating a PDU session", "numbering": "5.6.1.6", "title_level": 3, "desc": "5.6.1.5  Service request procedure not accepted by the network\n\nIf the service request cannot be accepted, the network shall return a\nSERVICE REJECT message to the UE including an appropriate 5GMM cause value\nand stop timer T3517.\n\nIf the AMF needs to initiate PDU session status synchronisation or a PDU\nsession status IE was included in the SERVICE REQUEST message, the AMF\nshall include a PDU session status IE in the SERVICE REJECT message to\nindicate which PDU sessions associated with the access type the SERVICE\nREJECT message is sent over are active in the AMF. If the PDU session\nstatus IE is included in the SERVICE REJECT message, then the UE shall\nrelease all those PDU sessions locally (without peer-to-peer signalling\nbetween the network and the UE) which are active on the UE side associated\nwith the access type the SERVICE REJECT message is sent over, but are\nindicated by the AMF as being inactive.\n\nOn receipt of the SERVICE REJECT message, if the message is integrity\nprotected, the UE shall stop timer T3517 if running.\n\nIf the service request for mobile originated services is rejected due to\ngeneral NAS level mobility management congestion control, the network shall\nset the 5GMM cause value to #22 \"congestion\" and assign a value for back-\noff timer T3346.\n\nIf the AMF determines that the UE is in a non-allowed area or is not in an\nallowed area as specified in subclause\u00a05.3.5, then:\n\na) if the service type IE in the SERVICE REQUEST message is set to\n\"signalling\" or \"data\", the AMF shall send a SERVICE REJECT message with\nthe 5GMM cause value set to #28 \"Restricted service area\";\n\nb) otherwise, if the service type IE in the SERVICE REQUEST message is set\nto \"mobile terminated services\", \"emergency services\", \"emergency services\nfallback\" or \"high priority access\", the AMF shall continue the process as\nspecified in subclause\u00a05.6.1.4 unless for other reasons the service request\ncannot be accepted.\n\nThe UE shall take the following actions depending on the 5GMM cause value\nreceived in the SERVICE REJECT message.\n\n#3 (Illegal UE);\n\n#6 (Illegal ME); or\n\n#7 (5GS services not allowed).\n\n   The UE shall set the 5GS update status to 5U3 ROAMING NOT ALLOWED (and\nshall store it according to subclause\u00a05.1.3.2.2) and shall delete any 5G-\nGUTI, last visited registered TAI, TAI list and ngKSI. The UE shall\nconsider the USIM as invalid for 5GS services until switching off or the\nUICC containing the USIM is removed. The UE shall enter the state 5GMM-\nDEREGISTERED.\n\n   If S1 mode is supported by the UE, the UE shall handle the EMM\nparameters EMM state, GUTI, last visited registered TAI, TAI list and eKSI\nas specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the service request\nprocedure is rejected with the EMM cause with the same value. The USIM\nshall be considered as invalid also for non-EPS services until switching\noff or the UICC containing the USIM is removed.\n\nNOTE\u00a01:  The possibility to configure a UE so that the radio transceiver\nfor a specific radio access technology is not active, although it is\nimplemented in the UE, is out of scope of the present specification.\n\n#9 (UE identity cannot be derived by the network).\n\n   The UE shall set the 5GS update status to 5U2 NOT UPDATED (and shall\nstore it according to subclause\u00a05.1.3.2.2) and shall delate any 5G-GUTI,\nlast visited registered TAI, TAI list and ngKSI. The UE shall enter the\nstate 5GMM-DEREGISTERED.\n\n   If the service request was initiated for emergency services fallback,\nthe UE shall attempt to select an E-UTRA cell connected to EPC or 5GCN\naccording to the emergency services support indicator. If the UE finds a\nsuitable E-UTRA cell, it then proceeds with the appropriate EMM or 5GMM\nprocedures.\n\n   If the service request was initiated for any reason other than emergency\nservices fallback or initiating a PDU session for emergency services, the\nUE shall perform a new initial registration procedure.\n\nNOTE\u00a02:  User interaction is necessary in some cases when the UE cannot re-\nactivate the PDU session(s) automatically.\n\n   If the UE is operating in the single-registration mode, the UE shall\nhandle the EMM parameters EMM state, GUTI, last visited registered TAI, TAI\nlist and eKSI as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the\nservice request procedure is rejected with the EMM cause with the same\nvalue.\n\n#10    (Implicitly de-registered).\n\n   The UE shall enter the state 5GMM-DEREGISTERED.NORMAL-SERVICE. The UE\nshall delete any mapped 5G NAS security context or partial native 5G NAS\nsecurity context.\n\n   If the rejected request was not for initiating a PDU session for\nemergency services, the UE shall perform a new initial registration\nprocedure.\n\nNOTE\u00a03:  User interaction is necessary in some cases when the UE cannot re-\nestablish the PDU session(s) automatically.\n\n   If S1 mode is supported by the UE, the UE shall handle the EMM state as\nspecified in 3GPP\u00a0TS\u00a024.301\u00a0[15] for the case when the service request\nprocedure is rejected with the EMM cause with the same value.\n\n#22  (Congestion).\n\n   If the T3346 value IE is present in the SERVICE REJECT message and the\nvalue indicates that this timer is neither zero nor deactivated, the UE\nshall proceed as described below, otherwise it shall be considered as an\nabnormal case and the behaviour of the UE for this case is specified in\nsubclause\u00a05.6.1.6.\n\n   If the rejected request was not for initiating a PDU session for\nemergency services, the UE shall abort the service request procedure and\nenter state 5GMM-REGISTERED, and stop timer T3517 if still running.\n\n   The UE shall stop timer T3346 if it is running.\n\n   If the SERVICE REJECT message is integrity protected, the UE shall start\ntimer T3346 with the value provided in the T3346 value IE.\n\n   If the SERVICE REJECT message is not integrity protected, the UE shall\nstart timer T3346 with a random value from the default range specified in\n3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n   For all other cases the UE stays in the current serving cell and applies\nnormal cell reselection process. The service request procedure is started,\nif still necessary, when timer T3346 expires or is stopped.\n\n#27  (N1 mode not allowed).\n\n   The UE capable of S1 mode shall disable the N1 mode capability for both\n3GPP access and non-3GPP access (see subclause\u00a04.9).\n\n#28  (Restricted service area).\n\n   The UE shall perform the registration procedure for mobility and\nperiodic registration update (see subclause\u00a05.5.1.3).\n\n\n5.6.1.6  Service request procedure for initiating a PDU session for\n         emergency services not accepted by the network\n\nIf the service request for initiating a PDU session for emergency services\ncannot be accepted by the network, the UE shall perform the procedures as\ndescribed in subclause\u00a05.6.1.5. Then if the UE is in the same selected PLMN\nwhere the last service request was attempted, the UE shall:\n\na) inform the upper layers of the failure of the procedure; or\n\nNOTE\u00a01:  This can result in the upper layers requesting another emergency\ncall attempt using domain selection as specified in 3GPP\u00a0TS\u00a023.167\u00a0[6].\n\nb) de-register locally, if not de-registered already, attempt initial\nregistration for emergency services.\n\nIf the service request for initiating a PDU session for emergency services\nfails due to abnormal cases a) in subclause\u00a05.6.1.7, the UE shall perform\nthe procedures as described in subclause\u00a05.6.1.5. Then if the UE is in the\nsame selected PLMN where the last SERVICE REQUEST message was attempted,\nthe UE shall:\n\na) inform the upper layers of the failure of the procedure; or\n\nNOTE\u00a02:  This can result in the upper layers requesting another emergency\ncall attempt using domain selection as specified in 3GPP\u00a0TS\u00a023.167\u00a0[6] and\n3GPP\u00a0TS\u00a024.229\u00a0[14].\n\nb) de-register locally, if not de-registered already, attempt initial\nregistration for emergency services.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.6.1.7", "title_level": 3, "desc": "5.6.1.7  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) T3517 expired.\n\n   The UE shall enter the state 5GMM-REGISTERED.\n\n   If the UE triggered the service request procedure in 5GMM-IDLE mode,\nthen the 5GMM sublayer shall abort the procedure and release locally any\nresources allocated for the service request procedure.\n\n   If the UE triggered the service request procedure in 5MM-CONNECTED mode,\nthe 5GMM sublayer shall abort the procedure, and stay in 5GMM-CONNECTED\nmode.\n\nb) The lower layers indicate that the access attempt is barred.\n\n   The UE shall not start the service request procedure. The UE stays in\nthe current serving cell and applies the normal cell reselection process.\n\n   If the event which triggered the access attempt was an MO-MMTEL-voice-\ncall-started indication, an MO-MMTEL-video-call-started indication or an MO-\nSMSoIP-attempt-started indication and:\n\n1) if the UE in 5GMM-IDLE mode is operating in the single-registration mode\nand the UE's usage setting is \"voice centric\", the UE may attempt to select\nan E-UTRA cell connected to EPC. If the UE finds a suitable E-UTRA cell\nconnected to EPC, it then proceeds with the service request procedure as\ndescribed in 3GPP\u00a0TS\u00a024.301\u00a0[15];\n\nEditor's note:  It is FFS whether the UE is recommended to attempt to\nselect E-UTRA cell connected to EPC in this case.\n\n2) if the UE is operating in the dual-registration mode, the UE may proceed\nwith the service request procedure as described in 3GPP\u00a0TS\u00a024.301\u00a0[15]; or\n\n3) otherwise, the UE NAS layer shall notify the upper layers that the\naccess attempt is barred. In this case, upon receiving an indication from\nthe lower layers that the barring is alleviated for the access category\nwith which the access attempt was associated, the NAS shall notify the\nupper layers that the barring is alleviated for the access category.\nOtherwise, the service request procedure is started, if still needed, when\nthe lower layers indicate that the barring is alleviated for the access\ncategory with which the access attempt was associated.\n\nEditor's note:  Abnormal case handling for N1 NAS signalling connection\nestablishment rejected by the network with \"Extended wait time\" received\nfrom lower layers is FFS.\n\nc) Timer T3346 is running.\n\n   The UE shall not start the service request procedure unless:\n\n1) the UE receives a paging;\n\n2) the UE receives a NOTIFICATION message over non-3GPP access when the UE\nis in 5GMM-CONNECTED mode over non-3GPP access and in 5GMM-IDLE mode over\n3GPP access;\n\n3) the UE receives a NOTIFICATION message over 3GPP access when the UE is\nin 5GMM-CONNECTED mode over 3GPP access and in 5GMM-IDLE mode over non-3GPP\naccess;\n\n4) the UE is a UE configured for high priority access in selected PLMN; or\n\n5) the UE has a PDU session for emergency services established or is\nestablishing a PDU session for emergency services;\n\n   If the UE is in 5GMM-IDLE mode, the UE stays in the current serving cell\nand applies normal cell reselection process. The service request procedure\nis started, if still necessary, when timer T3346 expires or is stopped.\n\nd) Registration procedure for mobility and periodic registration update is\ntriggered.\n\n   The UE shall abort the service request procedure, stop timer T3517, if\nrunning and perform the registration procedure for mobility and periodic\nregistration update. The \"follow-on request pending\" indication shall be\nset in the REGISTRATION REQUEST message.\n\ne) Switch off.\n\n   If the UE is in state 5GMM-SERVICE-REQUEST-INITIATED at switch off, the\nde-registration procedure shall be performed.\n\nf) De-registration procedure collision.\n\n   If the UE receives a DEREGISTRATION REQUEST message from the network in\nstate 5GMM-SERVICE-REQUEST-INITIATED, the UE shall progress the\nDEREGISTRATION REQUEST message and the service request procedure shall be\naborted.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.6.1.8", "title_level": 3, "desc": "5.6.1.8  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Lower layer failure.\n\n   If a lower layer failure occurs before a SERVICE REJECT message has been\nsent to the UE or the service request procedure has been completed by the\nAMF, the AMF enters/stays in 5GMM-IDLE.\n\nb) Protocol error.\n\n   If the SERVICE REQUEST message is received with a protocol error, the\nAMF shall return a SERVICE REJECT message with one of the following 5GMM\ncause values:\n\n#96  invalid mandatory information;\n\n#99  information element non-existent or not implemented;\n\n#100 conditional IE error; or\n\n#111 protocol error, unspecified.\n\n   The AMF stays in the current 5GMM mode.\n\nc) More than one SERVICE REQUEST message received before the procedure has\nbeen completed (i.e., before SERVICE REJECT message has been sent or\nservice request procedure has been completed).\n\n-  If one or more of the information elements in the SERVICE REQUEST\nmessage differs from the ones received within the previous SERVICE REQUEST\nmessage, the previously initiated service request procedure shall be\naborted and the new service request procedure shall be progressed;\n\n-  If the information elements do not differ, then the AMF shall continue\nwith the previous service request procedure and shall not treat any further\nthis SERVICE REQUEST message.\n\nd) REGISTRATION REQUEST message received with \"initial registration\" or\n\"emergency registration\" in the 5GS registration type IE before a SERVICE\nREJECT message has been sent or the service request procedure has been\ncompleted.\n\n   If a REGISTRATION REQUEST message with \"initial registration\" or\n\"emergency registration\" in the 5GS registration type IE is received and\nthe service request procedure has not been completed or a SERVICE REJECT\nmessage has not been sent, the AMF may initiate the 5GMM common procedures,\ne.g. the primary authentication and key agreement procedure. The AMF may\ne.g. after a successful primary authentication and key agreement procedure\nexecution, abort the service request procedure, delete the 5GMM context,\nindicate towards the SMF that the 5GMM context has been deleted and\nprogress the new REGISTRATION REQUEST message.\n\ne) REGISTRATION REQUEST message received with \"mobility registration\nupdating\" or \"periodic registration updating\" in the 5GS registration type\nIE received before the service request procedure has been completed or a\nSERVICE REJECT message has been sent.\n\n   If a REGISTRATION REQUEST message with \"mobility registration updating\"\nor \"periodic registration updating\" in the 5GS registration type IE is\nreceived and the service request procedure has not been completed or a\nSERVICE REJECT message has not been sent, the AMF may initiate the 5GMM\ncommon procedures, e.g. the primary authentication and key agreement\nprocedure. The AMF may e.g. after a successful primary authentication and\nkey agreement procedure execution, abort the service request procedure and\nprogress the new REGISTRATION REQUEST message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Paging procedure", "numbering": "5.6.2", "title_level": 2, "desc": "5.6.2  Paging procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.6.2.1", "title_level": 3, "desc": "5.6.2.1  General\n\nThe paging procedure is performed only in 3GPP access and used by the\nnetwork to request the establishment of an NAS signalling connection to the\nUE. The paging procedure is also used by the network to request the UE to\nre-establish the user-plane resources of PDU sessions for downlink user\ndata transport. Another purpose of the paging procedure is to request the\nUE to re-establish the user-plane resources of PDU session(s) associated\nwith non-3GPP access over 3GPP access.\n\nAdditionally, the network can use the paging procedure to initiate the\nmobile terminating SMS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Paging for 5GS services", "numbering": "5.6.2.2", "title_level": 3, "desc": "5.6.2.2  Paging for 5GS services\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.6.2.2.1", "title_level": 4, "desc": "5.6.2.2.1   General\n\nThe network shall initiate the paging procedure for 5GS services when NAS\nsignalling messages or user data is pending to be sent to the UE in 5GMM-\nIDLE mode (see example in figure\u00a05.6.2.2.1).\n\n[pic]\n\nFigure\u00a05.6.2.2.1.1: Paging procedure\n\nTo initiate the procedure the 5GMM entity in the AMF requests the lower\nlayer to start paging and shall start timer T3513. Upon reception of a\npaging indication, the UE shall initiate a service request procedure to\nrespond to the paging (see 3GPP\u00a0TS\u00a023.502\u00a0[9]).\n\nIf downlink signalling or user data is pending to be sent over non-3GPP\naccess, the 5GMM entity in the AMF shall indicate the lower layer that the\npaging is due to signalling or user data associated to non-3GPP access.\n\nUpon reception of a paging indication, the UE shall stop the timer T3346,\nif running, and shall initiate:\n\n-  a service request procedure over 3GPP access to respond to the paging as\nspecified in subclauses\u00a05.6.1; or\n\n-  a registration procedure for mobility and periodic registration update\nover 3GPP access to respond to the paging as specified in\nsubclauses\u00a05.5.1.3.\n\nThe network shall stop timer T3513 for the paging procedure when an\nintegrity-protected response is received from the UE and successfully\nintegrity checked by the network. If the response received is not integrity\nprotected, or the integrity check is unsuccessful, timer T3513 for the\npaging procedure shall be kept running.\n\nUpon expiry of timer T3513, the network may reinitiate paging.\n\nIf the network, while waiting for a response to the paging sent without\npaging priority, receives downlink signalling or downlink data associated\nwith priority user-plane resources for PDU sessions, the network shall stop\nthe timer for the paging procedure (i.e. either timer T3413), and then\ninitiate the paging procedure with paging priority.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.6.2.2.2", "title_level": 4, "desc": "5.6.2.2.2   Abnormal cases on the network side\n\nThe following abnormal case can be identified:\n\na) REGISTRATION REQUEST message indicating either \"initial registration\" or\n\"5GS emergency registration\" in the 5GS registration type IE is received\nwhen paging procedure is ongoing.\n\n   If an integrity-protected REGISTRATION REQUEST message is received from\nthe UE and successfully integrity checked by the network, the network shall\nabort the paging procedure. If the REGISTRATION REQUEST message received is\nnot integrity protected, or the integrity check is unsuccessful, the paging\nprocedure shall be progressed. The paging procedure shall be aborted when\nthe primary authentication and key agreement procedure performed during the\nregistration procedure for initial registration is completed successfully.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "5.6.2.2.3", "title_level": 4, "desc": "5.6.2.2.3   Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Paging message received with access type set to non-3GPP access while\nthe UE is in 5GMM-CONNECTED mode over non-3GPP access.\n\n   The UE shall not respond to paging message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Notification procedure", "numbering": "5.6.3", "title_level": 2, "desc": "5.6.3  Notification procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "5.6.3.1", "title_level": 3, "desc": "5.6.3.1  General\n\nThe notification procedure is used by the network:\n\na) to request the UE, by sending the NOTIFICATION message over 3GPP access,\nto re-establish the user-plane resources of PDU session(s) associated with\nnon-3GPP access over 3GPP access when the UE is in 5GMM-IDLE mode over non-\n3GPP access and in 5GMM-CONNECTED mode over 3GPP access; or\n\nb) to request the UE, by sending the NOTIFICATION message over non-3GPP\naccess, to re-establish user-plane resources of the PDU session(s)\nassociated with 3GPP access over 3GPP access when the UE is in 5GMM-\nCONNECTED mode over non-3GPP access and in 5GMM-IDLE mode over 3GPP access\nwhen the UE is not in MICO mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Notification procedure initiation", "numbering": "5.6.3.2", "title_level": 3, "desc": "5.6.3.2  Notification procedure initiation\n\nThe network shall initiate the notification procedure by sending the\nNOTIFICATION message to the UE and start timer T3565 (see example in\nfigure\u00a05.6.3.2.1).\n\nFor case a) in subclause\u00a05.6.3.1, the NOTIFICATION message is sent from the\nnetwork to the UE via 3GPP access with access type indicating non-3GPP\naccess.\n\nFor case b) in subclause\u00a05.6.3.1, the NOTIFICATION message is sent from the\nnetwork to the UE via non-3GPP access with access type indicating 3GPP\naccess when the UE is not in MICO mode.\n\n[pic]\n\nFigure\u00a05.6.3.2.1: Notification procedure\n\nFor case a) in subclause\u00a05.6.3.1, upon reception of NOTIFICATION message,\nthe UE shall initiate a service request procedure over 3GPP access as\nspecified in subclauses\u00a05.6.1.\n\nFor case b) in subclause\u00a05.6.3.1, upon reception of NOTIFICATION message:\n\na) if the UE is in 5GMM-REGISTERED.NORMAL-SERVICE state, the UE shall\ninitiate a service request procedure over 3GPP access as specified in\nsubclauses\u00a05.6.1;\n\nb) if the UE is in 5GMM-REGISTERED.ATTEMPTING-REGISTRATION-UPDATE state,\nthe UE shall initiate a registration procedure for mobility and periodic\nregistration update over 3GPP access as specified in subclauses\u00a05.5.1.3; or\n\nc) if the UE is in 5GMM-REGISTERED.NO-CELL-AVAILABLE state or 5GMM-\nREGISTERED.PLMN-SEARCH state, the UE shall respond with NOTIFICATION\nRESPONSE message indicating failure to re-establish the user plane\nresources of PDU sessions.\n\nUpon reception of NOTIFICATION message:\n\n   For case b) in subclause\u00a05.6.3.1, if the UE is in 5GMM-REGISTERED.NO-\nCELL-AVAILABLE state or 5GMM-REGISTERED.PLMN-SEARCH state and the PDU\nsessions associated with the 3GPP access are locally released in the UE;\n\nthen the UE shall respond with NOTIFICATION RESPONSE message indicating\nwith the PDU session status information element that its PDU sessions are\nlocally released.\n\nUpon reception of a NOTIFICATION message, the UE shall stop the timer\nT3346, if running.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Notification procedure completion", "numbering": "5.6.3.3", "title_level": 3, "desc": "5.6.3.3  Notification procedure completion\n\nUpon reception of SERVICE REQUEST message or REGISTRATION REQUEST message,\nthe AMF shall stop T3565 and proceed service request procedure as specified\nin subclauses\u00a05.6.3.1 or registration procedure for mobility and periodic\nregistration update as specified in subclauses\u00a05.5.1.3. If no user-plane\nresources of PDU session(s) need to be re-established, the AMF should\nnotify the SMF that the UE was reachable but did not accept to re-establish\nthe user-plane resources of PDU session(s).\n\nUpon reception of NOTIFICATION RESPONSE message, the AMF shall stop T3565\nand should notify the SMF that the UE is unreachable, and:\n\n-  For case b) in subclause 5.6.3.1, if the NOTIFICATION RESPONSE message\nincludes the PDU session status information element indicating that the PDU\nsessions associated with the 3GPP access are inactive in the UE, then the\nAMF shall release all those PDU sessions locally (without peer-to-peer\nsignalling between the UE and the network) which are active on the AMF side\nassociated with 3GPP access, but are indicated by the UE as being inactive,\nand shall request the SMF to release all those PDU sessions locally.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "5.6.3.4", "title_level": 3, "desc": "5.6.3.4  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3565.\n\n   The network shall, on the first expiry of the timer T3565, retransmit\nthe NOTIFICATION message and shall reset and start timer T3565. This\nretransmission is repeated four times, i.e. on the fifth expiry of timer\nT3565, the procedure shall be aborted. In addition, upon the fifth expiry\nof timer T3565:\n\n   For case a) in subclause\u00a05.6.3.1, the AMF should notify the SMF that the\nUE is unreachable. The AMF may enter 5GMM-IDLE mode over 3GPP access.\n\n   For case b) in subclause\u00a05.6.3.1, the AMF may either:\n\n1) perform the paging procedure over the 3GPP access; or\n\n2) notify the SMF that the UE is unreachable.\n\nNOTE:  Whether the AMF performs the paging procedure or notifies the SMF is\nup to operator\u2019s policies.\n\nb) REGISTRATION REQUEST message indicating either \"initial registration\" or\n\"5GS emergency registration\" received over 3GPP access when notification\nprocedure is ongoing over non-3GPP access; or\n\n   REGISTRATION REQUEST message indicating either \"initial registration\" or\n\"5GS emergency registration\" received over non-3GPP access when\nnotification procedure is ongoing over 3GPP access.\n\n   If an integrity-protected REGISTRATION REQUEST message is received from\nthe UE and successfully integrity checked by the network, the network shall\nabort the notification procedure. If the REGISTRATION REQUEST message\nreceived is not integrity protected, or the integrity check is\nunsuccessful, the notification procedure shall be progressed. The\nnotification procedure shall be aborted when the primary authentication and\nkey agreement procedure performed during registration procedure for initial\nregistration is completed successfully.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Elementary procedures for 5GS session management", "numbering": "6", "title_level": 0, "desc": "6  Elementary procedures for 5GS session management\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "6.1", "title_level": 1, "desc": "6.1  Overview\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.1.1", "title_level": 2, "desc": "6.1.1  General\n\nThis clause describes the procedures used for 5GS session management (5GSM)\nperformed over an N1 NAS signalling connection.\n\nThe main function of the 5GSM sublayer is to support the PDU session\nhandling in the UE and in the SMF (transferred via the AMF).\n\nThe 5GSM comprises procedures for:\n\n-  the authentication and authorization, establishment, modification and\nrelease of PDU sessions; and\n\n-  request for performing handover of an existing PDU session between 3GPP\naccess and non-3GPP access, or to transfer an existing PDN connection in\nthe EPS to the 5GS.\n\nEach PDU session represents a PDU session established between the UE and an\nSMF. PDU sessions can remain established even if the radio and network\nresources constituting the corresponding PDU session between the UE and the\nSMF are temporarily released.\n\n5GSM procedures can be performed only if a 5GMM context has been\nestablished between the UE and the AMF, and the secure exchange of NAS\nmessages has been initiated by the AMF by use of the 5GMM procedures\ndescribed in clause\u00a05. Once the UE is successfully registered to a PLMN, a\nPDU session can be established. If no 5GMM context has been established,\nthe 5GMM sublayer has to initiate the establishment of a 5GMM context by\nuse of the 5GMM procedures as described in clause\u00a05.\n\nThe UE can request the network to modify or release PDU sessions. The\nnetwork can fulfil such a request from the UE by modifying a PDU session or\nreleasing a PDU session using network-requested procedures (see\nsubclause\u00a06.3).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Types of 5GSM procedures", "numbering": "6.1.2", "title_level": 2, "desc": "6.1.2  Types of 5GSM procedures\n\nThree types of 5GSM procedures can be distinguished:\n\na) Procedures related to PDU sessions:\n\n   These procedures are initiated by the network and are used for\nauthentication and authorization or manipulation of PDU sessions:\n\na) PDU authentication and authorization;\n\nb) network-initiated PDU session modification; and\n\nc) network-initiated PDU session release.\n\n   This procedure is initiated by the UE and to request for establishment\nof PDU sessions or to perform handover of an existing PDU session between\n3GPP access and non-3GPP access, or to transfer an existing PDN connection\nin the EPS to the 5GS:\n\n-  UE-requested PDU session establishment.\n\nb) Transaction related procedures:\n\n   These procedures are initiated by the UE to request for handling of PDU\nsessions, i.e. to modify a PDU session, or to release a PDU session:\n\na) UE-requested PDU session modification; and\n\nb) UE-requested PDU session release.\n\nA successful transaction related procedure initiated by the UE triggers the\nnetwork to execute one of the following procedures related to PDU session;\nnetwork-initiated PDU session modification procedure or network-initiated\nPDU session release procedure. The UE treats the start of the procedure\nrelated to the PDU session as completion of the transaction related\nprocedure.\n\nc) Common procedure:\n\n   The following 5GSM procedure can be related to a PDU session or to a\nprocedure transaction:\n\n   5GSM status procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM sublayer states", "numbering": "6.1.3", "title_level": 2, "desc": "6.1.3  5GSM sublayer states\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.1.3.1", "title_level": 3, "desc": "6.1.3.1  General\n\nIn the following subclauses, the possible states of a PDU session in the UE\nand the network side are described.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM sublayer states in the UE", "numbering": "6.1.3.2", "title_level": 3, "desc": "6.1.3.2  5GSM sublayer states in the UE\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "6.1.3.2.1", "title_level": 4, "desc": "6.1.3.2.1   Overview\n\nIn the following subclauses, the possible 5GSM sublayer states of the UE\nare described and shown in figure\u00a06.1.3.2.1.1.\n\n[pic]\n\n\nNOTE:  Not all possible transitions are shown in this figure.\nEditor's note:  The fatal causes and non-fatal causes used in the 5GSM\nprocedure are FFS.\n\nFigure\u00a06.1.3.2.1.1: The 5GSM sublayer states for PDU session handling in\nthe UE (overview)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION INACTIVE", "numbering": "6.1.3.2.2", "title_level": 4, "desc": "6.1.3.2.2   PDU SESSION INACTIVE\n\nNo PDU session exists.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION ACTIVE PENDING", "numbering": "6.1.3.2.3", "title_level": 4, "desc": "6.1.3.2.3   PDU SESSION ACTIVE PENDING\n\nThe UE has initiated a PDU session establishment procedure towards the\nnetwork and is waiting for a response from the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION ACTIVE", "numbering": "6.1.3.2.4", "title_level": 4, "desc": "6.1.3.2.4   PDU SESSION ACTIVE\n\nThe PDU session is active in the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION INACTIVE PENDING", "numbering": "6.1.3.2.5", "title_level": 4, "desc": "6.1.3.2.5   PDU SESSION INACTIVE PENDING\n\nThe UE has initiated a PDU session release procedure towards the network\nand is waiting for a response from the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION MODIFICATION PENDING", "numbering": "6.1.3.2.6", "title_level": 4, "desc": "6.1.3.2.6   PDU SESSION MODIFICATION PENDING\n\nThe UE has initiated a PDU session modification procedure towards the\nnetwork and is waiting for a response from the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PROCEDURE TRANSACTION INACTIVE", "numbering": "6.1.3.2.7", "title_level": 4, "desc": "6.1.3.2.7   PROCEDURE TRANSACTION INACTIVE\n\nNo procedure transaction exists.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PROCEDURE TRANSACTION PENDING", "numbering": "6.1.3.2.8", "title_level": 4, "desc": "6.1.3.2.8   PROCEDURE TRANSACTION PENDING\n\nThe UE has initiated a procedure transaction towards the network.\n\n[pic]\n\nFigure\u00a06.1.3.2.8.1: The procedure transaction states in the UE (overview)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM sublayer states in the network side", "numbering": "6.1.3.3", "title_level": 3, "desc": "6.1.3.3  5GSM sublayer states in the network side\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "6.1.3.3.1", "title_level": 4, "desc": "6.1.3.3.1   Overview\n\nIn the following subclauses, the possible 5GSM sublayer states of the\nnetwork are described and shown in Figure\u00a06.1.3.3.1.1.\n\n[pic]\n\nNOTE:  Not all possible transitions are shown in this figure.\nEditor's note:  The fatal causes and non-fatal causes used in the 5GSM\nprocedure are FFS.\n\nFigure\u00a06.1.3.3.1.1: The 5GSM sublayer states for PDU session handling in\nthe network (overview)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION INACTIVE", "numbering": "6.1.3.3.2", "title_level": 4, "desc": "6.1.3.3.2   PDU SESSION INACTIVE\n\nNo PDU session exists.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION ACTIVE", "numbering": "6.1.3.3.3", "title_level": 4, "desc": "6.1.3.3.3   PDU SESSION ACTIVE\n\nThe PDU session is active in the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION INACTIVE PENDING", "numbering": "6.1.3.3.4", "title_level": 4, "desc": "6.1.3.3.4   PDU SESSION INACTIVE PENDING\n\nThe network has initiated a PDU session release procedure towards the UE\nand is waiting for a response from the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU SESSION MODIFICATION PENDING", "numbering": "6.1.3.3.5", "title_level": 4, "desc": "6.1.3.3.5   PDU SESSION MODIFICATION PENDING\n\nThe network has initiated a PDU session modification procedure towards the\nUE and is waiting for a response from the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PROCEDURE TRANSACTION INACTIVE", "numbering": "6.1.3.3.6", "title_level": 4, "desc": "6.1.3.3.6   PROCEDURE TRANSACTION INACTIVE\n\nNo procedure transaction exists.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PROCEDURE TRANSACTION PENDING", "numbering": "6.1.3.3.7", "title_level": 4, "desc": "6.1.3.3.7   PROCEDURE TRANSACTION PENDING\n\nThe network has initiated a procedure transaction towards the UE.\n\n[pic]\n\nFigure\u00a06.1.3.3.7.1: The procedure transaction states in the network\n(overview)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between 5GSM and ESM", "numbering": "6.1.4", "title_level": 2, "desc": "6.1.4  Coordination between 5GSM and ESM\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between 5GSM and ESM with N26 interface", "numbering": "6.1.4.1", "title_level": 3, "desc": "6.1.4.1  Coordination between 5GSM and ESM with N26 interface\n\nInterworking to EPS is supported for a PDU session, if the context includes\nthe mapped EPS bearer. The SMF shall not include any mapped EPS bearer\ncontexts associated with a PDU session for LADN. See coding of the Mapped\nEPS bearer contexts IE in subclause\u00a09.10.4.5.\n\nUpon inter-system change from N1 mode to S1 mode in EMM-IDLE mode, the UE\nshall create the default EPS bearer context and the dedicated EPS bearer\ncontext(s) based on the parameters of mapped EPS bearer contexts in the PDU\nsession context, if available. The UE uses the parameters from each PDU\nsession for which interworking to EPS is supported to create corresponding\ndefault EPS bearer context and optionally dedicated EPS bearer context(s)\nas follows:\n\na) the PDU session type of the PDU session shall be mapped to the PDN type\nof the default EPS bearer context as follows:\n\n1) the PDN type shall be set to \"non-IP\" if the PDU session type is\n\"Ethernet\" or \"Unstructured\";\n\n2) the PDN type shall be set to \"IPv4\" if the PDU session type is \"IPv4\";\n\n3) the PDN type shall be set to \"IPv6\" if the PDU session type is \"IPv6\";\nand\n\n4) the PDN type shall be set to \"IPv4v6\" if the PDU session type is\n\"IPv4v6\";\n\nb) the PDU address of the PDU session shall be mapped to the PDN address of\nthe default EPS bearer context as follows:\n\n1) the PDN address of the default EPS bearer context is set to the PDU\naddress of the PDU session, if the PDU session type is \"IPv4\", \"IPv6\" or\n\"IPv4v6\"; and\n\n2) the PDN address of the default EPS bearer context is set to zero, if the\nPDU session type is \"Ethernet\" or \"Unstructured\";\n\nc) the DNN of the PDU session shall be mapped to the APN of the default EPS\nbearer context;\n\nd) the APN-AMBR and extended APN-AMBR received in the parameters of the\ndefault EPS bearer context of the mapped EPS bearer contexts shall be\nmapped to the APN-AMBR and extended APN-AMBR of the default EPS bearer\ncontext;\n\ne) for each PDU session of a PDU session in state PDU SESSION ACTIVE or PDU\nSESSION MODIFICATION PENDING the UE shall set the state of the mapped EPS\nbearer context(s) to BEARER CONTEXT ACTIVE; and\n\nf) for any other PDU session of a PDU session the UE shall set the state of\nthe mapped EPS bearer context(s) to BEARER CONTEXT INACTIVE.\n\nAdditionally, for each mapped EPS bearer context in the PDU session:\n\na) the EPS bearer identity shall be set to the EPS bearer identity received\nin the mapped EPS bearer context, or the EPS bearer identity associated\nwith the QoS flow;\n\nb) the EPS QoS parameters shall be set to the mapped EPS QoS parameters of\nthe EPS bearer received in the mapped EPS bearer context, or the EPS QoS\nparameters associated with the QoS flow;\n\nc) the extended EPS QoS parameters shall be set to the mapped extended EPS\nQoS parameters of the EPS bearer received in the mapped EPS bearer context,\nor the extended EPS QoS parameters associated with the QoS flow; and\n\nd) the traffic flow template shall be set to the mapped traffic flow\ntemplate of the EPS bearer received in the mapped EPS bearer context, or\nthe stored traffic flow template associated with the QoS flow, if\navailable.\n\nAfter inter-system change from N1 mode to S1 mode, the UE shall associate\nthe PDU session identity, the S-NSSAI, and the session-AMBR with the\ndefault EPS bearer context, and for each EPS bearer context mapped from one\nor more QoS flows, associate the QoS rule(s) for the QoS flow(s) with the\nEPS bearer context.\n\nAfter inter-system change from N1 mode to S1 mode, the UE and the SMF shall\nmaintain the PDU session type of the PDU session context if the UE supports\nnon-IP PDN type and the PDU session type is \"Ethernet\" or \"Unstructured\".\n\nWhen the UE is provided with a new S-NSSAI, a new session-AMBR, one or more\nnew QoS rules in the Protocol configuration options IE or Extended protocol\nconfiguration options IE in the MODIFY EPS BEARER CONTEXT REQUEST message,\nthe UE shall discard the corresponding association(s) and associate the new\nvalue(s) with the EPS bearer context.\n\nUpon successful completion of an attach procedure or tracking area updating\nprocedure after inter-system change from N1 mode to S1 mode (see\n3GPP\u00a0TS\u00a024.301\u00a0[15]), the UE shall delete any UE derived QoS rules.\n\nInterworking to 5GS is supported for a PDN connection, if the corresponding\ndefault EPS bearer context includes a PDU session identity, session AMBR\nand one or more QoS rules (see 3GPP\u00a0TS\u00a024.301\u00a0[15]).\n\nUpon inter-system change from S1 mode to N1 mode in 5GMM-IDLE mode, the UE\nuses the parameters from the default EPS bearer context of each PDN\nconnection for which interworking to 5GS is supported to create a\ncorresponding PDU session as follows:\n\na) the PDN type of the default EPS bearer context shall be mapped to the\nPDU session type of the PDU session context as follows:\n\n1) if the PDN type is \"non-IP\", the PDU session type is set to the locally\navailable information associated with the PDN connection (either \"Ethernet\"\nor \"Unstructured\"), if available;\n\n2) if the PDN type is \"IPv4\" the PDU session type is set to \"IPv4\";\n\n3) if the PDN type is \"IPv6\", the PDU session type is set to \"IPv6\"; and\n\n4) the PDN type shall be set to \"IPv4v6\" if the PDU session type is\n\"IPv4v6\";\n\nb) the PDN address of the default EPS bearer context shall be mapped to PDU\naddress of the PDU session, if the PDN type is \"IPv4\", \"IPv6\" or \"IPv4v6\";\n\nc) the APN of the default EPS bearer context shall be mapped to the DNN of\nthe PDU session;\n\nd) for each default EPS bearer context in state BEARER CONTEXT ACTIVE the\nUE shall set the state of the mapped PDU session to PDU SESSION ACTIVE; and\n\ne) for any other default EPS bearer context the UE shall set the state of\nthe mapped PDU session to PDU SESSION INACTIVE.\n\nAdditionally, the UE shall set:\n\na) the PDU session identity of the PDU session to the PDU session identity\nincluded by the UE in the Protocol configuration options IE or Extended\nprotocol configuration options IE in the PDN CONNECTIVITY REQUEST message,\nor the PDU session identity associated with the default EPS bearer context;\n\nb) the S-NSSAI of the PDU session to the S-NSSAI included by the network in\nthe Protocol configuration options IE or Extended protocol configuration\noptions IE in the ACTIVATE DEFAULT EPS BEARER REQUEST message, or the S-\nNSSAI associated with the default EPS bearer context;\n\nc) the session-AMBR of the PDU session to the session-AMBR included by the\nnetwork in the Protocol configuration options IE or Extended protocol\nconfiguration options IE in the ACTIVATE DEFAULT EPS BEARER REQUEST\nmessage, or the session-AMBR associated with the default EPS bearer\ncontext; and\n\nd) the SSC mode of the PDU session to \"SSC mode 1\".\n\nFor each EPS bearer context of the PDN connection, the UE shall create QoS\nflow(s) each of which is associated with the QoS rule(s) received in the\nProtocol configuration options IE or Extended protocol configuration\noptions IE in the ACTIVATE DEFAULT EPS BEARER REQUEST message, ACTIVATE\nDEDICATED EPS BEARER REQUEST message, and/or MODIFY EPS BEARER REQUEST\nmessage (see 3GPP\u00a0TS\u00a024.301\u00a0[15]), or the QoS rules(s) associated with EPS\nbearer context.\n\nAfter inter-system change from S1 mode to N1 mode, for each QoS flow mapped\nfrom a EPS bearer context the UE shall associate the EPS bearer ID, the EPS\nQoS parameters, the extended EPS QoS parameters, and the traffic flow\ntemplate, if available, of the EPS bearer context with the QoS flow.\n\nWhen the UE is provided with a new EPS bearer ID, a new EPS QoS parameters,\na new extended EPS QoS parameters, or a new traffic flow template in the\nMapped EPS bearer context IE of the PDU SESSION MODIFICATION COMMAND\nmessage for a QoS flow, the UE shall discard the corresponding\nassociation(s) and associate the new value(s) with the QoS flow.\n\nWhen a QoS flow is deleted, all the associated EPS bearer context\ninformation that are mapped from the deleted QoS flow shall be deleted from\nthe UE and the network. When an EPS bearer is released, all the associated\nQoS flow context information that are mapped from the released EPS bearer\nshall be deleted from the UE and the network.\n\nNOTE:  If T35cd is running or deactivated for an [S-NSSAI, DNN]\ncombination, or if T35ef is running or deactivated for an S-NSSAI, the UE\nis allowed to initate ESM procedures in EPS for the APN corresponding to\nthat DNN, and if the APN is congested in EPS, the MME can send a back-off\ntimer for the APN to the UE as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Coordination between 5GSM and ESM without N26 interface", "numbering": "6.1.4.2", "title_level": 3, "desc": "6.1.4.2  Coordination between 5GSM and ESM without N26 interface\n\nWhen interworking without N26 is supported, the SMF does not provide the UE\nwith the mapped EPS bearer context for a PDU session context.\n\nNOTE\u00a01:  Since the SMF does not provide the UE with the mapped EPS bearer\ncontext for a PDU session context, the UE does not know whether\ninterworking to EPS is supported for a PDU session before attempting to\ntransfer the PDU session context from N1 mode to S1 mode.\n\nUpon inter-system change from N1 mode to S1 mode in EMM-IDLE mode, the UE\nshall use the parameters from each PDU session context which the UE intends\nto transfer to EPS to create the contents of a PDN CONNECTIVITY REQUEST\nmessage as follows:\n\na) if the PDU session is a PDU session for emergency services, the request\ntype shall be set to \"handover of emergency bearer services\". Otherwise the\nrequest type shall be set to \"handover\";\n\nb) the PDU session type of the PDU session context shall be mapped to the\nPDN type of the default EPS bearer context as follows:\n\n1) the PDN type shall be set to \"non-IP\" if the PDU session type is\n\"Ethernet\" or \"Unstructured\";\n\n2) the PDN type shall be set to \"IPv4\" if the PDU session type is \"IPv4\";\n\n3) the PDN type shall be set to \"IPv6\" if the PDU session type is \"IPv6\";\nand\n\n4) the PDN type shall be set to \"IPv4v6\" if the PDU session type is\n\"IPv4v6\";\n\nc) the DNN of the PDU session shall be mapped to the APN of the default EPS\nbearer context; and\n\nd) the PDU session ID parameter in the PCO IE shall be set to the PDU\nsession identity of the PDU session.\n\nAfter inter-system change from N1 mode to S1 mode, the UE shall associate\nthe PDU session identity with the default EPS bearer context.\n\nUpon successful completion of an attach procedure after inter-system change\nfrom N1 mode to S1 mode (see 3GPP\u00a0TS\u00a024.301\u00a0[15]), the UE shall delete any\nUE derived QoS rules\n\nWhen interworking without N26 is supported, the MME does not provide the UE\nwith the mapped PDU session context for a PDN connection. When establishing\na new PDN connection in S1 mode, if the UE wants to be able to attempt to\ntransfer the PDN connection from S1 mode to N1 mode in case of inter-system\nchange, the UE shall allocate a PDU session identity, indicate the\nallocated PDU session identity in the PDU session ID parameter in the PCO\nIE of the PDN CONNECTIVITY REQUEST and associate the allocated PDU session\nidentity with the default EPS bearer context of the PDN connection.\n\nNOTE\u00a02:  Since the MME does not provide the UE with the mapped PDU session\ncontext for a PDN connection, the UE does not know whether interworking to\n5GS is supported for a PDN connection for which the UE assigned a PDU\nSession identity before attempting to transfer the PDN connection from S1\nmode to N1 mode.\n\nUpon inter-system change from S1 mode to N1 mode in 5GMM-IDLE mode, the UE\nuses the parameters from the default EPS bearer context of each PDN\nconnection which the UE intends to transfer to 5GS and for which the UE has\nallocated a PDU session identity to create a PDU SESSION ESTABLISHMENT\nREQUEST message as follows:\n\na) if the PDN connection is for emergency bearer services, the request type\nshall be set to \"existing emergency PDU session\". Otherwise the request\ntype shall be set to \"existing PDU session\";\n\nb) the PDN type of the default EPS bearer context shall be mapped to the\nPDU session type of the PDU session context as follows:\n\n1) if the PDN type is \"non-IP\", the PDU session type is set to the locally\navailable information associated with the PDN connection (either \"Ethernet\"\nor \"Unstructured\"), if available;\n\n2) if the PDN type is \"IPv4\" the PDU session type is set to \"IPv4\";\n\n3) if the PDN type is \"IPv6\", the PDU session type is set to \"IPv6\"; and\n\n4) the PDN type shall be set to \"IPv4v6\" if the PDU session type is\n\"IPv4v6\";\n\nc) the APN of the default EPS bearer context shall be mapped to the DNN of\nthe PDU session context; and\n\nd) the PDU session ID shall be set to the PDU session ID associated with\nthe default EPS bearer context.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General on elementary 5GSM procedures", "numbering": "6.2", "title_level": 1, "desc": "6.2  General on elementary 5GSM procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Principles of PTI handling for 5GSM procedures", "numbering": "6.2.1", "title_level": 2, "desc": "6.2.1  Principles of PTI handling for 5GSM procedures\n\nWhen the UE or the network initiates a transaction related procedure (i.e.\na procedure consisting of more than one message and the messages are\nrelated), it shall include a valid PTI value in the message header of the\nrequest message or of the command message.\n\nIf a response message is sent as result of a received request message or a\nreceived command message, the sending entity shall include in the response\nmessage the PTI value received within the request message or within the\ncommand message (see examples in figure\u00a06.2.1.1, figure\u00a06.2.1.2,\nfigure\u00a06.2.1.3, and figure\u00a06.2.1.4).\n\nIf a command message is sent as result of a received request message, the\nsending entity shall include in the command message the PTI value received\nwith the request message (see examples in figure\u00a06.2.1.3).\n\nIf a command message is not sent as result of a received request message,\nthe sending entity shall include in the command message the PTI value set\nto \"no procedure transaction identity assigned\" (see examples in\nfigure\u00a06.2.1.3).\n\n[pic]\n\nFigure\u00a06.2.1.1: UE-requested transaction related procedure accepted by the\nnetwork\n\n[pic]\n\nFigure\u00a06.2.1.2: UE-requested transaction related procedure rejected by the\nnetwork\n\n[pic]\n\nFigure\u00a06.2.1.3: UE-requested transaction related procedure triggering a\nnetwork-requested transaction related procedure\n\n[pic]\n\nFigure\u00a06.2.1.4: network-requested transaction related procedure not\ntriggered by a UE-requested transaction related procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session types", "numbering": "6.2.2", "title_level": 2, "desc": "6.2.2  PDU session types\n\nThe following PDU Session types are supported:\n\na) IPv4;\n\nb) IPv6;\n\nc) IPv4v6;\n\nd) Ethernet (EtherType as defined in IEEE 802.3); and\n\ne) Unstructured.\n\nIP address allocation for IPv4, IPv6 and IPv4v6 PDU session types is\ndescribed in subclause\u00a06.2.4.\n\nNeither a MAC nor an IP address is allocated by the 5GCN to the UE for\nEthernet PDU session type.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session management", "numbering": "6.2.3", "title_level": 2, "desc": "6.2.3  PDU session management\n\nThe SMF is responsible for the session management functions to provide the\nPDU connectivity service to the UE via the SM signalling between UE and\nSMF. The session management procedures includes:\n\na) the UE-requested PDU session establishment procedure;\n\nb) the PDU session establishment authentication and authorization\nprocedure;\n\nc) the UE-requested PDU session modification procedure;\n\nd) the network-requested PDU session modification procedure;\n\ne) the UE-requested PDU session release procedure; and\n\nf) the network-requested PDU session release procedure.\n\nA UE may establish multiple PDU sessions, to the same data network or to\ndifferent data networks, via 3GPP and via and Non-3GPP access networks at\nthe same time.\n\nThe session management messages between UE and SMF are transferred via AMF\nas specified in subclause\u00a08.3.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IP address allocation", "numbering": "6.2.4", "title_level": 2, "desc": "6.2.4  IP address allocation\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.2.4.1", "title_level": 3, "desc": "6.2.4.1  General\n\nThis clause specifies IP address allocation for the PDU session.\n\nIn this release of specification, PDU session can be initiated with one IP\nversion, i.e. IPv4 PDU session type or IPv6 PDU session type, or with both\nIP versions, i.e. IPv4v6 PDU session type.\n\nIP address allocation to the UE shall be performed by SMF based on one or\nboth the selected IP versions and operator policies. If IPv4 PDU session\ntype is selected, an IPv4 address is allocated to the UE. If IPv6 PDU\nsession type is selected, an IPv6 prefix and an interface identifier for\nthe IPv6 link local address are allocated to the UE. If IPv4v6 PDU session\ntype is selected, an IPv4 address, an IPv6 prefix and an interface\nidentifier for the IPv6 link local address are allocated to the UE.\n\nFor IPv4 PDU session type and for IPv4v6 PDU session type, the UE:\n\na) shall obtain an IPv4 address via:\n\n1) NAS signalling as specified in subclause\u00a06.2.4.2; or\n\n2) DHCPv4; and\n\nb) may obtain IPv4 configuration parameters (e.g. DNS server address) via\nDHCPv4.\n\nFor IPv6 PDU session type and for IPv4v6 PDU session type, the UE:\n\na) shall build an IPv6 link local address based on the allocated interface\nidentifier for the IPv6 link local address;\n\nb) shall obtain /64 IPv6 prefix via IPv6 stateless address\nautoconfiguration as specified in 3GPP\u00a0TS\u00a023.501\u00a0[8] and\nIETF\u00a0RFC\u00a04862\u00a0[39]; and\n\nc) may obtain IPv6 configuration parameters via stateless DHCPv6 as\nspecified in IETF\u00a0RFC\u00a03736\u00a0[35].\n\nThe UE capable of IPv6 shall support acting as a type\u00a0C\u00a0host as specified\nin IETF\u00a0RFC\u00a04191\u00a0[36].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IP address allocation via NAS signalling", "numbering": "6.2.4.2", "title_level": 3, "desc": "6.2.4.2  IP address allocation via NAS signalling\n\nThe UE shall set the PDU session type IE in the PDU SESSION ESTABLISHMENT\nREQUEST message, based on its IP stack capabilities if the UE requests IP\nconnectivity as follows:\n\na) A UE:\n\n1) which is IPv6 and IPv4 capable, shall set the PDU session type IE to\nIPv4, IPv6 or IPv4v6 according to UE configuration or received policy.\n\n2) which is only IPv6 capable, shall set the PDU session type IE to IPv6.\n\n3) which is only IPv4 capable, shall set the PDN type IE to IPv4.\n\nb) When the IP version capability of the UE is unknown in the UE (as in the\ncase when the MT and TE are separated and the capability of the TE is not\nknown in the MT), the UE shall set the PDU session type IE to IPv4v6.\n\nIf the UE wants to use DHCPv4 for IPv4 address assignment, it shall\nindicate that to the network within the Extended protocol configuration\noptions IE in the PDU SESSION ESTABLISHMENT REQUEST.\n\nOn receipt of the PDU SESSION ESTABLISHMENT REQUEST message sent by the UE,\nthe network when allocating an IP address shall take into account the PDU\nsession type IE, the operator's policies of the network, and the user's\nsubscription data and:\n\na) if the UE requests the PDU session type IPv4v6, but the subscription or\nSMF configuration is limited to IPv4 only or IPv6 only for the requested\nDNN, the network shall set the PDU session type IE to either \"IPv4\" or\n\"IPv6\" and the 5GSM cause value to #50 \"PDU session type IPv4 only\nallowed\", or #51 \"PDU session type IPv6 only allowed\" in the PDU SESSION\nESTABLISHMENT ACCEPT message, respectively. The UE shall not subsequently\ninitiate another UE requested PDU session establishment procedure to the\nsame DNN (or no DNN, if no DNN was indicated by the UE) and the same S-\nNSSAI (or no S-NSSAI, if no S-NSSAI was indicated by the UE) to obtain a\nPDU session type different from the one allowed by the network;\n\nb) if the network sets the PDU session type IE to IPv4, the network shall\ninclude an IPv4 address in the PDU address IE;\n\nc) if the network sets the PDU session type IE to IPv6, the network shall\ninclude an interface identifier for the IPv6 link local address in the PDU\naddress IE; and\n\nd) if the network sets the PDU session type IE to IPv4v6, the network shall\ninclude an IPv4 address and an interface identifier for the IPv6 link local\naddress in the PDU address IE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Quality of service", "numbering": "6.2.5", "title_level": 2, "desc": "6.2.5  Quality of service\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.2.5.1", "title_level": 3, "desc": "6.2.5.1  General\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "QoS rules", "numbering": "6.2.5.1.1", "title_level": 4, "desc": "6.2.5.1.1   QoS rules\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.2.5.1.1.1", "title_level": 5, "desc": "6.2.5.1.1.1 General\n\nIn a PDU session of IPv4, IPv6, IPv4v6 and Ethernet PDU session type, the\nNAS protocol enables different forwarding treatments of UL user data\npackets in one or more QoS flows based on signalled QoS rules, derived QoS\nrules or any combination of them.\n\nIn a PDU session of Unstructured PDU session type, all UL user data packets\nare associated with the same QoS flow.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Signalled QoS rules", "numbering": "6.2.5.1.1.2", "title_level": 5, "desc": "6.2.5.1.1.2 Signalled QoS rules\n\nThe NAS protocol enables the network to provide the UE with signalled QoS\nrules associated with a PDU session.\n\nThe network can provide the UE with one or more signalled QoS rules\nassociated with a PDU session at the PDU session establishment or at QoS\nflow establishment.\n\nEach signalled QoS rule contains:\n\na) an indication of whether the QoS rule is the default QoS rule;\n\nb) a QoS rule identifier (QRI);\n\nc) a QoS flow identifier (QFI);\n\nd) optionally, a set of packet filters;\n\ne) a precedence value;\n\nf) if the flow is a GBR QoS flow:\n\n1) Guaranteed flow bit rate (GFBR) for UL;\n\n2) Guaranteed flow bit rate (GFBR) for DL;\n\n3) Maximum flow bit rate (MFBR) for UL;\n\n4) Maximum flow bit rate (MFBR) for DL; and\n\n5) optionally averaging window, applicable for both UL and DL;\n\ng) 5QI, if the QFI is not the same as the 5QI of the QoS flow identified by\nthe QFI;\n\nh) optionally, an EPS bearer identity (EBI) if the QoS flow can be mapped\nto an EPS bearer as specified in subclause\u00a04.11.2 of 3GPP\u00a0TS\u00a023.502\u00a0[9].\n\nFor case d) above:\n\n1) If the QoS rule is the default rule of a PDU session of IPv4, IPv6,\nIPv4v6 or Ethernet PDU session type, the set of packet filters contains\nzero or more packet filters for DL direction, and may additionaly contain\none of the following:\n\nA) a match-all packet filter for UL direction;\n\nB) a match-all packet filter for UL and DL directions;\n\nC) zero or more packet filters for UL direction (other than the match-all\npacket filter for UL direction);\n\nD) zero or more packet filters for UL and DL directions (other than the\nmatch-all packet filter for UL and DL directions); or\n\nE) one or more packet filters for UL direction (other than the match-all\npacket filter for UL direction) and one or more packet filters for UL and\nDL directions (other than the match-all packet filter for UL and DL\ndirections).\n\n   The set of packet filters for the default rule shall not be. If the\ndefault QoS rule contains a match-all packet filter, then the highest\nprecedence value shall be used for the default QoS rule.\n\n2) If the QoS rule is a QoS rule of a PDU session of IPv4, IPv6, IPv4v6 or\nEthernet PDU session type and is not the default QoS rule, the set of\npacket filters contains zero or more packet filters for the DL direction,\nand may additionally contain one of the following:\n\nA) zero or more packet filters for UL direction (other than the match-all\npacket filter for UL direction); and\n\nB) zero or more packet filters for both UL and DL directions (other than\nthe match-all packet filter for UL and DL directions).\n\n3) For PDU session of unstructured PDU session type, there is only one QoS\nrule associated with it and the set of packet filters of that QoS rule is\nempty.\n\nIf the UE requests a new QoS flow, it shall assign a precedence value for\nthe signalled QoS rule which is not in the range from 70 to 99 (decimal).\n\nIf the averaging window is not included in a QoS rule for a GBR QoS flow\nwith a 5QI indicated in 3GPP\u00a0TS\u00a023.501\u00a0[8] table\u00a05.7.4-1, the averaging\nwindow associated with the 5QI in 3GPP\u00a0TS\u00a023.501\u00a0[8] table\u00a05.7.4-1 applies\nfor the averaging window.\n\nIf the averaging window is not included in a QoS rule for a GBR QoS flow\nwith a 5QI not indicated in 3GPP\u00a0TS\u00a023.501\u00a0[8] table\u00a05.7.4-1, the\nstandardized value of two seconds is used as the averaging window.\n\nWithin a PDU session:\n\na) each signalled QoS rule has a unique QRI;\n\nb) there is at least one signalled QoS rule;\n\nc) one signalled QoS rule is the default QoS rule; and\n\nd) there can be zero, one or more signalled QoS rules associated with a\ngiven QFI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Derived QoS rules", "numbering": "6.2.5.1.1.3", "title_level": 5, "desc": "6.2.5.1.1.3 Derived QoS rules\n\nDerived QoS rules are applicable only for PDU session of IPv4, IPv6, IPv4v6\nor Ethernet PDU session type.\n\nThe reflective QoS in the UE creates derived QoS rules associated with a\nPDU session based on DL user data packets received via the PDU session.\n\nEach derived QoS rule contains:\n\na) a QoS flow identifier (QFI);\n\nb) a packet filter for UL direction; and\n\nc) a precedence value of 80 (decimal).\n\nNOTE:  On the network side, the corresponding QoS rule can be associated\nwith a different precedence value in the range from 70 to 99 (decimal).\n\nWithin a PDU session:\n\na) there can be zero, one or more derived QoS rules associated with a given\nQFI; and\n\nb) there can be up to one derived QoS rule associated with a given packet\nfilter for UL direction.\n\nIn the UE, a timer T3583 runs for each derived QoS rule.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Session-AMBR", "numbering": "6.2.5.1.2", "title_level": 4, "desc": "6.2.5.1.2   Session-AMBR\n\nThe NAS protocol enables the network to provide the UE with the session-\nAMBR associated with a PDU session.\n\nThe standardized value of two seconds is used as the averaging window for\nthe UE's enforcement of the UL rate limitation indicated by the session-\nAMBR.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UL user data packet matching", "numbering": "6.2.5.1.3", "title_level": 4, "desc": "6.2.5.1.3   UL user data packet matching\n\nFor PDU session of IPv4, IPv6, IPv4v6 or Ethernet PDU session type, upon\nreceiving an UL user data packet from the upper layers for transmission via\na PDU session, the UE shall attempt to associate the UL user data packet\nwith:\n\na) the QFI of a signalled QoS rule associated with the PDU session which\nhas a set of packet filters containing a packet filter for UL direction\nmatching the UL user data packet or containing a packet filter for both UL\nand DL directions matching the UL user data packet; or\n\nb) the QFI of a derived QoS rule associated with the PDU session which has\nthe packet filter for UL direction matching the UL user data packet;\n\nby evaluating the QoS rules in increasing order of their precedence values\nuntil the UL user data packet is associated with a QFI or all QoS rules are\nevaluated.\n\nFor PDU session of unstructured PDU session type, upon receiving an UL user\ndata packet from the upper layers for transmission via a PDU session, the\nUE shall associate the UL user data packet with the QFI of the default QoS\nrule associated with the PDU session.\n\nIf the UL user data packet is associated with a QFI, the UE shall pass the\nQFI along the UL user data packet to the lower layers for transmission.\n\nNOTE:  Marking of the UL user data packet with the QFI is performed by the\nlower layers.\n\nIf all QoS rules are evaluated and the UL user data packet is not\nassociated with a QFI, the UE shall discard the UL user data packet.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Reflective QoS", "numbering": "6.2.5.1.4", "title_level": 4, "desc": "6.2.5.1.4   Reflective QoS\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.2.5.1.4.1", "title_level": 5, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Derivation of packet filter for UL direction from DL user", "numbering": "6.2.5.1.4.2", "title_level": 5, "desc": "6.2.5.1.4.1 General\n\nThe UE may support reflective QoS.\n\nIf the UE supports the reflective QoS, the UE shall support the procedures\nin the following subclauses.\n\nThe reflective QoS is applicable in a PDU session of IPv4, IPv6, IPv4v6 and\nEthernet PDU session type. The reflective QoS is not applicable in a PDU\nsession of Unstructured PDU session type.\n\nThe UE may request to revoke the usage of reflective QoS for an existing\nPDU session for which the UE had previously  indicated support for\nreflective QoS.\n\n\n6.2.5.1.4.2 Derivation of packet filter for UL direction from DL user data\npacket\n\nIf the UE needs to derive a packet filter for UL direction from the DL user\ndata packet (see subclause\u00a06.2.5.1.4.3 and 6.2.5.1.4.4), the UE shall\nproceed as follows:\n\na) if the received DL user data packet belongs to a PDU session of IPv4 or\nIPv4v6 PDU session type and is an IPv4 packet and:\n\n1) the protocol field of the received DL user data packet indicates TCP as\nspecified in IETF\u00a0RFC\u00a0793\u00a0[33];\n\n2) the protocol field of the received DL user data packet indicates UDP as\nspecified in IETF\u00a0RFC\u00a0768\u00a0[32]; or\n\n3) the protocol field of the received DL user data packet indicates ESP as\nspecified in IETF\u00a0RFC\u00a04303\u00a0[38] and an uplink IPSec SA corresponding to a\ndownlink IPSec SA indicated in the security parameters index field of the\nreceived DL user data packet exists;\n\n   then the packet filter for UL direction contains the following packet\nfilter components:\n\n1) an IPv4 remote address component set to the value of the source address\nfield of the received DL user data packet;\n\n2) an IPv4 local address component set to the value of the destination\naddress field of the received DL user data packet;\n\n3) a protocol identifier/next header type component set to the value of the\nprotocol field of the received DL user data packet;\n\n4) if the protocol field of the received DL user data packet indicates TCP\nas specified in IETF\u00a0RFC\u00a0793\u00a0[33] or UDP as specified in IETF\u00a0RFC\u00a0768\u00a0[32]:\n\ni) a single local port type component set to the value of the destination\nport field of the received DL user data packet; and\n\nii)  a single remote port type component set to the value of the source\nport field of the received DL user data packet; and\n\n5) if the protocol field of the received DL user data packet indicates ESP\nas specified in IETF\u00a0RFC\u00a04303\u00a0[38]:\n\ni) a security parameter index type component set to the security parameters\nindex of the uplink IPSec SA corresponding to the downlink IPSec SA\nindicated in the security parameters index field of the received DL user\ndata packet;\n\n   otherwise it is not possible to derive a packet filter for UL direction\nfrom the DL user data packet;\n\nb) if the received DL user data packet belongs to a PDU session of IPv6 or\nIPv4v6 PDU session type and is an IPv6 packet and:\n\n1) the last next header field of the received DL user data packet indicates\nTCP as specified in IETF\u00a0RFC\u00a0793\u00a0[33];\n\n2) the last next header field of the received DL user data packet indicates\nUDP as specified in IETF\u00a0RFC\u00a0768\u00a0[32]; or\n\n3) the last next header field of the received DL user data packet indicates\nESP as specified in IETF\u00a0RFC\u00a04303\u00a0[38] and an uplink IPSec SA corresponding\nto a downlink IPSec SA indicated in the security parameters index field of\nthe received DL user data packet exists;\n\n   then the packet filter for UL direction contains the following packet\nfilter components:\n\n1) an IPv6 remote address/prefix length component set to the value of the\nsource address field of the received DL user data packet;\n\n2) an IPv6 local address/prefix length component set to the value of the\ndestination address field of the received DL user data packet;\n\n3) a protocol identifier/next header type component set to the value of the\nlast next header field of the received DL user data packet;\n\n4) if the last next header field of the received DL user data packet\nindicates TCP as specified in IETF\u00a0RFC\u00a0793\u00a0[33] or UDP as specified in\nIETF\u00a0RFC\u00a0768\u00a0[32]:\n\ni) a single local port type component set to the value of the destination\nport field of the received DL user data packet; and\n\nii)  a single remote port type component set to the value of the source\nport field of the received DL user data packet; and\n\n5) if the last next header field of the received DL user data packet\nindicates ESP as specified in IETF\u00a0RFC\u00a04303\u00a0[38]:\n\ni) a security parameter index type component set to the security parameters\nindex of the uplink IPSec SA corresponding to the downlink IPSec SA\nindicated in the security parameters index field of the received DL user\ndata packet;\n\n   otherwise it is not possible to derive a packet filter for UL direction\nfrom the DL user data packet;\n\nc) if the received DL user data packet belongs to a PDU session of Ethernet\nPDU session type, the packet filter for UL direction contains the following\npacket filter components:\n\n1) a destination MAC address component set to the source MAC address of the\nreceived DL user data packet;\n\n2) a source MAC address component set to the destination MAC address of the\nreceived DL user data packet;\n\n3) if an 802.1Q C-TAG is included in the received DL user data packet, an\n802.1Q C-TAG VID component set to the 802.1Q C-TAG VID of the received DL\nuser data packet and an 802.1Q C-TAG PCP/DEI component set to the 802.1Q C-\nTAG PCP/DEI of the received DL user data packet;\n\n4) if an 802.1Q S-TAG is included in the received DL user data packet, an\n802.1Q S-TAG VID component set to the 802.1Q S-TAG VID of the received DL\nuser data packet and an 802.1Q S-TAG PCP/DEI component set to the 802.1Q S-\nTAG PCP/DEI of the received DL user data packet;\n\n5) If the Ethertype field of the received DL user data packet is set to a\nvalue of 1536 or above, an Ethertype component set to the Ethertype of the\nreceived DL user data packet;\n\n6) if the Ethertype field of the Ethernet frame header indicates that the\ndata carried in the Ethernet frame is IPv4 data, the UE shall also add to\nthe packet filter for UL direction the IP-specific components based on the\ncontents of the IP header of the received DL user data packet as described\nin bullet a) above; and\n\n7) if the Ethertype field of the Ethernet frame header indicates that the\ndata carried in the Ethernet frame is IPv6 data, the UE shall also add to\nthe packet filter for UL direction the IP-specific components based on the\ncontents of the IP header of the received DL user data packet as described\nin bullet b) above; and\n\nd) if the received DL user data packet belongs to a PDU session of PDU\nsession type other than Ethernet, IPv4, IPv6 and IPv4v6, it is not possible\nto derive a packet filter for UL direction from the DL user data packet.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Creating a derived QoS rule by reflective QoS in the UE", "numbering": "6.2.5.1.4.3", "title_level": 5, "desc": "6.2.5.1.4.3 Creating a derived QoS rule by reflective QoS in the UE\n\nIf the UE receives a DL user data packet marked with a QFI and an RQI, the\nDL user data packet belongs to a PDU session of IPv4, IPv6, IPv4v6 or\nEthernet PDU session type, and the UE does not have a derived QoS rule with\nthe same packet filter for UL direction as the packet filter for UL\ndirection derived from the DL user data packet as specified in\nsubclause\u00a06.2.5.1.4.2, then the UE shall create a new derived QoS rule as\nfollows:\n\na) the QFI of the derived QoS rule is set to the received QFI;\n\nb) the precedence value of the derived QoS rule is set to 80 (decimal); and\n\nc) the packet filter for UL direction of the derived QoS rule is set to the\nderived packet filter for UL direction;\n\nand the UE shall start the timer T3583 associated with the derived QoS rule\nwith the RQ timer value last received during the UE-requested PDU session\nestablishment procedure of the PDU session (see subclause\u00a06.4.1) or the\nnetwork-requested PDU session modification procedure of the PDU session\n(see subclause\u00a06.4.2). If the RQ timer value was received neither in the UE-\nrequested PDU session establishment procedure of the PDU session nor in any\nnetwork-requested PDU session modification procedure of the PDU session,\nthe default standardized RQ timer value is used.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Updating a derived QoS rule by reflective QoS in the UE", "numbering": "6.2.5.1.4.4", "title_level": 5, "desc": "6.2.5.1.4.4 Updating a derived QoS rule by reflective QoS in the UE\n\nIf the UE receives a DL user data packet associated with a QFI and an RQI,\nthe DL user data packet belongs to a PDU session of IPv4, IPv6, IPv4v6 or\nEthernet PDU session type, and the UE has a derived QoS rule with the same\npacket filter for UL direction as the packet filter for UL direction\nderived from the DL user data packet as specified in subclause\u00a06.2.5.1.4.2:\n\n\na) the UE shall re-start the timer T3583 associated with the derived QoS\nrule with the RQ timer value last received during the UE-requested PDU\nsession establishment procedure of the PDU session (see subclause\u00a06.4.1) or\nthe network-requested PDU session modification procedure of the PDU session\n(see subclause\u00a06.4.2). If the RQ timer value was received neither in the UE-\nrequested PDU session establishment procedure of the PDU session nor in any\nnetwork-requested PDU session modification procedure of the PDU session,\nthe default standardized RQ timer value is used; and\n\nb) if the QFI value associated with the DL user data packet is different\nfrom the QFI value stored for the derived QoS rule, the UE shall replace\nthe QFI value stored for the derived QoS rule with the new QFI value for\nthe derived QoS rule.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Deleting a derived QoS rule in the UE", "numbering": "6.2.5.1.4.5", "title_level": 5, "desc": "6.2.5.1.4.5 Deleting a derived QoS rule in the UE\n\nUpon expiration of timer T3583 associated with a derived QoS rule, the UE\nshall remove the derived QoS rule.\n\nUpon release of the PDU session, the UE shall remove the derived QoS\nrule(s) associated with the PDU session.\n\nIf the network accepts the request from the UE to revoke the usage of\nreflective QoS and sets the value of the RQ timer to \"deactivated\" or zero,\nthe UE shall remove the derived QoS rule(s) associated with the PDU\nsession.\n\nWhen a derived QoS rule is deleted, the timer T3583 associated with the\nderived QoS rule shall be stopped.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Ignoring RQI in the UE", "numbering": "6.2.5.1.4.6", "title_level": 5, "desc": "6.2.5.1.4.6 Ignoring RQI in the UE\n\nIf the UE receives a DL user data packet marked with a QFI and an RQI and\nit is not possible to derive a packet filter for UL direction from the DL\nuser data packet as specified in subclause\u00a06.2.5.1.4.2, the UE shall ignore\nthe RQI and shall handle the received DL user data packet.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Local area data network (LADN)", "numbering": "6.2.6", "title_level": 2, "desc": "6.2.6  Local area data network (LADN)\n\nThe UE can receive the local area data network (LADN) information\nconsisting of LADN DNNs and LADN service area (a set of tracking areas that\nbelong to the current registration area) information based on the UE\nlocation during the registration procedure or the generic UE configuration\nupdate procedure (see subclause\u00a05.5.1 and subclause\u00a05.4.4).\n\nThe UE may request a PDU session establishment and modification or initiate\nthe service request to re-establish the PDU session for LADN when the UE is\nlocated in the LADN service area. If the UE has moved out of the LADN\nservice area, the SMF shall:\n\na) release the PDU session for LADN; or\n\nb) release the user-plane resources for the PDU session for LADN;\n\naccording to operator's policy.\n\nIn case b):\n\n-  if the UE has returned to the LADN service area, and the network has\ndownlink user data pending, the network re-establishes the user-plane\nresources for the PDU session for LADN; and.\n\n-  if the UE has not returned to the LADN service area after a period of\ntime according to operator's policy, the SMF may release the PDU session\nfor LADN.\n\nWhen the UE moves to 5GMM-DEREGISTERED state, the UE shall delete the\nstored LADN information, if any.\n\nNOTE:  In this release, LADNs apply only to 3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of DNN based congestion control", "numbering": "6.2.7", "title_level": 2, "desc": "6.2.7  Handling of DNN based congestion control\n\nThe network may detect and start performing DNN based congestion control\nwhen one or more DNN congestion criteria as specified in 3GPP\u00a0TS\u00a023.501\u00a0[8]\nare met. The network may store a DNN congestion back-off timer on a per UE\nand congested DNN basis. If the UE does not provide a DNN for a non-\nemergency PDU session, then the network uses the selected DNN.\n\nIn the UE, 5GS session management timers T3396 for DNN based congestion\ncontrol are started and stopped on a per DNN basis.\n\nIn case the timer T3396 is provided during the PDU session establishment\nprocedure, the DNN associated with T3396 is the DNN provided by the UE\nduring the PDU session establishment. If no DNN is provided by the UE along\nthe PDU SESSION ESTABLISHMENT REQUEST, then T3396 is associated with no\nDNN. For this purpose the UE shall memorize the DNN provided to the network\nduring the PDU session establishment. The timer T3396 associated with no\nDNN will never be started due to any 5GSM procedure related to an emergency\nPDU session. If the timer T3396 associated with no DNN is running, it does\nnot affect the ability of the UE to request an emergency PDU session.\n\nIn case the timer T3396 is provided during the UE-requested PDU session\nmodification procedure or the network-requested PDU session release\nprocedure, the DNN associated with T3396 is the DNN associated with the PDU\nsession corresponding to the 5GSM procedure.\n\nIf T3396 is running or is deactivated, and the UE is a UE configured for\nhigh priority access in selected PLMN, then the UE is allowed to initiate\n5GSM procedures for the respective DNN or without a DNN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of S-NSSAI based congestion control", "numbering": "6.2.8", "title_level": 2, "desc": "6.2.8  Handling of S-NSSAI based congestion control\n\nThe network may detect and start performing S-NSSAI based congestion\ncontrol when one or more S-NSSAI congestion criteria as specified in\n3GPP\u00a0TS\u00a023.501\u00a0[8] are met. The network may store an S-NSSAI congestion\nback-off timer on a per UE, S-NSSAI, and optionally DNN basis. If the UE\ndoes not provide a DNN for a non-emergency PDU session, then the network\nuses the selected DNN.\n\nIn the UE, 5GS session management timers T35cd for the S-NSSAI based\ncongestion control are started and stopped on a per S-NSSAI and DNN basis.\n\nIn the UE, 5GS session management timers T35ef for the S-NSSAI based\ncongestion control are started and stopped on a per S-NSSAI basis.\n\nIn case the timer T35cd is provided during the PDU session establishment\nprocedure, the S-NSSAI associated with T35cd is the S-NSSAI provided by the\nUE during the PDU session establishment. The DNN associated with T35cd is\nthe DNN provided by the UE during the PDU session establishment. If no S-\nNSSAI but DNN is provided by the UE along the PDU SESSION ESTABLISHMENT\nREQUEST message, then T35cd is associated with no S-NSSAI and a DNN\nprovided to the network during the PDU session establishment. If no DNN but\nS-NSSAI is provided by the UE along the PDU SESSION ESTABLISHMENT REQUEST\nmessage, then T35cd is associated with no DNN and an S-NSSAI provided to\nthe network during the PDU session establishment. If no DNN and no S-NSSAI\nis provided by the UE along the PDU SESSION ESTABLISHMENT REQUEST message,\nthen T35cd is associated with no DNN and no S-NSSAI. For this purpose the\nUE shall memorize the DNN and S-NSSAI provided to the network during the\nPDU session establishment. The timer T35cd associated with no DNN and an S-\nNSSAI will never be started due to any 5GSM procedure related to an\nemergency PDU session. If the timer T35cd associated with no DNN and an S-\nNSSAI is running, it does not affect the ability of the UE to request an\nemergency PDU session.\n\nIn case the timer T35ef is provided during the PDU session establishment\nprocedure, the S-NSSAI associated with T35ef is the S-NSSAI provided by the\nUE during the PDU session establishment. If no S-NSSAI is provided by the\nUE along the PDU SESSION ESTABLISHMENT REQUEST message, then T35ef is\nassociated with no S-NSSAI.\n\nIn case the timer T35cd is provided during the UE-requested PDU session\nmodification procedure or the network-requested PDU session release\nprocedure, the S-NSSAI and DNN associated with T35cd are the S-NSSAI and\nDNN associated with the PDU session corresponding to the 5GSM procedure.\n\nIn case the timer T35ef is provided during the UE-requested PDU session\nmodification procedure or the network-requested PDU session release\nprocedure, the S-NSSAI associated with T35ef is the S-NSSAI associated with\nthe PDU session corresponding to the 5GSM procedure.\n\nIf T35cd is running or is deactivated, and the UE is a UE configured for\nhigh priority access in selected PLMN, then the UE is allowed to initiate\n5GSM procedures for the respective S-NSSAI or [S-NSSAI, DNN] combination.\n\nIf T35ef is running or is deactivated, and the UE is configured for high\npriority access in selected PLMN, then the UE is allowed to initiate 5GSM\nprocedure for the respective S-NSSAI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Interaction with upper layers", "numbering": "6.2.9", "title_level": 2, "desc": "6.2.9  Interaction with upper layers\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.2.9.1", "title_level": 3, "desc": "6.2.9.1  General\n\nA 5GSM entity may interact with upper layers. Subclause\u00a06.2.9.2 describes\nhow the 5GSM entity interacts with upper layers with respect to the URSP.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "URSP", "numbering": "6.2.9.2", "title_level": 3, "desc": "6.2.9.2  URSP\n\nThe URSP requires interaction between upper layers and the 5GSM entities in\nthe UE (see 3GPP\u00a0TS\u00a024.5xx\u00a0[19] for further details). Each of the 5GSM\nentities in the UE shall indicate attributes (e.g. PDU session identity,\nSSC mode, S-NSSAI, DNN, PDU session type, access type, PDU address) of a\nnewly established PDU session to the upper layers. If a PDU session is\nreleased, the 5GSM entity handling the PDU session shall inform the PDU\nsession identity of the released PDU session to the upper layers. The upper\nlayers may request a 5GSM entity to establish a PDU session indicating one\nor more PDU session attributes and to release an existing PDU session.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of 3GPP PS data off", "numbering": "6.2.10", "title_level": 2, "desc": "6.2.10 Handling of 3GPP PS data off\n\nA UE, which supports 3GPP PS data off (see 3GPP\u00a0TS\u00a023.501\u00a0[8]), can be\nconfigured with up to two lists of 3GPP PS data off exempt services as\nspecified in 3GPP\u00a0TS\u00a024.368\u00a0[17] or in the EF3GPPPSDATAOFF USIM file as\nspecified in 3GPP\u00a0TS\u00a031.102\u00a0[22]:\n\na) a list of 3GPP PS data off exempt services to be used in the HPLMN or\nEHPLMN; and\n\nb) a list of 3GPP PS data off exempt services to be used in the VPLMN.\n\nIf only the list of 3GPP PS data off exempt services to be used in the\nHPLMN or EHPLMN is configured at the UE, this list shall be also used in\nthe VPLMN.\n\nIf the UE supports 3GPP PS data off, the UE shall provide the 3GPP PS data\noff UE status in the extended protocol configuration options IE during UE-\nrequested PDU session establishment procedure, and UE-requested PDU session\nmodification procedure (see subclause\u00a06.4.1 and subclause\u00a06.4.2).\n\nThe network shall support of 3GPP PS data off.\n\nThe UE shall indicate change of the 3GPP PS data off UE status for the PDU\nsession by using the UE-requested PDU session modification procedure as\nspecified in subclause\u00a06.4.2.\n\nWhen the 3GPP PS data off UE status is \"activated\", the UE does not send\nuplink IP packets via 3GPP access except:\n\na) for those services indicated in the list of 3GPP PS data off exempt\nservices to be used in the HPLMN or EHPLMN as specified in\n3GPP\u00a0TS\u00a024.368\u00a0[17] when the UE is in its HPLMN or EHPLMN;\n\nb) for those services indicated in the list of 3GPP PS data off exempt\nservices to be used in the HPLMN or EHPLMN when the UE is in the VPLMN, if\nonly the list of 3GPP PS data off exempt services to be used in the HPLMN\nor EHPLMN is configured to the UE as specified in 3GPP\u00a0TS\u00a024.368\u00a0[17];\n\nc) for those services indicated in the list of 3GPP PS data off exempt\nservices to be used in the VPLMN when the UE is in the VPLMN, if the list\nof 3GPP PS data off exempt services to be used in the VPLMN is configured\nto the UE as specified in 3GPP\u00a0TS\u00a024.368\u00a0[17];\n\nd) for those services indicated in the EF3GPPPSDATAOFF USIM file as\nspecified in 3GPP\u00a0TS\u00a031.102\u00a0[22];\n\ne) any uplink traffic due to procedures specified in 3GPP\u00a0TS\u00a024.229\u00a0[14];\nand\n\nf) any uplink traffic due to procedures specified in 3GPP\u00a0TS\u00a024.623\u00a0[20].\n\nOtherwise the UE sends uplink IP packets without restriction.\n\nNOTE:  If the UE supports 3GPP PS data off, uplink IP packets are filtered\nas specified in 3GPP\u00a0TS\u00a024.229\u00a0[14] in U.3.1.5.\n\n3GPP PS data off does not restrict sending of uplink IP packets via non-\n3GPP access.\n\n3GPP PS data off does not restrict sending of uplink user data packets via\na PDU session of Ethernet or Unstructured PDU session type.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested 5GSM procedures", "numbering": "6.3", "title_level": 1, "desc": "6.3  Network-requested 5GSM procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session authentication and authorization procedure", "numbering": "6.3.1", "title_level": 2, "desc": "6.3.1  PDU session authentication and authorization procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.3.1.1", "title_level": 3, "desc": "6.3.1.1  General\n\nThe purpose of the PDU session authentication and authorization procedure\nis to enable the DN:\n\na) to authenticate the upper layers of the UE, when establishing the PDU\nsession;\n\nb) to authorize the upper layers of the UE, when establishing the PDU\nsession;\n\nc) both of the above; or\n\nd) to re-authenticate the upper layers of the UE after establishment of the\nPDU session.\n\nThe PDU session authentication and authorization procedure can be performed\nonly during or after the UE-requested PDU session procedure establishing a\nnon-emergency PDU session. The PDU session establishment authentication and\nauthorization procedure shall not be performed during or after the UE-\nrequested PDU session establishment procedure establishing an emergency PDU\nsession.\n\nThe network authenticates the UE using the Extensible Authentication\nProtocol (EAP) as specified in IETF\u00a0RFC\u00a03748\u00a0[32].\n\nEAP has defined four types of EAP messages:\n\na) an EAP-request message;\n\nb) an EAP-response message;\n\nc) an EAP-success message; and\n\nd) an EAP-failure message.\n\nThe EAP-request message is transported from the network to the UE using the\nPDU SESSION AUTHENTICATION COMMAND message of the PDU EAP message reliable\ntransport procedure.\n\nThe EAP-response message to the EAP-request message is transported from the\nUE to the network using the PDU SESSION AUTHENTICATION COMPLETE message of\nthe PDU EAP message reliable transport procedure.\n\nIf the PDU session authentication and authorization procedure is performed\nduring the UE-requested PDU session establishment procedure:\n\na) and the DN authentication of the UE completes successfully, the EAP-\nsuccess message is transported from the network to the UE as part of the UE-\nrequested PDU session establishment procedure in the PDU SESSION\nESTABLISHMENT ACCEPT message.\n\nb) and the DN authentication of the UE completes unsuccessfully, the EAP-\nfailure message is transported from the network to the UE as part of the UE-\nrequested PDU session establishment procedure in the PDU SESSION\nESTABLISHMENT REJECT message.\n\nIf the PDU session authentication and authorization procedure is performed\nafter the UE-requested PDU session establishment procedure:\n\na) and the DN authentication of the UE completes successfully, the EAP-\nsuccess message is transported from the network to the UE using the PDU\nSESSION AUTHENTICATION RESULT message of the PDU EAP result message\ntransport procedure.\n\nb) and the DN authentication of the UE completes unsuccessfully, the EAP-\nfailure message is transported from the network to the UE using the PDU\nSESSION RELEASE COMMAND message of the network-requested PDU session\nrelease procedure.\n\nThere can be several rounds of exchange of an EAP-request message and a\nrelated EAP-response message for the DN to complete the authentication and\nauthorization of the request for a PDU session (see example in\nfigure\u00a06.3.1.1).\n\nThe SMF shall set the authenticator retransmission timer specified in\nIETF\u00a0RFC\u00a03748\u00a0[34] subclause\u00a04.3 to infinite value.\n\nNOTE:  The PDU session authentication and authorization procedure provides\na reliable transport of EAP messages and therefore retransmissions at the\nEAP layer of the SMF do not occur.\n\n[pic]\n\nFigure\u00a06.3.1.1: PDU session authentication and authorization procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU EAP message reliable transport procedure", "numbering": "6.3.1.2", "title_level": 3, "desc": "6.3.1.2  PDU EAP message reliable transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU EAP message reliable transport procedure initiation", "numbering": "6.3.1.2.1", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU EAP message reliable transport procedure accepted by the", "numbering": "6.3.1.2.2", "title_level": 4, "desc": "6.3.1.2.1   PDU EAP message reliable transport procedure initiation\n\nIn order to initiate the PDU EAP message reliable transport procedure, the\nSMF shall create a PDU SESSION AUTHENTICATION COMMAND message.\n\nThe SMF shall set the PTI IE of the PDU SESSION AUTHENTICATION COMMAND\nmessage to \"No procedure transaction identity assigned\".\n\nThe SMF shall set the EAP message IE of the PDU SESSION AUTHENTICATION\nCOMMAND message to the EAP-request message provided by the DN or generated\nlocally.\n\nThe SMF shall send the PDU SESSION AUTHENTICATION COMMAND message, and the\nSMF shall start timer T3590 (see example in figure\u00a06.3.1.1).\n\nUpon receipt of a PDU SESSION AUTHENTICATION COMMAND message and a PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, the UE passes to the upper layers the EAP message received\nin the EAP message IE of the PDU SESSION AUTHENTICATION COMMAND message.\nApart from this action, the authentication and authorization procedure\ninitiated by the DN is transparent to the 5GSM layer of the UE.\n\n\n6.3.1.2.2   PDU EAP message reliable transport procedure accepted by the UE\n\nWhen the upper layers provide an EAP-response message responding to the\nreceived EAP-request message, the UE shall create a PDU SESSION\nAUTHENTICATION COMPLETE message.\n\nThe UE shall set the EAP message IE of the PDU SESSION AUTHENTICATION\nCOMPLETE message to the EAP-response message.\n\nThe UE shall transport the PDU SESSION AUTHENTICATION COMPLETE message and\nthe PDU session ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5. Apart from this action, the authentication and\nauthorization procedure initiated by the DN is transparent to the 5GSM\nlayer of the UE.\n\nUpon receipt of a PDU SESSION AUTHENTICATION COMPLETE message, the SMF\nshall stop timer T3590 and provides the EAP message received in the EAP\nmessage IE of the PDU SESSION AUTHENTICATION COMPLETE message to the DN or\nhandles it locally.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "6.3.1.2.3", "title_level": 4, "desc": "6.3.1.2.3   Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) T3590 expired.\n\n   The SMF shall, on the first expiry of the timer T3590, retransmit the\nPDU SESSION AUTHENTICATION COMMAND message and shall reset and start timer\nT3590. This retransmission is repeated four times, i.e. on the fifth expiry\nof timer T3590, the SMF shall abort the procedure.\n\nEditor's note:  Further abnormal cases are FFS\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "6.3.1.2.4", "title_level": 4, "desc": "6.3.1.2.4   Abnormal cases in the UE\n\nEditor's note:  Abnormal cases are FFS\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU EAP result message transport procedure", "numbering": "6.3.1.3", "title_level": 3, "desc": "6.3.1.3  PDU EAP result message transport procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU EAP result message transport procedure initiation", "numbering": "6.3.1.3.1", "title_level": 4, "desc": "6.3.1.3.1   PDU EAP result message transport procedure initiation\n\nIn order to initiate the PDU EAP result message transport procedure, the\nSMF shall create a PDU SESSION AUTHENTICATION RESULT message.\n\nThe SMF shall set the PTI IE of the PDU SESSION AUTHENTICATION RESULT\nmessage to \"No procedure transaction identity assigned\".\n\nThe SMF shall set the EAP message IE of the PDU SESSION AUTHENTICATION\nRESULT message to the EAP-success message provided by the DN.\n\nThe SMF shall send the PDU SESSION AUTHENTICATION RESULT message.\n\nUpon receipt of a PDU SESSION AUTHENTICATION RESULT message and a PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, the UE passes to the upper layers the EAP message received\nin the EAP message IE of the PDU SESSION AUTHENTICATION RESULT message.\nApart from this action, the authentication and authorization procedure\ninitiated by the DN is transparent to the 5GSM layer of the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session modification procedure", "numbering": "6.3.2", "title_level": 2, "desc": "6.3.2  Network-requested PDU session modification procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.3.2.1", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session modification procedure", "numbering": "6.3.2.2", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session modification procedure accepted", "numbering": "6.3.2.3", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session modification procedure not", "numbering": "6.3.2.4", "title_level": 3, "desc": "6.3.2.1  General\n\nThe purpose of the network-requested PDU session modification procedure is\nto enable the network to modify a PDU session.\n\n\n6.3.2.2  Network-requested PDU session modification procedure initiation\n\nIn order to initiate the network-requested PDU session modification\nprocedure, the SMF shall create a PDU SESSION MODIFICATION COMMAND message.\n\nIf the authorized QoS rules of the PDU session is modified, the SMF shall\nset the authorized QoS rules IE of the PDU SESSION MODIFICATION COMMAND\nmessage to the authorized QoS rules of the PDU session.\n\nIf the session-AMBR of the PDU session is modified, the SMF shall set the\nselected Session-AMBR IE of the PDU SESSION MODIFICATION COMMAND message to\nthe session-AMBR of the PDU session.\n\nIf interworking to EPS is supported for the PDU session and if the mapped\nEPS bearer contexts of the PDU session is modified, the SMF shall set the\nmapped EPS bearer contexts IE of the PDU SESSION MODIFICATION COMMAND\nmessage to the mapped EPS bearer contexts of the PDU session. If the\nassociation between a QoS flow and the mapped EPS bearer context is\nchanged, the SMF shall set the EPS bearer identity parameter in QoS rules\nIE of the PDU SESSION MODIFICATION COMMAND message to the new EPS bearer\nidentity associated with the QoS flow.\n\nIf the network-requested PDU session modification procedure is triggered by\na UE-requested PDU session modification procedure and the PDU SESSION\nMODIFICATION REQUEST message includes a 5GSM capability IE with the RQoS\nbit set to \"Reflective QoS supported\", the SMF shall consider that\nreflective QoS is supported for QoS flows belonging to this PDU session and\nmay include the RQ timer IE set to an RQ timer value in the PDU SESSION\nMODIFICATION COMMAND message.\n\nIf the network-requested PDU session modification procedure is triggered by\na UE-requested PDU session modification procedure and the PDU SESSION\nMODIFICATION REQUEST message includes a 5GSM capability IE with the MH6-PDU\nbit to \"Multi-homed IPv6 PDU session supported\", the SMF shall consider\nthat this PDU session is supported to use multiple IPv6 prefixes.\n\nIf the network-requested PDU session modification procedure is triggered by\na UE-requested PDU session modification procedure, the PDU session type is\n\"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\" and the PDU SESSION MODIFICATION\nREQUEST message includes a Maximum number of supported packet filters IE,\nthe SMF shall consider this number as the maximum number of packet filters\nthat can be supported by the UE for this PDU session. Otherwise the SMF\nconsiders that the UE supports 16 packet filters for this PDU session.\n\nIf the value of the RQ timer is set to \"deactivated\" or has a value of\nzero, the UE considers that RQoS is not applied for this PDU session.\n\nIf the network-requested PDU session modification procedure is triggered by\na UE-requested PDU session modification procedure, the SMF shall set the\nPTI IE of the PDU SESSION MODIFICATION COMMAND message to the PTI of the\nPDU SESSION MODIFICATION REQUEST message received as part of the UE-\nrequested PDU session modification procedure.\n\nIf the network-requested PDU session modification procedure is not\ntriggered by a UE-requested PDU session modification procedure, the SMF\nshall set the PTI IE of the PDU SESSION MODIFICATION COMMAND message to \"No\nprocedure transaction identity assigned\".\n\nIf the selected SSC mode of the PDU session is \"SSC mode 3\" and the SMF\nrequests the relocation of SSC mode 3 PDU session anchor with multiple PDU\nsessions as specified in 3GPP\u00a0TS\u00a023.502\u00a0[9], the SMF shall include 5GSM\ncause #39\u00a0\"reactivation requested\" , in the PDU SESSION MODIFICATION\nCOMMAND message, and may include the PDU session address lifetime in a PDU\nsession address lifetime PCO parameter in the Extended protocol\nconfiguration options IE of the PDU SESSION MODIFICATION COMMAND message.\n\nThe SMF shall send the PDU SESSION MODIFICATION COMMAND message, and the\nSMF shall start timer T3591 (see example in figure\u00a06.3.2.2.1).\n\nNOTE:  If the SMF requests the relocation of SSC mode 3 PDU session anchor\nwith multiple PDU sessions as specified in 3GPP\u00a0TS\u00a023.502\u00a0[9], the\nreallocation requested indication indicating whether the SMF is to be\nreallocated or the SMF is to be reused is provided to the AMF.\n\n[pic]\n\nFigure\u00a06.3.2.2.1: Network-requested PDU session modification procedure\n\n\n6.3.2.3  Network-requested PDU session modification procedure accepted by\n         the UE\n\nUpon receipt of the PDU SESSION MODIFICATION COMMAND message, if the UE\nprovided a DNN for the establishment of the PDU session, the UE shall stop\ntimer T3396, if it is running for the DNN provided by the UE. If the UE did\nnot provide a DNN for the establishment of the PDU session and the request\ntype was different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", the UE shall stop the timer T3396\nassociated with no DNN if it is running. If the PDU SESSION MODIFICATION\nCOMMAND message was received for an emergency PDU session, the UE shall not\nstop the timer T3396 associated with no DNN if it is running.\n\nUpon receipt of the PDU SESSION MODIFICATION COMMAND message, the UE shall\nstop timer T35cd associated with the same [S-NSSAI, DNN] combination as\nthat the UE provided when the PDU session is established, if it is running.\n\nUpon receipt of the PDU SESSION MODIFICATION COMMAND message, if the UE\nprovided an S-NSSAI for the establishment of the PDU session, the UE shall\nstop timer T35ef, if it is running for the S-NSSAI provided by the UE. If\nthe UE did not provide an S-NSSAI for the establishment of the PDU session\nand the request type was different from \"initial emergency request\", the UE\nshall stop the timer T35ef associated with no S-NSSAI if it is running. If\nthe MODIFY EPS BEARER CONTEXT REQUEST message was received for an emergency\nPDU session, the UE shall not stop the timer T35ef associated with no S-\nNSSAI if it is running.\n\nEditor's note: it is FFS whether to stop the timer T35ef in the procedures\nabove.\n\nThe UE shall replace the stored authorized QoS rules, session-AMBR and\nmapped EPS bearer contexts of the PDU session with the received value(s),\nif any, in the PDU SESSION MODIFICATION COMMAND message. And if a new EPS\nbearer identity parameter in QoS rules IE is received for a QoS flow which\ncan be transferred to EPS, the UE shall update the association between the\nQoS flow and the mapped EPS bearer context, based on the new EPS bearer\nidentity and the mapped EPS bearer contexts. If the \"Delete existing EPS\nbearer\" operation code in the Mapped EPS bearer contexts IE was received,\nthe UE shall discard the association between the QoS flow and the\ncorresponding mapped EPS bearer context.\n\nUpon receipt of a PDU SESSION MODIFICATION COMMAND message and a PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, if the UE accepts the PDU SESSION MODIFICATION COMMAND\nmessage, the UE considers the PDU session as modified and the UE shall\ncreate a PDU SESSION MODIFICATION COMPLETE message.\n\nIf the PDU SESSION MODIFICATION COMMAND message contains the PTI value\nallocated in the UE-requested PDU session modification procedure, the UE\nshall stop the timer T3581. The UE should ensure that the PTI value\nassigned to this procedure is not released immediately.\n\nNOTE\u00a01:  The way to achieve this is implementation dependent. For example,\nthe UE can ensure that the PTI value assigned to this procedure is not\nreleased during the time equal to or greater than the default value of\ntimer T3591.\n\nWhile the PTI value is not released, the UE regards any received PDU\nSESSION MODIFICATION COMMAND message with the same PTI value as a network\nretransmission (see subclause\u00a07.3.1).\n\nIf the selected SSC mode of the PDU session is \"SSC mode 3\" and the PDU\nSESSION MODIFICATION COMMAND message includes 5GSM cause #39 \"reactivation\nrequested\", the UE can provide to the upper layers the PDU session address\nlifetime if received in the PDU session address lifetime PCO parameter of\nthe Extended protocol configuration options IE of the PDU SESSION\nMODIFICATION COMMAND message, and the UE should re-initiate the UE-\nrequested PDU session establishment procedure with a new PDU session ID as\nspecified in subclause\u00a06.4.1 for the PDU session type, the SSC mode, the\nDNN, and the S-NSSAI if provided in the UE-requested PDU session\nestablishment procedure of the present PDU session, after the completion of\nthe network-requested PDU session modification procedure. The UE shall\ninclude the PDU session ID of the old PDU session which is about to get\nreleased in the old PDU session ID IE of the UL NAS TRANSPORT message that\ntransports the PDU SESSION ESTABLISHMENT REQUEST message.\n\nNOTE\u00a02:  The UE is expected to maintain the PDU session for which the PDU\nSESSION MODIFICATION COMMAND message including 5GSM cause #39 \"reactivation\nrequested\" is received during the time indicated by the PDU session address\nlifetime value or until receiving an indication from upper layers (e.g.\nthat the old PDU session is no more needed).\n\nIf the selected PDU session type of the PDU session is \"Unstructured\" or\n\"Ethernet\", the UE supports inter-system change from N1 mode to S1 mode,\nthe UE does not support establishment of a PDN connection for the PDN type\nset to \"non-IP\" in S1 mode, and the parameters list field of one or more\nQoS rules received in the QoS rules IE of the PDU SESSION MODIFICATION\nCOMMAND message contains an EPS bearer identity (EBI) then the UE shall\nlocally remove the EPS bearer identity (EBI) from the parameters list field\nof such one or more QoS rules.\n\nThe UE shall transport the PDU SESSION MODIFICATION COMPLETE message and\nthe PDU session ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5.\n\nUpon receipt of a PDU SESSION MODIFICATION COMPLETE message, the SMF shall\nstop timer T3591 and shall consider the PDU session as modified. If the\nselected SSC mode of the PDU session is \"SSC mode 3\" and the PDU SESSION\nMODIFICATION COMMAND message included 5GSM cause #39 \"reactivation\nrequested\", the SMF shall start timer T3593. If the PDU Session Address\nLifetime value is sent to the UE in the PDU SESSION MODIFICATION COMMAND\nmessage then timer T3593 shall be started with the same value, otherwise it\nshall use a default value.\n\n\n6.3.2.4  Network-requested PDU session modification procedure not accepted\n         by the UE\n\nUpon receipt of a PDU SESSION MODIFICATION COMMAND message and a PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, if the UE rejects the PDU SESSION MODIFICATION COMMAND\nmessage, the UE considers the PDU session as not modified and the UE shall\ncreate a PDU SESSION MODIFICATION COMMAND REJECT message.\n\nIf the PDU SESSION MODIFICATION COMMAND message contains the PTI value\nallocated in the UE-requested PDU session modification procedure, the UE\nshall release the PTI indicated by the PTI IE and shall stop the timer\nT3581.\n\nThe UE shall set the 5GSM cause IE of the PDU SESSION MODIFICATION COMMAND\nREJECT message to indicate the reason for rejecting the PDU session\nmodification.\n\nIf the selected SSC mode of the PDU session is \"SSC mode 3\" and the PDU\nSESSION MODIFICATION COMMAND messages includes 5GSM cause #39 \"reactivation\nrequested\", while the UE does not have sufficient resources for initiating\nthe PDU session establishment procedure as specified in subclause\u00a06.4.1\nthen the UE shall set cause IE to #26 \"insufficient resources\".\n\nIf the PDU SESSION MODIFICATION COMMAND message includes a request to add a\nnew QoS rule, and the UE decides to reject the addition of the new QoS rule\ndue to e.g. the supported number of QoS rules or number of packet filters\nassociated with a PDU session having reached the maximum number, then the\nUE shall set the 5GSM cause IE to #26 \"insufficient resources\".\n\nNOTE:  The maximum number of supported QoS rules or packet filters\nassociated with a PDU session is implementation specific.\n\nThe 5GSM cause IE typically indicates one of the following 5GSM cause\nvalues:\n\n#26 insufficient resources; or\n\n#43  Invalid PDU session identity.\n\nEditor's note:  Other 5GSM causes are FFS.\n\nThe UE shall transport the PDU SESSION MODIFICATION COMMAND REJECT message\nand the PDU session ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5.\n\nUpon receipt of a PDU SESSION MODIFICATION COMMAND REJECT message, the SMF\nshall stop timer T3591 and shall consider the PDU session as not modified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "6.3.2.5", "title_level": 3, "desc": "6.3.2.5  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3591.\n\n   On the first expiry of the timer T3591, the SMF shall resend the PDU\nSESSION MODIFICATION COMMAND message and shall reset and restart timer\nT3591. This retransmission is repeated four times, i.e. on the fifth expiry\nof timer T3591, the SMF shall abort the procedure and enter the state PDU\nSESSION ACTIVE.\n\n   The SMF may continue to use the previous configuration of the PDU\nsession or initiate the network-requested PDU session release procedure.\n\nb) Invalid PDU session identity.\n\n   Upon receipt of the PDU SESSION MODIFICATION COMMAND REJECT message\nincluding 5GSM cause #43 \"invalid PDU session identity\", the SMF shall\nrelease the existing PDU session locally without peer-to-peer signalling\nbetween the SMF and the UE.\n\nc) Collision of UE-requested PDU session release procedure and network-\nrequested PDU session modification procedure.\n\n   If the SMF receives a PDU SESSION RELEASE REQUEST message during the\nnetwork-requested PDU session modification procedure, and the PDU session\nindicated in the PDU SESSION RELEASE REQUEST message is the PDU session\nthat the SMF wants to modify, the SMF shall abort the PDU session\nmodification procedure and proceed with the UE-requested PDU session\nrelease procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "6.3.2.6", "title_level": 3, "desc": "6.3.2.6  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) No PDU session active for the received PDU session ID.\n\n   If the PDU session ID in the PDU SESSION MODIFICATION COMMAND message\ndoes not belong to any PDU session in state PDU SESSION ACTIVE in the UE,\nthe UE shall set the 5GSM cause IE to #43 \"Invalid PDU session identity\" in\nthe PDU SESSION MODIFICATION COMMAND REJECT message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session release procedure", "numbering": "6.3.3", "title_level": 2, "desc": "6.3.3  Network-requested PDU session release procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.3.3.1", "title_level": 3, "desc": "6.3.3.1  General\n\nThe purpose of the network-requested PDU session release procedure is to\nenable the network to release a PDU session.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session release procedure initiation", "numbering": "6.3.3.2", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network-requested PDU session release procedure accepted by the", "numbering": "6.3.3.3", "title_level": 3, "desc": "6.3.3.2  Network-requested PDU session release procedure initiation\n\nIn order to initiate the network-requested PDU session release procedure,\nthe SMF shall create a PDU SESSION RELEASE COMMAND message.\n\nThe SMF shall set the SM cause IE of the PDU SESSION RELEASE COMMAND\nmessage to indicate the reason for releasing the PDU session.\n\nThe SM cause IE typically indicates one of the following SM cause values:\n\n#26  insufficient resources;\n\n#29  user authentication or authorization failed;\n\n#36  regular deactivation;\n\n#39  reactivation requested;\n\n#67  insufficient resources for specific slice and DNN; or\n\n#69  insufficient resources for specific slice.\n\nEditor's note:  Further 5GSM causes are FFS.\n\nIf the selected SSC mode of the PDU session is \"SSC mode 2\" and the SMF\nrequests the relocation of SSC mode 2 PDU session anchor with different PDU\nsessions as specified in 3GPP\u00a0TS\u00a023.502\u00a0[9], the SMF shall include 5GSM\ncause #39\u00a0\"reactivation requested\".\n\nIf the network-requested PDU session release procedure is triggered by a UE-\nrequested PDU session release procedure, the SMF shall set the PTI IE of\nthe PDU SESSION RELEASE COMMAND message to the PTI of the PDU SESSION\nRELEASE REQUEST message received as part of the UE-requested PDU session\nrelease procedure.\n\nIf the network-requested PDU session release procedure is not triggered by\na UE-requested PDU session release procedure, the SMF shall set the PTI IE\nof the PDU SESSION RELEASE COMMAND message to \"No procedure transaction\nidentity assigned\".\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION RELEASE\nCOMMAND message when the 5GSM cause value #26 \"insufficient resources\" is\nincluded in the PDU SESSION RELEASE COMMAND message. If the 5GSM cause\nvalue is #26 \"insufficient resources\" and the PDU SESSION RELEASE COMMAND\nmessage is sent to a UE configured for high priority access in selected\nPLMN or the request type was set to \"initial emergency request\" or\n\"existing emergency PDU session\" for the establishment of the PDU session,\nthe network shall not include a Back-off timer value IE.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION RELEASE\nCOMMAND message when the 5GSM cause value #67 \"insufficient resources for\nspecific slice and DNN\" is included in the PDU SESSION RELEASE COMMAND\nmessage. If the 5GSM cause value is #67 \"insufficient resources for\nspecific slice and DNN\" and the PDU SESSION RELEASE COMMAND message is sent\nto a UE configured for high priority access in selected PLMN or the request\ntype was set to \"initial emergency request\" or \"existing emergency PDU\nsession\" for the establishment of the PDU session, the network shall not\ninclude a Back-off timer value IE.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION RELEASE\nCOMMAND message when the 5GSM cause #69 \"insufficient resources for\nspecific slice\" is included in the PDU SESSION RELEASE COMMAND message. If\nthe 5GSM cause value is #69 \"insufficient resources for specific slice\" and\nthe PDU SESSION RELEASE COMMAND message is sent to a UE configured for high\npriority access in selected PLMN or the request type was set to \"initial\nemergency request\" or \"existing emergency PDU session\" for the\nestablishment of the PDU session, the network shall not include a Back-off\ntimer value IE.\n\nThe SMF shall send:\n\na) the PDU SESSION RELEASE COMMAND message; and\n\nb) if the SMF allows the AMF to skip sending of the N1 SM container to the\nUE and the 5GSM cause IE is not set to #39\u00a0\"reactivation requested\", the N1\nSM delivery skip allowed indication;\n\ntowards the AMF, and the SMF shall start timer T3592 (see example in\nfigure\u00a06.3.3.2.1).\n\n[pic]\n\nFigure\u00a06.3.3.2.1: Network-requested PDU session release procedure\n\n\n6.3.3.3  Network-requested PDU session release procedure accepted by the UE\n\nUpon receipt of a PDU SESSION RELEASE COMMAND message and a PDU session ID,\nusing the NAS transport procedure as specified in subclause\u00a05.4.5, the UE\nconsiders the PDU session as released and the UE shall create an PDU\nSESSION RELEASE COMPLETE message.\n\nIf the PDU SESSION RELEASE COMMAND message contains the PTI value allocated\nin the UE-requested PDU session release procedure, the UE shall stop the\ntimer T3582. The UE should ensure that the PTI value assigned to this\nprocedure is not released immediately.\n\nNOTE\u00a01:  The way to achieve this is implementation dependent. For example,\nthe UE can ensure that the PTI value assigned to this procedure is not\nreleased during the time equal to or greater than the default value of\ntimer T3592.\n\nWhile the PTI value is not released, the UE regards any received PDU\nSESSION RELEASE COMMAND message with the same PTI value as a network\nretransmission (see subclause\u00a07.3.1).\n\nIf the PDU SESSION RELEASE COMMAND message includes 5GSM cause #39\n\"reactivation requested\", the UE should re-initiate the UE-requested PDU\nsession establishment procedure as specified in subclause\u00a06.4.1 for the PDU\nsession type, the SSC mode, the DNN, and the S-NSSAI as provided in the UE-\nrequested PDU session establishment procedure of the released PDU session,\nafter completion of the network-requested PDU session release procedure.\n\nIf the PDU SESSION RELEASE COMMAND message includes 5GSM cause\u00a0#39\n\"reactivation requested\" and the UE provided an S-NSSAI for the\nestablishment of the PDU session, the UE shall stop timer T35ef if it is\nrunning for the S-NSSAI provided by the UE. The UE should then re-initiate\nthe UE requested PDU session establishment procedure for the same S-NSSAI.\nIf the UE did not provide an S-NSSAI for the establishment of the PDU\nsession and the request type was different from \"initial emergency\nrequest\", the UE shall stop the timer T35ef associated with no S-NSSAI if\nit is running, and should re-initiate the UE requested PDU session\nestablishment procedure without including an S-NSSAI. If the PDU SESSION\nRELEASE COMMAND message was received for an emergency PDU session, the UE\nshall not stop the timer T35ef associated with no S-NSSAI if it is running.\n\n\nIf the PDU SESSION RELEASE COMMAND message includes 5GSM cause\u00a0#39\n\"reactivation requested\" and the UE provided a DNN for the establishment of\nthe PDU session, the UE shall stop timer T3396 if it is running for the DNN\nprovided by the UE. The UE should then re-initiate the UE requested PDU\nsession establishment procedure for the same DNN. If the UE did not provide\na DNN for the establishment of the PDU session and the request type was\ndifferent from \"initial emergency request\" and different from \"existing\nemergency PDU session\", the UE shall stop the timer T3396 associated with\nno DNN if it is running, and should re-initiate the UE requested PDU\nsession establishment procedure without including a DNN. If the PDU SESSION\nRELEASE COMMAND message was received for an emergency PDU session, the UE\nshall not stop the timer T35cd associated with no DNN if it is running.\n\nIf the PDU SESSION RELEASE COMMAND message includes 5GSM cause\u00a0#39\n\"reactivation requested\", the UE shall stop timer T35cd if it is running\nfor the same [S-NSSAI, DNN] combination provided by the UE. The UE should\nthen re-initiate the UE requested PDU session establishment procedure for\nthe same [S-NSSAI, DNN] combination. If the UE did not provide a DNN for\nthe establishment of the PDU session and the request type was different\nfrom \"initial emergency request\" and different from \"existing emergency PDU\nsession\", the UE shall stop the timer T35cd associated with [S-NSSAI, no\nDNN] if it is running, and should re-initiate the UE requested PDU session\nestablishment procedure with the same S-NSSAI but without a DNN. If the PDU\nSESSION RELEASE COMMAND message was received for an emergency PDU session,\nthe UE shall not stop the timer T35cd associated with [S-NSSAI, no DNN] if\nit is running.\n\nNOTE\u00a02:  User interaction is necessary in some cases when the UE cannot re-\ninitiate the UE-requested PDU session establishment procedure\nautomatically.\n\nIf the PDU SESSION RELEASE COMMAND message includes 5GSM cause\u00a0#26\n\"insufficient resources\" and the Back-off timer value IE, the UE shall take\ndifferent actions depending on the timer value received for timer T3396 in\nthe Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated and a DNN was\nincluded in the PDU SESSION ESTABLISHMENT REQUEST message, the UE shall\nstop timer T3396 associated with the corresponding DNN, if it is running.\nIf the timer value indicates neither zero nor deactivated and no DNN was\nincluded in the PDU SESSION ESTABLISHMENT REQUEST message and the request\ntype was different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", the UE shall stop timer T3396 associated\nwith no DNN if it is running. The UE shall then start timer T3396 with the\nvalue provided in the Back-off timer value IE and:\n\n1) shall not send a PDU SESSION ESTABLISHMENT REQUEST or PDU SESSION\nMODIFICATION REQUEST message for the same DNN that was sent by the UE,\nuntil timer T3396 expires or timer T3396 is stopped; and\n\n2) shall not send a PDU SESSION ESTABLISHMENT REQUEST message without an\nDNN and with request type different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", or a PDU SESSION\nMODIFICATION REQUEST message for a non-emergency PDU session established\nwithout an DNN provided by the UE, if no DNN was included in the PDU\nSESSION ESTABLISHMENT REQUEST message and the request type was different\nfrom \"initial emergency request\" and different from \"existing emergency PDU\nsession\", until timer T3396 expires or timer T3396 is stopped.\n\nThe UE shall not stop timer T3396 upon a PLMN change or inter-system\nchange;\n\nb) if the timer value indicates that this timer is deactivated and a DNN\nwas included in the PDU SESSION ESTABLISHMENT REQUEST message, the UE shall\nstop timer T3396 associated with the corresponding DNN, if it is running.\nIf the timer value indicates that this timer is deactivated and no DNN was\nincluded in the PDU SESSION ESTABLISHMENT REQUEST message and the request\ntype was different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", the UE shall stop timer T3396 associated\nwith no DNN if it is running. The UE:\n\n1) shall not send a PDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION\nMODIFICATION REQUEST for the same DNN until the UE is switched off or the\nUSIM is removed, or the UE receives an PDU SESSION MODIFICATION REQUEST\nmessage for the same DNN from the network or a PDU SESSION RELEASE COMMAND\nmessage including 5GSM cause #39 \"reactivation requested\" for the same DNN\nfrom the network; and\n\n2) shall not send a PDU SESSION ESTABLISHMENT REQUEST message without an\nDNN and with request type different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", or a PDU SESSION\nMODIFICATION REQUEST message for a non-emergency PDU session established\nwithout an DNN provided by the UE, if no DNN was included in the PDU\nSESSION ESTABLISHMENT REQUEST message and the request type was different\nfrom \"initial emergency request\" and different from \"existing emergency PDU\nsession\", until the UE is switched off or the USIM is removed, or the UE\nreceives an PDU SESSION MODIFICATION REQUEST message for a non-emergency\nPDU session established without an DNN provided by the UE, or a PDU SESSION\nRELEASE COMMAND messages including 5GSM cause IE set to 5GSM\u00a0cause\u00a0#39\n\"reactivation requested\" for a non-emergency PDU session established\nwithout an DNN provided by the UE.\n\nThe timer T3396 remains deactivated upon a PLMN change or inter-system\nchange; and\n\nc) if the timer value indicates zero, the UE:\n\n1) shall stop timer T3396 associated with the corresponding DNN, if\nrunning, and may send a PDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION\nMODIFICATION REQUEST message for the same DNN; and\n\n2) if no DNN was included in the PDU SESSION ESTABLISHMENT REQUEST message\nand the request type was different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", the UE shall stop timer\nT3396 associated with no DNN, if running, and may send a PDU SESSION\nESTABLISHMENT REQUEST message without a DNN, or a PDU SESSION MODIFICATION\nREQUEST message without an DNN provided by the UE.\n\nIf the PDU SESSION RELEASE COMMAND message includes 5GSM cause\u00a0#26\n\"insufficient resources\" and the Back-off timer value IE is not included,\nthen the UE may send a PDU SESSION ESTABLISHMENT REQUEST or PDU SESSION\nMODIFICATION REQUEST message for the same DNN or without a DNN.\n\nWhen the timer T3396 is running or the timer is deactivated, the UE is\nallowed to initiate a PDU session establishment procedure for emergency\nservices.\n\nIf the timer T3396 is running when the UE enters state 5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T3396 is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T3396 is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T3396 timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nIf the 5GSM cause value is #67 \"insufficient resources for specific slice\nand DNN\" and the Back-off timer value IE is included, the UE shall take\ndifferent actions depending on the timer value received for timer T35cd in\nthe Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated, the UE shall\nstop timer T35cd associated with the same [S-NSSAI, DNN] combination as\nthat the UE provided when the PDU session is established, if it is running.\nThe UE shall then start timer T35cd with the value provided in the Back-off\ntimer value IE. The UE shall not send another PDU SESSION ESTABLISHMENT\nREQUEST message with request type different from \"initial emergency\nrequest\" and different from \"existing emergency PDU session\", or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, DNN]\ncombination that was sent by the UE, until timer T35cd expires or timer\nT35cd is stopped;\n\nThe UE shall not stop timer T35cd upon a PLMN change or inter-system\nchange;\n\nb) if the timer value indicates that this timer is deactivated, the UE\nshall stop timer T35cd associated with the same [S-NSSAI, DNN] combination\nas that the UE provided when the PDU session is established, if it is\nrunning. The UE shall not send another PDU SESSION ESTABLISHMENT REQUEST\nmessage with request type different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", or PDU SESSION\nMODIFICATION REQUEST message for the same [S-NSSAI, DNN] combination that\nwas sent by the UE, until the UE is switched off or the USIM is removed, or\nthe UE receives a PDU SESSION MODIFICATION REQUEST message for the same [S-\nNSSAI, DNN] combination from the network or a PDU SESSION RELEASE COMMAND\nmessage including 5GSM cause #39 \"reactivation requested\" for the same [S-\nNSSAI, DNN] combination from the network; and\n\nThe timer T35cd remains deactivated upon a PLMN change or inter-system\nchange; and\n\nc) if the timer value indicates zero, the UE shall stop timer T35cd\nassociated with the same [S-NSSAI, DNN] combination that was sent by the\nUE, if running, and may send another PDU SESSION ESTABLISHMENT REQUEST\nmessage, or PDU SESSION MODIFICATION REQUEST message for the same [S-NSSAI,\nDNN] combination.\n\nIf the Back-off timer value IE is not included, then the UE may send\nanother PDU SESSION ESTABLISHMENT REQUEST message or PDU SESSION\nMODIFICATION REQUEST message for the same [S-NSSAI, DNN] combination.\n\nWhen the timer T35cd is running or the timer is deactivated, the UE is\nallowed to initiate a PDU session establishment procedure for emergency\nservices.\n\nIf the timer T35cd is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T35cd is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T35cd is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T35cd timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nNOTE\u00a03:  As described in this subclause, upon PLMN change or inter-system\nchange, the UE does not stop the timer T35cd or T35ef. This means the timer\nT35cd or T35ef can still be running or be deactivated for the given 5GSM\nprocedure, the PLMN, the S-NSSAI and optionally the DNN combination when\nthe UE returns to the PLMN or when it performs inter-system change back\nfrom S1 mode to N1 mode. Thus the UE can still be prevented from sending\nanother PDU SESSION ESTABLISHMENT REQUEST message in the PLMN for the same\nS-NSSAI and optionally the same DNN.\n\nUpon PLMN change, if T35cd is running or is deactivated for a S-NSSAI, a\nDNN, and old PLMN, but T35cd is not running and is not deactivated for the\nS-NSSAI, the DNN, and new PLMN, then the UE is allowed to send a PDU\nSESSION ESTABLISHMENT REQUEST message for the same S-NSSAI and the same DNN\nin the new PLMN.\n\nUpon PLMN change, if T35ef is running or is deactivated for a S-NSSAI and\nold PLMN, but T35cd is not running and is not deactivated for the S-NSSAI\nand new PLMN, then the UE is allowed to send a PDU SESSION ESTABLISHMENT\nREQUEST message for the same S-NSSAI in the new PLMN.\n\nThe UE shall transport the PDU SESSION RELEASE COMPLETE message and the PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5.\n\nUpon receipt of a PDU SESSION RELEASE COMPLETE message, the SMF shall stop\ntimer T3592 and shall consider the PDU session as released.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "N1 SM delivery skipped", "numbering": "6.3.3.4", "title_level": 3, "desc": "6.3.3.4  N1 SM delivery skipped\n\nIf the PDU SESSION RELEASE COMMAND message was sent along the N1 SM\ndelivery skip allowed indication towards AMF, then upon receipt of an\nindication that N1 SM delivery was skipped, the SMF shall stop timer T3592\nand shall consider the PDU session as released.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "6.3.3.5", "title_level": 3, "desc": "6.3.3.5  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3592.\n\n   The SMF shall, on the first expiry of the timer T3592, retransmit the\nPDU SESSION RELEASE COMMAND message and shall reset and start timer T3592.\nThis retransmission is repeated four times, i.e. on the fifth expiry of\ntimer T3592, the SMF shall abort the procedure.\n\nb) Collision of network-requested PDU session release procedure and UE-\nrequested PDU session modification procedure.\n\n   When the SMF receives a PDU SESSION MODIFICATION REQUEST message during\nthe network-requested PDU session release procedure, and the PDU session\nindicated in PDU SESSION MODIFICATION REQUEST message is the PDU session\nthat the SMF wants to release, the SMF shall ignore the PDU SESSION\nMODIFICATION REQUEST message and proceed with the PDU session release\nprocedure.\n\nc) Collision of network-requested PDU session release procedure and UE-\nrequested PDU session release procedure.\n\n   If the SMF receives a PDU SESSION RELEASE REQUEST message after sending\na PDU SESSION RELEASE COMMAND message to the UE, and the PDU session ID in\nthe PDU SESSION RELEASE REQUEST message is the same as the PDU session ID\nin the PDU SESSION RELEASE COMMAND message, the SMF shall ignore the PDU\nSESSION RELEASE REQUEST message and proceed with the network-requested PDU\nsession release procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "6.3.3.6", "title_level": 3, "desc": "6.3.3.6  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) No PDU session active for the received PDU session ID.\n\n   If the PDU session ID in the PDU SESSION RELEASE COMMAND message does\nnot belong to any PDU session in state PDU SESSION ACTIVE in the UE, the UE\nshall include the 5GSM cause #43 \"Invalid PDU session identity\" in the\nextended protocol configuration options IE of the PDU SESSION RELEASE\nCOMPLETE message, and transport the message and the received PDU session ID\nusing the NAS transport procedure as specified in subclause\u00a05.4.5.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested 5GSM procedures", "numbering": "6.4", "title_level": 1, "desc": "6.4  UE-requested 5GSM procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session establishment procedure", "numbering": "6.4.1", "title_level": 2, "desc": "6.4.1  UE-requested PDU session establishment procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.4.1.1", "title_level": 3, "desc": "6.4.1.1  General\n\nThe purpose of the UE-requested PDU session establishment procedure is to\nestablish a new PDU session with a DN or to perform handover of an existing\nPDU session between 3GPP access and non-3GPP access or to transfer an\nexisting PDN connection in the EPS to the 5GS. If accepted by the network,\nthe PDU session enables exchange of PDUs between the UE and the DN. The UE\nshall not request a PDU session establishment for an LADN when the UE is\nlocated outside the LADN service area.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session establishment procedure initiation", "numbering": "6.4.1.2", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session establishment procedure accepted by", "numbering": "6.4.1.3", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE requested PDU session establishment procedure not accepted", "numbering": "6.4.1.4", "title_level": 3, "desc": "6.4.1.2  UE-requested PDU session establishment procedure initiation\n\nIn order to initiate the UE-requested PDU session establishment procedure,\nthe UE shall create a PDU SESSION ESTABLISHMENT REQUEST message.\n\nNOTE\u00a01:  When IMS voice is available over either 3GPP access or non-3GPP\naccess, the \"voice centric\" UE in 5GMM-REGISTERED state will receive a\nrequest from upper layers to establish the PDU session for IMS signalling,\nif the conditions for performing an initial registration with IMS indicated\nin 3GPP\u00a0TS\u00a024.229\u00a0[14]\u00a0subclause\u00a0U.3.1.2 are satisfied.\n\nThe UE shall allocate a PDU session ID which is not currently being used by\nanother PDU session over either 3GPP access or non-3GPP access.\n\nThe UE shall allocate a PTI value currently not used and shall set the PTI\nIE of the PDU SESSION ESTABLISHMENT REQUEST message to the allocated PTI\nvalue.\n\nIf the UE requests to establish a new non-emergency PDU session with a DN\nand requests a PDU session type, the UE shall set the PDU session type IE\nof the PDU SESSION ESTABLISHMENT REQUEST message to one of the following\nvalues: the IP version capability as specified in subclause\u00a06.2.4.2,\n\"Ethernet\" or \"Unstructured\".\n\nNOTE\u00a02:  When the UE initiates the UE-requested PDU session establishment\nprocedure to transfer an existing non-IP PDN connection in the EPS to the\n5GS, the UE can use locally available information associated with the PDN\nconnection to select the PDU session type between \"Ethernet\" and\n\"Unstructured\".\n\nIf the UE requests to establish a new non-emergency PDU session with a DN\nand the UE requests an SSC mode, the UE shall set the SSC mode IE of the\nPDU SESSION ESTABLISHMENT REQUEST message to the SSC mode. If the UE\nrequests to establish a PDU session of \"IPv4\", \"IPv6\" or \"IPv4v6\" PDU\nsession type, the UE shall either omit the SSC mode IE or set the SSC mode\nIE to \"SSC mode 1\", \"SSC mode 2\", or \"SSC mode 3\". If the UE requests to\nestablish a PDU session of \"Ethernet\" or \"Unstructured\" PDU session type,\nthe UE shall either omit the SSC mode IE or set the SSC mode IE to \"SSC\nmode 1\" or \"SSC mode 2\". If the UE requests transfer of an existing PDN\nconnection in the EPS to the 5GS, the UE shall set the SSC mode IE to \"SSC\nmode 1\".\n\nIf the UE requests to establish a new emergency PDU session, the UE shall\nset the SSC mode IE of the PDU SESSION ESTABLISHMENT REQUEST message to\n\"SSC mode 1\".\n\nIf the UE requests to establish a new PDU session with a DN, the UE may\ninclude the SM PDU DN request container with a DN-specific identity of the\nUE complying with network access identifier (NAI) format as specified in\nIETF\u00a0RFC\u00a04282\u00a0[37].\n\nIf the UE requests to establish a new PDU session of \"IPv4\", \"IPv6\",\n\"IPv4v6\" or \"Ethernet\" PDU session type and the UE supports reflective QoS,\nthe UE should set the RQoS bit to \"Reflective QoS supported\" in the 5GSM\ncapability IE of the PDU SESSION ESTABLISHMENT REQUEST message.\n\nNOTE\u00a03:  The determination to not request the usage of reflective QoS by\nthe UE for a PDU session is implementation dependent.\n\nIf the UE requests to establish a new PDU session of \"IPv4\", \"IPv6\",\n\"IPv4v6\", or \"Ethernet\" PDU session type, and the UE can support more than\n16 packet filters for this PDU session, the UE shall indicate the maximum\nnumber of packet filters that can be supported for the PDU session in the\nMaximum number of supported packet filters IE of the PDU SESSION\nESTABLISHMENT REQUEST message.\n\nIf the UE requests to establish a new PDU session of \"IPv6\" or \"IPv4v6\" PDU\nsession type and the UE supports acting as a type\u00a0C\u00a0host as specified in\nIETF\u00a0RFC\u00a04191\u00a0[36], the UE shall set the MH6-PDU bit to \"Multi-homed IPv6\nPDU session supported\" in the 5GSM capability IE of the PDU SESSION\nESTABLISHMENT REQUEST message.\n\nIf the UE has an emergency PDU session, the UE shall not perform the UE-\nrequested PDU session establishment procedure to establish another\nemergency PDU session. The UE may perform the UE-requested PDU session\nestablishment procedure to transfer an existing emergency PDU session or an\nexisting PDN connection for emergency bearer services.\n\nIf the UE operating in the single-registration mode performs mobility from\nS1 mode to N1 mode and the UE wants to establish a PDU session\ncorresponding to an existing PDN connection in EPS for which interworking\nto 5GS is supported, the UE shall:\n\na) set the PDU session ID in the PDU SESSION ESTABLISHMENT REQUEST message\nand in the UL NAS TRANSPORT message to the stored PDU session ID\ncorresponding to the PDN connection; and\n\nb) set the S-NSSAI in the UL NAS TRANSPORT message to the stored S-NSSAI\nassociated with the PDU session ID only if the S-NSSAI is included in the\nallowed NSSAI.\n\nIf the UE supports 3GPP PS data off, the UE shall include the extended\nprotocol configuration options IE in the PDU SESSION ESTABLISHMENT REQUEST\nmessage and include the 3GPP PS data off UE status. The UE behaves as\ndescribed in subclause\u00a06.2.10.\n\nThe UE shall transport:\n\na) the PDU SESSION ESTABLISHMENT REQUEST message;\n\nb) the PDU session ID of the PDU session being established;\n\nc) if the request type is set to:\n\n1) \"initial request\" and the UE determined to establish a new PDU session\nbased on a URSP rule including one or more S-NSSAIs in the URSP (see\nsubclause\u00a06.2.9):\n\ni) in case of a non-roaming scenario, an S-NSSAI in the allowed NSSAI which\ncorresponds to one of the S-NSSAI(s) in the URSP rule, if any; or\n\nii)  in case of a roaming scenario:\n\nA) one of the mapped configured S-NSSAI(s) for the HPLMN which corresponds\nto one of the S-NSSAI(s) in the URSP rule, if any; and\n\nB) the S-NSSAI in the allowed NSSAI associated with the S-NSSAI in A);\n\n2) \"existing PDU session\", an S-NSSAI, which is an S-NSSAI associated with\nthe PDU session and, if available in roaming scenarios, a mapped configured\nS-NSSAI from the configured NSSAI for the HPLMN;\n\nd) the requested DNN, if the request type is set to \"initial request\" or\n\"existing PDU session\", and the UE requests a connectivity to a DNN other\nthan the default DNN;\n\ne) the request type which is set to:\n\n1) \"initial request\", if the UE is not registered for emergency services\nand the UE requests to establish a new non-emergency PDU session;\n\n2) \"existing PDU session\", if the UE is not registered for emergency\nservices and the UE requests:\n\ni) handover of an existing non-emergency PDU session between 3GPP access\nand non-3GPP access; or\n\nii)  transfer of an existing PDN connection for non-emergency bearer\nservices in the EPS to the 5GS;\n\n3) \"initial emergency request\", if the UE requests to establish a new\nemergency PDU session; and\n\n4) \"existing emergency PDU session\", if the UE requests:\n\ni) handover of an existing emergency PDU session between 3GPP access and\nnon-3GPP access; or\n\nii)  transfer of an existing PDN connection for emergency bearer services\nin the EPS to the 5GS; and\n\nf) the old PDU session ID which is the PDU session ID of the existing PDU\nsession, if the UE initiates the UE-requested PDU session establishment\nprocedure upon receiving the PDU SESSION MODIFICATION COMMAND messages with\nthe 5GSM cause IE set to #39 \"reactivation requested\";\n\nusing the NAS transport procedure as specified in subclause\u00a05.4.5, and the\nUE shall start timer T3580 (see example in figure\u00a06.4.1.2.1).\n\n[pic]\n\nFigure\u00a06.4.1.2.1: UE-requested PDU session establishment procedure\n\nUpon receipt of a PDU SESSION ESTABLISHMENT REQUEST message, a PDU session\nID, optionally a S-NSSAI, optionally a DNN, the request type, and\noptionally an old PDU session ID, the SMF checks whether connectivity with\nthe requested DN can be established. If the requested DNN is not included,\nthe SMF shall use the default DNN.\n\nIf the PDU session being established is a non-emergency PDU session, the\nrequest type is not set to \"existing PDU session\" and the PDU session\nauthentication and authorization by the external DN is required due to\nlocal policy, the SMF shall check whether the PDU SESSION ESTABLISHMENT\nREQUEST message includes the PDU DN request container.\n\nIf the PDU session being established is a non-emergency PDU session, the\nrequest type is not set to \"existing PDU session\", the PDU DN request\ncontainer is included in the PDU SESSION ESTABLISHMENT REQUEST message and\nthe PDU session authentication and authorization by the external DN is\nrequired due to local policy and user's subscription data, the SMF shall:\n\na) if the information for the PDU session authentication and authorization\nby the external DN in PDU DN request container is compliant with the local\npolicy and user's subscription data, proceed with the EAP Authentication\nprocedure specified in 3GPP\u00a0TS\u00a033.501\u00a0[24] and refrain from accepting or\nrejecting the PDU SESSION ESTABLISHMENT REQUEST message until the EAP\nAuthentication procedure finalizes; and\n\nb) if the information for the PDU session authentication and authorization\nby the external DN in PDU DN request container is not compliant with the\nlocal policy, reject the PDU session establishment request including the\n5GSM cause #29 \"user authentication failed\", in the PDU SESSION\nESTABLISHMENT REJECT message.\n\nIf the PDU session being established is a non-emergency PDU session, the\nrequest type is not set to \"existing PDU session\", the PDU DN request\ncontainer is not included in the PDU SESSION ESTABLISHMENT REQUEST message\nand the PDU session authentication and authorization by the external DN is\nrequired due to local policy and user's subscription data, the SMF shall\nproceed with the EAP Authentication procedure specified in\n3GPP\u00a0TS\u00a033.501\u00a0[24] and refrain from accepting or rejecting the PDU SESSION\nESTABLISHMENT REQUEST message until the EAP Authentication procedure\nfinalizes.\n\nIf the SMF receives the old PDU session ID from the AMF and a PDU session\nexists for the old PDU session ID, the SMF shall consider that the request\nfor the relocation of SSC mode 3 PDU session anchor with multiple PDU\nsessions as specified in 3GPP\u00a0TS\u00a023.502\u00a0[9] is accepted by the UE.\n\n\n6.4.1.3  UE-requested PDU session establishment procedure accepted by the\n         network\n\nIf the connectivity with the requested DN is accepted by the network, the\nSMF shall create a PDU SESSION ESTABLISHMENT ACCEPT message.\n\nThe SMF shall set the authorized QoS rules IE of the PDU SESSION\nESTABLISHMENT ACCEPT message to the authorized QoS rules of the PDU\nsession. If the received request type is \"initial emergency request\", the\nSMF shall set the authorized QoS rules IE according to the initial QoS\nparameters used for establishing emergency services configured in the SMF\nemergency configuration data.\n\nIf interworking to EPS is supported for the PDU session, the SMF shall set\nin the PDU SESSION ESTABLISHMENT ACCEPT message:\n\na) the Mapped EPS bearer contexts IE to the EPS bearer contexts mapped from\none or more QoS flows of the PDU session context; and\n\nb) the EPS bearer identity parameter in the QoS rules IE to the EPS bearer\nidentity corresponding to the QoS flow, for each QoS flow which can be\ntransferred to EPS.\n\nFurthermore, the SMF shall store the association between the QoS flow and\nthe mapped EPS bearer context, for each QoS flow which can be transferred\nto EPS.\n\nThe SMF shall set the selected SSC mode IE of the PDU SESSION ESTABLISHMENT\nACCEPT message to:\n\na) the received SSC mode in the SSC mode IE included in the PDU SESSION\nESTABLISHMENT REQUEST message based on the subscription, the SMF\nconfiguration, or both.;\n\nb) either the default SSC mode for the data network listed in the\nsubscription or the SSC mode associated with the SMF configuration, if the\nSSC mode IE is not included in the PDU SESSION ESTABLISHMENT REQUEST\nmessage.\n\nIf the PDU session is an emergency PDU session, the SMF shall set the\nSelected SSC mode IE of the PDU SESSION ESTABLISHMENT ACCEPT message to\n\"SSC mode 1\". If the PDU session is a non-emergency PDU session of\n\"Ethernet\" or \"Unstructured\" PDU session type, the SMF shall set the\nSelected SSC mode IE to \"SSC mode 1\" or \"SSC mode 2\". If the PDU session is\na non-emergency PDU session of \"IPv4\", \"IPv6\" or \"IPv4v6\" PDU session type,\nthe SMF shall set the selected SSC mode IE to \"SSC mode 1\", \"SSC mode 2\",\nor \"SSC mode 3\".\n\nIf the PDU session is a non-emergency PDU session, the SMF shall set the S-\nNSSAI IE of the PDU SESSION ESTABLISHMENT ACCEPT message to:\n\na) the S-NSSAI of the PDU session; and\n\nb) the mapped configured S-NSSAI for the HPLMN, if available, in roaming\nscenarios.\n\nThe SMF shall set the selected PDU session type IE of the PDU SESSION\nESTABLISHMENT ACCEPT message to the PDU session type of the PDU session.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"IPv4v6\", the SMF shall select \"IPv4\", \"IPv6\" or \"IPv4v6\" as\nthe selected PDU session type IE of the PDU session. If the subscription,\nthe SMF configuration, or both, are limited to IPv4 only or IPv6 only for\nthe requested DNN, the SMF shall include the 5GSM cause value #50 \"PDU\nsession type IPv4 only allowed\", or #51 \"PDU session type IPv6 only\nallowed\", respectively, in the 5GSM cause IE of the PDU SESSION\nESTABLISHMENT ACCEPT message.\n\nIf the selected PDU session type is \"IPv4\", the SMF shall include the PDU\naddress IE in the PDU SESSION ESTABLISHMENT ACCEPT message and shall set\nthe PDU address IE to an IPv4 address is allocated to the UE in the PDU\nsession.\n\nIf the selected PDU session type is \"IPv6\", the SMF shall include the PDU\naddress IE in the PDU SESSION ESTABLISHMENT ACCEPT message and shall set\nthe PDU address IE to an interface identifier for the IPv6 link local\naddress allocated to the UE in the PDU session.\n\nIf the selected PDU session type is \"IPv4v6\", the SMF shall include the PDU\naddress IE in the PDU SESSION ESTABLISHMENT ACCEPT message and shall set\nthe PDU address IE to an IPv4 address and an interface identifier for the\nIPv6 link local address, allocated to the UE in the PDU session.\n\nThe SMF shall set the DNN IE of the PDU SESSION ESTABLISHMENT ACCEPT\nmessage to the DNN of the PDU session.\n\nThe SMF shall set the Session-AMBR IE of the PDU SESSION ESTABLISHMENT\nACCEPT message to the Session-AMBR of the PDU session.\n\nIf the selected PDU session type is \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\"\nand if the PDU SESSION ESTABLISHMENT REQUEST message includes a 5GSM\ncapability IE with the RQoS bit set to \"Reflective QoS supported\", the SMF\nshall consider that reflective QoS is supported for QoS flows belonging to\nthis PDU session and may include the RQ timer IE set to an RQ timer value\nin the PDU SESSION ESTABLISHMENT ACCEPT message.\n\nIf the selected PDU session type is \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\"\nand if the PDU SESSION ESTABLISHMENT REQUEST message includes a Maximum\nnumber of supported packet filters IE, the SMF shall consider this number\nas the maximum number of packet filters that can be supported by the UE for\nthis PDU session. Otherwise the SMF considers that the UE supports 16\npacket filters for this PDU session.\n\nIf the value of the RQ timer is set to \"deactivated\" or has a value of\nzero, the UE considers that RQoS is not applied for this PDU session.\n\nNOTE:  If the 5G core network determines that reflective QoS is to be used\nfor a QoS flow, the SMF sends reflective QoS indication (RQI) to UPF to\nactivate reflective QoS. If the QoS flow is established over 3GPP access,\nthe SMF also includes reflective QoS Attribute (RQA) in QoS profile of the\nQoS flow during QoS flow establishment.\n\nIf the selected PDU session type is \"IPv6\" or \"IPv4v6\" and if the PDU\nSESSION ESTABLISHMENT REQUEST message includes a 5GSM capability IE with\nthe MH6-PDU bit set to \"Multi-homed IPv6 PDU session supported\", the SMF\nshall consider that this PDU session is supported to use multiple IPv6\nprefixes.\n\nIf the DN authentication of the UE was performed and completed\nsuccessfully, the SMF shall set the EAP message IE of the PDU SESSION\nESTABLISHMENT ACCEPT message to an EAP-success message as specified in\nIETF\u00a0RFC\u00a03748\u00a0[34], provided by the DN.\n\nThe SMF shall send the PDU SESSION ESTABLISHMENT ACCEPT message.\n\nUpon receipt of a PDU SESSION ESTABLISHMENT ACCEPT message and a PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, the UE shall stop timer T3580, shall release the allocated\nPTI value and shall consider that the PDU session was established.\n\nThe UE shall store the authorized QoS rules and session-AMBR received in\nthe PDU SESSION ESTABLISHMENT ACCEPT message for the PDU session.\n\nThe UE shall store the mapped EPS bearer contexts, if received in the PDU\nSESSION ESTABLISHMENT ACCEPT message. Furthermore, the UE shall also store\nthe association between the QoS flow and the mapped EPS bearer context, for\neach QoS flow which can be transferred to EPS, based on the received EPS\nbearer identity parameter in QoS rules IE and the mapped EPS bearer\ncontexts.\n\nIf the UE requests the PDU session type \"IPv4v6\" and:\n\na) the UE receives the selected PDU session type set to \"IPv4\" and does not\nreceive the 5GSM cause value #50 \"PDU session type IPv4 only allowed\"; or\n\nb)  the UE receives the selected PDU session type set to \"IPv6\" and does\nnot receive the 5GSM cause value #51 \"PDU session type IPv6 only allowed\";\n\nthe UE may subsequently request another PDU session for the other IP\nversion using the UE-requested PDU session establishment procedure to the\nsame DNN (or no DNN, if no DNN was indicated by the UE) and the same S-\nNSSAI (or no S-NSSAI, if no S-NSSAI was indicated by the UE) with a single\naddress PDN type (IPv4 or IPv6) other than the one already activated.\n\nIf the UE requests the PDU session type \"IPv4v6\", receives the selected PDU\nsession type set to \"IPv4\" and the 5GSM cause value #50 \"PDU session type\nIPv4 only allowed\", the UE shall not subsequently request another PDU\nsession for \"IPv6\" using the UE-requested PDU session establishment\nprocedure to the same DNN (or no DNN, if no DNN was indicated by the UE)\nand the same S-NSSAI (or no S-NSSAI, if no S-NSSAI was indicated by the UE)\nand the PDU session type \"IPv6\" until the PDU session is released.\n\nIf the UE requests the PDU session type \"IPv4v6\", receives the selected PDU\nsession type set to \"IPv6\" and the 5GSM cause value #51 \"PDU session type\nIPv6 only allowed\", the UE shall not subsequently request another PDU\nsession for \"IPv4\" using the UE-requested PDU session establishment\nprocedure to the same DNN (or no DNN, if no DNN was indicated by the UE)\nand the same S-NSSAI (or no S-NSSAI, if no S-NSSAI was indicated by the UE)\nand the PDU session type \"IPv4\" until the PDU session is released.\n\nIf the selected PDU session type of the PDU session is \"Unstructured\" or\n\"Ethernet\", the UE supports inter-system change from N1 mode to S1 mode,\nthe UE does not support establishment of a PDN connection for the PDN type\nset to \"non-IP\" in S1 mode, and the parameters list field of one or more\nQoS rules received in the QoS rules IE of the PDU SESSION ESTABLISHMENT\nACCEPT message contains an EPS bearer identity (EBI) then the UE shall\nlocally remove the EPS bearer identity (EBI) from the parameters list field\nof such one or more QoS rules.\n\n\n6.4.1.4  UE requested PDU session establishment procedure not accepted by\n         the network\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.4.1.4.1", "title_level": 4, "desc": "6.4.1.4.1   General\n\nIf the connectivity with the requested DN is rejected by the network, the\nSMF shall create a SM PDU SESSION ESTABLISHMENT REJECT message.\n\nIf the UE requests a PDU session establishment for an LADN when the UE is\nlocated outside the LADN service area, the SMF shall reject the request.\n\nThe SMF shall set the 5GSM cause IE of the PDU SESSION ESTABLISHMENT REJECT\nmessage to indicate the reason for rejecting the PDU session establishment.\n\nThe 5GSM cause IE typically indicates one of the following SM cause values:\n\n#26  insufficient resources;\n\n#27  missing or unknown DNN;\n\n#28  unknown PDU session type;\n\n#29  user authentication failed;\n\n#31  request rejected, unspecified;\n\n#34  service option temporarily out of order;\n\n#35  PTI already in use;\n\n#50  PDU session type IPv4 only allowed;\n\n#51  PDU session type IPv6 only allowed;\n\n#54  PDU session does not exist;\n\n#67  insufficient resources for specific slice and DNN;\n\n#68  not supported SSC mode;\n\n#69  insufficient resources for specific slice; or\n\n#70  missing or unknown DNN in a slice.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"IPv6\", and the subscription, the SMF configuration, or\nboth, are limited to IPv4 only for the requested DNN, the SMF shall include\nthe 5GSM cause value #50 \"PDU session type IPv4 only allowed\" in the 5GSM\ncause IE of the PDU SESSION ESTABLISHMENT REJECT message.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"IPv6\", and the subscription, the SMF configuration, or\nboth, support none of \"IPv4\" and \"IPv6\" PDU session types for the requested\nDNN, the SMF shall include the 5GSM cause value #28 \"unknown PDU session\ntype\" in the 5GSM cause IE of the PDU SESSION ESTABLISHMENT REJECT message.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"IPv4\", and the subscription, the SMF configuration, or\nboth, are limited to IPv6 only for the requested DNN, the SMF shall include\nthe 5GSM cause value #51 \"PDU session type IPv6 only allowed\" in the 5GSM\ncause IE of the PDU SESSION ESTABLISHMENT REJECT message.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"IPv4\", and the subscription, the SMF configuration, or\nboth, support none of \"IPv4\" and \"IPv6\" PDU session types for the requested\nDNN, the SMF shall include the 5GSM cause value #28 \"unknown PDU session\ntype\" in the 5GSM cause IE of the PDU SESSION ESTABLISHMENT REJECT message.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"IPv4v6\", and the subscription, the SMF configuration, or\nboth, support none of \"IPv4v6\", \"IPv4\" and \"IPv6\" PDU session types for the\nrequested DNN, the SMF shall include the 5GSM cause value #28 \"unknown PDU\nsession type\" in the 5GSM cause IE of the PDU SESSION ESTABLISHMENT REJECT\nmessage.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message includes a PDU session\ntype IE set to \"Unstructured\" or \"Ethernet\", and the subscription, the SMF\nconfiguration, or both, do not support the PDU session type for the\nrequested DNN, the SMF shall include the 5GSM cause value #28 \"unknown PDU\nsession type\" in the 5GSM cause IE of the PDU SESSION ESTABLISHMENT REJECT\nmessage.\n\nIf the PDU SESSION ESTABLISHMENT REQUEST message contains the SSC mode IE\nindicating an SSC mode not supported by the subscription, the SMF\nconfiguration, or both of them, and the SMF decides to rejects the PDU\nsession establishment, the SMF shall include the 5GSM cause value #68 \"not\nsupported SSC mode\" in the 5GSM cause IE and the SSC modes allowed by SMF\nin the Allowed SSC mode IE of the PDU SESSION ESTABLISHMENT REJECT message.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION\nESTABLISHMENT REJECT message when the 5GSM cause value #26\"insufficient\nresources\" is included in the PDU SESSION ESTABLISHMENT REJECT message. If\nthe 5GSM cause value is #26\"insufficient resources\" and the PDU SESSION\nESTABLISHMENT REQUEST message was received from a UE configured for high\npriority access in selected PLMN or the request type in the PDU SESSION\nESTABLISHMENT REQUEST message is set to \"initial emergency request\" or\n\"existing emergency PDU session\", the network shall not include a Back-off\ntimer value IE.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION\nESTABLISHMENT REJECT message when the 5GSM cause value #67 \"insufficient\nresources for specific slice and DNN\" is included in the PDU SESSION\nESTABLISHMENT REJECT message. If the 5GSM cause value is #67 \"insufficient\nresources for specific slice and DNN\" and the PDU SESSION ESTABLISHMENT\nREQUEST message was received from a UE configured for high priority access\nin selected PLMN or the request type is \"initial emergency request\" or\n\"existing emergency PDU session\" in the PDU SESSION ESTABLISHMENT REQUEST\nmessage, the network shall not include a Back-off timer value IE.\n\nEditor\u2019s note:  Whether the SMF knows that the UE is a UE configured for\nhigh priority access so as not to include the Back-off timer is FFS.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION\nESTABLISHMENT REJECT message when the 5GSM cause #69 \"insufficient\nresources for specific slice\" is included in the PDU SESSION ESTABLISHMENT\nREJECT message. If the 5GSM cause value is #69 \"insufficient resources for\nspecific slice\" and the PDU SESSION ESTABLISHMENT REQUEST message was\nreceived from a UE configured for high priority access in selected PLMN or\nthe request type is \"initial emergency request\" or \"existing emergency PDU\nsession\" in the PDU SESSION ESTABLISHMENT REQUEST message, the network\nshall not include a Back-off timer value IE.\n\nThe SMF shall send the SM PDU SESSION ESTABLISHMENT REJECT message.\n\nUpon receipt of a PDU SESSION ESTABLISHMENT REJECT message and a PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, the UE shall stop timer T3580 shall release the allocated\nPTI value and shall consider that the PDU session was not established.\n\nIf the DN authentication of the UE was performed and completed\nunsuccessfully, the SMF shall include the 5GSM cause value #29 \"user\nauthentication failed\" in the 5GSM cause IE of the PDU SESSION\nESTABLISHMENT REJECT message and shall set the EAP message IE of the PDU\nSESSION ESTABLISHMENT REJECT message to an EAP-failure message as specified\nin IETF\u00a0RFC\u00a03748\u00a0[34], provided by the DN.\n\nIf:\n\n-  the 5GSM cause value #26 \"insufficient resources\" and the Back-off timer\nvalue IE are included in the PDU SESSION ESTABLISHMENT REJECT message; or\n\n-  an indication that the 5GSM message was not forwarded due to DNN based\ncongestion control is received along a Back-off timer value and a PDU\nSESSION ESTABLISHMENT REQUEST message with the PDU session ID IE set to the\nPDU session ID of the PDU session;\n\nthe UE shall take different actions depending on the timer value received\nfor timer T3396 in the Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated and a DNN was\nincluded in the PDU SESSION ESTABLISHMENT REQUEST message, the UE shall\nstop timer T3396 associated with the corresponding DNN, if it is running.\nIf the timer value indicates neither zero nor deactivated and no DNN was\nincluded in the PDU SESSION ESTABLISHMENT REQUEST message and the request\ntype was different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", the UE shall stop timer T3396 associated\nwith no DNN if it is running. The UE shall then start timer T3396 with the\nvalue provided in the Back-off timer value IE and:\n\n1) shall not send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same DNN that was sent by the\nUE, until timer T3396 expires or timer T3396 is stopped; and\n\n2) shall not send another PDU SESSION ESTABLISHMENT REQUEST message without\na DNN and with request type different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", or another PDU SESSION\nMODIFICATION REQUEST message for a non-emergency PDU session established\nwithout a DNN provided by the UE, if no DNN was included in the PDU SESSION\nESTABLISHMENT REQUEST message and the request type was different from\n\"initial emergency request\" and different from \"existing emergency PDU\nsession\", until timer T3396 expires or timer T3396 is stopped.\n\nThe UE shall not stop timer T3396 upon a PLMN change or inter-system\nchange;\n\nb) if the timer value indicates that this timer is deactivated and a DNN\nwas included in the PDU SESSION ESTABLISHMENT REQUEST message, the UE shall\nstop timer T3396 associated with the corresponding DNN, if it is running.\nIf the timer value indicates that this timer is deactivated and no DNN was\nincluded in the PDU SESSION ESTABLISHMENT REQUEST message and the request\ntype was different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", the UE shall stop timer T3396 associated\nwith no DNN if it is running. The UE:\n\n1) shall not send another PDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION\nMODIFICATION REQUEST for the same DNN until the UE is switched off or the\nUSIM is removed, or the UE receives a PDU SESSION MODIFICATION REQUEST\nmessage for the same DNN from the network or a PDU SESSION RELEASE COMMAND\nmessage including 5GSM cause #39 \"reactivation requested\" for the same DNN\nfrom the network; and\n\n2) shall not send another PDU SESSION ESTABLISHMENT REQUEST message without\na DNN and with request type different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", or another PDU SESSION\nMODIFICATION REQUEST message for a non-emergency PDU session established\nwithout a DNN provided by the UE, if no DNN was included in the PDU SESSION\nESTABLISHMENT REQUEST message and the request type was different from\n\"initial emergency request\" and different from \"existing emergency PDU\nsession\", until the UE is switched off or the USIM is removed, or the UE\nreceives a PDU SESSION MODIFICATION REQUEST message for a non-emergency PDU\nsession established without a DNN provided by the UE, or a PDU SESSION\nRELEASE COMMAND messages including 5GSM cause IE set to 5GSM\u00a0cause\u00a0#39\n\"reactivation requested\" for a non-emergency PDU session established\nwithout a DNN provided by the UE.\n\nThe timer T3396 remains deactivated upon a PLMN change or inter-system\nchange; and\n\nc) if the timer value indicates zero, the UE:\n\n1) shall stop timer T3396 associated with the corresponding DNN, if\nrunning, and may send another PDU SESSION ESTABLISHMENT REQUEST, or PDU\nSESSION MODIFICATION REQUEST message for the same DNN; and\n\n2) if no DNN was included in the PDU SESSION ESTABLISHMENT REQUEST message\nand the request type was different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", the UE shall stop timer\nT3396 associated with no DNN, if running, and may send another PDU SESSION\nESTABLISHMENT REQUEST message without a DNN, or another PDU SESSION\nMODIFICATION REQUEST message without a DNN provided by the UE.\n\nIf the Back-off timer value IE is not included or no Back-off timer value\nis received from the 5GMM sublayer, then the UE may send another PDU\nSESSION ESTABLISHMENT REQUEST or PDU SESSION MODIFICATION REQUEST message\nfor the same DNN or without a DNN.\n\nWhen the timer T3396 is running or the timer is deactivated, the UE is\nallowed to initiate a PDU session establishment procedure for emergency\nservices.\n\nIf the timer T3396 is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T3396 is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T3396 is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T3396 timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nIf:\n\n-  the 5GSM cause value #67 \"insufficient resources for specific slice and\nDNN\" and the Back-off timer value IE are included in the PDU SESSION\nESTABLISHMENT REJECT message; or\n\n-  an indication that the 5GSM message was not forwarded due to S-NSSAI and\nDNN based congestion control is received along a Back-off timer value and a\nPDU SESSION ESTABLISHMENT REQUEST message with the PDU session ID IE set to\nthe PDU session ID of the PDU session;\n\nthe UE shall take different actions depending on the timer value received\nfor timer T35cd in the Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated, the UE shall\nstop timer T35cd associated with the same [S-NSSAI, DNN] combination as\nthat the UE provided during the PDU session establishment, if it is\nrunning. If the timer value indicates neither zero nor deactivated and no\nDNN was included in the PDU SESSION ESTABLISHMENT REQUEST message and the\nrequest type was different from \"initial emergency request\" and different\nfrom \"existing emergency PDU session\", the UE shall stop timer T35cd\nassociated with [S-NSSAI, no DNN] combination if it is running. The UE\nshall then start timer T35cd with the value provided in the Back-off timer\nvalue IE and:\n\n1)   shall not send another PDU SESSION ESTABLISHMENT REQUEST message with\nrequest type different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", or PDU SESSION MODIFICATION REQUEST\nmessage for the same [S-NSSAI, DNN] combination that was sent by the UE,\nuntil timer T35cd expires or timer T35cd is stopped; and\n\n2) shall not send another PDU SESSION ESTABLISHMENT REQUEST message with\nrequest type different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", or another PDU SESSION MODIFICATION\nREQUEST message for the same [S-NSSAI, no DNN] combination that was sent by\nthe UE, if no DNN was included in the PDU SESSION ESTABLISHMENT REQUEST\nmessage, until timer T35cd expires or timer T35cd is stopped.\n\nThe UE shall not stop timer T35cd upon a PLMN change or inter-system\nchange;\n\nb) if the timer value indicates that this timer is deactivated, the UE:\n\n1) shall stop timer T35cd associated with the same [S-NSSAI, DNN]\ncombination as that the UE provided during the PDU session establishment,\nif it is running. The UE shall not send another PDU SESSION ESTABLISHMENT\nREQUEST message with request type different from \"initial emergency\nrequest\" and different from \"existing emergency PDU session\", or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, DNN]\ncombination that was sent by the UE, until the UE is switched off or the\nUSIM is removed, or the UE receives a PDU SESSION MODIFICATION REQUEST\nmessage for the same [S-NSSAI, DNN] combination from the network or a PDU\nSESSION RELEASE COMMAND message including 5GSM cause #39 \"reactivation\nrequested\" for the same [S-NSSAI, DNN] combination from the network; and\n\n2) shall not send a PDU SESSION ESTABLISHMENT REQUEST message with request\ntype different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", or a PDU SESSION MODIFICATION REQUEST\nmessage for the same [S-NSSAI, no DNN] combination that was sent by the UE,\nif no DNN was included in the PDU SESSION ESTABLISHMENT REQUEST message,\nuntil the UE is switched off or the USIM is removed, or the UE receives an\nPDU SESSION MODIFICATION REQUEST message for the same [S-NSSAI, no DNN]\ncombination from the network or a PDU SESSION RELEASE COMMAND message\nincluding 5GSM cause #39 \"reactivation requested\" for the same [S-NSSAI, no\nDNN] combination from the network.\n\nThe timer T35cd remains deactivated upon a PLMN change or inter-system\nchange; and\n\nc) if the timer value indicates zero, the UE shall stop timer T35cd\nassociated with the same [S-NSSAI, DNN] combination that was sent by the\nUE, if running. The UE:\n\n1) may send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, DNN]\ncombination.\n\n2) may send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, no DNN]\ncombination if no DNN was included in the PDU SESSION ESTABLISHMENT REQUEST\nmessage and the request type was different from \"initial emergency request\"\nand different from \"existing emergency PDU session\".\n\nIf the Back-off timer value IE is not included or no Back-off timer value\nis received from the 5GMM sublayer, then the UE may send another PDU\nSESSION ESTABLISHMENT REQUEST message or PDU SESSION MODIFICATION REQUEST\nmessage for the same [S-NSSAI, DNN] combination.\n\nWhen the timer T35cd is running or the timer is deactivated, the UE is\nallowed to initiate a PDU session establishment procedure for emergency\nservices.\n\nIf the timer T35cd is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T35cd is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T35cd is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T35cd timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nIf:\n\n-  the 5GSM cause value #69 \"insufficient resources for specific slice\" and\nthe Back-off timer value IE are included  in the PDU SESSION ESTABLISHMENT\nREJECT message; or\n\n-  an indication that the 5GSM message was not forwarded due to S-NSSAI\nonly based congestion control is received along a Back-off timer value and\na PDU SESSION ESTABLISHMENT REQUEST message with the PDU session ID IE set\nto the PDU session ID of the PDU session;\n\nthe UE shall take different actions depending on the timer value received\nfor timer T35ef in the Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated and an S-NSSAI\nwas included in the PDU SESSION ESTABLISHMENT REQUEST message, the UE shall\nstop timer T35ef associated with the corresponding S-NSSAI, if it is\nrunning. If the timer value indicates neither zero nor deactivated and no S-\nNSSAI was included in the PDU SESSION ESTABLISHMENT REQUEST message and the\nrequest type was different from \"initial emergency request\", the UE shall\nstop timer T35ef associated with no S-NSSAI if it is running. The UE shall\nthen start timer T35ef with the value provided in the Back-off timer value\nIE and:\n\n1) shall not send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same S-NSSAI that was sent by\nthe UE, until timer T35ef expires or timer T35ef is stopped; and\n\n2) shall not send another PDU SESSION ESTABLISHMENT REQUEST message without\nan S-NSSAI and with request type different from \"initial emergency\nrequest\", or another PDU SESSION MODIFICATION REQUEST message for a non-\nemergency PDU session established without an S-NSSAI provided by the UE, if\nno S-NSSAI was included in the PDU SESSION ESTABLISHMENT REQUEST message\nand the request type was different from \"initial emergency request\", until\ntimer T35ef expires or timer T35ef is stopped.\n\nThe UE shall not stop timer T35ef upon a PLMN change or inter-system\nchange;\n\nb) if the timer value indicates that this timer is deactivated and an S-\nNSSAI was included in the PDU SESSION ESTABLISHMENT REQUEST message, the UE\nshall stop timer T35ef associated with the corresponding S-NSSAI, if it is\nrunning. If the timer value indicates that this timer is deactivated and no\nS-NSSAI was included in the PDU SESSION ESTABLISHMENT REQUEST message and\nthe request type was different from \"initial emergency request\", the UE\nshall stop timer T35ef associated with no S-NSSAI if it is running. The UE:\n\n1) shall not send another PDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION\nMODIFICATION REQUEST for the same S-NSSAI until the UE is switched off or\nthe USIM is removed, or the UE receives a PDU SESSION MODIFICATION REQUEST\nmessage for the same S-NSSAI from the network or a PDU SESSION RELEASE\nCOMMAND message including 5GSM cause #39 \"reactivation requested\" for the\nsame S-NSSAI from the network; and\n\n2) shall not send another PDU SESSION ESTABLISHMENT REQUEST message without\nan S-NSSAI and with request type different from \"initial emergency\nrequest\", or another PDU SESSION MODIFICATION REQUEST message for a non-\nemergency PDU session established without an S-NSSAI provided by the UE, if\nno S-NSSAI was included in the PDU SESSION ESTABLISHMENT REQUEST message\nand the request type was different from \"initial emergency request\", until\nthe UE is switched off or the USIM is removed, or the UE receives a PDU\nSESSION MODIFICATION REQUEST message for a non-emergency PDU session\nestablished without an S-NSSAI provided by the UE, or a PDU SESSION RELEASE\nCOMMAND messages including 5GSM cause IE set to 5GSM\u00a0cause\u00a0#39\n\"reactivation requested\" for a non-emergency PDU session established\nwithout an S-NSSAI provided by the UE.\n\nThe timer T35ef remains deactivated upon a PLMN change or inter-system\nchange; and\n\nc) if the timer value indicates zero, the UE:\n\n1) shall stop timer T35ef associated with the corresponding S-NSSAI, if\nrunning, and may send another PDU SESSION ESTABLISHMENT REQUEST, or PDU\nSESSION MODIFICATION REQUEST message for the same S-NSSAI; and\n\n2) if no S-NSSAI was included in the PDU SESSION ESTABLISHMENT REQUEST\nmessage and the request type was different from \"initial emergency request\n\", the UE shall stop timer T35ef associated with no S-NSSAI, if running,\nand may send another PDU SESSION ESTABLISHMENT REQUEST message without an S-\nNSSAI, or another PDU SESSION MODIFICATION REQUEST message without an S-\nNSSAI provided by the UE.\n\nIf the Back-off timer value IE is not included or no Back-off timer value\nis received from the 5GMM sublayer, then the UE may send another PDU\nSESSION ESTABLISHMENT REQUEST or PDU SESSION MODIFICATION REQUEST message\nfor the same S-NSSAI or without an S-NSSAI.\n\nWhen the timer T35ef is running or the timer is deactivated, the UE is\nallowed to initiate a PDU session establishment procedure for emergency\nservices.\n\nIf the timer T35ef is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T35ef is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T35ef is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T35ef timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nNOTE:  As described in this subclause, upon PLMN change or inter-system\nchange, the UE does not stop the timer T35cd or T35ef. This means the timer\nT35cd or T35ef can still be running or be deactivated for the given 5GSM\nprocedure, the PLMN, the S-NSSAI and optionally the DNN combination when\nthe UE returns to the PLMN or when it performs inter-system change back\nfrom S1 mode to N1 mode. Thus the UE can still be prevented from sending\nanother PDU SESSION ESTABLISHMENT REQUEST message in the PLMN for the same\nS-NSSAI and optionally the same DNN.\n\nUpon PLMN change, if T35cd is running or is deactivated for a S-NSSAI, a\nDNN, and old PLMN, but T35cd is not running and is not deactivated for the\nS-NSSAI, the DNN, and new PLMN, then the UE is allowed to send a PDU\nSESSION ESTABLISHMENT REQUEST message for the same S-NSSAI and the same DNN\nin the new PLMN.\n\nUpon PLMN change, if T35ef is running or is deactivated for a S-NSSAI and\nold PLMN, but T35cd is not running and is not deactivated for the S-NSSAI\nand new PLMN, then the UE is allowed to send a PDU SESSION ESTABLISHMENT\nREQUEST message for the same S-NSSAI in the new PLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of network rejection due to 5GSM cause #26", "numbering": "6.4.1.4.2", "title_level": 4, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of network rejection due to 5GSM cause other than", "numbering": "6.4.1.4.3", "title_level": 4, "desc": "6.4.1.4.2   Handling of network rejection due to 5GSM cause #26\n\nEditor's note:  Handling of network rejection due to 5GSM cause #26 is FFS.\n\n\n6.4.1.4.3   Handling of network rejection due to 5GSM cause other than 5GSM\n         cause #26\n\nIf the 5GSM cause value is #27 \"missing or unknown DNN\", the UE shall not\nsend another PDU SESSION ESTABLISHMENT REQUEST message in the PLMN for the\nsame DNN that was sent by the UE, until the UE is switched off, the USIM is\nremoved, or the DNN is included in the LADN information and the network\nupdates the LADN information during the registration procedure or the\ngeneric UE configuration update procedure.\n\nIf the 5GSM cause value is #28 \"unknown PDU session type\" and the PDU\nSESSION ESTABLISHMENT REQUEST message contained a PDU session type IE\nindicating a PDU session type, the UE may send another PDU SESSION\nESTABLISHMENT REQUEST with the PDU session type IE indicating another PDU\nsession type or without the PDU session type IE.\n\nIf the 5GSM cause value is #68 \"not supported SSC mode\", UE may send PDU\nSESSION ESTABLISHMENT REQUEST with the SSC mode included in the Allowed SSC\nmode IE of the PDU SESSION ESTABLISHMENT REJECT message or evaluate other\nURSP rules if available as specified in subclause\u00a06.2.9.\n\nIf the 5GSM cause value is #70 \"missing or unknown DNN in a slice\", the UE\nshall not send another PDU SESSION ESTABLISHMENT REQUEST message in the\nPLMN for the same DNN and the same S-NSSAI that were sent by the UE (or for\nthe same DNN and no S-NSSAI, if S-NSSAI that was not sent by the UE), until\nthe UE is switched off, the USIM is removed, or the DNN is included in the\nLADN information and the network updates the LADN information during the\nregistration procedure or the generic UE configuration update procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling the maximum number of established PDU sessions", "numbering": "6.4.1.5", "title_level": 3, "desc": "6.4.1.5  Handling the maximum number of established PDU sessions\n\nIf the maximum number of established PDU sessions is reached at the UE and\nthe upper layers of the UE request connectivity to a DNN the UE shall not\nsend a PDU SESSION ESTABLISHMENT message unless an established PDU session\nis released. If the UE needs to release an established PDU session,\nchoosing which PDU session to release is implementation specific, however\nthe UE shall not release the PDU session for emergency.\n\nIf the UE needs to release a PDU session in order to request an emergency\nPDU session, it shall either release a PDU session locally or via explicit\nsignalling. If the UE performs local release, the UE shall perform a\nregistration procedure for mobility and periodic registration update to\nindicate PDU session status to the network.\n\nEditor's note:  How does the UE determine the maximum number of established\nPDU sessions is FFS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "6.4.1.6", "title_level": 3, "desc": "6.4.1.6  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3580\n\n   The UE shall, on the first expiry of the timer T3580, retransmit the PDU\nSESSION ESTABLISHMENT REQUEST message and shall reset and start timer\nT3580. This retransmission is repeated four times, i.e. on the fifth expiry\nof timer T3580, the UE shall abort the procedure.\n\nb) Upon receiving an indication that the 5GSM message was not forwarded\nalong with a PDU SESSION ESTABLISHMENT REQUEST message with the PDU session\nID IE set to the PDU session ID of the PDU session, the UE shall stop timer\nT3580 and shall abort the procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "6.4.1.7", "title_level": 3, "desc": "6.4.1.7  Abnormal cases on the network side\n\nEditor's note:  Further abnormal cases in the network side are FFS.\n\nThe following abnormal cases can be identified:\n\na) If the received request type is \"initial emergency request\" and there is\nalready another emergency PDU session for the UE, the SMF shall reject the\nPDU SESSION ESTABLISHMENT REQUEST message with 5GSM cause #31 \"request\nrejected, unspecified\" or release the existing emergency PDU session\nlocally without notification to the UE and proceed the new PDU SESSION\nESTABLISHMENT REQUEST message\n\nb) The information for the PDU session authentication and authorization by\nthe external DN in PDU DN request container is not compliant with local\npolicy and user's subscription data\n\n   If the PDU session being established is a non-emergency PDU session, the\nPDU session authentication and authorization by the external DN is required\ndue to local policy and user's subscription data and the information for\nthe PDU session authentication and authorization by the external DN in PDU\nDN request container is not compliant with local policy and user's\nsubscription data, the SMF shall reject the PDU session establishment\nrequest including the 5GSM cause #29 \"user authentication failed\", in the\nPDU SESSION ESTABLISHMENT REJECT message.\n\nc) UE-requested PDU session establishment with request type set to \"initial\nrequest\" or \"initial emergency request\" for an existing PDU session:\n\n   If the SMF receives a PDU SESSION ESTABLISHMENT REQUEST message with a\nPDU session ID identical to the PDU session ID of an existing PDU session\nand with request type set to \"initial request\" or \"initial emergency\nrequest\", the SMF shall release the existing PDU session locally without\nnotification to the UE and proceed with the PDU session establishment\nprocedure.\n\nd) UE-requested PDU session establishment with request type \"existing PDU\nsession\" or \"existing emergency PDU session\" for a PDU session that does\nnot exist:\n\n   If the SMF receives a PDU SESSION ESTABLISHMENT REQUEST message with\nrequest type set to \"existing PDU session\" or \"existing emergency PDU\nsession\", and the SMF does not have any information about that PDU session,\nthen the SMF shall reject the PDU session establishment procedure with the\n5GSM cause set to #54 \"PDU session does not exist\" in the PDU SESSION\nESTABLISHMENT REJECT message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session modification procedure", "numbering": "6.4.2", "title_level": 2, "desc": "6.4.2  UE-requested PDU session modification procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.4.2.1", "title_level": 3, "desc": "6.4.2.1  General\n\nThe purpose of the UE-requested PDU session modification procedure is to\nenable the UE to request modification of a PDU session or to indicate a\nchange of 3GPP PS data off UE status for a PDU session. The UE shall not\nrequest a PDU session modification for an LADN when the UE is located\noutside the LADN service area. If the UE supports reflective QoS, the UE\nshall initiate this procedure as follows:\n\na) the UE is operating in single-registration mode with N26 interface\nsupported in the network and the UE needs to indicate the support of\nreflective QoS after an inter-system change from S1 mode to N1 mode; or\n\nb) to revoke the previously indicated support for reflective QoS.\n\nIf the UE supports acting as a type\u00a0C\u00a0host as specified in\nIETF\u00a0RFC\u00a04191\u00a0[36], and the UE is operating in single-registration mode\nwith N26 interface supported in the network, the UE shall initiate the UE-\nrequested PDU session modification procedure to indicate the support of\nmulti-homed IPv6 PDU session after an inter-system change from S1 mode to\nN1 mode.\n\nIf the UE can support more than 16 packet filters for a PDU session of\n\"IPv4\", \"IPv6\", \"IPv4v6\", or \"Ethernet\" PDU session type, the UE shall\ninitiate the UE-requested PDU session modification procedure to indicate\nthe maximum number of packet filters that can be supported for the PDU\nsession after an inter-system change from S1 mode to N1 mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session modification procedure initiation", "numbering": "6.4.2.2", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session modification procedure accepted by", "numbering": "6.4.2.3", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session modification procedure not accepted", "numbering": "6.4.2.4", "title_level": 3, "desc": "6.4.2.2  UE-requested PDU session modification procedure initiation\n\nIn order to initiate the UE-requested PDU session modification procedure,\nthe UE shall create a PDU SESSION MODIFICATION REQUEST message.\n\nThe UE shall allocate a PTI value currently not used and shall set the PTI\nIE of the PDU SESSION MODIFICATION REQUEST message to the allocated PTI\nvalue.\n\nThe UE shall not perform the UE-requested PDU session modification\nprocedure for an emergency PDU session.\n\nThe UE shall not perform the UE-requested PDU session modification\nprocedure for a PDU session for LADN when the UE is located outside the\nLADN service area.\n\nIf the UE requests a specific QoS handling, the UE shall include the\nrequested QoS rules IE indicating requested QoS rules for the specific QoS\nhandling.\n\nIf the UE is performing the PDU session modification procedure to indicate\nthe support of reflective QoS after an inter-system change from S1 mode to\nN1 mode, the UE should set the RQoS bit to \"Reflective QoS supported\" in\nthe 5GSM capability IE of the PDU SESSION MODIFICATION REQUEST message.\n\nIf the UE is performing the PDU session modification procedure to revoke\nthe previously indicated support of reflective QoS, the UE shall set the\nRQoS bit to \"Reflective QoS not supported\" in the 5GSM capability IE of the\nPDU SESSION MODIFICATION REQUEST message. The UE shall not indicate support\nfor reflective QoS for this PDU Session for the remaining lifetime of the\nPDU Session.\n\nNOTE:  The determination to revoke the usage of reflective QoS by the UE\nfor a PDU session is implementation dependent.\n\nIf the UE is performing the PDU session modification procedure to indicate\nthe support of Multi-homed IPv6 PDU session after an inter-system change\nfrom S1 mode to N1 mode, the UE shall set the MH6-PDU bit to \"Multi-homed\nIPv6 PDU session supported\" in the 5GSM capability IE of the PDU SESSION\nMODIFICATION REQUEST message.\n\nIf the UE is performing the PDU session modification procedure to indicate\nthat the UE can support more than 16 packet filters for this PDU session,\nthe UE shall indicate the maximum number of packet filters that can be\nsupported for the PDU session in the Maximum number of supported packet\nfilters IE of the PDU SESSION MODIFICATION REQUEST message.\n\nTo indicate a change of 3GPP PS data off UE status associated to a PDU\nsession, the UE shall include the extended protocol configuration options\nIE in the PDU SESSION MODIFICATION REQUEST message and set the 3GPP PS data\noff UE status.\n\nThe UE shall transport the PDU SESSION MODIFICATION REQUEST message and the\nPDU session ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, and the UE shall start timer T3581 (see example in\nfigure\u00a06.4.2.2.1).\n\n[pic]\n\nFigure\u00a06.4.2.2.1: UE-requested PDU session modification procedure\n\n\n6.4.2.3  UE-requested PDU session modification procedure accepted by the\n         network\n\nUpon receipt of a PDU SESSION MODIFICATION REQUEST message, if the SMF\naccepts the request to modify the PDU session, the SMF shall perform the\nnetwork-requested PDU session modification procedure as specified in\nsubclause\u00a06.3.2.\n\n\n6.4.2.4  UE-requested PDU session modification procedure not accepted by\n         the network\n\nUpon receipt of a PDU SESSION MODIFICATION REQUEST message, if the SMF does\nnot accepts the request to modify the PDU session, the SMF shall create a\nPDU SESSION MODIFICATION REJECT message.\n\nIf the UE requests a PDU session modification for an LADN when the UE is\nlocated outside the LADN service area, the SMF shall reject the request.\n\nThe SMF shall set the 5GSM cause IE of the PDU SESSION MODIFICATION REJECT\nmessage to indicate the reason for rejecting the PDU session modification.\n\nThe 5GSM cause IE typically indicates one of the following SM cause values:\n\n#26  insufficient resources;\n\n#31  request rejected, unspecified;\n\n#34  service option temporarily out of order;\n\n#35  PTI already in use;\n\n#43  Invalid PDU session identity;\n\n#67  insufficient resources for specific slice and DNN; or\n\n#69  insufficient resources for specific slice.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION\nMODIFICATION REJECT message when the 5GSM cause value #26 \"insufficient\nresources\" is included in the PDU SESSION MODIFICATION REJECT message. If\nthe 5GSM cause value is #26 \"insufficient resources\" and the PDU SESSION\nMODIFICATION REQUEST message was received from a UE configured for high\npriority access in selected PLMN or the request type was set to \"initial\nemergency request\" or \"existing emergency PDU session\" for the\nestablishment of the PDU session, the network shall not include a Back-off\ntimer value IE.\n\nEditor\u2019s note:  Whether the SMF knows that the UE is a UE configured for\nhigh priority access so as not to include the Back-off timer is FFS.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION\nMODIFICATION REJECT message when the 5GSM cause value #67 \"insufficient\nresources for specific slice and DNN\" is included in the PDU SESSION\nMODIFICATION REJECT message. If the 5GSM cause value is #67 \"insufficient\nresources for specific slice and DNN\" and the PDU SESSION MODIFICATION\nREQUEST message was received from a UE configured for high priority access\nin selected PLMN or the request type was set to \"initial emergency request\"\nor \"existing emergency PDU session\" for the establishment of the PDU\nsession, the network shall not include a Back-off timer value IE.\n\nEditor\u2019s note:  Whether the SMF knows that the UE is a UE configured for\nhigh priority access so as not to include the Back-off timer is FFS.\n\nThe SMF may include a Back-off timer value IE in the PDU SESSION\nMODIFICATION REJECT message when the 5GSM cause #69 \"insufficient resources\nfor specific slice\" is included in the PDU SESSION MODIFICATION REJECT\nmessage. If the 5GSM cause value is #69 \"insufficient resources for\nspecific slice\" and the PDU SESSION MODIFICATION REQUEST message was\nreceived from a UE configured for high priority access in selected PLMN or\nthe request type is set to \"initial emergency request\" for the\nestablishment of the PDU session, the network shall not include a Back-off\ntimer value IE.\n\nThe SMF shall send the PDU SESSION MODIFICATION REJECT message.\n\nUpon receipt of a PDU SESSION MODIFICATION REJECT message and a PDU session\nID, using the NAS transport procedure as specified in subclause\u00a05.4.5, the\nUE shall stop timer T3581, shall release the allocated PTI value and shall\nconsider that the PDU session is not modified.\n\nIf the 5GSM cause value is #26 \"insufficient resources\" and the Back-off\ntimer value IE is included, the UE shall take different actions depending\non the timer value received for timer T3396 in the Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated, the UE shall\nstop timer T3396 associated with the corresponding DNN, if it is running.\nThe UE shall then start timer T3396 with the value provided in the Back-off\ntimer value IE and shall not send another PDU SESSION ESTABLISHMENT REQUEST\nmessage, or PDU SESSION MODIFICATION REQUEST message for the same DNN that\nwas sent by the UE, until timer T3396 expires or timer T3396 is stopped.\n\n   If the UE did not provide a DNN for the establishment of the PDU session\nand the request type was different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", the UE shall stop the\ntimer T3396 associated with no DNN if it is running. The UE shall start\ntimer T3396 with the received value and not send another PDU SESSION\nESTABLISHMENT REQUEST message without a DNN and with request type different\nfrom \"initial emergency request\" and different from \"existing emergency PDU\nsession\", or another PDU SESSION MODIFICATION REQUEST message for a non-\nemergency PDU session established without a DNN provided by the UE, until\ntimer T3396 expires or timer T3396 is stopped.\n\n   The UE shall not stop timer T3396 upon a PLMN change or inter-system\nchange.\n\nb) if the timer value indicates that this timer is deactivated, the UE\nshall not send another PDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION\nMODIFICATION REQUEST message for the same DNN until the UE is switched off\nor the USIM is removed, or the UE receives a PDU SESSION MODIFICATION\nREQUEST message for the same DNN from the network or a PDU SESSION RELEASE\nCOMMAND message including 5GSM cause #39 \"reactivation requested\" for the\nsame DNN from the network.\n\n   If the UE did not provide a DNN for the establishment of the PDU session\nand the request type was different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", the UE shall not send\nanother PDU SESSION ESTABLISHMENT REQUEST message without a DNN and with\nrequest type different from \"initial emergency request\" and different from\n\"existing emergency PDU session\", or another PDU SESSION MODIFICATION\nREQUEST for a non-emergency PDU session established without DNN provided by\nthe UE, until the UE is switched off or the USIM is removed, or the UE\nreceives a PDU SESSION MODIFICATION REQUEST message for a non-emergency PDU\nsession established without a DNN provided by the UE, or the UE receives a\nPDU SESSION RELEASE COMMAND messages including 5GSM cause IE set to\n5GSM\u00a0cause\u00a0#39 \"reactivation requested\" for a non-emergency PDU session\nestablished without a DNN provided by the UE.\n\n   The timer T3396 remains deactivated upon a PLMN change or inter-system\nchange.\n\nc) if the timer value indicates zero, the UE shall stop timer T3396\nassociated with the corresponding DNN, if running, and may send another PDU\nSESSION ESTABLISHMENT REQUEST, or PDU SESSION MODIFICATION REQUEST message\nfor the same DNN.\n\n   if the UE did not provide a DNN for the establishment of the PDU session\nand the request type was different from \"initial emergency request\" and\ndifferent from \"existing emergency PDU session\", the UE shall stop timer\nT3396 associated with no DNN, if running, and may send another PDU SESSION\nESTABLISHMENT REQUEST message without a DNN, or another PDU SESSION\nMODIFICATION REQUEST message established without a DNN provided by the UE.\n\nIf the Back-off timer value IE is not included, then the UE may send\nanother PDU SESSION ESTABLISHMENT REQUEST or PDU SESSION MODIFICATION\nREQUEST message for the same DNN or without DNN.\n\nIf the timer T3396 is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T3396 is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T3396 is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T3396 timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nIf the 5GSM cause value is #67 \"insufficient resources for specific slice\nand DNN\" and the Back-off timer value IE is included, the UE shall take\ndifferent actions depending on the timer value received for timer T35cd in\nthe Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated, the UE shall\nstop timer T35cd associated with the same [S-NSSAI, DNN] combination as\nthat the UE provided when the PDU session is established, if it is running.\nIf the timer value indicates neither zero nor deactivated, the UE shall\nstop timer T35cd associated with the same [S-NSSAI, no DNN] combination as\nthat the UE provided when the PDU session is established, if it is running.\nThe UE shall then start timer T35cd with the value provided in the Back-off\ntimer value IE, and:\n\n1) shall not send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, DNN]\ncombination that was sent by the UE, until timer T35cd expires or timer\nT35cd is stopped.\n\n2) shall not send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, no DNN]\ncombination that was sent by the UE, until timer T35cd expires or timer\nT35cd is stopped.\n\nThe UE shall not stop timer T35cd upon a PLMN change or inter-system\nchange.\n\nb) if the timer value indicates that this timer is deactivated, the UE:\n\n1) shall stop timer T35cd associated with the same [S-NSSAI, DNN]\ncombination as that the UE provided when the PDU session is established, if\nit is running. the UE shall not send another PDU SESSION ESTABLISHMENT\nREQUEST message, or PDU SESSION MODIFICATION REQUEST for the same [S-NSSAI,\nDNN] combination until the UE is switched off or the USIM is removed, or\nthe UE receives a PDU SESSION MODIFICATION REQUEST message for the same [S-\nNSSAI, DNN] combination from the network or a PDU SESSION RELEASE COMMAND\nmessage including 5GSM cause #39 \"reactivation requested\" for the same [S-\nNSSAI, DNN] combination from the network; and\n\n2) shall stop timer T35cd associated with the same [S-NSSAI, no DNN]\ncombination as that the UE provided when the PDU session is established, if\nit is running. The UE shall not send another PDU SESSION ESTABLISHMENT\nREQUEST message, or PDU SESSION MODIFICATION REQUEST for the same [S-NSSAI,\nno DNN] combination if no DNN was included in the PDU SESSION ESTABLISHMENT\nREQUEST message until the UE is switched off or the USIM is removed, or the\nUE receives a PDU SESSION MODIFICATION REQUEST message for the same [S-\nNSSAI, no DNN] combination from the network or a PDU SESSION RELEASE\nCOMMAND message including 5GSM cause #39 \"reactivation requested\" for the\nsame [S-NSSAI, no DNN] combination from the network.\n\nThe timer T35cd remains deactivated upon a PLMN change or inter-system\nchange.\n\nc) if the timer value indicates zero, the UE shall stop timer T35cd\nassociated with the same [S-NSSAI, DNN] combination, if running. The UE:\n\n1) may send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, DNN]\ncombination.\n\n2) may send another PDU SESSION ESTABLISHMENT REQUEST message, or PDU\nSESSION MODIFICATION REQUEST message for the same [S-NSSAI, no DNN]\ncombination if no DNN was included in the PDU SESSION ESTABLISHMENT REQUEST\nmessage and the request type was different from \"initial emergency request\"\nand different from \"existing emergency PDU session\".\n\nIf the Back-off timer value IE is not included, then the UE may send\nanother PDU SESSION ESTABLISHMENT REQUEST message, or PDU SESSION\nMODIFICATION REQUEST message for the same [S-NSSAI, DNN] combination.\n\nWhen the timer T35cd is running or the timer is deactivated, the UE is\nallowed to initiate a PDU session establishment procedure for emergency\nservices.\n\nIf the timer T35cd is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T35cd is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T35cd is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T35cd timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nIf the 5GSM cause value is #69 \"insufficient resources for specific S-\nNSSAI\" and the Back-off timer value IE is included, the UE shall take\ndifferent actions depending on the timer value received for timer T35ef in\nthe Back-off timer value:\n\na) If the timer value indicates neither zero nor deactivated, the UE shall\nstop timer T35ef associated with the corresponding S-NSSAI, if it is\nrunning. The UE shall then start timer T35ef with the value provided in the\nBack-off timer value IE and shall not send another PDU SESSION\nESTABLISHMENT REQUEST message, or PDU SESSION MODIFICATION REQUEST message\nfor the same S-NSSAI that was sent by the UE, until timer T35ef expires or\ntimer T35ef is stopped.\n\n   If the UE did not provide an S-NSSAI for the establishment of the PDU\nsession and the request type was different from \"initial emergency\nrequest\", the UE shall stop the timer T35ef associated with no S-NSSAI if\nit is running. The UE shall start timer T35ef with the received value and\nnot send another PDU SESSION ESTABLISHMENT REQUEST message without an S-\nNSSAI and with request type different from \"initial emergency request\", or\nanother PDU SESSION MODIFICATION REQUEST message for a non-emergency PDU\nsession established without an S-NSSAI provided by the UE, until timer\nT35ef expires or timer T35ef is stopped.\n\n   The UE shall not stop timer T35ef upon a PLMN change or inter-system\nchange.\n\nb) if the timer value indicates that this timer is deactivated, the UE\nshall not send another PDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION\nMODIFICATION REQUEST message for the same S-NSSAI until the UE is switched\noff or the USIM is removed, or the UE receives a PDU SESSION MODIFICATION\nREQUEST message for the same S-NSSAI from the network or a PDU SESSION\nRELEASE COMMAND message including 5GSM cause #39 \"reactivation requested\"\nfor the same S-NSSAI from the network.\n\n   If the UE did not provide an S-NSSAI for the establishment of the PDU\nsession and the request type was different from \"initial emergency\nrequest\", the UE shall not send another PDU SESSION ESTABLISHMENT REQUEST\nmessage without an S-NSSAI and with request type different from \"initial\nemergency request\", or another PDU SESSION MODIFICATION REQUEST for a non-\nemergency PDU session established without S-NSSAI provided by the UE, until\nthe UE is switched off or the USIM is removed, or the UE receives a PDU\nSESSION MODIFICATION REQUEST message for a non-emergency PDU session\nestablished without an S-NSSAI provided by the UE, or the UE receives a PDU\nSESSION RELEASE COMMAND messages including 5GSM cause IE set to\n5GSM\u00a0cause\u00a0#39 \"reactivation requested\" for a non-emergency PDU session\nestablished without an S-NSSAI provided by the UE.\n\n   The timer T35ef remains deactivated upon a PLMN change or inter-system\nchange.\n\nc) if the timer value indicates zero, the UE shall stop timer T35ef\nassociated with the corresponding S-NSSAI, if running, and may send another\nPDU SESSION ESTABLISHMENT REQUEST, or PDU SESSION MODIFICATION REQUEST\nmessage for the same S-NSSAI.\n\n   if the UE did not provide an S-NSSAI for the establishment of the PDU\nsession and the request type was different from \" initial emergency request\n\", the UE shall stop timer T35ef associated with no S-NSSAI, if running,\nand may send another PDU SESSION ESTABLISHMENT REQUEST message without an S-\nNSSAI, or another PDU SESSION MODIFICATION REQUEST message established\nwithout an S-NSSAI provided by the UE.\n\nIf the Back-off timer value IE is not included, then the UE may send\nanother PDU SESSION ESTABLISHMENT REQUEST or PDU SESSION MODIFICATION\nREQUEST message for the same S-NSSAI or without S-NSSAI.\n\nIf the timer T35ef is running when the UE enters state5GMM-DEREGISTERED,\nthe UE remains switched on, and the USIM in the UE remains the same, then\ntimer T35ef is kept running until it expires or it is stopped.\n\nIf the UE is switched off when the timer T35ef is running, and if the USIM\nin the UE remains the same when the UE is switched on, the UE shall behave\nas follows:\n\n   let t1 be the time remaining for T35ef timeout at switch off and let t\nbe the time elapsed between switch off and switch on. If t1 is greater than\nt, then the timer shall be restarted with the value t1 \u2013 t. If t1 is equal\nto or less than t, then the timer need not be restarted. If the UE is not\ncapable of determining t, then the UE shall restart the timer with the\nvalue t1.\n\nNOTE:  As described in this subclause, upon PLMN change or inter-system\nchange, the UE does not stop the timer T35cd or T35ef. This means the timer\nT35cd or T35ef can still be running or be deactivated for the given 5GSM\nprocedure, the PLMN, the S-NSSAI and optionally the DNN combination when\nthe UE returns to the PLMN or when it performs inter-system change back\nfrom S1 mode to N1 mode. Thus the UE can still be prevented from sending\nanother PDU SESSION ESTABLISHMENT REQUEST message in the PLMN for the same\nS-NSSAI and optionally the same DNN.\n\nUpon PLMN change, if T35cd is running or is deactivated for a S-NSSAI, a\nDNN, and old PLMN, but T35cd is not running and is not deactivated for the\nS-NSSAI, the DNN, and new PLMN, then the UE is allowed to send a PDU\nSESSION ESTABLISHMENT REQUEST message for the same S-NSSAI and the same DNN\nin the new PLMN.\n\nUpon PLMN change, if T35ef is running or is deactivated for a S-NSSAI and\nold PLMN, but T35cd is not running and is not deactivated for the S-NSSAI\nand new PLMN, then the UE is allowed to send a PDU SESSION ESTABLISHMENT\nREQUEST message for the same S-NSSAI in the new PLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "6.4.2.5", "title_level": 3, "desc": "6.4.2.5  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3581.\n\n   The UE shall, on the first expiry of the timer T3581, retransmit the PDU\nSESSION MODIFICATION REQUEST message and shall reset and start timer T3581.\nThis retransmission is repeated four times, i.e. on the fifth expiry of\ntimer T3581, the UE shall abort the procedure and shall release the\nallocated PTI.\n\nb) Invalid PDU session identity.\n\n   Upon receipt of the PDU SESSION MODIFICATION REJECT message including\n5GSM cause #43 \"invalid PDU session identity\", the UE shall release the\nexisting PDU session locally without peer-to-peer signalling between the UE\nand the SMF.\n\nc) Collision of network-requested PDU session release procedure and UE-\nrequested PDU session modification procedure.\n\n   If the UE receives a PDU SESSION RELEASE COMMAND message during the UE-\nrequested PDU session modification procedure, and the PDU session indicated\nin the PDU SESSION RELEASE COMMAND message is the PDU session that the UE\nwants to modify, the UE shall abort the PDU session modification procedure\nand proceed with the network-requested PDU session release procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "6.4.2.6", "title_level": 3, "desc": "6.4.2.6  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) If the PDU session is an emergency PDU session, the SMF shall reject the\nPDU SESSION MODIFICATION REQUEST message with 5GSM cause #31 \"request\nrejected, unspecified\".\n\nb) No PDU session active for the received PDU session identity.\n\n   If the PDU session ID in the PDU SESSION MODIFICATION REQUEST message\ndoes not belong to any PDU session in state PDU SESSION ACTIVE in the SMF,\nthe SMF shall set the 5GSM cause IE to #43 \"Invalid PDU session identity\"\nin the PDU SESSION MODIFICATION REJECT message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session release procedure", "numbering": "6.4.3", "title_level": 2, "desc": "6.4.3  UE-requested PDU session release procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.4.3.1", "title_level": 3, "desc": "6.4.3.1  General\n\nThe purpose of the UE-requested PDU session release procedure is to enable\nby the UE to request a release of a PDU session.\n\nThe UE is allowed to initiate the PDU session release procedure even if the\ntimer T3396 is running.\n\nThe UE is allowed to initiate the PDU session release procedure even if the\ntimer T35cd is running.\n\nThe UE is allowed to initiate the PDU session release procedure even if the\ntimer T35ef is running.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session release procedure initiation", "numbering": "6.4.3.2", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session release procedure accepted by the", "numbering": "6.4.3.3", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE-requested PDU session release procedure not accepted by", "numbering": "6.4.3.4", "title_level": 3, "desc": "6.4.3.2  UE-requested PDU session release procedure initiation\n\nIn order to initiate the UE-requested PDU session release procedure, the UE\nshall create an PDU SESSION RELEASE REQUEST message.\n\nThe UE shall allocate a PTI value currently not used and shall set the PTI\nIE of the PDU SESSION RELEASE REQUEST message to the allocated PTI value.\n\nThe UE shall transport the PDU SESSION RELEASE REQUEST message and the PDU\nsession ID, using the NAS transport procedure as specified in\nsubclause\u00a05.4.5, and the UE shall start timer T3582 (see example in\nfigure\u00a06.4.3.2.1).\n\n[pic]\n\nFigure\u00a06.4.3.2.1: UE-requested PDU session release procedure\n\n\n6.4.3.3  UE-requested PDU session release procedure accepted by the network\n\nUpon receipt of a PDU SESSION RELEASE REQUEST message and a PDU session ID,\nif the SMF accepts the request to release the PDU session, and shall\nperform the network-requested PDU session release procedure as specified in\nsubclause\u00a06.3.3.\n\n\n6.4.3.4  UE-requested PDU session release procedure not accepted by the\n         network\n\nUpon receipt of a PDU SESSION RELEASE REQUEST message, if the SMF does not\naccept the request to release the PDU session, the SMF shall create an PDU\nSESSION RELEASE REJECT message.\n\nThe SMF shall set the 5GSM cause IE of the PDU SESSION RELEASE REJECT\nmessage to indicate the reason for rejecting the PDU session release.\n\nThe 5GSM cause IE typically indicates one of the following SM cause values:\n\n#34  service option temporarily out of order;\n\n#35  PTI already in use; or\n\n#43  Invalid PDU session identity.\n\nThe SMF shall send the PDU SESSION RELEASE REJECT message.\n\nUpon receipt of a PDU SESSION RELEASE REJECT message and a PDU session ID,\nusing the NAS transport procedure as specified in subclause\u00a05.4.5, the UE\nshall stop timer T3582, shall release the allocated PTI value, and shall\nconsider that the PDU session is not released.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases in the UE", "numbering": "6.4.3.5", "title_level": 3, "desc": "6.4.3.5  Abnormal cases in the UE\n\nThe following abnormal cases can be identified:\n\na) Expiry of timer T3582.\n\n   The UE shall, on the first expiry of the timer T3582, retransmit the PDU\nSESSION RELEASE REQUEST message and shall reset and start timer T3582. This\nretransmission is repeated four times, i.e. on the fifth expiry of timer\nT3582, the UE shall abort the procedure, shall release the allocated PTI,\nshall locally release the PDU session, and shall perform the registration\nprocedure for mobility and periodic registration update with a REGISTRATION\nREQUEST message including the PDU session status IE.\n\nb) Collision of UE-requested PDU session release procedure and network-\nrequested PDU session modification procedure.\n\n   When the UE receives a PDU SESSION MODIFICATION COMMAND message during\nthe UE-requested PDU session release procedure, and the PDU session\nindicated in PDU SESSION MODIFICATION COMMAND message is the PDU session\nthat the UE wants to release, the UE shall ignore the PDU SESSION\nMODIFICATION COMMAND message and proceed with the PDU session release\nprocedure.\n\nc) Collision of UE-requested PDU session release procedure and network-\nrequested PDU session release procedure.\n\n   When the UE receives a PDU SESSION RELEASE COMMAND message with the PTI\nIE set to \"No procedure transaction identity assigned\" during the UE-\nrequested PDU session release procedure, and the PDU session indicated in\nthe PDU SESSION RELEASE COMMAND message is the same as the PDU session that\nthe UE requests to release, the UE shall abort the UE-requested PDU session\nrelease procedure and proceed with the network-requested PDU session\nrelease procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Abnormal cases on the network side", "numbering": "6.4.3.6", "title_level": 3, "desc": "6.4.3.6  Abnormal cases on the network side\n\nThe following abnormal cases can be identified:\n\na) No PDU session active for the received PDU session identity.\n\n   If the PDU session ID in the PDU SESSION RELEASE REQUEST message does\nnot belong to any PDU session in state PDU SESSION ACTIVE in the SMF, the\nSMF shall send the PDU SESSION RELEASE REJECT message to the UE with the\n5GSM cause #43 \"Invalid PDU session identity\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM status procedure", "numbering": "6.5", "title_level": 1, "desc": "6.5  5GSM status procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "6.5.1", "title_level": 2, "desc": "6.5.1  General\n\nThe purpose of the sending of the 5GSM STATUS message is to report at any\ntime certain error conditions detected upon receipt of 5GSM protocol data.\nThe 5GSM STATUS message can be sent by both the network and the UE (see\nexample in figure\u00a06.5.1.1).\n\n[pic]\n\nFigure\u00a06.5.1.1: 5GSM status procedure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM status received in the UE", "numbering": "6.5.2", "title_level": 2, "desc": "6.5.2  5GSM status received in the UE\n\nIf the 5GSM entity of the UE receives a 5GSM STATUS message the UE shall\ntake different actions depending on the received 5GSM cause value:\n\n#81    (Invalid PTI value);\n\n   The UE shall abort any ongoing 5GSM procedure related to the received\nPTI value and stop any related timer.\n\n#97  (Message type non-existent or not implemented).\n\n   The UE shall abort any ongoing 5GSM procedure related to the PTI or PDU\nsession Id and stop any related timer.\n\nOn receipt of a 5GSM STATUS message with any other 5GSM cause value no\nstate transition and no specific action shall be taken as seen from the\nradio interface, i.e. local actions are possible.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM status received in the SMF", "numbering": "6.5.3", "title_level": 2, "desc": "6.5.3  5GSM status received in the SMF\n\nIf the SMF receives a 5GSM STATUS message the SMF shall take different\nactions depending on the received 5GSM cause value:\n\n#81    (Invalid PTI value);\n\n   The UE shall abort any ongoing 5GSM procedure related to the received\nPTI value and stop any related timer.\n\n#97  (Message type non-existent or not implemented).\n\n   The SMF shall abort any ongoing 5GSM procedure related to the PTI or PDU\nsession Id and stop any related timer.\n\nThe local actions to be taken by the SMF on receipt of a 5GSM STATUS\nmessage with any other 5GSM cause value are implementation dependent.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Miscellaneous procedures", "numbering": "6.6", "title_level": 1, "desc": "6.6  Miscellaneous procedures\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Exchange of extended protocol configuration options", "numbering": "6.6.1", "title_level": 2, "desc": "6.6.1  Exchange of extended protocol configuration options\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Handling of unknown, unforeseen, and erroneous protocol data", "numbering": "7", "title_level": 0, "desc": "7  Handling of unknown, unforeseen, and erroneous protocol data\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "7.1", "title_level": 1, "desc": "7.1  General\n\nThe procedures specified in the present document apply to those messages\nwhich pass the checks described in this subclause.\n\nThis subclause also specifies procedures for the handling of unknown,\nunforeseen, and erroneous protocol data by the receiving entity. These\nprocedures are called \"error handling procedures\", but in addition to\nproviding recovery mechanisms for error situations they define a\ncompatibility mechanism for future extensions of the protocols.\n\nSubclauses\u00a07.1 to 7.8 shall be applied in order of precedence.\n\nDetailed error handling procedures in the network are implementation\ndependent and may vary from PLMN to PLMN. However, when extensions of this\nprotocol are developed, networks will be assumed to have the error handling\nthat is indicated in this subclause as mandatory (\"shall\") and that is\nindicated as strongly recommended (\"should\").\n\nAlso, the error handling of the network is only considered as mandatory or\nstrongly recommended when certain thresholds for errors are not reached\nduring a dedicated connection.\n\nFor definition of semantical and syntactical errors see\n3GPP\u00a0TS\u00a024.007\u00a0[11], subclause\u00a011.4.2.\n\nEditor's note:  It is FFS to add more details and further alignment to\nalign with 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message too short or too long", "numbering": "7.2", "title_level": 1, "desc": "7.2  Message too short or too long\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message too short", "numbering": "7.2.1", "title_level": 2, "desc": "7.2.1  Message too short\n\nWhen a message is received that is too short to contain a complete message\ntype information element, that message shall be ignored, cf.\n3GPP\u00a0TS\u00a024.007\u00a0[11].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message too long", "numbering": "7.2.2", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Unknown or unforeseen procedure transaction identity or PDU", "numbering": "7.3", "title_level": 1, "desc": "7.2.2  Message too long\n\nThe maximum size of an NAS message for NR connected to 5GCN is specified in\n3GPP\u00a0TS\u00a038.323\u00a0[29].\n\nThe maximum size of an NAS message for E-UTRA connected to 5GCN is\nspecified 3GPP\u00a0TS\u00a036.323\u00a0[25].\n\nThe maximum size of an NAS message for non-3GPP access connected to 5GCN is\nspecified in 3GPP\u00a0TS\u00a024.502\u00a0[18]\n\n\n7.3  Unknown or unforeseen procedure transaction identity or PDU Session\n         identity\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Procedure transaction identity", "numbering": "7.3.1", "title_level": 2, "desc": "7.3.1  Procedure transaction identity\n\nThe following UE-requested 5GSM procedures shall apply for handling an\nunknown, erroneous, or unforeseen PTI received in a 5GSM message:\n\na) In case the UE receives a PDU SESSION MODIFICATION COMMAND message in\nwhich the PTI value is an assigned value that does not match any PTI in\nuse:\n\n1) if the UE detects that this command is a network retransmission of an\nalready accepted request (see subclause\u00a06.3.2.3), the UE shall respond with\na PDU SESSION MODIFICATION COMPLETE message; or\n\n2) otherwise, the UE shall respond with a PDU SESSION MODIFICATION COMMAND\nREJECT message including 5GSM cause #47 \"PTI mismatch\".\n\nb) In case the UE receives a PDU SESSION RELEASE COMMAND message in which\nthe PTI value is an assigned value that does not match any PTI in use:\n\n1) if the UE detects that this command is a network retransmission of an\nalready accepted request (see subclause\u00a06.3.3.3), the UE shall respond with\na PDU SESSION RELEASE COMPLETE message; or\n\n2) otherwise, the UE shall respond with a 5GSM STATUS message including\n5GSM cause #47 \"PTI mismatch\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU Session identity", "numbering": "7.3.2", "title_level": 2, "desc": "7.3.2  PDU Session identity\n\nEditor's note:  It is FFS to add the content.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Unknown or unforeseen message type", "numbering": "7.4", "title_level": 1, "desc": "7.4  Unknown or unforeseen message type\n\nIf UE receives a 5GMM message or 5GSM message with message type not defined\nfor the extended protocol discriminator (EPD) or not implemented by the\nreceiver, it shall return a status message (5GMM STATUS or 5GSM STATUS\ndepending on the EPD) with cause #97 \"message type non-existent or not\nimplemented\".\n\nIf the network receives a 5GMM or 5GSM message with message type not\ndefined for the EPD or not implemented by the receiver in a protocol state\nwhere reception of an unsolicited message with the given EPD from the UE is\nnot foreseen in the protocol, the network actions are implementation\ndependent. Otherwise, if the network receives a message with message type\nnot defined for the EPD or not implemented by the receiver, it shall ignore\nthe message except that it should return a status message (5GMM STATUS or\n5GSM STATUS depending on the EPD) with cause #97 \"message type non-existent\nor not implemented\".\n\nNOTE:  A message type not defined for the EPD in the given direction is\nregarded by the receiver as a message type not defined for the EPD, see\n3GPP\u00a0TS\u00a024.007\u00a0[11].\n\nIf the UE receives a message not compatible with the protocol state, the UE\nshall return a status message (5GMM STATUS or 5GSM STATUS depending on the\nEPD) with cause #98 \"message type not compatible with protocol state\".\n\nIf the network receives a message not compatible with the protocol state,\nthe network actions are implementation dependent.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Non-semantical mandatory information element errors", "numbering": "7.5", "title_level": 1, "desc": "7.5  Non-semantical mandatory information element errors\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Common procedures", "numbering": "7.5.1", "title_level": 2, "desc": "7.5.1  Common procedures\n\nWhen on receipt of a message,\n\na) an \"imperative message part\" error; or\n\nb) a \"missing mandatory IE\" error\n\nis diagnosed or when a message containing:\n\na) a syntactically incorrect mandatory IE;\n\nb) an IE unknown in the message, but encoded as \"comprehension required\"\n(see 3GPP\u00a0TS\u00a024.007\u00a0[11]); or\n\nc) an out of sequence IE encoded as \"comprehension required\" (see\n3GPP\u00a0TS\u00a024.007\u00a0[11]) is received,\n\nthe UE shall proceed as follows:\n\n   If the message is not one of the messages listed in subclause\u00a07.5.3,\nitem a) or b), the UE shall return a status message (5GMM STATUS or 5GSM\nSTATUS depending on the EPD) with cause #96 \"invalid mandatory\ninformation\";\n\nthe network shall proceed as follows:\n\na) If the message is not one of the messages listed in subclause\u00a07.5.3,\nitem c), d) or e) , the network shall either:\n\n1) try to treat the message (the exact further actions are implementation\ndependent); or\n\n2) ignore the message except that it should return a status message (5GMM\nSTATUS or 5GSM STATUS depending on the EPD) with cause #96 \"invalid\nmandatory information\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS mobility management", "numbering": "7.5.2", "title_level": 2, "desc": "7.5.2  5GS mobility management\n\nNo exceptional cases are described for 5GS mobility management messages.\n\nNo semantical or syntactical diagnosis other than presence and length shall\nbe performed on the EPS NAS message container information element in the\nREGISTRATION REQUEST message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS session management", "numbering": "7.5.3", "title_level": 2, "desc": "7.5.3  5GS session management\n\nThe following UE procedures shall apply for handling an error encountered\nwith a mandatory information element in a 5GSM message:\n\na) If the message is a PDU SESSION AUTHENTICATION COMMAND, a PDU SESSION\nESTABLISHMENT REJECT message with 5GSM cause #96 \"invalid mandatory\ninformation\" shall be returned.\n\nb) If the message is a PDU SESSION MODIFICATION COMMAND, a PDU SESSION\nMODIFICATION REJECT message with 5GSM cause #96 \"invalid mandatory\ninformation\" shall be returned.\n\nThe following network procedures shall apply for handling an error\nencountered with a mandatory information element in a 5GSM message:\n\nc) If the message is a PDU SESSION ESTABLISHMENT REQUEST, a PDU SESSION\nESTABLISHMENT REJECT message with 5GSM cause #96 \"invalid mandatory\ninformation\" shall be returned.\n\nd) If the message is a PDU SESSION MODIFICATION REQUEST, a PDU SESSION\nMODIFICATION REJECT message with 5GSM cause #96 \"invalid mandatory\ninformation\" shall be returned.\n\ne) If the message is a PDU SESSION RELEASE REQUEST, a PDU SESSION RELEASE\nREJECT message with 5GSM cause #96 \"invalid mandatory information\" shall be\nreturned.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Unknown and unforeseen IEs in the non-imperative message part", "numbering": "7.6", "title_level": 1, "desc": "7.6  Unknown and unforeseen IEs in the non-imperative message part\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IEIs unknown in the message", "numbering": "7.6.1", "title_level": 2, "desc": "7.6.1  IEIs unknown in the message\n\nThe UE shall ignore all IEs unknown in a message which are not encoded as\n\"comprehension required\" (see 3GPP\u00a0TS\u00a024.007\u00a0[11]).\n\nThe network shall take the same approach.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Out of sequence IEs", "numbering": "7.6.2", "title_level": 2, "desc": "7.6.2  Out of sequence IEs\n\nThe UE shall ignore all out of sequence IEs in a message which are not\nencoded as \"comprehension required\" (see 3GPP\u00a0TS\u00a024.007\u00a0[11]).\n\nThe network should take the same approach.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Repeated IEs", "numbering": "7.6.3", "title_level": 2, "desc": "7.6.3  Repeated IEs\n\nIf an information element with format T, TV, TLV, or TLV-E is repeated in a\nmessage in which repetition of the information element is not specified in\nclause\u00a08 and clause\u00a09 of the present document, the UE shall handle only the\ncontents of the information element appearing first and shall ignore all\nsubsequent repetitions of the information element. When repetition of\ninformation elements is specified, the UE shall handle only the contents of\nspecified repeated information elements. If the limit on repetition of\ninformation elements is exceeded, the UE shall handle the contents of\ninformation elements appearing first up to the limit of repetitions and\nshall ignore all subsequent repetitions of the information element.\n\nThe network should follow the same procedures.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Non-imperative message part errors", "numbering": "7.7", "title_level": 1, "desc": "7.7  Non-imperative message part errors\n\nThis category includes:\n\na) syntactically incorrect optional IEs; and\n\nb) conditional IE errors.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Syntactically incorrect optional IEs", "numbering": "7.7.1", "title_level": 2, "desc": "7.7.1  Syntactically incorrect optional IEs\n\nThe UE shall treat all optional IEs that are syntactically incorrect in a\nmessage as not present in the message.\n\nThe network shall take the same approach.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Conditional IE errors", "numbering": "7.7.2", "title_level": 2, "desc": "7.7.2  Conditional IE errors\n\nWhen upon receipt of a 5GMM or 5GSM message the UE diagnoses a \"missing\nconditional IE\" error or an \"unexpected conditional IE\" error, or when it\nreceives a 5GMM or 5GSM message containing at least one syntactically\nincorrect conditional IE, the UE shall ignore the message and shall return\na status message (5GMM STATUS or 5GSM STATUS depending on the EPD) with\ncause #100 \"conditional IE error\".\n\nWhen the network receives a message and diagnoses a \"missing conditional\nIE\" error or an \"unexpected conditional IE\" error or when it receives a\nmessage containing at least one syntactically incorrect conditional IE, the\nnetwork shall either:\n\na) try to treat the message (the exact further actions are implementation\ndependent); or\n\nb) ignore the message except that it should return a status message (5GMM\nSTATUS or 5GSM STATUS depending on the EPD) with cause #100 \"conditional IE\nerror\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Messages with semantically incorrect contents", "numbering": "7.8", "title_level": 1, "desc": "7.8  Messages with semantically incorrect contents\n\nWhen a message with semantically incorrect contents is received, the UE\nshall perform the foreseen reactions of the procedural part of the present\ndocument (i.e. of clauses\u00a08, 9). If, however no such reactions are\nspecified, the UE shall ignore the message except that it shall return a\nstatus message (5GMM STATUS or 5GSM STATUS depending on the EPD) with cause\n#95 \"semantically incorrect message\".\n\nThe network should follow the same procedure except that a status message\nis not normally transmitted.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message functional definitions and contents", "numbering": "8", "title_level": 0, "desc": "8  Message functional definitions and contents\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "8.1", "title_level": 1, "desc": "8.1  Overview\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS mobility management messages", "numbering": "8.2", "title_level": 1, "desc": "8.2  5GS mobility management messages\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication request", "numbering": "8.2.1", "title_level": 2, "desc": "8.2.1  Authentication request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.1.1", "title_level": 3, "desc": "8.2.1.1  Message definition\n\nThe AUTHENTICATION REQUEST message is sent by the AMF to the UE to initiate\nauthentication of the UE identity. See table\u00a08.2.1.1.1.\n\nMessage type: AUTHENTICATION REQUEST\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.1.1.1: AUTHENTICATION REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Authentication       |Message type           |M       |V     |1     |\n|   |request message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|   |ngKSI                |NAS key set identifier |M       |V     |1/2   |\n|   |                     |9.10.3.29              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|21 |Authentication       |Authentication         |O       |TV    |17    |\n|   |parameter RAND (5G   |parameter RAND         |        |      |      |\n|   |authentication       |9.10.3.13              |        |      |      |\n|   |challenge)           |                       |        |      |      |\n|20 |Authentication       |Authentication         |O       |TLV   |18    |\n|   |parameter AUTN (5G   |parameter AUTN         |        |      |      |\n|   |authentication       |9.10.3.14              |        |      |      |\n|   |challenge)           |                       |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication parameter RAND", "numbering": "8.2.1.2", "title_level": 3, "desc": "8.2.1.2  Authentication parameter RAND\n\nAuthentication parameter RAND IE is included if the AUTHENTICATION REQUEST\nmessage is used in a 5G AKA authentication procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication parameter AUTN", "numbering": "8.2.1.3", "title_level": 3, "desc": "8.2.1.3  Authentication parameter AUTN\n\nAuthentication parameter AUTN IE is included if the AUTHENTICATION REQUEST\nmessage is used in a 5G AKA authentication procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.1.4", "title_level": 3, "desc": "8.2.1.4  EAP message\n\nEAP message IE is included if the AUTHENTICATION REQUEST message is used in\nan EAP authentication procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication response", "numbering": "8.2.2", "title_level": 2, "desc": "8.2.2  Authentication response\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.2.1", "title_level": 3, "desc": "8.2.2.1  Message definition\n\nThe AUTHENTICATION RESPONSE message is sent by the UE to the AMF to deliver\na calculated authentication response to the network. See table\u00a08.2.2.1.1.\n\nMessage type: AUTHENTICATION RESPONSE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.2.1.1: AUTHENTICATION RESPONSE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Authentication       |Message type           |M       |V     |1     |\n|   |response message     |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|2D |Authentication       |Authentication response|O       |TLV   |6-18  |\n|   |response parameter   |parameter              |        |      |      |\n|   |                     |9.10.3.15              |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication response parameter", "numbering": "8.2.2.2", "title_level": 3, "desc": "8.2.2.2  Authentication response parameter\n\nThis IE is included if the message is sent in a 5G AKA based primary\nauthentication and key agreement procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.2.3", "title_level": 3, "desc": "8.2.2.3  EAP message\n\nEAP message IE is included if the EAP message received in a related\nAUTHENTICATION REQUEST message was an EAP-request.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication result", "numbering": "8.2.3", "title_level": 2, "desc": "8.2.3  Authentication result\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.3.1", "title_level": 3, "desc": "8.2.3.1  Message definition\n\nThe AUTHENTICATION RESULT message is sent by the AMF to the UE to provide\nresult of EAP authentication of the UE identity. See table\u00a08.2.3.1.1.\n\nMessage type: AUTHENTICATION RESULT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.3.1.1: AUTHENTICATION RESULT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Authentication result|Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |ngKSI                |NAS key set identifier |M       |V     |1/2   |\n|   |                     |9.10.3.29              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |EAP message          |EAP message            |M       |LV-E  |6-1502|\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication failure", "numbering": "8.2.4", "title_level": 2, "desc": "8.2.4  Authentication failure\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.4.1", "title_level": 3, "desc": "8.2.4.1  Message definition\n\nThe AUTHENTICATION FAILURE message is sent by the UE to the AMF to indicate\nthat authentication of the network has failed. See table\u00a08.2.4.1.1.\n\nMessage type: AUTHENTICATION FAILURE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.4.1.1: AUTHENTICATION FAILURE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Authentication       |Message type           |M       |V     |1     |\n|   |failure message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|   |5GMM cause           |5GMM cause             |M       |V     |1     |\n|   |                     |9.10.3.2               |        |      |      |\n|30 |Authentication       |Authentication failure |O       |TLV   |16    |\n|   |failure parameter    |parameter              |        |      |      |\n|   |                     |9.10.3.12              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication failure parameter", "numbering": "8.2.4.2", "title_level": 3, "desc": "8.2.4.2  Authentication failure parameter\n\nThis IE shall be included in a 5G AKA based primary authentication and key\nagreement procedure if and only if the 5GMM cause was #21 \"synch failure\".\nIt shall include the response to the authentication challenge from the\nUSIM, which is made up of the AUTS parameter (see 3GPP\u00a0TS\u00a033.501\u00a0[24]).\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication reject", "numbering": "8.2.5", "title_level": 2, "desc": "8.2.5  Authentication reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.5.1", "title_level": 3, "desc": "8.2.5.1  Message definition\n\nThe AUTHENTICATION REJECT message is sent by the AMF to the UE to indicate\nthat the authentication procedure has failed and that the UE shall abort\nall activities. See table\u00a08.2.5.1.1.\n\nMessage type: AUTHENTICATION REJECT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.5.1.1: AUTHENTICATION REJECT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Authentication reject|Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration request", "numbering": "8.2.6", "title_level": 2, "desc": "8.2.6  Registration request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.6.1", "title_level": 3, "desc": "8.2.6.1  Message definition\n\nThe REGISTRATION REQUEST message is sent by the UE to the AMF. See\ntable\u00a08.2.6.1.1.\n\nMessage type: REGISTRATION REQUEST\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.6.1.1: REGISTRATION REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended Protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Registration request |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |5GS registration type|5GS registration type  |M       |LV    |2     |\n|   |                     |9.10.3.7               |        |      |      |\n|   |ngKSI                |NAS key set identifier |M       |V     |1/2   |\n|   |                     |9.10.3.29              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |5GS mobile identity  |5GS mobile identity    |M       |LV    |5-TBD |\n|   |                     |9.10.3.4               |        |      |      |\n|C- |Non-current native   |NAS key set identifier |O       |TV    |1     |\n|   |NAS key set          |9.10.3.29              |        |      |      |\n|   |identifier           |                       |        |      |      |\n|10 |5GMM capability      |5GMM capability        |O       |TLV   |3-15  |\n|   |                     |9.10.3.1               |        |      |      |\n|2E |UE security          |UE security capability |O       |TLV   |4-6   |\n|   |capability           |9.10.3.49              |        |      |      |\n|2F |Requested NSSAI      |NSSAI                  |O       |TLV   |4-74  |\n|   |                     |9.10.3.34              |        |      |      |\n|52 |Last visited         |5GS tracking area      |O       |TV    |7     |\n|   |registered TAI       |identity               |        |      |      |\n|   |                     |9.10.3.8               |        |      |      |\n|65 |S1 UE network        |S1 UE network          |O       |TLV   |4-15  |\n|   |capability           |capability             |        |      |      |\n|   |                     |9.10.3.44              |        |      |      |\n|40 |Uplink data status   |Uplink data status     |O       |TLV   |4-34  |\n|   |                     |9.10.2.53              |        |      |      |\n|50 |PDU session status   |PDU session status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.40              |        |      |      |\n|B- |MICO indication      |MICO indication        |O       |TV    |1     |\n|   |                     |9.10.3.28              |        |      |      |\n|2B |UE status            |UE status              |O       |TLV   |3     |\n|   |                     |9.10.3.52              |        |      |      |\n|2C |Additional GUTI      |5GS mobile identity    |O       |TLV   |TBD   |\n|   |                     |9.10.3.4               |        |      |      |\n|25 |Allowed PDU session  |Allowed PDU session    |O       |TLV   |4-34  |\n|   |status               |status                 |        |      |      |\n|   |                     |9.10.3.11              |        |      |      |\n|60 |UE's usage setting   |UE's usage setting     |O       |TLV   |3     |\n|   |                     |9.10.3.51              |        |      |      |\n|TBD|Requested DRX        |DRX parameters         |O       |TBD   |TBD   |\n|   |parameters           |9.10.3.20              |        |      |      |\n|7C |EPS NAS message      |EPS NAS message        |O       |TLV-E |TBD   |\n|   |container            |container              |        |      |      |\n|   |                     |9.10.3.22              |        |      |      |\n|77 |Payload container    |Payload container      |O       |TLV-E |4-6553|\n|   |                     |9.10.3.35              |        |      |8     |\n\n\nEditor's note:   The content of the REGISTRATION REQUEST message when a\nlimited set of IEs including those needed to establish security in the\ninitial message when it has no NAS security context is FFS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Non-current native NAS key set identifier", "numbering": "8.2.6.2", "title_level": 3, "desc": "8.2.6.2  Non-current native NAS key set identifier\n\nThe UE shall include this IE if the UE has a valid non-current native 5G\nNAS security context when the UE performs a inter-system change from S1\nmode to N1 mode in 5GMM-CONNECTED mode and the UE uses a mapped 5G NAS\nsecurity context to protect the REGISTRATION REQUEST message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM capability", "numbering": "8.2.6.3", "title_level": 3, "desc": "8.2.6.3  5GMM capability\n\nThe UE shall include this IE, unless the UE performs a periodic\nregistration updating procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE security capability", "numbering": "8.2.6.4", "title_level": 3, "desc": "8.2.6.4  UE security capability\n\nThe UE shall include this IE, unless the UE performs a periodic\nregistration updating procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Requested NSSAI", "numbering": "8.2.6.5", "title_level": 3, "desc": "8.2.6.5  Requested NSSAI\n\nThis IE shall be included by the UE when performing the registration\nprocedure if:\n\na) the UE has a configured NSSAI for the current PLMN;\n\nb) the UE has an allowed NSSAI for the current PLMN; or\n\nc) the UE has neither allowed NSSAI for the current PLMN nor configured\nNSSAI for the current PLMN and has a configured NSSAI not associated with a\nPLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Last visited registered TAI", "numbering": "8.2.6.6", "title_level": 3, "desc": "8.2.6.6  Last visited registered TAI\n\nThis IE shall be included if the UE holds a valid last visited registered\nTAI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S1 UE network capability", "numbering": "8.2.6.7", "title_level": 3, "desc": "8.2.6.7  S1 UE network capability\n\nA UE supporting S1 mode shall include this IE, unless the UE performs a\nperiodic registration updating procedure.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Uplink data status", "numbering": "8.2.6.8", "title_level": 3, "desc": "8.2.6.8  Uplink data status\n\nThis IE shall be included if the UE has uplink user data pending to be\nsent.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "8.2.6.9", "title_level": 3, "desc": "8.2.6.9  PDU session status\n\nThis IE shall be included if the UE wants to indicate the PDU sessions\nassociated with the access type the message is sent over that are active\nwithin the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "MICO indication", "numbering": "8.2.6.10", "title_level": 3, "desc": "8.2.6.10 MICO indication\n\nThe UE may include this IE to request the use of MICO mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE status", "numbering": "8.2.6.11", "title_level": 3, "desc": "8.2.6.11 UE status\n\nThis IE shall be included if the UE in single-registration mode performs\nthe registration procedure due to inter-system change from S1 mode to N1\nmode or if the UE in dual-registration mode and EMM state EMM-REGISTERED\nperforms initial registration.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Additional GUTI", "numbering": "8.2.6.12", "title_level": 3, "desc": "8.2.6.12 Additional GUTI\n\nThis IE shall be included if the UE performs the registration procedure due\nto inter-system change from S1 mode to N1 mode, the UE operates in single-\nregistration mode and the UE has a 5G-GUTI.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed PDU session status", "numbering": "8.2.6.13", "title_level": 3, "desc": "8.2.6.13 Allowed PDU session status\n\nThis IE shall be included if the REGISTRATION REQUEST message is sent as a\nresponse to paging with the access type indicating non-3GPP access and the\nUE wants to indicate the user-plane resources of PDU session(s) associated\nwith non-3GPP access allowed to be re-established over 3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE's usage setting", "numbering": "8.2.6.14", "title_level": 3, "desc": "8.2.6.14 UE's usage setting\n\nThis IE shall be included if the UE is configured to support IMS voice.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Requested DRX parameters", "numbering": "8.2.6.15", "title_level": 3, "desc": "8.2.6.15 Requested DRX parameters\n\nIf the UE wants to use or change the UE specific DRX parameters, the UE\nshall include the Requested DRX parameters IE in the REGISTRATION REQUEST\nmessage.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EPS NAS message container", "numbering": "8.2.6.16", "title_level": 3, "desc": "8.2.6.16 EPS NAS message container\n\nThe UE operating in the single-registration mode shall include this\ninformation element if the UE performs mobility from S1 mode to N1 mode.\nThe content of this message container is the complete integrity protected\nTRACKING AREA UPATE REQUEST message, using EPS NAS security context.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed PDU session status", "numbering": "8.2.6.17", "title_level": 3, "desc": "8.2.6.17 Allowed PDU session status\n\nThis IE shall be included if the REGISTRATION REQUEST message is sent as a\nresponse to paging with the access type indicating non-3GPP access and the\nUE wants to indicate the user-plane resources of PDU session(s) associated\nwith non-3GPP access allowed to be re-established over 3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Payload container", "numbering": "8.2.6.18", "title_level": 3, "desc": "8.2.6.18 Payload container\n\nThis IE shall be included if the UE has one or more stored UE policy\nsections for the registration procedure for mobility and periodic\nregistration update due to inter-system change from S1 mode to N1 mode of a\nUE operating in the single-registration mode or for the registration\nprocedure for initial registration.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration accept", "numbering": "8.2.7", "title_level": 2, "desc": "8.2.7  Registration accept\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.7.1", "title_level": 3, "desc": "8.2.7.1  Message definition\n\nThe REGISTRATION ACCEPT message is sent by the AMF to the UE. See\ntable\u00a08.2.7.1.1.\n\nMessage type: REGISTRATION ACCEPT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.7.1.1: REGISTRATION ACCEPT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Registration accept  |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |5GS registration     |5GS registration result|M       |LV    |2     |\n|   |result               |9.10.3.6               |        |      |      |\n|2C |5G-GUTI              |5GS mobile identity    |O       |TLV   |13    |\n|   |                     |9.10.3.4               |        |      |      |\n|4A |Equivalent PLMNs     |PLMN list              |O       |TLV   |5-47  |\n|   |                     |9.10.3.41              |        |      |      |\n|54 |TAI list             |5GS tracking area      |O       |TLV   |9-114 |\n|   |                     |identity list          |        |      |      |\n|   |                     |9.10.3.9               |        |      |      |\n|70 |Allowed NSSAI        |NSSAI                  |O       |TLV   |4-74  |\n|   |                     |9.10.3.34              |        |      |      |\n|11 |Rejected NSSAI       |Rejected NSSAI         |O       |TLV   |4-42  |\n|   |                     |9.10.3.42              |        |      |      |\n|31 |Configured NSSAI     |NSSAI                  |O       |TLV   |4-146 |\n|   |                     |9.10.3.34              |        |      |      |\n|64 |5GS network feature  |5GS network feature    |O       |TLV   |3-5   |\n|   |support              |support                |        |      |      |\n|   |                     |9.10.3.5               |        |      |      |\n|50 |PDU session status   |PDU session status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.40              |        |      |      |\n|26 |PDU session          |PDU session            |O       |TLV   |4-32  |\n|   |reactivation result  |reactivation result    |        |      |      |\n|   |                     |9.10.3.38              |        |      |      |\n|7E |PDU session          |PDU session            |O       |TLV-E |5-515 |\n|   |reactivation result  |reactivation result    |        |      |      |\n|   |error cause          |error cause            |        |      |      |\n|   |                     |9.10.3.39              |        |      |      |\n|79 |LADN information     |LADN information       |O       |TLV-E |12-170|\n|   |                     |9.10.3.27              |        |      |7     |\n|B- |MICO indication      |MICO indication        |O       |TV    |1     |\n|   |                     |9.10.3.28              |        |      |      |\n|27 |Service area list    |Service area list      |O       |TLV   |6-114 |\n|   |                     |9.10.3.45              |        |      |      |\n|5E |T3512 value          |GPRS timer 3           |O       |TLV   |3     |\n|   |                     |9.10.2.5               |        |      |      |\n|5D |Non-3GPP             |GPRS timer 2           |O       |TLV   |3     |\n|   |de-registration timer|9.10.2.4               |        |      |      |\n|   |value                |                       |        |      |      |\n|16 |T3502 value          |GPRS timer 2           |O       |TLV   |3     |\n|   |                     |9.10.2.4               |        |      |      |\n|34 |Emergency number list|Emergency number list  |O       |TLV   |5-50  |\n|   |                     |9.10.3.21              |        |      |      |\n|35 |Extended emergency   |Extended emergency     |O       |TLV   |TBD   |\n|   |number list          |number list            |        |      |      |\n|   |                     |9.10.3.24              |        |      |      |\n|TBD|Transparent container|Transparent container  |O       |TBD   |TBD   |\n|   |                     |9.10.3.49              |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5G-GUTI", "numbering": "8.2.7.2", "title_level": 3, "desc": "8.2.7.2  5G-GUTI\n\nThis IE may be included to assign a 5G-GUTI to a UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Equivalent PLMNs", "numbering": "8.2.7.3", "title_level": 3, "desc": "8.2.7.3  Equivalent PLMNs\n\nThis IE may be included in order to assign a new equivalent PLMNs list to a\nUE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "TAI list", "numbering": "8.2.7.4", "title_level": 3, "desc": "8.2.7.4  TAI list\n\nThis IE may be included to assign a TAI list to a UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed NSSAI", "numbering": "8.2.7.5", "title_level": 3, "desc": "8.2.7.5  Allowed NSSAI\n\nThis IE shall be included:\n\na) if the network allows one or more S-NSSAIs received in the requested\nNSSAI of the REGISTRATION REQUEST message; or\n\nb) if the requested NSSAI was not included in the REGISTRATION REQUEST\nmessage or none of the requested NSSAI are present in the subscribed S-\nNSSAIs and the network has one or more subscribed S-NSSAIs marked as\ndefault that are available.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Rejected NSSAI", "numbering": "8.2.7.6", "title_level": 3, "desc": "8.2.7.6  Rejected NSSAI\n\nThe network may include this IE to inform the UE of the S-NSSAIs that were\nincluded in the requested NSSAI in the REGISTRATION REQUEST message but\nwere rejected by the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Configured NSSAI", "numbering": "8.2.7.7", "title_level": 3, "desc": "8.2.7.7  Configured NSSAI\n\nThe network may include this IE if the network needs to provide the UE with\na new configured NSSAI for the current PLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS network feature support", "numbering": "8.2.7.8", "title_level": 3, "desc": "8.2.7.8  5GS network feature support\n\nThe network may include this IE to inform the UE of the support of certain\nfeatures. If this IE is not included then the UE shall interpret this as a\nreceipt of an information element with all bits of the value part coded as\nzero.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "8.2.7.9", "title_level": 3, "desc": "8.2.7.9  PDU session status\n\nThis IE shall be included if the network wants to indicate the PDU sessions\nassociated with the access type the message is sent over that are active in\nthe network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session reactivation result", "numbering": "8.2.7.10", "title_level": 3, "desc": "8.2.7.10 PDU session reactivation result\n\nThis IE shall be included:\n\n-  if the Uplink data status IE is included in the REGISTRATION REQUEST\nmessage;\n\n-  if the Allowed PDU session status IE is included in the REGISTRATION\nREQUEST message and there is at least one PDU session indicated in the\nAllowed PDU session status IE that can be reactivated over 3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session reactivation result error cause", "numbering": "8.2.7.11", "title_level": 3, "desc": "8.2.7.11 PDU session reactivation result error cause\n\nThis IE may be included, if the PDU session reactivation result IE is\nincluded and there exist one or more PDU sessions for which the user-plane\nresources cannot be re-established, to indicate the cause of failure to re-\nestablish the user-plane resources\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LADN information", "numbering": "8.2.7.12", "title_level": 3, "desc": "8.2.7.12 LADN information\n\nThe network shall include this IE if there are valid LADN service area(s)\nfor the subscribed DNN(s) of the UE in the current registration area.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "MICO indication", "numbering": "8.2.7.13", "title_level": 3, "desc": "8.2.7.13 MICO indication\n\nThe network shall include the MICO indication IE if:\n\na)-  the UE included the MICO indication IE in the REGISTRATION REQUEST\nmessage; and\n\nb) the network supports and accepts the use of MICO mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service area list", "numbering": "8.2.7.14", "title_level": 3, "desc": "8.2.7.14 Service area list\n\nThis IE may be included to assign new service area restrictions to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "T3512 value", "numbering": "8.2.7.15", "title_level": 3, "desc": "8.2.7.15 T3512 value\n\nThe AMF shall include this IE during the initial registration procedure\nover 3GPP access. The AMF may include this IE during the mobility and\nperiodic registration update procedure over 3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Non-3GPP de-registration timer value", "numbering": "8.2.7.16", "title_level": 3, "desc": "8.2.7.16 Non-3GPP de-registration timer value\n\nThis IE may be included if the network wants to indicate to the UE\nregistered over non-3GPP access the value of a non-3GPP de-registration\ntimer value.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "T3502 value", "numbering": "8.2.7.17", "title_level": 3, "desc": "8.2.7.17 T3502 value\n\nThis IE may be included to indicate a value for timer T3502.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Emergency number list", "numbering": "8.2.7.18", "title_level": 3, "desc": "8.2.7.18 Emergency number list\n\nThis IE may be sent by the network. If this IE is sent, the contents of\nthis IE indicates a list of emergency numbers valid within the same country\nas in the cell on which this IE is received.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended emergency number list", "numbering": "8.2.7.19", "title_level": 3, "desc": "8.2.7.19 Extended emergency number list\n\nThis IE may be sent by the network. If this IE is sent, the contents of\nthis IE indicates a list of emergency numbers (with URN information) valid\nwithin the same country as in the cell on which this IE is received.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Transparent container", "numbering": "8.2.7.20", "title_level": 3, "desc": "8.2.7.20 Transparent container\n\nThis IE may be sent by the network. If this IE is sent, the contents of\nthis IE includes the list of preferred PLMN/access technology combinations\n(or HPLMN indication that 'no change of the \"Operator Controlled PLMN\nSelector with Access Technology\" list stored in the UE is needed and thus\nno list of preferred PLMN/access technology combinations is provided') (see\n3GPP\u00a0TS\u00a023.122\u00a0[5] annex\u00a0C) and optional acknowledgement request.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.7.21", "title_level": 3, "desc": "8.2.7.21 EAP message\n\nEAP message IE is included if the REGISTRATION ACCEPT message is sent as\npart of registration for emergency services and is used to convey EAP-\nfailure message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration complete", "numbering": "8.2.8", "title_level": 2, "desc": "8.2.8  Registration complete\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.8.1", "title_level": 3, "desc": "8.2.8.1  Message definition\n\nThe REGISTRATION COMPLETE message is sent by the UE to the AMF. See\ntable\u00a08.2.8.1.1.\n\nMessage type: REGISTRATION COMPLETE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable 8.2.8.1.1: REGISTRATION COMPLETE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Registration complete|Message type           |M       |V     |1     |\n|   |message identity     |9.6                    |        |      |      |\n|TBD|Transparent container|Transparent container  |O       |TBD   |TBD   |\n|   |                     |9.10.3.49              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Transparent container", "numbering": "8.2.8.2", "title_level": 3, "desc": "8.2.8.2  Transparent container\n\nThis IE may be sent by the UE. If this IE is sent, the contents of this IE\nindicates the UE acknowledgement of successful reception of the transparent\ncontainer IE in the REGISTRATION ACCEPT message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registration reject", "numbering": "8.2.9", "title_level": 2, "desc": "8.2.9  Registration reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.9.1", "title_level": 3, "desc": "8.2.9.1  Message definition\n\nThe REGISTRATION REJECT message is sent by the AMF to the UE. See\ntable\u00a08.2.9.1.1.\n\nMessage type: REGISTRATION REJECT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.9.1.1: REGISTRATION REJECT message content\n\n|IEI|Information Element  |Type/Reference          |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol       |M       |V     |1     |\n|   |discriminator        |discriminator           |        |      |      |\n|   |                     |9.2                     |        |      |      |\n|   |Security header type |Security header type    |M       |V     |1/2   |\n|   |                     |9.3                     |        |      |      |\n|   |Spare half octet     |Spare half octet        |M       |V     |1/2   |\n|   |                     |9.5                     |        |      |      |\n|   |Registration reject  |Message type            |M       |V     |1     |\n|   |message identity     |9.6                     |        |      |      |\n|   |5GMM cause           |5GMM cause              |M       |V     |1     |\n|   |                     |9.10.3.2                |        |      |      |\n|5F |T3346 value          |GPRS timer 2            |O       |TLV   |3     |\n|   |                     |9.10.2.4                |        |      |      |\n|16 |T3502 value          |GPRS timer 2            |O       |TLV   |3     |\n|   |                     |9.10.2.4                |        |      |      |\n|78 |EAP message          |EAP message             |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2                |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "T3346 value", "numbering": "8.2.9.2", "title_level": 3, "desc": "8.2.9.2  T3346 value\n\nThe AMF may include this IE when the general NAS level mobility management\ncongestion control is active\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "T3502 value", "numbering": "8.2.9.3", "title_level": 3, "desc": "8.2.9.3  T3502 value\n\nThis IE may be included to indicate a value for timer T3502 during the\ninitial registration.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.9.4", "title_level": 3, "desc": "8.2.9.4  EAP message\n\nEAP message IE is included if the REGISTRATION REJECT message is used to\nconvey EAP-failure message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UL NAS transport", "numbering": "8.2.10", "title_level": 2, "desc": "8.2.10 UL NAS transport\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.10.1", "title_level": 3, "desc": "8.2.10.1 Message definition\n\nThe UL NAS TRANSPORT message transports message payload and associated\ninformation to the AMF. See table\u00a08.2.10.1.1.\n\nMessage type: UL NAS TRANSPORT\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.10.1.1: UL NAS TRANSPORT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |UL NAS TRANSPORT     |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |Payload container    |Payload container type |M       |V     |1/2   |\n|   |type                 |9.10.3.36              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Payload container    |Payload container      |M       |LV-E  |3-6553|\n|   |                     |9.10.3.35              |        |      |7     |\n|70 |PDU session ID       |PDU session identity 2 |C       |TV    |2     |\n|   |                     |9.10.3.37              |        |      |      |\n|61 |Old PDU session ID   |PDU session identity 2 |O       |TV    |2     |\n|   |                     |9.10.3.37              |        |      |      |\n|8- |Request type         |Request type           |O       |TV    |1     |\n|   |                     |9.10.3.43              |        |      |      |\n|22 |S-NSSAI              |S-NSSAI                |O       |TLV   |3-10  |\n|   |                     |9.10.2.6               |        |      |      |\n|25 |DNN                  |DNN                    |O       |TLV   |3-102 |\n|   |                     |9.10.3.19              |        |      |      |\n|24 |Additional           |Additional information |O       |TLV   |3-n   |\n|   |information          |9.10.2.1               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session ID", "numbering": "8.2.10.2", "title_level": 3, "desc": "8.2.10.2 PDU session ID\n\nThe UE shall include this IE when the Payload container type IE is set to\n\"N1 SM information\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Old PDU session ID", "numbering": "8.2.10.3", "title_level": 3, "desc": "8.2.10.3 Old PDU session ID\n\nThe UE shall include this IE if the UL NAS TRANSPORT message transports a\nPDU SESSION ESTABLISHMENT REQUEST message upon receiving the PDU SESSION\nMODIFICATION COMMAND message with the 5GSM cause IE set to #39\n\"reactivation requested\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Request type", "numbering": "8.2.10.4", "title_level": 3, "desc": "8.2.10.4 Request type\n\nThe UE shall include this IE when the PDU session ID IE is included and the\nPayload container IE contains the PDU SESSION ESTABLISHMENT REQUEST\nmessage.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S-NSSAI", "numbering": "8.2.10.5", "title_level": 3, "desc": "8.2.10.5 S-NSSAI\n\nThe UE may include this IE when the Request type IE is set to \"initial\nrequest\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DNN", "numbering": "8.2.10.6", "title_level": 3, "desc": "8.2.10.6 DNN\n\nThe UE may include this IE when the Request type IE is set to \"initial\nrequest\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Additional information", "numbering": "8.2.10.7", "title_level": 3, "desc": "8.2.10.7 Additional information\n\nThe UE may include this IE when the Payload container type IE is set to\n\"LTE Positioning Protocol (LPP) message container\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DL NAS transport", "numbering": "8.2.11", "title_level": 2, "desc": "8.2.11 DL NAS transport\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.11.1", "title_level": 3, "desc": "8.2.11.1 Message definition\n\nThe DL NAS TRANSPORT message transports message payload and associated\ninformation to the UE. See table\u00a08.2.11.1.1.\n\nMessage type: DL NAS TRANSPORT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.11.1.1: DL NAS TRANSPORT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |DL NAS TRANSPORT     |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |Payload container    |Payload container type |M       |V     |1/2   |\n|   |type                 |9.10.3.36              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Payload container    |Payload container      |M       |LV-E  |3-6553|\n|   |                     |9.10.3.35              |        |      |7     |\n|70 |PDU session ID       |PDU session identity 2 |C       |TV    |2     |\n|   |                     |9.10.3.37              |        |      |      |\n|24 |Additional           |Additional information |O       |TLV   |3-n   |\n|   |information          |9.10.2.1               |        |      |      |\n|58 |5GMM cause           |5GMM cause             |O       |TV    |2     |\n|   |                     |9.10.3.2               |        |      |      |\n|37 |Back-off timer value |GPRS timer 3           |O       |TLV   |3     |\n|   |                     |9.10.2.5               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session ID", "numbering": "8.2.11.2", "title_level": 3, "desc": "8.2.11.2 PDU session ID\n\nThe AMF shall include this IE when the Payload container type IE is set to\n\"N1 SM information\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Additional information", "numbering": "8.2.11.3", "title_level": 3, "desc": "8.2.11.3 Additional information\n\nThe AMF may include this IE when the Payload container type IE is set to\n\"LTE Positioning Protocol (LPP) message container\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM cause", "numbering": "8.2.11.4", "title_level": 3, "desc": "8.2.11.4 5GMM cause\n\nThe AMF shall include this IE when the Payload container IE contains an\nuplink payload which was not forwarded.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Back-off timer value", "numbering": "8.2.11.5", "title_level": 3, "desc": "8.2.11.5 Back-off timer value\n\nThe AMF shall include this IE when the Payload container IE contains an\nuplink 5GSM message which was not forwarded due to DNN based congestion\ncontrol, S-NSSAI and DNN based congestion control or S-NSSAI only based\ncongestion control.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "De-registration request (UE originating de-registration)", "numbering": "8.2.12", "title_level": 2, "desc": "8.2.12 De-registration request (UE originating de-registration)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.12.1", "title_level": 3, "desc": "8.2.12.1 Message definition\n\nThe DEREGISTRATION REQUEST message is sent by the UE to the AMF. See\ntable\u00a08.2.12.1.1.\n\nMessage type: DEREGISTRATION REQUEST\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.12.1.1: DEREGISTRATION REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |De-registration      |Message type           |M       |V     |1     |\n|   |request message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|   |De-registration type |De-registration type   |M       |V     |1/2   |\n|   |                     |9.10.3.18              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |5GS mobile identity  |5GS mobile identity    |M       |TLV   |TBD   |\n|   |                     |9.10.3.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "De-registration accept (UE originating de-registration)", "numbering": "8.2.13", "title_level": 2, "desc": "8.2.13 De-registration accept (UE originating de-registration)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.13.1", "title_level": 3, "desc": "8.2.13.1 Message definition\n\nThe DEREGISTRATION ACCEPT message is sent by the AMF to the UE. See\ntable\u00a08.2.13.1.1.\n\nMessage type: DEREGISTRATION ACCEPT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.13.1.1: DEREGISTRATION ACCEPT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |De-registration      |Message type           |M       |V     |1     |\n|   |accept message       |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "De-registration request (UE terminated de-registration)", "numbering": "8.2.14", "title_level": 2, "desc": "8.2.14 De-registration request (UE terminated de-registration)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.14.1", "title_level": 3, "desc": "8.2.14.1 Message definition\n\nThe DEREGISTRATION REQUEST message is sent by the AMF to the UE. See\ntable\u00a08.2.14.1.1.\n\nMessage type: DEREGISTRATION REQUEST\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.14.1.1: DEREGISTRATION REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |De-registration      |Message type           |M       |V     |1     |\n|   |request message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|   |De-registration type |De-registration type   |M       |V     |1/2   |\n|   |                     |9.10.3.18              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|58 |5GMM cause           |5GMM cause             |O       |TV    |2     |\n|   |                     |9.10.3.2               |        |      |      |\n|5F |T3346 value          |GPRS timer 2           |O       |TLV   |3     |\n|   |                     |9.10.2.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM cause", "numbering": "8.2.14.2", "title_level": 3, "desc": "8.2.14.2 5GMM cause\n\nThis information element is included if a 5GMM cause is provided.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "T3346 value", "numbering": "8.2.14.3", "title_level": 3, "desc": "8.2.14.3 T3346 value\n\nThe AMF may include this IE when the general NAS level mobility management\ncongestion control is active.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "De-registration accept (UE terminated de-registration)", "numbering": "8.2.15", "title_level": 2, "desc": "8.2.15 De-registration accept (UE terminated de-registration)\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.15.1", "title_level": 3, "desc": "8.2.15.1 Message definition\n\nThe DEREGISTRATION ACCEPT message is sent by the UE to the AMF. See\ntable\u00a08.2.15.1.1.\n\nMessage type: DEREGISTRATION ACCEPT\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.15.1.1.1: DEREGISTRATION ACCEPT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |De-registration      |Message type           |M       |V     |1     |\n|   |accept message       |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service request", "numbering": "8.2.16", "title_level": 2, "desc": "8.2.16 Service request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.16.1", "title_level": 3, "desc": "8.2.16.1 Message definition\n\nThe SERVICE REQUEST message is sent by the UE to the AMF in order to\nrequest the establishment of an N1 NAS signalling connection and/or to\nrequest the establishment of user-plane resources for PDU sessions which\nare activated without user-plane resources. See table\u00a08.2.16.1.1.\n\nMessage type: SERVICE REQUEST\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.16.1.1: SERVICE REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Service request      |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |ngKSI                |NAS key set identifier |M       |V     |1/2   |\n|   |                     |9.10.3.29              |        |      |      |\n|   |Service type         |Service type           |M       |V     |1/2   |\n|   |                     |9.10.3.46              |        |      |      |\n|   |5G-S-TMSI            |5GS mobile identity    |M       |LV    |6     |\n|   |                     |9.10.3.4               |        |      |      |\n|40 |Uplink data status   |Uplink data status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.53              |        |      |      |\n|50 |PDU session status   |PDU session status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.40              |        |      |      |\n|25 |Allowed PDU session  |Allowed PDU session    |O       |TLV   |4-34  |\n|   |status               |status                 |        |      |      |\n|   |                     |9.10.3.11              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Uplink data status", "numbering": "8.2.16.2", "title_level": 3, "desc": "8.2.16.2 Uplink data status\n\nThis IE shall be included if the UE has uplink user data pending to be\nsent.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "8.2.16.3", "title_level": 3, "desc": "8.2.16.3 PDU session status\n\nThis IE shall be included if the UE wants to indicate the PDU sessions\nassociated with the access type the message is sent over that are active\nwithin the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed PDU session status", "numbering": "8.2.16.4", "title_level": 3, "desc": "8.2.16.4 Allowed PDU session status\n\nThis IE shall be included if the SERVICE REQUEST message is sent as a\nresponse to paging or notification via 3GPP access for PDU session(s)\nassociated with non-3GPP access and the UE wants to indicate the user-plane\nresources of PDU session(s) associated with non-3GPP access allowed to be\nre-established over 3GPP access or if there is no PDU session(s) for which\nthe UE allows the user-plane resources to be re-established over 3GPP\naccess.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service accept", "numbering": "8.2.17", "title_level": 2, "desc": "8.2.17 Service accept\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.17.1", "title_level": 3, "desc": "8.2.17.1 Message definition\n\nThe SERVICE ACCEPT message is sent by the AMF to the UE in order to accept\nthe service request procedure. See table\u00a08.2.17.1.1.\n\nMessage type: SERVICE ACCEPT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.17.1.1: SERVICE ACCEPT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Service accept       |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|50 |PDU session status   |PDU session status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.40              |        |      |      |\n|26 |PDU session          |PDU session            |O       |TLV   |4-32  |\n|   |reactivation result  |reactivation result    |        |      |      |\n|   |                     |9.10.3.38              |        |      |      |\n|7E |PDU session          |PDU session            |O       |TLV-E |5-515 |\n|   |reactivation result  |reactivation result    |        |      |      |\n|   |error cause          |error cause            |        |      |      |\n|   |                     |9.10.3.39              |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "8.2.17.2", "title_level": 3, "desc": "8.2.17.2 PDU session status\n\nThis IE shall be included if the network wants to indicate the PDU sessions\nassociated with the access type the message is sent over that are active\nwithin the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session reactivation result", "numbering": "8.2.17.3", "title_level": 3, "desc": "8.2.17.3 PDU session reactivation result\n\nThis IE shall be included:\n\n-  if the Uplink data status IE is included in the SERVICE REQUEST message;\n\n-  if the Allowed PDU session status IE is included in the SERVICE REQUEST\nmessage and there is at least one PDU session indicated in the Allowed PDU\nsession status IE that can be reactivated over 3GPP access.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session reactivation result error cause", "numbering": "8.2.17.4", "title_level": 3, "desc": "8.2.17.4 PDU session reactivation result error cause\n\nThis IE may be included if the PDU session reactivation result IE is\nincluded and there exist one or more PDU sessions for which the user-plane\nresources cannot be re-established, to indicate the cause of failure to re-\nestablish the user-plane resources.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.17.5", "title_level": 3, "desc": "8.2.17.5 EAP message\n\nEAP message IE is included if the SERVICE ACCEPT message is sent to a UE\nregistered for emergency services and is used to convey EAP-failure\nmessage.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service reject", "numbering": "8.2.18", "title_level": 2, "desc": "8.2.18 Service reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.18.1", "title_level": 3, "desc": "8.2.18.1 Message definition\n\nThe SERVICE REJECT message is sent by the AMF to the UE in order to reject\nthe service request procedure. See table\u00a08.2.18.1.1.\n\nMessage type: SERVICE REJECT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.18.1.1: SERVICE REJECT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Service reject       |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |5GMM cause           |5GMM cause             |M       |V     |1     |\n|   |                     |9.10.3.2               |        |      |      |\n|50 |PDU session status   |PDU session status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.40              |        |      |      |\n|5F |T3346 value          |GPRS timer 2           |O       |TLV   |3     |\n|   |                     |9.10.24                |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "8.2.18.2", "title_level": 3, "desc": "8.2.18.2 PDU session status\n\nThis IE shall be included if the network wants to indicate the PDU sessions\nassociated with the access type the message is sent over that are active\nwithin the network.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "T3346 value", "numbering": "8.2.18.3", "title_level": 3, "desc": "8.2.18.3 T3346 value\n\nThe AMF may include this IE when the general NAS level mobility management\ncongestion control is active.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.18.4", "title_level": 3, "desc": "8.2.18.4 EAP message\n\nEAP message IE is included if the SERVICE REJECT message is used to convey\nEAP-failure message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Configuration update command", "numbering": "8.2.19", "title_level": 2, "desc": "8.2.19 Configuration update command\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.19.1", "title_level": 3, "desc": "8.2.19.1 Message definition\n\nThe CONFIGURATION UPDATE COMMAND message is sent by the AMF to the UE. See\ntable\u00a08.2.19.1.1.\n\nMessage type: CONFIGURATION UPDATE COMMAND\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.19.1.1: CONFIGURATION UPDATE COMMAND message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Configuration update |Message type           |M       |V     |1     |\n|   |command message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|D- |Configuration update |Configuration update   |O       |TV    |1     |\n|   |indication           |indication             |        |      |      |\n|   |                     |9.10.3.16              |        |      |      |\n|2C |5G-GUTI              |5GS mobile identity    |O       |TLV   |13    |\n|   |                     |9.10.3.4               |        |      |      |\n|54 |TAI list             |5GS tracking area      |O       |TLV   |9-114 |\n|   |                     |identity list          |        |      |      |\n|   |                     |9.10.3.9               |        |      |      |\n|70 |Allowed NSSAI        |NSSAI                  |O       |TLV   |4-74  |\n|   |                     |9.10.3.34              |        |      |      |\n|27 |Service area list    |Service area list      |O       |TLV   |6-114 |\n|   |                     |9.10.3.45              |        |      |      |\n|43 |Full name for network|Network name           |O       |TLV   |3-n   |\n|   |                     |9.10.3.33              |        |      |      |\n|45 |Short name for       |Network name           |O       |TLV   |3-n   |\n|   |network              |9.10.3.33              |        |      |      |\n|46 |Local time zone      |Time zone              |O       |TV    |2     |\n|   |                     |9.10.3.47              |        |      |      |\n|47 |Universal time and   |Time zone and time     |O       |TV    |8     |\n|   |local time zone      |9.10.3.48              |        |      |      |\n|49 |Network daylight     |Daylight saving time   |O       |TLV   |3     |\n|   |saving time          |9.10.3.17              |        |      |      |\n|79 |LADN information     |LADN information       |O       |TLV-E |3-1707|\n|   |                     |9.10.3.27              |        |      |      |\n|B- |MICO indication      |MICO indication        |O       |TV    |1     |\n|   |                     |9.10.3.28              |        |      |      |\n|31 |Configured NSSAI     |NSSAI                  |O       |TLV   |4-146 |\n|   |                     |9.10.3.34              |        |      |      |\n|11 |Rejected NSSAI       |Rejected NSSAI         |O       |TLV   |4-42  |\n|   |                     |9.10.3.42              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Configuration update indication", "numbering": "8.2.19.2", "title_level": 3, "desc": "8.2.19.2 Configuration update indication\n\nThe AMF shall include this IE if the AMF wants to request an\nacknowledgement or a registration procedure from the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5G-GUTI", "numbering": "8.2.19.3", "title_level": 3, "desc": "8.2.19.3 5G-GUTI\n\nThis IE may be included to assign a new 5G GUTI to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "TAI list", "numbering": "8.2.19.4", "title_level": 3, "desc": "8.2.19.4 TAI list\n\nThis IE may be included to assign a new TAI list to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed NSSAI", "numbering": "8.2.19.5", "title_level": 3, "desc": "8.2.19.5 Allowed NSSAI\n\nThis IE may be included to assign a new allowed NSSAI to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service area list", "numbering": "8.2.19.6", "title_level": 3, "desc": "8.2.19.6 Service area list\n\nThis IE may be included to assign a new service area list to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Full name for network", "numbering": "8.2.19.7", "title_level": 3, "desc": "8.2.19.7 Full name for network\n\nThis IE may be included to assign a new full name for network to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Short name for network", "numbering": "8.2.19.8", "title_level": 3, "desc": "8.2.19.8 Short name for network\n\nThis IE may be included to assign a new short name for network to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Local time zone", "numbering": "8.2.19.9", "title_level": 3, "desc": "8.2.19.9 Local time zone\n\nThis IE may be included to assign a new local time zone to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Universal time and local time zone", "numbering": "8.2.19.10", "title_level": 3, "desc": "8.2.19.10   Universal time and local time zone\n\nThis IE may be included to assign new universal time and local time zone to\nthe UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network daylight saving time", "numbering": "8.2.19.11", "title_level": 3, "desc": "8.2.19.11   Network daylight saving time\n\nThis IE may be included to assign new network daylight saving time to the\nUE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LADN information", "numbering": "8.2.19.12", "title_level": 3, "desc": "8.2.19.12   LADN information\n\nThis IE may be included to assign new LADN information to the UE or delete\nthe LADN information at the UE side.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "MICO indication", "numbering": "8.2.19.13", "title_level": 3, "desc": "8.2.19.13   MICO indication\n\nThis IE may be included to assign a new MICO indication to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Configured NSSAI", "numbering": "8.2.19.14", "title_level": 3, "desc": "8.2.19.14   Configured NSSAI\n\nThe AMF shall include this IE if the AMF wants to provide the UE with a new\nconfigured NSSAI for the current PLMN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Rejected NSSAI", "numbering": "8.2.19.15", "title_level": 3, "desc": "8.2.19.15   Rejected NSSAI\n\nThe network may include this IE to inform the UE of the S-NSSAIs that were\npreviously sent to the UE in the allowed NSSAI, but are now rejected by the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Configuration update complete", "numbering": "8.2.20", "title_level": 2, "desc": "8.2.20 Configuration update complete\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.20.1", "title_level": 3, "desc": "8.2.20.1 Message definition\n\nThe CONFIGURATION UPDATE COMPLETE message is sent by the UE to the AMF. See\ntable\u00a08.2.20.1.1.\n\nMessage type: CONFIGURATION UPDATE COMPLETE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.20.1.1: CONFIGURATION UPDATE COMPLETE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Configuration update |Message type           |M       |V     |1     |\n|   |complete message     |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Identity request", "numbering": "8.2.21", "title_level": 2, "desc": "8.2.21 Identity request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.21.1", "title_level": 3, "desc": "8.2.21.1 Message definition\n\nThe IDENTITY REQUEST message is sent by the AMF to the UE to request the UE\nto provide specified identity. See table\u00a08.2.21.1.1\n\nMessage type: IDENTITY REQUEST\n\nSignificance:   dual\n\nDirection:      AMF to UE\n\nTable\u00a08.2.21.1.1: IDENTITY REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Identity request     |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |Identity type        |5GS identity type      |M       |V     |1/2   |\n|   |                     |9.10.3.3               |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Identity response", "numbering": "8.2.22", "title_level": 2, "desc": "8.2.22 Identity response\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.22.1", "title_level": 3, "desc": "8.2.22.1 Message definition\n\nThe IDENTITY RESPONSE message is sent by the UE to the AMF to provide the\nrequested identity. See table\u00a08.2.22.1.\n\nMessage type: IDENTITY RESPONSE\n\nSignificance:   dual\n\nDirection:      UE to AMF\n\nTable\u00a08.2.22.1.1: IDENTITY RESPONSE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Identity response    |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |Mobile identity      |5GS mobile identity    |M       |LV    |2-TBD |\n|   |                     |9.10.3.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Notification", "numbering": "8.2.23", "title_level": 2, "desc": "8.2.23 Notification\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.23.1", "title_level": 3, "desc": "8.2.23.1 Message definition\n\nThe NOTIFICATION message is sent by the AMF to the UE to notify the UE to\ninitiate a service request procedure. See table\u00a08.2.23.1.1.\n\nMessage type: NOTIFICATION\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.23.1.1: NOTIFICATION message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Notification message |Message type           |M       |V     |1     |\n|   |identity             |9.7                    |        |      |      |\n|   |Access type          |Access type            |M       |V     |1/2   |\n|   |                     |9.10.3.10              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Notification response", "numbering": "8.2.24", "title_level": 2, "desc": "8.2.24 Notification response\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.24.1", "title_level": 3, "desc": "8.2.24.1 Message definition\n\nThe NOTIFICATION RESPONSE message is sent by the UE to the AMF to notify\nthe failure to initiate the service request procedure as a response of\nnotification. See table\u00a08.2.24.1.1.\n\nMessage type: NOTIFICATION RESPONSE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.2341.1: NOTIFICATION RESPONSE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Notification response|Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|50 |PDU session status   |PDU session status     |O       |TLV   |4-34  |\n|   |                     |9.10.3.40              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "8.2.24.2", "title_level": 3, "desc": "8.2.24.2 PDU session status\n\nThis information element shall be included if the UE wants to indicate over\nnon-3GPP access type the PDU sessions associated with the 3GPP access type\nthat are active within the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Security mode command", "numbering": "8.2.25", "title_level": 2, "desc": "8.2.25 Security mode command\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.25.1", "title_level": 3, "desc": "8.2.25.1 Message definition\n\nThe SECURITY MODE COMMAND message is sent by the AMF to the UE to establish\nNAS signalling security. See table\u00a08.2.25.1.1.\n\nMessage type: SECURITY MODE COMMAND\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.2.25.1.1: SECURITY MODE COMMAND message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Security mode command|Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |Selected NAS security|NAS security algorithms|M       |V     |1     |\n|   |algorithms           |9.10.3.32              |        |      |      |\n|   |ngKSI                |NAS key set identifier |M       |V     |1/2   |\n|   |                     |9.10.3.29              |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Replayed UE security |UE security capability |M       |LV    |3-5   |\n|   |capabilities         |9.10.3.50              |        |      |      |\n|E- |IMEISV request       |IMEISV request         |O       |TV    |1     |\n|   |                     |9.10.3.26              |        |      |      |\n|4F |HashAMF              |HashAMF                |O       |TV    |9     |\n|   |                     |9.10.3.25              |        |      |      |\n|57 |Selected EPS NAS     |EPS NAS security       |O       |TV    |2     |\n|   |security algorithms  |algorithms             |        |      |      |\n|   |                     |9.10.3.23              |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7     |\n|   |                     |9.10.2.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IMEISV request", "numbering": "8.2.25.2", "title_level": 3, "desc": "8.2.25.2 IMEISV request\n\nThe AMF may include this information element to request the UE to send its\nIMEISV with the corresponding SECURITY MODE COMPLETE message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "HashAMF", "numbering": "8.2.25.3", "title_level": 3, "desc": "8.2.25.3 HashAMF\n\nThe AMF shall include this information element when the AMF is initiating a\nSECURITY MODE COMMAND during a registration procedure and the REGISTRATION\nREQUEST message did not successfully pass the integrity check at the AMF.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Selected EPS NAS security algorithms", "numbering": "8.2.25.4", "title_level": 3, "desc": "8.2.25.4 Selected EPS NAS security algorithms\n\nThis IE shall be included if the AMF does not support interworking\nprocedures without N26 interface and the UE set the S1 mode bit to \"S1 mode\nsupported\" in the 5GMM capability IE of the REGISTRATION REQUEST message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.2.25.5", "title_level": 3, "desc": "8.2.25.5 EAP message\n\nThis IE is included when the EAP Success message is sent as part of the EAP-\nbased primary authentication and key agreement procedure, as specified in\nsubclause\u00a05.4.1.2.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Security mode complete", "numbering": "8.2.26", "title_level": 2, "desc": "8.2.26 Security mode complete\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.26.1", "title_level": 3, "desc": "8.2.26.1 Message definition\n\nThe SECURITY MODE COMPLETE message is sent by the UE to the AMF in response\nto a SECURITY MODE COMMAND message. See table\u00a08.2.26.1.1.\n\nMessage type: SECURITY MODE COMPLETE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.26.1.1: SECURITY MODE COMPLETE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |Security mode        |Message type           |M       |V     |1     |\n|   |complete message     |9.6                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|2C |IMEISV               |5G mobile identity     |O       |TLV   |11    |\n|   |                     |9.10.3.4               |        |      |      |\n|7D |NAS message container|NAS message container  |O       |TLV-E |3-n   |\n|   |                     |9.10.3.31              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IMEISV", "numbering": "8.2.26.2", "title_level": 3, "desc": "8.2.26.2 IMEISV\n\nThe UE shall include this information element, if the IMEISV was requested\nwithin the corresponding SECURITY MODE COMMAND message.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS message container", "numbering": "8.2.26.3", "title_level": 3, "desc": "8.2.26.3 NAS message container\n\nThe UE shall include this information element:\n\na) if during an ongoing registration procedure, the AMF included HASHAMF in\nthe SECURITY MODE COMMAND message and HASHAMF has a different value from\nthe hash value locally calculated at the UE as described in\n3GPP\u00a0TS\u00a033.501\u00a0[24]; and\n\nb) when the UE has sent an initial NAS message with a limited set of IEs\nbefore the SECURITY MODE COMMAND message was received and the UE needs to\ninclude the complete initial NAS message in the SECURITY MODE COMPLETE\nmessage, as described in 3GPP\u00a0TS\u00a033.501\u00a0[24].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Security mode reject", "numbering": "8.2.27", "title_level": 2, "desc": "8.2.27 Security mode reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.6.27.1", "title_level": 3, "desc": "8.6.27.1 Message definition\n\nThe SECURITY MODE REJECT message is sent by the UE to the AMF to indicate\nthat the corresponding security mode command has been rejected. See\ntable\u00a08.2.27.1.1.\n\nMessage type: SECURITY MODE REJECT\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.2.27.1.1: SECURITY MODE REJECT message content\n\n|IEI|Information Element  |Type/Reference          |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol       |M       |V     |1     |\n|   |discriminator        |discriminator           |        |      |      |\n|   |                     |9.2                     |        |      |      |\n|   |Security header type |Security header type    |M       |V     |1/2   |\n|   |                     |9.3                     |        |      |      |\n|   |Spare half octet     |Spare half octet        |M       |V     |1/2   |\n|   |                     |9.5                     |        |      |      |\n|   |Security mode reject |Message type            |M       |V     |1     |\n|   |message identity     |9.6                     |        |      |      |\n|   |5GMM cause           |5GMM cause              |M       |V     |1     |\n|   |                     |9.10.3.2                |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Security protected 5GS NAS message", "numbering": "8.2.28", "title_level": 2, "desc": "8.2.28 Security protected 5GS NAS message\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.28.1", "title_level": 3, "desc": "8.2.28.1 Message definition\n\nThis message is sent by the UE or the network to transfer a NAS message\ntogether with the sequence number and the message authentication code\nprotecting the message. See table\u00a08.2.28.1.1.\n\nMessage type: SECURITY PROTECTED 5GS NAS MESSAGE\n\nSignificance:   dual\n\nDirection:      both\n\nTable\u00a08.2.28.1.1: SECURITY PROTECTED 5GS NAS MESSAGE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.4                    |        |      |      |\n|   |Message              |Message authentication |M       |V     |4     |\n|   |authentication code  |code                   |        |      |      |\n|   |                     |9.8                    |        |      |      |\n|   |Sequence number      |Sequence number        |M       |V     |1     |\n|   |                     |9.9                    |        |      |      |\n|   |NAS message          |NAS message            |M       |V     |3-n   |\n|   |                     |9.10.3.30              |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM status", "numbering": "8.2.29", "title_level": 2, "desc": "8.2.29 5GMM status\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.2.29.1", "title_level": 3, "desc": "8.2.29.1 Message definition\n\nThe 5GMM STATUS message is sent by the UE or by the AMF at any time to\nreport certain error conditions. See table\u00a08.2.28.1.1.\n\nMessage type: 5GMM STATUS\n\nSignificance:   local\n\nDirection:      both\n\nTable\u00a08.2.29.1.1: 5GMM STATUS message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |Security header type |Security header type   |M       |V     |1/2   |\n|   |                     |9.3                    |        |      |      |\n|   |Spare half octet     |Spare half octet       |M       |V     |1/2   |\n|   |                     |9.5                    |        |      |      |\n|   |5GMM STATUS message  |Message type           |M       |V     |1     |\n|   |identity             |9.7                    |        |      |      |\n|   |5GMM cause           |5GMM cause             |M       |V     |2     |\n|   |                     |9.10.3.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS session management messages", "numbering": "8.3", "title_level": 1, "desc": "8.3  5GS session management messages\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session establishment request", "numbering": "8.3.1", "title_level": 2, "desc": "8.3.1  PDU session establishment request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.1.1", "title_level": 3, "desc": "8.3.1.1  Message definition\n\nThe PDU SESSION ESTABLISHMENT REQUEST message is sent by the UE to the SMF\nto initiate establishment of a PDU session. See table\u00a08.3.1.1.1.\n\nMessage type: PDU SESSION ESTABLISHMENT REQUEST\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.1.1.1: PDU SESSION ESTABLISHMENT REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |ESTABLISHMENT REQUEST|9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|9- |PDU session type     |PDU session type       |O       |TV    |1     |\n|   |                     |9.10.4.8               |        |      |      |\n|A- |SSC mode             |SSC mode               |O       |TV    |1     |\n|   |                     |9.10.4.12              |        |      |      |\n|28 |5GSM capability      |5GSM capability        |O       |TLV   |3-15  |\n|   |                     |9.10.4.1               |        |      |      |\n|55 |Maximum number of    |Maximum number of      |O       |TV    |3     |\n|   |supported packet     |supported packet       |        |      |      |\n|   |filters              |filters                |        |      |      |\n|   |                     |9.10.4.6               |        |      |      |\n|TBD|SM PDU DN request    |SM PDU DN request      |O       |TBD   |TBD   |\n|   |container            |container              |        |      |      |\n|   |                     |9.10.4.11              |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session type", "numbering": "8.3.1.2", "title_level": 3, "desc": "8.3.1.2  PDU session type\n\nThis IE is included in the message when the UE requests to establish a new\nPDU session with a DN and requests a PDU session type.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SSC mode", "numbering": "8.3.1.3", "title_level": 3, "desc": "8.3.1.3  SSC mode\n\nThis IE is included in the message when the UE requests to establish a new\nPDU session with a DN and requests an SSC mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Maximum number of supported packet filters", "numbering": "8.3.1.4", "title_level": 3, "desc": "8.3.1.4  Maximum number of supported packet filters\n\nThis IE shall be included in the message when the selected PDU session type\nis \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\" and the UE can support more than\n16 packet filters for this PDU session.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM capability", "numbering": "8.3.1.5", "title_level": 3, "desc": "8.3.1.5  5GSM capability\n\nThis IE is included in the message when the UE requests to establish a new\nPDU session of \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\" PDU session type and\nthe UE supports Reflective QoS, or establish a new PDU session of \"IPv6\" or\n\"IPv4v6\" PDU session type and the UE supports acting as a type\u00a0C\u00a0host as\nspecified in IETF\u00a0RFC\u00a04191\u00a0[36].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SM PDU DN request container", "numbering": "8.3.1.6", "title_level": 3, "desc": "8.3.1.6  SM PDU DN request container\n\nThis IE is included in the message when the UE requests to establish a new\nPDU session with a DN and needs to provide information for the PDU session\nauthentication and authorization by the external DN.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.1.7", "title_level": 3, "desc": "8.3.1.7  Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session establishment accept", "numbering": "8.3.2", "title_level": 2, "desc": "8.3.2  PDU session establishment accept\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.2.1", "title_level": 3, "desc": "8.3.2.1  Message definition\n\nThe PDU SESSION ESTABLISHMENT ACCEPT message is sent by the SMF to the UE\nin response to PDU SESSION ESTABLISHMENT REQUEST message and indicates\nsuccessful establishment of a PDU session. See table\u00a08.3.2.1.1.\n\nMessage type: PDU SESSION ESTABLISHMENT ACCEPT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.2.1.1: PDU SESSION ESTABLISHMENT ACCEPT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |ESTABLISHMENT ACCEPT |9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|   |Selected PDU session |PDU session type       |M       |V     |1/2   |\n|   |type                 |9.10.4.8               |        |      |      |\n|   |Selected SSC mode    |SSC mode               |M       |V     |1/2   |\n|   |                     |9.10.4.12              |        |      |      |\n|   |DNN                  |DNN                    |M       |LV    |2-TBD |\n|   |                     |9.10.3.19              |        |      |      |\n|   |Authorized QoS rules |QoS rules              |M       |LV-E  |7-6553|\n|   |                     |9.10.4.9               |        |      |8     |\n|   |Session AMBR         |Session-AMBR           |M       |LV    |TBD   |\n|   |                     |9.10.4.10              |        |      |      |\n|59 |5GSM cause           |5GSM cause             |O       |TV    |2     |\n|   |                     |9.10.4.2               |        |      |      |\n|29 |PDU address          |PDU address            |O       |TLV   |7, 11 |\n|   |                     |9.10.4.7               |        |      |or 15 |\n|56 |RQ timer value       |GPRS timer             |O       |TV    |2     |\n|   |                     |9.10.2.3               |        |      |      |\n|22 |S-NSSAI              |S-NSSAI                |O       |TLV   |3-10  |\n|   |                     |9.10.2.6               |        |      |      |\n|7F |Mapped EPS bearer    |Mapped EPS bearer      |O       |TLV-E |7-6553|\n|   |contexts             |contexts               |        |      |8     |\n|   |                     |9.10.4.6               |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM cause", "numbering": "8.3.2.2", "title_level": 3, "desc": "8.3.2.2  5GSM cause\n\nThis IE is included when the selected PDU session type is different from\nthe PDU session type requested by the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU address", "numbering": "8.3.2.3", "title_level": 3, "desc": "8.3.2.3  PDU address\n\nThis IE is included when the selected PDU session type is \"IPv4\", \"IPv6\" or\n\"IPv4v6\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "RQ timer value", "numbering": "8.3.2.4", "title_level": 3, "desc": "8.3.2.4  RQ timer value\n\nThis IE is included when the network wants to provide the RQ timer value.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S-NSSAI", "numbering": "8.3.2.5", "title_level": 3, "desc": "8.3.2.5  S-NSSAI\n\nThis IE shall be included in the message when the SMF received from the AMF\nan S-NSSAI together with the PDU SESSION ESTABLISHMENT REQUEST message, and\nthe PDU session is a non-emergency PDU session.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mapped EPS bearer contexts", "numbering": "8.3.2.6", "title_level": 3, "desc": "8.3.2.6  Mapped EPS bearer contexts\n\nThis IE is included when interworking to EPS is supported for the PDU\nsession context.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.3.2.7", "title_level": 3, "desc": "8.3.2.7  EAP message\n\nThis IE is included when the external DN successfully performed\nauthentication and authorization of the UE using EAP.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.2.8", "title_level": 3, "desc": "8.3.2.8  Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session establishment reject", "numbering": "8.3.3", "title_level": 2, "desc": "8.3.3  PDU session establishment reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.3.1", "title_level": 3, "desc": "8.3.3.1  Message definition\n\nThe PDU SESSION ESTABLISHMENT REJECT message is sent by the SMF to the UE\nin response to PDU SESSION ESTABLISHMENT REQUEST message and indicates\nunsuccessful establishment of a PDU session. See table\u00a08.3.3.1.1.\n\nMessage type: PDU SESSION ESTABLISHMENT REJECT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.3.1.1: PDU SESSION ESTABLISHMENT REJECT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |ESTABLISHMENT REJECT |9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|   |5GSM cause           |5GSM cause             |M       |V     |1     |\n|   |                     |9.10.4.2               |        |      |      |\n|37 |Back-off timer value |GPRS timer 3           |O       |TLV   |3     |\n|   |                     |9.10.2.5               |        |      |      |\n|F- |Allowed SSC mode     |Allowed SSC mode       |O       |TV    |1     |\n|   |                     |9.10.4.3               |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Back-off timer value", "numbering": "8.3.3.2", "title_level": 3, "desc": "8.3.3.2  Back-off timer value\n\nThe network may include this IE to request a minimum time interval before\nprocedure retry is allowed.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed SSC mode", "numbering": "8.3.3.3", "title_level": 3, "desc": "8.3.3.3  Allowed SSC mode\n\nThis IE is included when the network rejects the PDU SESSION ESTABLISHMENT\nREQUEST with cause #68 \"not supported SSC mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.3.3.4", "title_level": 3, "desc": "8.3.3.4  EAP message\n\nThis IE is included when the external DN unsuccessfully performed\nauthentication and authorization of the UE using EAP.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.3.5", "title_level": 3, "desc": "8.3.3.5  Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session authentication command", "numbering": "8.3.4", "title_level": 2, "desc": "8.3.4  PDU session authentication command\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.4.1", "title_level": 3, "desc": "8.3.4.1  Message definition\n\nThe PDU SESSION AUTHENTICATION COMMAND message is sent by the SMF to the UE\nfor authentication of the UE establishing the PDU session or of the UE\nparticipating in the PDU session. See table\u00a08.3.4.1.1.\n\nMessage type: PDU SESSION AUTHENTICATION COMMAND\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.4.1.1: PDU SESSION AUTHENTICATION COMMAND message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |AUTHENTICATION       |9.7                    |        |      |      |\n|   |COMMAND message      |                       |        |      |      |\n|   |identity             |                       |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.3.4.2", "title_level": 3, "desc": "8.3.4.2  EAP message\n\nThis IE is included when the external DN performs authentication and\nauthorization of the UE using EAP.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.4.3", "title_level": 3, "desc": "8.3.4.3  Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session authentication complete", "numbering": "8.3.5", "title_level": 2, "desc": "8.3.5  PDU session authentication complete\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.5.1", "title_level": 3, "desc": "8.3.5.1  Message definition\n\nThe PDU SESSION AUTHENTICATION COMPLETE message is sent by the UE to the\nSMF in response to the PDU SESSION AUTHENTICATION COMMAND message and\nindicates acceptance of the PDU SESSION AUTHENTICATION COMMAND message. See\ntable\u00a08.3.5.1.1.\n\nMessage type: PDU SESSION AUTHENTICATION COMPLETE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.5.1.1: PDU SESSION AUTHENTICATION COMPLETE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |AUTHENTICATION       |9.7                    |        |      |      |\n|   |COMPLETE message     |                       |        |      |      |\n|   |identity             |                       |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.3.5.2", "title_level": 3, "desc": "8.3.5.2  EAP message\n\nThis IE is included when the external DN performs authentication and\nauthorization of the UE using EAP.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.5.3", "title_level": 3, "desc": "8.3.5.3  Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session authentication result", "numbering": "8.3.6", "title_level": 2, "desc": "8.3.6  PDU session authentication result\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.6.1", "title_level": 3, "desc": "8.3.6.1  Message definition\n\nThe PDU SESSION AUTHENTICATION RESULT message is sent by the SMF to the UE\nfor indication of successful result of authentication of the UE\nparticipating in the PDU session. See table\u00a08.3.6.1.1.\n\nMessage type: PDU SESSION AUTHENTICATION RESULT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.6.1.1: PDU SESSION AUTHENTICATION RESULT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |AUTHENTICATION RESULT|9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.3.6.2", "title_level": 3, "desc": "8.3.6.2  EAP message\n\nThis IE is included when the external DN performs authentication and\nauthorization of the UE using EAP and it completes successfully.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.6.3", "title_level": 3, "desc": "8.3.6.3  Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session modification request", "numbering": "8.3.7", "title_level": 2, "desc": "8.3.7  PDU session modification request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.7.1", "title_level": 3, "desc": "8.3.7.1  Message definition\n\nThe PDU SESSION MODIFICATION REQUEST message is sent by the UE to the SMF\nto request a modification of a PDU session. See table\u00a08.3.7.1.1.\n\nMessage type: PDU SESSION MODIFICATION REQUEST\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.7.1.1: PDU SESSION MODIFICATION REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |MODIFICATION REQUEST |9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|28 |5GSM capability      |5GSM capability        |O       |TLV   |3-15  |\n|   |                     |9.10.4.1               |        |      |      |\n|55 |Maximum number of    |Maximum number of      |O       |TV    |3     |\n|   |supported packet     |supported packet       |        |      |      |\n|   |filters              |filters                |        |      |      |\n|   |                     |9.10.4.6               |        |      |      |\n|7A |Requested QoS rules  |QoS rules              |O       |TLV-E |3-6553|\n|   |                     |9.10.4.9               |        |      |8     |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM capability", "numbering": "8.3.7.2", "title_level": 3, "desc": "8.3.7.2  5GSM capability\n\nThis IE is included in the message after inter-system change from S1 mode\nto N1 mode:\n\na) if the PDU session is of \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\" PDU\nsession type, and the UE supports reflective QoS or revokes the previously\nindicated support of reflective QoS; or\n\nb) if the PDU session is of \"IPv6\" or \"IPv4v6\" PDU session type, and the UE\nsupports acting as a type\u00a0C\u00a0host as specified in IETF\u00a0RFC\u00a04191\u00a0[36].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Maximum number of supported packet filters", "numbering": "8.3.7.3", "title_level": 3, "desc": "8.3.7.3  Maximum number of supported packet filters\n\nThis IE shall be included in the message when the selected PDU session type\nis \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\", the UE can support more than 16\npacket filters for this PDU session, and the UE is sending the message\nafter an inter-system change from S1 mode to N1 mode.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Requested QoS rules", "numbering": "8.3.7.4", "title_level": 3, "desc": "8.3.7.4  Requested QoS rules\n\nThis IE is included in the message when the UE requests a specific QoS\nhandling.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.7.5", "title_level": 3, "desc": "8.3.7.5  Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session modification reject", "numbering": "8.3.8", "title_level": 2, "desc": "8.3.8  PDU session modification reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.8.1", "title_level": 3, "desc": "8.3.8.1  Message definition\n\nThe PDU SESSION MODIFICATION REJECT message is sent by the SMF to the UE to\nindicate rejection of the PDU SESSION MODIFICATION REQUEST. See\ntable\u00a08.3.8.1.1.\n\nMessage type: PDU SESSION MODIFICATION REJECT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.8.1.1: PDU SESSION MODIFICATION REJECT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |MODIFICATION REJECT  |9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|   |5GSM cause           |5GSM cause             |M       |V     |1     |\n|   |                     |9.10.4.2               |        |      |      |\n|37 |Back-off timer value |GPRS timer 3           |O       |TLV   |3     |\n|   |                     |9.10.2.5               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Back-off timer value", "numbering": "8.3.8.2", "title_level": 3, "desc": "8.3.8.2  Back-off timer value\n\nThe network may include this IE to request a minimum time interval before\nprocedure retry is allowed.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.8.3", "title_level": 3, "desc": "8.3.8.3  Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session modification command", "numbering": "8.3.9", "title_level": 2, "desc": "8.3.9  PDU session modification command\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.9.1", "title_level": 3, "desc": "8.3.9.1  Message definition\n\nThe PDU SESSION MODIFICATION COMMAND message is sent by the SMF to the UE\nto indicate a modification of a PDU session. See table\u00a08.3.9.1.1\n\nMessage type: PDU SESSION MODIFICATION COMMAND\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.9.1.1: PDU SESSION MODIFICATION COMMAND message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |MODIFICATION COMMAND |9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|59 |5GSM cause           |5GSM cause             |O       |TV    |2     |\n|   |                     |9.10.4.2               |        |      |      |\n|2A |Session AMBR         |Session-AMBR           |O       |TLV   |8     |\n|   |                     |9.10.4.10              |        |      |      |\n|56 |RQ timer value       |GPRS timer             |O       |TV    |2     |\n|   |                     |9.10.2.3               |        |      |      |\n|7A |Authorized QoS rules |QoS rules              |O       |TLV-E |7-6553|\n|   |                     |9.10.4.9               |        |      |8     |\n|7F |Mapped EPS bearer    |Mapped EPS bearer      |O       |TLV-E |7-6553|\n|   |contexts             |contexts               |        |      |8     |\n|   |                     |9.10.4.5               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM cause", "numbering": "8.3.9.2", "title_level": 3, "desc": "8.3.9.2  5GSM cause\n\nThis IE is included when the network performs the PDU session anchor\nrelocation for SSC mode 3.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Session-AMBR", "numbering": "8.3.9.3", "title_level": 3, "desc": "8.3.9.3  Session-AMBR\n\nThis IE is included when the session-AMBR of the PDU session is modified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "RQ timer value", "numbering": "8.3.9.4", "title_level": 3, "desc": "8.3.9.4  RQ timer value\n\nThis IE is included when the network wants to provide the RQ timer value.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authorized QoS rules", "numbering": "8.3.9.5", "title_level": 3, "desc": "8.3.9.5  Authorized QoS rules\n\nThis IE is included when the authorized QoS rules of the PDU session are\nmodified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mapped EPS bearer contexts", "numbering": "8.3.9.6", "title_level": 3, "desc": "8.3.9.6  Mapped EPS bearer contexts\n\nThis IE is included when interworking to EPS is supported for the PDU\nsession context and the mapped EPS bearer contexts is modified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.9.7", "title_level": 3, "desc": "8.3.9.7  Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session modification complete", "numbering": "8.3.10", "title_level": 2, "desc": "8.3.10 PDU session modification complete\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.10.1", "title_level": 3, "desc": "8.3.10.1 Message definition\n\nThe PDU SESSION MODIFICATION COMPLETE message is sent by the UE to the SMF\nin response to the PDU SESSION MODIFICATION COMMAND message and indicates\nan acceptance of the PDU SESSION MODIFICATION COMMAND message. See\ntable\u00a08.3.10.1.1.\n\nMessage type: PDU SESSION MODIFICATION COMPLETE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.10.1.1: PDU SESSION MODIFICATION COMPLETE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |MODIFICATION COMPLETE|9.7                    |        |      |      |\n|   |message identity     |                       |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.10.2", "title_level": 3, "desc": "8.3.10.2 Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session modification command reject", "numbering": "8.3.11", "title_level": 2, "desc": "8.3.11 PDU session modification command reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.11.1", "title_level": 3, "desc": "8.3.11.1 Message definition\n\nThe PDU SESSION MODIFICATION COMMAND REJECT message is sent by the UE to\nthe SMF to indicate rejection of the PDU SESSION MODIFICATION COMMAND\nmessage. See table\u00a08.3.11.1.1.\n\nMessage type: PDU SESSION MODIFICATION COMMAND REJECT\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.11.1.1: PDU SESSION MODIFICATION COMMAND REJECT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION          |Message type           |M       |V     |1     |\n|   |MODIFICATION COMMAND |9.7                    |        |      |      |\n|   |REJECT message       |                       |        |      |      |\n|   |identity             |                       |        |      |      |\n|   |5GSM cause           |5GSM cause             |M       |V     |1     |\n|   |                     |9.10.4.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.11.2", "title_level": 3, "desc": "8.3.11.2 Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session release request", "numbering": "8.3.12", "title_level": 2, "desc": "8.3.12 PDU session release request\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.12.1", "title_level": 3, "desc": "8.3.12.1 Message definition\n\nThe PDU SESSION RELEASE REQUEST message is sent by the UE to the SMF to\nrequest a release of a PDU session. See table\u00a08.3.12.1.1.\n\nMessage type: PDU SESSION RELEASE REQUEST\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.12.1.1: PDU SESSION RELEASE REQUEST message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION RELEASE  |Message type           |M       |V     |1     |\n|   |REQUEST message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.12.2", "title_level": 3, "desc": "8.3.12.2 Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session release reject", "numbering": "8.3.13", "title_level": 2, "desc": "8.3.13 PDU session release reject\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.13.1", "title_level": 3, "desc": "8.3.13.1 Message definition\n\nThe PDU SESSION RELEASE REJECT message is sent by the SMF to the UE to\nindicate rejection of request a release of a PDU session. See\ntable\u00a08.3.13.1.1.\n\nMessage type: PDU SESSION RELEASE REJECT\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.13.1.1: PDU SESSION RELEASE REJECT message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU RELEASE REJECT   |Message type           |M       |V     |1     |\n|   |message identity     |9.7                    |        |      |      |\n|   |5GSM cause           |5GSM cause             |M       |V     |1     |\n|   |                     |9.10.4.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.13.2", "title_level": 3, "desc": "8.3.13.2 Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session release command", "numbering": "8.3.14", "title_level": 2, "desc": "8.3.14 PDU session release command\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.14.1", "title_level": 3, "desc": "8.3.14.1 Message definition\n\nThe PDU SESSION RELEASE COMMAND message is sent by the SMF to the UE to\nindicate a release of a PDU session. See table\u00a08.3.14.1.1.\n\nMessage type: PDU SESSION RELEASE COMMAND\n\nSignificance:   dual\n\nDirection:      network to UE\n\nTable\u00a08.3.14.1.1: PDU SESSION RELEASE COMMAND message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION RELEASE  |Message type           |M       |V     |1     |\n|   |COMMAND message      |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|   |5GSM cause           |5GSM cause             |M       |V     |1     |\n|   |                     |9.10.4.2               |        |      |      |\n|37 |Back-off timer value |GPRS timer 3           |O       |TLV   |3     |\n|   |                     |9.10.2.5               |        |      |      |\n|78 |EAP message          |EAP message            |O       |TLV-E |7-1503|\n|   |                     |9.10.2.2               |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Back-off timer value", "numbering": "8.3.14.2", "title_level": 3, "desc": "8.3.14.2 Back-off timer value\n\nThe network may include this IE to request a minimum time interval before\nprocedure retry is allowed.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "8.3.14.3", "title_level": 3, "desc": "8.3.14.3 EAP message\n\nThis IE is included when the external DN performs re-authentication and re-\nauthorization of the UE using EAP and it completes unsuccessfully.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.14.4", "title_level": 3, "desc": "8.3.14.4 Extended protocol configuration options\n\nThis IE is included in the message when the network wants to transmit\n(protocol) data (e.g. configuration parameters, error codes or\nmessages/events) to the UE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session release complete", "numbering": "8.3.15", "title_level": 2, "desc": "8.3.15 PDU session release complete\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.15.1", "title_level": 3, "desc": "8.3.15.1 Message definition\n\nThe PDU SESSION RELEASE COMPLETE message is sent by the UE to the SMF in\nresponse to the PDU SESSION RELEASE COMMAND message and indicates an\nacceptance of a release of the PDU session. See table\u00a08.3.15.1.1.\n\nMessage type: PDU SESSION RELEASE COMPLETE\n\nSignificance:   dual\n\nDirection:      UE to network\n\nTable\u00a08.3.15.1.1: PDU SESSION RELEASE COMPLETE message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |PDU SESSION RELEASE  |Message type           |M       |V     |1     |\n|   |COMPLETE message     |9.7                    |        |      |      |\n|   |identity             |                       |        |      |      |\n|7B |Extended protocol    |Extended protocol      |O       |TLV-E |4-6553|\n|   |configuration options|configuration options  |        |      |8     |\n|   |                     |9.10.4.4               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "8.3.15.2", "title_level": 3, "desc": "8.3.15.2 Extended protocol configuration options\n\nThis IE is included in the message when the UE wants to transmit (protocol)\ndata (e.g. configuration parameters, error codes or messages/events) to the\nnetwork.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM status", "numbering": "8.3.16", "title_level": 2, "desc": "8.3.16 5GSM status\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message definition", "numbering": "8.3.16.1", "title_level": 3, "desc": "8.3.16.1 Message definition\n\nThe 5GSM STATUS message is sent by the SMF or the UE to pass information on\nthe status of the indicated PDU session and report certain error\nconditions. See table\u00a08.3.16.1.1.\n\nMessage type: 5GSM STATUS\n\nSignificance:   dual\n\nDirection:      both\n\nTable\u00a08.3.16.1.1: 5GSM STATUS message content\n\n|IEI|Information Element  |Type/Reference         |Presence|Format|Length|\n|   |Extended protocol    |Extended protocol      |M       |V     |1     |\n|   |discriminator        |discriminator          |        |      |      |\n|   |                     |9.2                    |        |      |      |\n|   |PDU session ID       |PDU session identity   |M       |V     |1     |\n|   |                     |9.4                    |        |      |      |\n|   |PTI                  |Procedure transaction  |M       |V     |1     |\n|   |                     |identity               |        |      |      |\n|   |                     |9.6                    |        |      |      |\n|   |5GSM STATUS message  |Message type           |M       |V     |1     |\n|   |identity             |9.7                    |        |      |      |\n|   |5GSM cause           |5GSM cause             |M       |V     |1     |\n|   |                     |9.10.4.2               |        |      |      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General message format and information elements coding", "numbering": "9", "title_level": 0, "desc": "9  General message format and information elements coding\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Overview", "numbering": "9.1", "title_level": 1, "desc": "9.1  Overview\n\nWithin the protocols defined in the present document, every 5GS NAS message\nis a standard L3 message as defined in 3GPP\u00a0TS\u00a024.007\u00a0[11]. This means that\nthe message consists of the following parts:\n\n1) if the message is a plain 5GS NAS message:\n\na) extended protocol discriminator;\n\nb) security header type or PDU session identity;\n\nc) procedure transaction identity;\n\nd) message type;\n\ne) other information elements, as required.\n\n2) if the message is a security protected 5GS NAS message:\n\na) extended protocol discriminator;\n\nb) security header type;\n\nc) message authentication code;\n\nd) sequence number;\n\ne) plain 5GS NAS message, as defined in item\u00a01\n\nThe organization of a plain 5GS NAS message is illustrated in the example\nshown in figure\u00a0.9.1.1.\n\n\n\n|8                                          |7       |\n|Security header type associated with a     |octet 2 |\n|spare half octet; or                       |        |\n|PDU session identity                       |        |\n|Procedure transaction identity             |octet   |\n|                                           |2a*     |\n|Message type                               |octet 3 |\n|                                           |octet 4 |\n|Other information elements as required     |        |\n|                                           |octet n |\n\n\nFigure\u00a0.9.1.1: General message organization example for a plain 5GS NAS\nmessage\n\nThe PDU session identity and the procedure transaction identity are only\nused in messages with extended protocol discriminator 5GS session\nmanagement. Octet 2a with the procedure transaction identity shall only be\nincluded in these messages.\n\nThe organization of a security protected 5GS NAS message is illustrated in\nthe example shown in figure\u00a09.1.2.\n\n\n\n|8                                          |7       |\n|Security header type associated with a     |octet 2 |\n|spare half octet                           |        |\n|                                           |octet 3 |\n|Message authentication code                |        |\n|                                           |        |\n|                                           |octet 6 |\n|Sequence number                            |octet 7 |\n|                                           |octet 8 |\n|Plain 5GS NAS message                      |        |\n|                                           |octet n |\n\n\nFigure\u00a09.1.2: General message organization example for a security protected\n5GS NAS message\n\nUnless specified otherwise in the message descriptions of clause\u00a08 and\nclause\u00a09, a particular information element shall not be present more than\nonce in a given message.\n\nWhen a field extends over more than one octet, the order of bit values\nprogressively decreases as the octet number increases. The most significant\nbit of the field is represented by the highest numbered bit of the lowest\nnumbered octet of the field. The least significant bit of the field is\nrepresented by the lowest numbered bit of the highest numbered octet of the\nfield.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol discriminator", "numbering": "9.2", "title_level": 1, "desc": "9.2  Extended protocol discriminator\n\nBits 1 to 8 of the first octet of every 5GS NAS message contain the\nExtended protocol discriminator (EPD) IE. The EPD and its use are defined\nin 3GPP\u00a0TS\u00a024.007\u00a0[11]. The extended protocol discriminator in the header\n(see 3GPP\u00a0TS\u00a024.007\u00a0[11]) of a security protected 5GS NAS message is\nencoded as \"5GS mobility management messages\".\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Security header type", "numbering": "9.3", "title_level": 1, "desc": "9.3  Security header type\n\nBits 1 to 4 of the second octet of every 5GMM message contain the Security\nheader type IE. This IE includes control information related to the\nsecurity protection of a 5GMM message. The total size of the Security\nheader type IE is 4 bits.\n\nThe Security header type IE can take the values shown in table\u00a09.3.1.\n\nTable\u00a09.3.1: Security header type\n\n|Security header type (octet 1)                        |\n|                                                      |\n|Bits                                                  |\n|4|3|2|1|                                              |\n|0|0|0|0|Plain 5GS NAS message, not security protected |\n| | | | |                                              |\n| | | | |Security protected 5GS NAS message:           |\n|0|0|0|1|Integrity protected                           |\n|0|0|1|0|Integrity protected and ciphered              |\n|0|0|1|1|Integrity protected with new 5G NAS security  |\n| | | | |context (NOTE\u00a01)                              |\n|0|1|0|0|Integrity protected and ciphered with new 5G  |\n| | | | |NAS security context (NOTE\u00a02)                 |\n| | | | |                                              |\n|All other values are reserved.                        |\n|                                                      |\n|NOTE\u00a01: This codepoint may be used only for a SECURITY|\n|MODE COMMAND message.                                 |\n|NOTE\u00a02: This codepoint may be used only for a SECURITY|\n|MODE COMPLETE message.                                |\n\n\nAn 5GMM message received with the security header type encoded as 0000\nshall be treated as not security protected, plain 5GS NAS message. A\nprotocol entity sending a not security protected 5GMM message shall send\nthe message as plain 5GS NAS message and encode the security header type as\n0000.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session identity", "numbering": "9.4", "title_level": 1, "desc": "9.4  PDU session identity\n\nBits 1 to 8 of the second octet of every 5GSM message contain the PDU\nsession identity IE. The PDU session identity and its use to identify a\nmessage flow are defined in 3GPP\u00a0TS\u00a024.007\u00a0[11].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Spare half octet", "numbering": "9.5", "title_level": 1, "desc": "9.5  Spare half octet\n\nThis element is used in the description of 5GMM and 5GSM messages when an\nodd number of half octet type 1 information elements are used. This element\nis filled with spare bits set to zero and is placed in bits 5 to 8 of the\noctet unless otherwise specified.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Procedure transaction identity", "numbering": "9.6", "title_level": 1, "desc": "9.6  Procedure transaction identity\n\nBits 1 to 8 of the third octet of every 5GSM message contain the procedure\ntransaction identity. The procedure transaction identity and its use are\ndefined in 3GPP\u00a0TS\u00a024.007\u00a0[11].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message type", "numbering": "9.7", "title_level": 1, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Message authentication code", "numbering": "9.8", "title_level": 1, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Sequence number", "numbering": "9.9", "title_level": 1, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Other information elements", "numbering": "9.10", "title_level": 1, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "9.10.1", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Common information elements", "numbering": "9.10.2", "title_level": 2, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Additional information", "numbering": "9.10.2.1", "title_level": 3, "desc": "9.7  Message type\n\nThe Message type IE and its use are defined in 3GPP\u00a0TS\u00a024.007\u00a0[11].\nTables\u00a09.7.1 and 9.7.2 define the value part of the message type IE used in\nthe 5GS mobility management protocol and 5GS session management protocol.\n\nTable\u00a09.7.1: Message types for 5GS mobility management\n\n|Bits             | |                              |\n|8                |7|6                             |\n|8                                             |7          |\n|Additional information length                 |octet 2    |\n|Additional information value                  |octets 3-n |\n\n\nFigure\u00a09.10.2.1.1: Additional information information element\n\nTable\u00a09.10.2.1.1\u00a0: Additional information information element\n\n|Additional information value (octet 3 to octet n)     |\n|                                                      |\n|The coding of the additional information value is     |\n|dependent on the LCS application.                     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP message", "numbering": "9.10.2.2", "title_level": 3, "desc": "9.10.2.2 EAP message\n\nThe purpose of the EAP message information element is to transport an EAP\nmessage as specified in IETF\u00a0RFC\u00a03748\u00a0[34].\n\nThe EAP message information element is coded as shown in figure\u00a09.10.2.2.1\nand table\u00a09.10.2.2.1.\n\nThe EAP message is a type 6 information element with minimum length of 7\noctets and maximum length of 1503 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|EAP message IEI                            |octet 1 |\n|                                           |octet 2 |\n|Length of EAP message contents             |        |\n|                                           |octet 3 |\n|                                           |octet 4 |\n|EAP message                                |        |\n|                                           |octet n |\n\n\nFigure\u00a09.10.2.2.1: EAP message information element\n\nTable\u00a09.10.2.2.1: EAP message information element\n\n|EAP message (octet 4 to n)                            |\n|An EAP message as specified in IETF\u00a0RFC\u00a03748\u00a0[34].    |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "GPRS timer", "numbering": "9.10.2.3", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "GPRS timer 2", "numbering": "9.10.2.4", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "GPRS timer 3", "numbering": "9.10.2.5", "title_level": 3, "desc": "9.10.2.3 GPRS timer\n\nSee subclause\u00a010.5.7.3 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n9.10.2.4 GPRS timer 2\n\nSee subclause\u00a010.5.7.4 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n9.10.2.5 GPRS timer 3\n\nSee subclause\u00a010.5.7.4a in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S-NSSAI", "numbering": "9.10.2.6", "title_level": 3, "desc": "9.10.2.6 S-NSSAI\n\nThe purpose of the S-NSSAI information element is to identify a network\nslice.\n\nThe S-NSSAI information element is coded as shown in figure\u00a09.8.2.6.1 and\ntable\u00a09.8.2.6.1.\n\nThe S-NSSAI is a type 4 information element with a minimum length of 3\noctets and a maximum length of 10 octets.\n\n|8                                          |7          |\n|Length of S-NSSAI contents                 |octet 2    |\n|SST                                        |octet 3    |\n|                                           |octet 4*   |\n|SD                                         |           |\n|                                           |octet 6*   |\n|Mapped configured SST                      |octet 7*   |\n|                                           |octet 8*   |\n|Mapped configured SD                       |           |\n|                                           |octet 10*  |\n\n\nFigure\u00a09.10.2.6.1: S-NSSAI information element\n\nTable\u00a09.10.2.6.1: S-NSSAI information element\n\n|Slice/service type (SST) (octet 3)                    |\n|                                                      |\n|This field contains the 8 bit SST value. The coding of|\n|the SST value part is defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].  |\n|Slice differentiator (SD) (octet 4 to octet 6)        |\n|                                                      |\n|This field contains the 24 bit SD value. The coding of|\n|the SD value part is defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].   |\n|mapped configured Slice/service type (SST) (octet 7)  |\n|                                                      |\n|This field contains the 8 bit SST value of an S-NSSAI |\n|in the configured NSSAI for the HPLMN to which the SST|\n|value is mapped. The coding of the SST value part is  |\n|defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].                        |\n|mapped configured Slice differentiator (SD) (octet 8  |\n|to octet 10)                                          |\n|                                                      |\n|This field contains the 24 bit SD value of an S-NSSAI |\n|in the configured NSSAI for the HPLMN to which the SD |\n|value is mapped. The coding of the SD value part is   |\n|defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].                        |\n|NOTE\u00a01: Octet 3 shall always be included.             |\n|NOTE\u00a02: If the octet 4 is included, then octet 5 and  |\n|octet 6 shall be included.                            |\n|NOTE\u00a03: If the octet 7 is included, then octets 8, 9, |\n|and 10 may be included.                               |\n|NOTE\u00a04: If the octet 8 is included, then octet 9 and  |\n|octet 10 shall be included.                           |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S1 mode to N1 mode NAS transparent container", "numbering": "9.10.2.7", "title_level": 3, "desc": "9.10.2.7 S1 mode to N1 mode NAS transparent container\n\nThe purpose of the S1 mode to N1 mode NAS transparent container information\nelement is to provide the UE with parameters that enable the UE to create a\nmapped 5G NAS security context and take this context into use after inter-\nsystem change to N1 mode in 5GMM-CONNECTED mode.\n\nThe S1 mode to N1 mode NAS transparent container information element is\ncoded as shown in figure\u00a09.10.2.7.1 and table\u00a09.0.2.7.1.\n\nThe S1 mode to N1 mode NAS transparent container is a type 4 information\nelement with a minimum length of 10 octets and a maximum length of 12\noctets.\n\nOctets 11 and 12 are optional. If octet 11 is included, then also octet 12\nshall be included.\n\nThe value part of the S1 mode to N1 mode NAS transparent container\ninformation element is included in specific information elements within\nsome RRC messages sent to the UE.\n\nNOTE:  For these cases the coding of the information element identifier and\nlength information of RRC is defined in 3GPP\u00a0TS\u00a038.331\u00a0[30].\n\n\n|8                                             |7          |\n|Length of S1 mode to N1 mode NAS transparent  |octet 2    |\n|container contents                            |           |\n|                                              |octet 3    |\n|Message authentication code                   |           |\n|                                              |octet 6    |\n|Type of ciphering     |Type of integrity     |           |\n|algorithm             |protection algorithm  |octet 7    |\n|NAS count             |TSC  |Key set         |           |\n|                      |     |identifier in 5G|octet 8    |\n|                      |     |                |           |\n|                                              |octet 9    |\n|5G UE security capability                     |           |\n|                                              |octet 10   |\n|                                              |octet 11*  |\n|EPS UE security capability                    |           |\n|                                              |octet 12*  |\n\nFigure\u00a09.10.2.7.1: S1 mode to N1 mode NAS transparent container information\nelement\n\nTable\u00a09.10.2.7.1: S1 mode to N1 mode NAS transparent container information\nelement\n\n|Message authentication code (octet 2 to 5)            |\n|                                                      |\n|This field is coded as the Message authentication code|\n|information element (see subclause\u00a09.8.3.28).         |\n|                                                      |\n|Type of integrity protection algorithm (octet 6, bit 1|\n|to 4) and                                             |\n|type of ciphering algorithm (octet 6, bit 5 to 8)     |\n|                                                      |\n|These fields are coded as the type of integrity       |\n|protection algorithm and type of ciphering algorithm  |\n|in the NAS security algorithms information element    |\n|(see subclause\u00a09.8.3.32).                             |\n|                                                      |\n|NAS count (octet 7, bits 5 to 8)                      |\n|                                                      |\n|This field is coded as the 4 LSB of the Sequence      |\n|number information element (see subclause\u00a09.8.3.48)   |\n|                                                      |\n|Key set identifier in 5G (octet 7, bit 1 to 3) and    |\n|type of security context flag (TSC) (octet 7, bit 4)  |\n|                                                      |\n|These fields are coded as the NAS key set identifier  |\n|and type of security context flag in the NAS key set  |\n|identifier information element (see                   |\n|subclause\u00a09.8.3.29).                                  |\n|                                                      |\n|5G UE security capability (octets 9 to 10)            |\n|                                                      |\n|This field is coded as octets 3 and 4 of the UE       |\n|security capability information element (see          |\n|subclause\u00a09.8.3.57).                                  |\n|                                                      |\n|EPS UE security capability (octets 11 to 12)          |\n|                                                      |\n|This field is coded as octets 5 and 6 of the UE       |\n|security capability information element (see subclause|\n|9.8.3.57).                                            |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS mobility management (5GMM) information elements", "numbering": "9.10.3", "title_level": 2, "desc": "9.10.3 5GS mobility management (5GMM) information elements\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM capability", "numbering": "9.10.3.1", "title_level": 3, "desc": "9.10.3.1 5GMM capability\n\nThe purpose of the 5GMM capability information element is to provide the\nnetwork with information concerning aspects of the UE related to the 5GCN\nor interworking with the EPS. The contents might affect the manner in which\nthe network handles the operation of the UE.\n\nThe 5GMM capability information element is coded as shown in\nfigure\u00a09.10.3.1.1 and table\u00a09.10.3.1.1.\n\nThe 5GMM capability is a type 4 information element with a minimum length\nof 3 octets and a maximum length of 15 octets.\n\n|8                                           |7       |\n|Length of 5GMM capability contents          |octet 2 |\n|0                                           |0       |\n|Spare                                       |Spare   |\n\n\nFigure\u00a09.10.3.1.1: 5GMM capability information element\n\nTable\u00a09.10.3.1.1: 5GMM capability information element\n\n|EPC NAS supported (S1 mode) (octet 3, bit 1)          |\n|0| | | |S1 mode not supported                         |\n|1| | | |S1 mode supported                             |\n|                                                      |\n|Attach request message containing PDN connectivity    |\n|request with request type handover to transfer PDU    |\n|session from N1 mode to S1 mode supported (HO attach) |\n|(octet 3, bit 2)                                      |\n|0| | | |Attach request message containing PDN         |\n| | | | |connectivity request with request type        |\n| | | | |handover to transfer PDU session from N1 mode |\n| | | | |to S1 mode not supported                      |\n|1| | | |Attach request message containing PDN         |\n| | | | |connectivity request with request type        |\n| | | | |handover to transfer PDU session from N1 mode |\n| | | | |to S1 mode supported                          |\n|                                                      |\n|All other bits in octet 3 to 15 are spare and shall be|\n|coded as zero, if the respective octet is included in |\n|the information element.                              |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM cause", "numbering": "9.10.3.2", "title_level": 3, "desc": "9.10.3.2 5GMM cause\n\nThe purpose of the 5GMM cause information element is to indicate the reason\nwhy a 5GMM request from the UE is rejected by the network.\n\nThe 5GMM cause information element is coded as shown in figure\u00a09.10.3.1.2\nand table\u00a09.10.3.1.2.\n\nThe 5GMM cause is a type 3 information element with 2 octets length.\n\n|8                                             |7          |\n|Cause value                                   |octet 2    |\n\n\nFigure\u00a09.10.3.1.2: 5GMM cause information element\n\nTable\u00a09.10.3.1.2\u00a0: 5GMM cause information element\n\n|Cause value (octet 2)                                 |\n|                                                      |\n|Bits                                                  |\n|8                                                     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS identity type", "numbering": "9.10.3.3", "title_level": 3, "desc": "9.10.3.3 5GS identity type\n\nThe purpose of the 5GS identity type information element is to specify\nwhich identity is requested.\n\nThe 5GS identity type is a type 1 information element.\n\nThe 5GS identity type information element is coded as shown in\nfigure\u00a09.10.3.3.1 and table\u00a09.0.3.3.1.\n\n\n\n|8                     |7    |6                |5          |\n\n\nFigure\u00a09.10.3.3.1: 5GS identity type information element\n\nTable\u00a09.10.3.3.1: 5GS identity type information element\n\n|Type of identity (octet 1)                            |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |SUCI                                          |\n|1|1|0| |5G-GUTI                                       |\n|0|1|1| |IMEI                                          |\n|1|0|0| |5G-S-TMSI                                     |\n|1|0|1| |IMEISV                                        |\n|                                                      |\n|All other values are interpreted as SUCI by this      |\n|version of the protocol.                              |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS mobile identity", "numbering": "9.10.3.4", "title_level": 3, "desc": "9.10.3.4 5GS mobile identity\n\nThe purpose of the 5GS mobile identity information element is to provide\neither the SUCI, the 5G-GUTI, the IMEI, the IMEISV or the 5G-S-TMSI.\n\nThe 5GS mobile identity information element is coded as shown in\nfigures\u00a09.10.3.4.1, 9.10.3.4.2, 9.10.3.4.3 and 9.10.3.4.4, and\ntable\u00a09.10.3.4.1.\n\nThe 5GS mobile identity is a type 4 information element with a minimum\nlength of 3 octets and a maximum length of TBD octets.\n\nEditor\u2019s note:  The maximum length of 5GS mobile identity is TBD and will\nbe updated based on CT4 specification.\n\n|8                                          |7       |\n|                                           |        |\n|Length of 5GS mobile identity contents     |octet 2 |\n|1    |1    |1    |1    |odd/ |Type of identity|        |\n|     |     |     |     |even |                |octet 3 |\n|     |     |     |     |indic|                |        |\n|                     |                     |        |\n|MCC digit 2          |MCC digit 1          |octet 4 |\n|                     |                     |        |\n|MNC digit 3          |MCC digit 3          |octet 5 |\n|                     |                     |        |\n|MNC digit 2          |MNC digit 1          |octet 6 |\n|                                           |        |\n|AMF Region ID                              |octet 7 |\n|                                           |        |\n|AMF Region ID (continued)                  |octet 8 |\n|                     |                     |        |\n|AMF Set ID           |AMF Pointer          |octet 9 |\n|                                           |        |\n|5G-TMSI                                    |octet 10|\n|                                           |        |\n|5G-TMSI (continued)                        |octet 11|\n|                                           |        |\n|5G-TMSI (continued)                        |octet 12|\n|                                           |        |\n|5G-TMSI (continued)                        |octet 13|\n\n\nFigure\u00a09.10.3.4.1: 5GS mobile identity information element for type of\nidentity \"5G-GUTI\"\n\n|8                                          |7       |\n|                                           |        |\n|Length of 5GS mobile identity contents     |octet 2 |\n|                     |odd/ |                |        |\n|Identity digit 1     |even |Type of identity|octet 3 |\n|                     |indic|                |        |\n|                     |                     |        |\n|Identity digit p+1   |Identity digit p     |octet 4*|\n\n\nFigure\u00a09.10.3.4.2: 5GS mobile identity information element for type of\nidentity \"SUCI\" or \"IMEI\" or \"IMEISV\"\n\n|8                                          |7       |\n|                                           |        |\n|Length of 5GS mobile identity contents     |octet 2 |\n|1    |1    |1    |1    |odd/ |Type of identity|        |\n|     |     |     |     |even |                |octet 3 |\n|     |     |     |     |indic|                |        |\n|                     |                     |        |\n|AMF Set ID           |AMF Pointer          |octet 4 |\n|                                           |        |\n|5G-TMSI                                    |octet 5 |\n|                                           |        |\n|5G-TMSI (continued)                        |octet 6 |\n|                                           |        |\n|5G-TMSI (continued)                        |octet 7 |\n|                                           |        |\n|5G-TMSI (continued)                        |octet 8 |\n\n\nFigure\u00a09.10.3.4.3: 5GS mobile identity information element for type of\nidentity \"5G-S-TMSI\"\n\n|8                                          |7       |\n|                                           |        |\n|Length of 5GS mobile identity contents     |octet 2 |\n|                     |odd/ |                |        |\n|Identity digit 1     |even |Type of identity|octet 3 |\n|                     |indic|                |        |\n\n\nFigure\u00a09.10.3.4.4: 5GS mobile identity information element for type of\nidentity \"No identity\"\n\nTable\u00a09.10.3.4.1: 5GS mobile identity information element\n\n|Type of identity (octet 3)                          |\n|Bits                                                |\n|3|2|1|                                              |\n|0|0|0|No identity (NOTE)                            |\n|0|0|1|SUCI                                          |\n|1|1|0|5G-GUTI                                       |\n|0|1|1|IMEI                                          |\n|1|0|0|5G-S-TMSI                                     |\n|1|0|1|IMEISVI                                       |\n|                                                    |\n|All other values are reserved.                      |\n|                                                    |\n|Odd/even indication (octet 3)                       |\n|Bit                                                 |\n|4| | |                                              |\n|0| | |even number of identity digits and also when  |\n| | | |the GUTI or 5G-TMSI is used                   |\n|1| | |odd number of identity digits                 |\n|                                                    |\n|Identity digits (octet 4 etc.)                      |\n|                                                    |\n|For the SUCI, this field is coded using BCD coding. |\n|If the number of identity digits is even then bits 5|\n|to 8 of the last octet shall be filled with an end  |\n|mark coded as \"1111\".                               |\n|                                                    |\n|For the 5G-GUTI, then bits 5 to 8 of octet 3 are    |\n|coded as \"1111\", octet 4 through 6 contain the MCC  |\n|and MNC values as specified below, and bit 8 of     |\n|octet 7 is the most significant bit and bit 1 of the|\n|last octet the least significant bit for the        |\n|subsequent fields. The required fields for the      |\n|5G-GUTI are as defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].       |\n|MCC, Mobile country code (octet 4, octet 5 bits 1 to|\n|4)                                                  |\n|                                                    |\n|The MCC field is coded as in                        |\n|ITU-T\u00a0Recommendation\u00a0E.212\u00a0[42], annex\u00a0A.           |\n|                                                    |\n|MNC, Mobile network code (octet 5 bits 5 to 8, octet|\n|6)                                                  |\n|                                                    |\n|The coding of this field is the responsibility of   |\n|each administration but BCD coding shall be used.   |\n|The MNC shall consist of 2 or 3 digits. If a network|\n|operator decides to use only two digits in the MNC, |\n|bits 5 to 8 of octet 5 shall be coded as \"1111\".    |\n|                                                    |\n|The contents of the MCC and MNC digits are coded as |\n|octets 6 to 8 of the Temporary mobile group identity|\n|IE in figure\u00a010.5.154 of 3GPP\u00a0TS\u00a024.008\u00a0[12].       |\n|                                                    |\n|For the IMEI, this field is coded using BCD coding. |\n|The format of the IMEI is described in              |\n|3GPP\u00a0TS\u00a023.003\u00a0[4].                                 |\n|                                                    |\n|For the IMEISV, this field is coded using BCD       |\n|coding. Bits 5 to 8 of the last octet shall be      |\n|filled with an end mark coded as \"1111\". The format |\n|of the IMEISV is described in 3GPP\u00a0TS\u00a023.003\u00a0[4].   |\n|                                                    |\n|For the 5G-S-TMSI, bits 5 to 8 of octet 3 are coded |\n|as \"1111\" and bit 8 of octet 4 is the most          |\n|significant bit and bit 1 of the last octet is the  |\n|least significant bit. The coding of the 5G-S-TMSI  |\n|is left open for each administration.               |\n|                                                    |\n|For Type of identity \"No identity\", the identity    |\n|digit bits shall be encoded with all 0s and the     |\n|length of mobile identity contents parameter shall  |\n|be set to 1.                                        |\n|                                                    |\n|NOTE: This can be used when the requested identity  |\n|is not available at the UE during the identification|\n|procedure.                                          |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS network feature support", "numbering": "9.10.3.5", "title_level": 3, "desc": "9.10.3.5 5GS network feature support\n\nThe purpose of the 5GS network feature support information element is to\nindicate whether certain features are supported by the network.\n\nThe 5GS network feature support information element is coded as shown in\nfigure\u00a09.10.3.5.1 and table\u00a09.10.3.5.1.\n\nThe 5GS network feature support is a type 4 information element with a\nminimum length of 3 octets and a maximum length of 5 octets.\n\n|8                                           |7         |\n|Length of 5GS network feature support       |octet 2   |\n|contents                                    |          |\n|MPSI |IWK  |EMF       |EMC       |IMS VoPS  |octet 3   |\n|     |N26  |          |          |          |          |\n|0                                           |0         |\n\n\nFigure\u00a09.10.3.5.1: 5GS network feature support information element\n\nTable\u00a09.10.3.5.1: 5GS network feature support information element\n\n|IMS voice over PS session indicator (IMS VoPS) (octet |\n|3, bit1 and bit 2)                                    |\n|This bit indicates the support of IMS voice via 5GS   |\n|Bit                                                   |\n|2|1| | |                                              |\n|0|0| | |IMS voice over PS session not supported       |\n|0|1| | |IMS voice over PS session supported over 3GPP |\n| | | | |access                                        |\n|1|0| | |IMS voice over PS session supported over      |\n| | | | |non-3GPP access                               |\n|1|1| | |reserved                                      |\n|                                                      |\n|Emergency service support indicator (EMC) (octet 3,   |\n|bit 3 and bit 4)                                      |\n|This bit indicates the support of emergency services  |\n|in 5GS                                                |\n|Bit                                                   |\n|4|3| | |                                              |\n|0|0| | |Emergency services not supported              |\n|0|1| | |Emergency services supported in NR connected  |\n| | | | |to 5GCN only                                  |\n|1|0| | |Emergency services supported in E-UTRA        |\n| | | | |connected to 5GCN only                        |\n|1|1| | |Emergency services supported in NR connected  |\n| | | | |to 5GCN and E-UTRA connected to 5GCN          |\n|                                                      |\n|Emergency service fallback indicator (EMF) (octet 3,  |\n|bit 5 and bit 6)                                      |\n|This bit indicates the support of emergency services  |\n|fallback                                              |\n|Bit                                                   |\n|6|5| | |                                              |\n|0|0| | |Emergency services fallback not supported     |\n|0|1| | |Emergency services fallback supported in NR   |\n| | | | |connected to 5GCN only                        |\n|1|0| | |Emergency services fallback supported in      |\n| | | | |E-UTRA connected to 5GCN only                 |\n|1|1| | |Emergency services fallback supported in NR   |\n| | | | |connected to 5GCN and E-UTRA connected to 5GCN|\n|                                                      |\n|Interworking without N26 interface indicator (IWK N26)|\n|(octet 3, bit 6)                                      |\n|This bit indicates whether the network supports       |\n|interworking procedure without N26 interface          |\n|Bit                                                   |\n|7| | | |                                              |\n|0| | | |Interworking without N26 not supported        |\n|1| | | |Interworking without N26 supported            |\n|                                                      |\n|MPS indicator (MPSI) (octet 3, bit 7)                 |\n|This bit indicates the support of MPS in the RPLMN or |\n|equivalent PLMN.                                      |\n|Bit                                                   |\n|0| | | |Access identity 1 not valid in RPLMN or       |\n| | | | |equivalent PLMN                               |\n|1| | | |Access identity 1 valid in RPLMN or equivalent|\n| | | | |PLMN                                          |\n|                                                      |\n|All bits in octets 4 to 5 are spare and shall be coded|\n|as zero, if the respective octet is included in the   |\n|information element.                                  |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS registration result", "numbering": "9.10.3.6", "title_level": 3, "desc": "9.10.3.6 5GS registration result\n\nThe purpose of the 5GS registration result information element is to\nspecify the result of a registration procedure.\n\nThe 5GS registration result information element is coded as shown in\nfigure\u00a09.10.3.6.1 and table\u00a09.10.3.6.1.\n\nThe 5GS registration result is a type 4 information element with a length\nof 3 octets.\n\n\n\n|8                                           |7       |\n|Length of 5GS registration result contents  |octet 2 |\n|0    |0    |0    |0    |SMS  |5GS registration|        |\n|Spare|Spare|Spare|Spare|allow|result value    |octet 3 |\n|     |     |     |     |ed   |                |        |\n\n\nFigure\u00a09.10.3.6.1: 5GS registration result information element\n\nTable\u00a09.10.3.6.1: 5GS registration result information element\n\n|5GS registration result value (octet 3, bits 1 to 3)  |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |3GPP access                                   |\n|0|1|0| |Non-3GPP access                               |\n|0|1|1| |3GPP access and non-3GPP access               |\n|1|1|1| |reserved                                      |\n|                                                      |\n|All other values are unused and shall be treated as   |\n|\"3GPP access\", if received by the UE.                 |\n|                                                      |\n|SMS over NAS transport allowed (SMS allowed) (octet 3,|\n|bit 4)                                                |\n|Bit                                                   |\n|4| | | |                                              |\n|0| | | |SMS over NAS not allowed                      |\n|1| | | |SMS over NAS allowed                          |\n|                                                      |\n|Bits 5 to 8 of octet 3 are spare and shall be coded as|\n|zero.                                                 |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS registration type", "numbering": "9.10.3.7", "title_level": 3, "desc": "9.10.3.7 5GS registration type\n\nThe purpose of the 5GS registration type information element is to indicate\nthe type of the requested registration.\n\nThe 5GS registration type information element is coded as shown in\nfigure\u00a09.10.3.7.1 and table\u00a09.10.3.7.1.\n\nThe 5GS registration type is a type 4 information element with a length of\n3 octets.\n\n\n\n|8                                           |7       |\n|Length of 5GS registration type contents    |octet 2 |\n|0    |0    |0    |FOR  |SMS  |5GS registration|        |\n|Spare|Spare|Spare|     |reque|type value      |octet 3 |\n|     |     |     |     |sted |                |        |\n\n\nFigure\u00a09.10.3.7.1: 5GS registration type information element\n\nTable\u00a09.10.3.7.1: 5GS registration type information element\n\n|5GS registration type value (octet 3, bits 1 to 3)    |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |initial registration                          |\n|0|1|0| |mobility registration updating                |\n|0|1|1| |periodic registration updating                |\n|1|0|0| |emergency registration                        |\n|1|1|1| |reserved                                      |\n|                                                      |\n|All other values are unused and shall be interpreted  |\n|as \"initial registration\", if received by the network.|\n|                                                      |\n|SMS over NAS transport requested (SMS requested)      |\n|(octet 3, bit 4)                                      |\n|                                                      |\n|Bit                                                   |\n|4| |                                                  |\n|0| |SMS over NAS not supported                        |\n|1| |SMS over NAS supported                            |\n|                                                      |\n|Follow-on request bit (FOR) (octet 3, bit 5)          |\n|Bit                                                   |\n|5| | | |                                              |\n|0| | | |No follow-on request pending                  |\n|1| | | |Follow-on request pending                     |\n|                                                      |\n|Bits 6 to 8 of octet 3 are spare and shall be coded as|\n|zero.                                                 |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS tracking area identity", "numbering": "9.10.3.8", "title_level": 3, "desc": "9.10.3.8 5GS tracking area identity\n\nThe purpose of the 5GS tracking area identity information element is to\nprovide an unambiguous identification of tracking areas within the area\ncovered by the 5GS.\n\nThe 5GS tracking area identity information element is coded as shown in\nfigure\u00a09.10.3.8.1 and table\u00a09.10.3.8.1.\n\nThe 5GS tracking area identity is a type 3 information element with a\nlength of 7 octets.\n\n\n\n|8                                          |7       |\n|                     |                     |        |\n|MCC digit 2          |MCC digit 1          |octet 2 |\n|                     |                     |        |\n|MNC digit 3          |MCC digit 3          |octet 3 |\n|                     |                     |        |\n|MNC digit 2          |MNC digit 1          |octet 4 |\n|                                           |        |\n|TAC                                        |octet 5 |\n|                                           |        |\n|TAC (continued)                            |octet 6 |\n|                                           |        |\n|TAC (continued)                            |octet 7 |\n\nFigure\u00a09.10.3.8.1: 5GS tracking area identity information element\n\nTable\u00a09.10.3.8.1: 5GS tracking area identity information element\n\n|                                                    |\n|MCC, Mobile country code (octets 2 and 3)           |\n|The MCC field is coded as in ITU-T Rec. E212\u00a0[39],  |\n|annex\u00a0A.                                            |\n|                                                    |\n|If the TAI is deleted the MCC and MNC shall take the|\n|value from the deleted TAI.                         |\n|                                                    |\n|In abnormal cases, the MCC stored in the UE can     |\n|contain elements not in the set {0, 1 ... 9}. In    |\n|such cases the UE should transmit the stored values |\n|using full hexadecimal encoding. When receiving such|\n|an MCC, the network shall treat the TAI as deleted. |\n|                                                    |\n|MNC, Mobile network code (octet 3 bits 5 to 8, octet|\n|4)                                                  |\n|The coding of this field is the responsibility of   |\n|each administration, but BCD coding shall be used.  |\n|The MNC shall consist of 2 or 3 digits. For PCS 1900|\n|for NA, Federal regulation mandates that a 3-digit  |\n|MNC shall be used. However, a network operator may  |\n|decide to use only two digits in the MNC in the TAI |\n|over the radio interface. In this case, bits 5 to 8 |\n|of octet 3 shall be coded as \"1111\". Mobile         |\n|equipment shall accept a TAI coded in such a way.   |\n|                                                    |\n|In abnormal cases, the MNC stored in the UE can     |\n|have:                                               |\n|- digit 1 or 2 not in the set {0, 1 ... 9}, or      |\n|- digit 3 not in the set {0, 1 ... 9, F} hex.       |\n|In such cases the UE shall transmit the stored      |\n|values using full hexadecimal encoding. When        |\n|receiving such an MNC, the network shall treat the  |\n|TAI as deleted.                                     |\n|                                                    |\n|The same handling shall apply for the network, if a |\n|3-digit MNC is sent by the UE to a network using    |\n|only a 2-digit MNC.                                 |\n|                                                    |\n|TAC, Tracking area code (octets 5 to 7)             |\n|In the TAC field bit 8 of octet 5 is the most       |\n|significant bit and bit 1 of octet 6 the least      |\n|significant bit.                                    |\n|The coding of the tracking area code is the         |\n|responsibility of each administration except that   |\n|two values are used to mark the TAC, and hence the  |\n|TAI, as deleted. Coding using full hexadecimal      |\n|representation may be used. The tracking area code  |\n|consists of 3 octets.                               |\n|If a TAI has to be deleted, then all bits of the    |\n|tracking area code shall be set to one with the     |\n|exception of the least significant bit which shall  |\n|be set to zero. If a USIM is inserted in a mobile   |\n|equipment with the tracking area code containing all|\n|zeros, then the mobile equipment shall recognise    |\n|this TAC as part of a deleted TAI.                  |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS tracking area identity list", "numbering": "9.10.3.9", "title_level": 3, "desc": "9.10.3.9 5GS tracking area identity list\n\nThe purpose of the 5GS tracking area identity list information element is\nto transfer a list of tracking areas from the network to the UE.\n\nThe coding of the information element allows combining different types of\nlists. The lists of type \"00\" and \"01\" allow a more compact encoding, when\nthe different TAIs are sharing the PLMN identity.\n\nThe 5GS tracking area identity list information element is coded as shown\nin figure\u00a09.10.3.8.1, figure\u00a09.10.3.8.2, figure\u00a09.10.3.9.3,\nfigure\u00a09.10.3.9.4 and table\u00a09.10.3.9.1.\n\nThe 5GS tracking area identity list is a type 4 information element, with a\nminimum length of 9 octets and a maximum length of 114 octets. The list can\ncontain a maximum of 16 different tracking area identities.\n\n\n\n|8    |7    |6    |5    |4    |3    |2    |1    |          |\n|5GS tracking area identity list IEI        |octet 1   |\n|Length of 5GS tracking area identity list  |octet 2   |\n|contents                                   |          |\n|                                           |octet 3   |\n|Partial tracking area identity list 1      |          |\n|                                           |octet i   |\n|                                           |octet i+1*|\n|Partial tracking area identity list 2      |          |\n|                                           |octet l*  |\n|                                           |octet l+1*|\n|\u2026                                          |          |\n|                                           |octet m*  |\n|                                           |octet m+1*|\n|Partial tracking area identity list p      |          |\n|                                           |octet n*  |\n\nFigure\u00a09.10.3.9.1: 5GS tracking area identity list information element\n\n\n\n|8    |7    |6    |5    |4    |3    |2    |1    |          |\n|0    |Type of   |Number of elements         |octet 1   |\n|Spare|list      |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n|                                           |          |\n|TAC 1                                      |octet 5   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 6   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 7   |\n|\u2026                                          |\u2026         |\n|\u2026                                          |\u2026         |\n|                                           |          |\n|TAC k                                      |octet     |\n|                                           |3k+2*     |\n|                                           |          |\n|TAC k (continued)                          |octet     |\n|                                           |3k+3*     |\n|                                           |          |\n|TAC k (continued)                          |octet     |\n|                                           |3k+4*     |\n\nFigure\u00a09.10.3.9.2: Partial tracking area identity list \u2013 type of list =\n\"00\"\n\n\n\n|8    |7    |6    |5    |4    |3    |2    |1    |          |\n|0    |Type of   |Number of elements         |octet 1   |\n|Spare|list      |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n|                                           |          |\n|TAC 1                                      |octet 5   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 6   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 7   |\n\nFigure\u00a09.10.3.9.3: Partial tracking area identity list \u2013 type of list =\n\"01\"\n\n\n\n|8    |7    |6    |5    |4    |3    |2    |1    |          |\n|0    |Type of   |Number of elements         |octet 1   |\n|Spare|list      |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n|                                           |          |\n|TAC 1                                      |octet 5   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 6   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 7   |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 8*  |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 9*  |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 10* |\n|                                           |          |\n|TAC 2                                      |octet 11* |\n|                                           |          |\n|TAC 2 (continued)                          |octet 12* |\n|                                           |          |\n|TAC 2 (continued)                          |octet 13* |\n|\u2026                                          |          |\n|\u2026                                          |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet     |\n|                     |                     |6k-4*     |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet     |\n|                     |                     |6k-3*     |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet     |\n|                     |                     |6k-2*     |\n|                                           |          |\n|TAC k                                      |octet     |\n|                                           |6k-1*     |\n|                                           |          |\n|TAC k (continued)                          |octet 6k* |\n|                                           |          |\n|TAC k (continued)                          |octet     |\n|                                           |6k+1*     |\n\nFigure\u00a09.10.3.9.4: Partial tracking area identity list \u2013 type of list =\n\"10\"\n\nTable\u00a09.10.3.9.1: Tracking area identity list information element\n\n|Value part of the Tracking area identity list         |\n|information element (octets 3 to n)                   |\n|                                                      |\n|The value part of the Tracking area identity list     |\n|information element consists of one or several partial|\n|tracking area identity lists. The length of each      |\n|partial tracking area identity list can be determined |\n|from the 'type of list' field and the 'number of      |\n|elements' field in the first octet of the partial     |\n|tracking area identity list.                          |\n|The UE shall store the complete list received. If more|\n|than 16 TAIs are included in this information element,|\n|the UE shall store the first 16 TAIs and ignore the   |\n|remaining octets of the information element.          |\n|                                                      |\n|                                                      |\n|Partial tracking area identity list:                  |\n|                                                      |\n|Type of list (octet 1)                                |\n|Bits                                                  |\n|7|6|                                                  |\n|0|0|list of TACs belonging to one PLMN, with          |\n| | |non-consecutive TAC values                        |\n|0|1|list of TACs belonging to one PLMN, with          |\n| | |consecutive TAC values                            |\n|1|0|list of TAIs belonging to different PLMNs (see    |\n| | |NOTE)                                             |\n|                                                      |\n|All other values are reserved.                        |\n|                                                      |\n|Number of elements (octet 1)                          |\n|Bits                                                  |\n|5|4|3|2|1|                                           |\n|0|0|0|0|0|1 element                                  |\n|0|0|0|0|1|2 elements                                 |\n|0|0|0|1|0|3 elements                                 |\n|\u2026         |                                           |\n|0|1|1|0|1|14 elements                                |\n|0|1|1|1|0|15 elements                                |\n|0|1|1|1|1|16 elements                                |\n|                                                      |\n|All other values are unused and shall be interpreted  |\n|as 16, if received by the UE.                         |\n|                                                      |\n|Bit 8 of octet 1 is spare and shall be coded as zero. |\n|                                                      |\n|                                                      |\n|For type of list = \"00\" and number of elements = k:   |\n|                                                      |\n|octet 2 to 4 contain the MCC+MNC, and                 |\n|for j = 1, \u2026, k:                                      |\n|octets 3j+2 to 3j+4 contain the TAC of the j-th TAI   |\n|belonging to the partial list,                        |\n|                                                      |\n|For type of list = \"01\" and number of elements = k:   |\n|                                                      |\n|octet 2 to 4 contain the MCC+MNC, and                 |\n|octets 5 to 7 contain the TAC of the first TAI        |\n|belonging to the partial list.                        |\n|The TAC values of the other k-1 TAIs are TAC+1, TAC+2,|\n|\u2026, TAC+k-1.                                           |\n|                                                      |\n|For type of list = \"10\" and number of elements = k:   |\n|                                                      |\n|for j = 1, \u2026, k.                                      |\n|octets 6j-4 to 6j-2 contain the MCC+MNC, and          |\n|octets 6j-1 to 6j+1 contain the TAC of the j-th TAI   |\n|belonging to the partial list.                        |\n|                                                      |\n|                                                      |\n|MCC, Mobile country code                              |\n|                                                      |\n|The MCC field is coded as in                          |\n|ITU-T\u00a0Recommendation\u00a0E.212\u00a0[42], annex\u00a0A.             |\n|                                                      |\n|MNC, Mobile network code                              |\n|                                                      |\n|The coding of this field is the responsibility of each|\n|administration but BCD coding shall be used. The MNC  |\n|shall consist of 2 or 3 digits. If a network operator |\n|decides to use only two digits in the MNC, MNC digit 3|\n|shall be coded as \"1111\".                             |\n|                                                      |\n|TAC, Tracking area code                               |\n|                                                      |\n|In the TAC field bit 8 of the first octet is the most |\n|significant bit and bit 1 of third octet the least    |\n|significant bit.                                      |\n|The coding of the tracking area code is the           |\n|responsibility of each administration. Coding using   |\n|full hexadecimal representation may be used. The      |\n|tracking area code consists of 3 octets.              |\n|                                                      |\n|NOTE: If the \"list of TAIs belonging to different     |\n|PLMNs\" is used, the PLMNs included in the list need to|\n|be present in the list of \"equivalent PLMNs\".         |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Access type", "numbering": "9.10.3.10", "title_level": 3, "desc": "9.10.3.10   Access type\n\nThe purpose of the access type information element is to indicate the\naccess type over which the downlink signalling or user data is pending to\nbe sent to the UE.\n\nThe access type is a type 1 information element.\n\nThe access type information element is coded as shown in figure\u00a09.10.3.10.1\nand table\u00a09.10.3.10.1.\n\n|8                    |7         |6         |5          |\n\n\nFigure\u00a09.10.3.10.1: Access type information element\n\nTable\u00a09.10.3.10.1: Access type information element\n\n|Access type value (octet 1, bit 1 to bit 2)           |\n|                                                      |\n|Bits                                                  |\n|2|1| | |                                              |\n|0|1| | |3GPP access                                   |\n|1|0| | |Non-3GPP access                               |\n|                                                      |\n|All other values are reserved.                        |\n|                                                      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed PDU session status", "numbering": "9.10.3.11", "title_level": 3, "desc": "9.10.3.11   Allowed PDU session status\n\nThe purpose of the Allowed PDU session status information element is to\nindicate to the network user-plane resources of PDU sessions associated\nwith non-3GPP access that are allowed to be re-established over 3GPP access\nor if there is no PDU session(s) for which the UE allows the user-plane\nresources to be re-established over 3GPP access..\n\nThe Allowed PDU session status information element is coded as shown in\nfigure\u00a09.10.3.11.1 and table\u00a09.10.3.11.1.\n\nThe Allowed PDU session status is a type 4 information element with minimum\nlength of 4 octets and maximum length of 34 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|Allowed PDU session status IEI             |octet 1 |\n|Length of Allowed PDU session status       |octet 2 |\n|contents                                   |        |\n|PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |octet 3 |\n|(7)  |(6)  |(5)  |(4)  |(3)  |(2)  |(1)  |(0)  |        |\n|0    |0    |0    |0    |0    |0    |0    |0    |        |\n|Spare                                      |octet 5*|\n|                                           |-34*    |\n\n\nFigure\u00a09.10.3.11.1: Allowed PDU session status information element\n\nTable\u00a09.10.3.11.1: Allowed PDU session status information element\n\n|PSI(x) shall be coded as follows:                                     |\n|                                                                      |\n|PSI(0):                                                               |\n|Bit 1octet 3 is spare and shall be coded as zero.                     |\n|                                                                      |\n|PSI(1) \u2013 PSI(15):                                                     |\n|0 indicates that the user-plane resources of corresponding PDU session|\n|is not allowed to be re-established over 3GPP access.                 |\n|1 indicates that the user-plane resources of corresponding PDU session|\n|can be re-established over 3GPP access.                               |\n|                                                                      |\n|If there is no PDU session that can be re-established over 3GPP       |\n|access, all bits in PSI(5) \u2013 PSI(15) shall be coded as zero.          |\n|                                                                      |\n|All bits in octet 5 to 34 are spare and shall be coded as zero, if the|\n|respective octet is included in the information element.              |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication failure parameter", "numbering": "9.10.3.12", "title_level": 3, "desc": "9.10.3.12   Authentication failure parameter\n\nSee subclause 10.5.3.2.2 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication parameter AUTN", "numbering": "9.10.3.13", "title_level": 3, "desc": "9.10.3.13   Authentication parameter AUTN\n\nSee subclause\u00a010.5.3.1.1 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\nEditor's note:  The format of the Authentication parameter AUTN IE in\n3GPP\u00a0TS\u00a024.008\u00a0[12] is TLV with a length of 18 octets.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication parameter RAND", "numbering": "9.10.3.14", "title_level": 3, "desc": "9.10.3.14   Authentication parameter RAND\n\nSee subclause\u00a010.5.3.1 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\nEditor's note:  The format of the Authentication parameter RAND IE in\n3GPP\u00a0TS\u00a024.008\u00a0[12] is TV with a length of 17 octets.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Authentication response parameter", "numbering": "9.10.3.15", "title_level": 3, "desc": "9.10.3.15   Authentication response parameter\n\nSee subclause\u00a09.9.3.4 in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Configuration update indication", "numbering": "9.10.3.16", "title_level": 3, "desc": "9.10.3.16   Configuration update indication\n\nThe purpose of the Configuration update indication information element is\nto indicate the additional information associated with the generic UE\nconfiguration update procedure.\n\nThe Configuration update indication information element is coded as shown\nin figure\u00a09.10.3.16.1 and table\u00a09.10.3.16.1.\n\nThe Configuration update indication is a type 1 information element.\n\n|8                    |7    |6    |5    |4    |3          |\n\n\nFigure\u00a09.10.3.16.1: Configuration update indication\n\nTable\u00a09.10.3.16.1: Configuration update indication\n\n|Acknowledgement (ACK) value (octet 1, bit 1)          |\n|Bit                                                   |\n|1|                                                    |\n|0|acknowledgement not requested                       |\n|1|acknowledgement requested                           |\n| |                                                    |\n|Registration requested (RED) value (octet 1, bit 2)   |\n|Bit                                                   |\n|2|                                                    |\n|0|registration not requested                          |\n|1|registration requested                              |\n|                                                      |\n|Bits 3 and 4 are spare and shall be coded as zero,    |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Daylight saving time", "numbering": "9.10.3.17", "title_level": 3, "desc": "9.10.3.17   Daylight saving time\n\nSee subclause\u00a010.5.3.12 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "De-registration type", "numbering": "9.10.3.18", "title_level": 3, "desc": "9.10.3.18   De-registration type\n\nThe purpose of the De-registration type information element is to indicate\nthe type of de-registration.\n\nThe De-registration type information element is coded as shown in\nfigure\u00a09.10.3.18.1 and table\u00a09.10.3.18.1.\n\nThe De-registration type is a type 1 information element.\n\n|8                     |7     |6       |5        |4         |\n\n\nFigure\u00a09.10.3.18.1: Deregistration type information element\n\nTable\u00a09.10.3.18.1: Deregistration type information element\n\n|Switch off (octet 1, bit 4)                           |\n|In the UE to network direction:                       |\n|Bit                                                   |\n|4| | | |                                              |\n|0| | | |Normal de-registration                        |\n|1| | | |Switch off                                    |\n|                                                      |\n|In the network to UE direction bit 4 is spare. The    |\n|network shall set this bit to zero.                   |\n|                                                      |\n|Re-registration required (octet 1, bit 3)             |\n|                                                      |\n|In the network to UE direction:                       |\n|Bit                                                   |\n|3| | | |                                              |\n|0| | | |re-registration not required                  |\n|1| | | |re-registration required                      |\n|                                                      |\n|In the UE to network direction bit 3 is spare. The UE |\n|shall set this bit to zero.                           |\n|                                                      |\n|Access type (octet 1,bit 2, bit 1)                    |\n|Bit                                                   |\n|2|1| | |                                              |\n|0|1| | |3GPP access                                   |\n|1|0| | |Non-3GPP access                               |\n|1|1| | |3GPP access and non-3GPP access               |\n|                                                      |\n|All other values are reserved.                        |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DNN", "numbering": "9.10.3.19", "title_level": 3, "desc": "9.10.3.19   DNN\n\nThe purpose of the DNN information element is to identify the data network.\n\nThe DNN information element is coded as shown in figure\u00a09.10.3.19.1.\n\nThe DNN is a type 4 information element with a minimum length of 3 octets\nand a maximum length of 102 octets.\n\n|8                                          |7          |\n|Length of DNN contents                     |octet 2    |\n|                                           |octet 3    |\n|DNN value                                  |           |\n|                                           |octet n    |\n\n\nFigure\u00a09.10.3.19.1: DNN information element\n\nA DNN value field contains an APN as defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DRX parameters", "numbering": "9.10.3.20", "title_level": 3, "desc": "9.10.3.20   DRX parameters\n\nEditor's note:  The DRX parameters need to be defined by RAN WGs.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Emergency number list", "numbering": "9.10.3.21", "title_level": 3, "desc": "9.10.3.21   Emergency number list\n\nSee subclause\u00a010.5.3.13 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EPS NAS message container", "numbering": "9.10.3.22", "title_level": 3, "desc": "9.10.3.22   EPS NAS message container\n\nThe purpose of the EPS NAS message container information element is to\ntransport an EPS NAS message as specified in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\nThe EPS NAS message container information element is coded as shown in\nfigure\u00a09.10.3.22.1 and table\u00a09.10.3.22.1.\n\nThe EPS NAS message container is a type 6 information element.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|EPS NAS message container IEI              |octet 1 |\n|                                           |octet 2 |\n|Length of EPS NAS message container        |        |\n|contents                                   |octet 3 |\n|                                           |octet 4 |\n|EPS NAS message container                  |        |\n|                                           |octet n |\n\n\nFigure\u00a09.10.3.22.1: EPS NAS message container information element\n\nTable\u00a09.10.3.22.1: EPS NAS message container information element\n\n|EPS NAS message container (octet 4 to n)              |\n|An EPS NAS message as specified in                    |\n|3GPP\u00a0TS\u00a024.301\u00a0[15].                                  |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EPS NAS security algorithms", "numbering": "9.10.3.23", "title_level": 3, "desc": "9.10.3.23   EPS NAS security algorithms\n\nSee subclause\u00a09.9.3.23 in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended emergency number list", "numbering": "9.10.3.24", "title_level": 3, "desc": "9.10.3.24   Extended emergency number list\n\nSee subclause\u00a09.9.3.37A in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "HashAMF", "numbering": "9.10.3.25", "title_level": 3, "desc": "9.10.3.25   HashAMF\n\nThe purpose of the HashAMF information element is to transfer a 64-bit hash\nvalue to the UE so the UE can check the AMF calculated value against the\nvalue locally calculated by the UE to determine whether the REGISTRATION\nREQUEST message sent by the UE has been modified.\n\nThe HashAMF information element is coded as shown in figure\u00a09.10.3.25.1 and\ntable\u00a09.10.3.25.1.\n\nThe HashAMF is a type 3 information element with a length of 9 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|HashAMF IEI                                |octet 1 |\n|                                           |octet 2 |\n|HashAMF value                              |        |\n|                                           |octet 9 |\n\n\nFigure\u00a09.10.3.25.1: HashAMF information element\n\nTable\u00a09.10.3.25.1: HashAMF information element\n\n|HashAMF value (octet 2 to 9)                          |\n|                                                      |\n|This field contains the binary representation of the  |\n|HashAMF. Bit 8 of octet 2 represents the most         |\n|significant bit of the HashAMF and bit 1 of octet 9   |\n|the least significant bit.                            |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IMEISV request", "numbering": "9.10.3.26", "title_level": 3, "desc": "9.10.3.26   IMEISV request\n\nSee subclause\u00a010.5.5.10 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LADN information", "numbering": "9.10.3.27", "title_level": 3, "desc": "9.10.3.27   LADN information\n\nThe purpose of the LADN information information element is to provide the\nUE the LADN service area for each available LADN in the current\nregistration area or to delete the LADN information at the UE.\n\nThe LADN information information element is coded as shown in\nfigure\u00a09.10.3.27.1, figure\u00a09.10.3.27.2 and table\u00a09.10.3.27.1.\n\nThe LADN information is a type 6 information element with a minimum length\nof 3 octets and a maximum length of 1707 octets.\n\nThe LADN information information element can contain a minimum of 0 and a\nmaximum of 8 different LADNs each including a DNN and a tracking area\nidentity lists.\n\n|8                                          |7       |\n|                                           |octet 2 |\n|Length of LADN information contents        |octet 3 |\n|                                           |octet 4 |\n|LADN 1                                     |        |\n|                                           |octet a |\n|                                           |octet   |\n|LADN 2                                     |a+1*    |\n|                                           |        |\n|                                           |octet b*|\n|                                           |octet   |\n|\u2026                                          |b+1*    |\n|                                           |        |\n|                                           |octet g*|\n|                                           |octet   |\n|LADN n                                     |g+1*    |\n|                                           |        |\n|                                           |octet h*|\n\n\nFigure\u00a09.10.3.27.1: LADN information information element\n\n|8                                          |7       |\n|                                           |octet 2 |\n|DNN value                                  |        |\n|                                           |octet a |\n|                                           |octet   |\n|Tracking area identity list contents       |a+1     |\n|                                           |        |\n|                                           |octet b |\n\n\nFigure\u00a09.10.3.27.2: LADN\n\nTable\u00a09.10.3.27.1: LADN information information element\n\n|Value part of the LADN information information      |\n|element (octet 3 to h)                              |\n|The value part of the LADN information information  |\n|element consists of one or several LADNs. Each LADN |\n|consists one DNN value and one Tracking area        |\n|identity list contents. The length of each LADN is  |\n|determined by the length of DNN value and the length|\n|of Tracking area identity list contents.            |\n|The UE shall store the complete list received. If   |\n|more than 8 LADNs are included in this information  |\n|element, the UE shall store the first 8 LADNs and   |\n|ignore the remaining octets of the information      |\n|element.                                            |\n|                                                    |\n|LADN (octet 4 to octet a):                          |\n|                                                    |\n|DNN value is coded as DNN value part of DNN         |\n|information element as specified in                 |\n|subclause\u00a09.8.3.15 starting with the third octet.   |\n|                                                    |\n|Tracking area identity list contents (octet a+1 to  |\n|octet b):                                           |\n|Tracking area identity list contents is coded as the|\n|value part of the Tracking area identity list       |\n|information element as specified in                 |\n|subclause\u00a09.8.3.8 starting with the third octet.    |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "MICO indication", "numbering": "9.10.3.28", "title_level": 3, "desc": "9.10.3.28   MICO indication\n\nThe purpose of the MICO indication information element is to indicate the\nuse of MICO mode or the re-negotiation of MICO mode.\n\nThe MICO indication information element is coded as shown in\nfigure\u00a09.10.3.28.1 and table\u00a09.10.3.28.1.\n\nThe MICO indication is a type 1 information element.\n\n|8                    |7    |6    |5    |4    |3          |\n\n\nFigure\u00a09.10.3.28.1: MICO indication\n\nTable\u00a09.10.3.28.1: MICO indication\n\n|Registration Area Allocation Indication (RAAI) (octet |\n|1)                                                    |\n|                                                      |\n|In the network to UE direction:                       |\n|Bit                                                   |\n|1|                                                    |\n|0|all PLMN registration area not allocated            |\n|1|all PLMN registration area allocated                |\n|                                                      |\n|In the UE to network direction bit 1 is spare. The UE |\n|shall set this bit to zero.                           |\n|Bits 2, 3 and 4 are spare and shall be coded as zero, |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS key set identifier", "numbering": "9.10.3.29", "title_level": 3, "desc": "9.10.3.29   NAS key set identifier\n\nThe NAS key set identifier is allocated by the network.\n\nThe NAS key set identifier information element is coded as shown in\nfigure\u00a09.10.3.29.1 and table\u00a09.10.3.29.1.\n\nThe NAS key set identifier is a type 1 information element.\n\n|8                    |7    |6               |5       |\n\nFigure\u00a09.10.3.29.1: NAS key set identifier information element\n\nTable\u00a09.10.3.29.1: NAS key set identifier information element\n\n|Type of security context flag (TSC) (octet 1)       |\n|                                                    |\n|Bit                                                 |\n|4| | |                                              |\n|0| | |native security context (for KSIAMF)          |\n|1| | |mapped security context (for KSIASME)         |\n|                                                    |\n|TSC does not apply for NAS key set identifier value |\n|\"111\".                                              |\n|                                                    |\n|NAS key set identifier (octet 1)                    |\n|                                                    |\n|Bits                                                |\n|3|2|1|                                              |\n|0|0|0|                                              |\n|throug|possible values for the NAS key set identifier|\n|h     |                                              |\n|1|1|0|                                              |\n| | | |                                              |\n|1|1|1|no key is available (UE to network);          |\n| | | |reserved (network to UE)                      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS message", "numbering": "9.10.3.30", "title_level": 3, "desc": "9.10.3.30   NAS message\n\nThis IE includes a complete plain 5GS NAS message as specified in\nsubclause\u00a08.2. The SECURITY PROTECTED 5GS NAS MESSAGE message is not a\nplain 5GS NAS message and shall not be included in this IE.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS message container", "numbering": "9.10.3.31", "title_level": 3, "desc": "9.10.3.31   NAS message container\n\nThe purpose of the NAS message container IE is to encapsulate a NAS message\nwithout NAS security header.\n\nThe NAS message container information element is coded as shown in\nfigure\u00a09.10.3.31.1 and table\u00a09.10.3.31.1.\n\nThe NAS message container is a type 6 information element.\n\n|8                                             |7          |\n|Length of NAS message container contents      |octet 2    |\n|                                              |octet 3    |\n|                                              |octet 4    |\n|NAS message container contents                |           |\n|                                              |octet n    |\n\nFigure\u00a09.10.3.31.1: NAS message container information element\n\nTable\u00a09.10.3.31.1: NAS message container information element\n\n|NAS message container contents (octet 4 to octet n);  |\n|Max value of 65535 octets                             |\n|                                                      |\n|This IE can contain a REGISTRATION REQUEST message as |\n|defined in subclause\u00a05.5.1, or a SERVICE REQUEST      |\n|message as defined in subclause\u00a05.6.1.                |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAS security algorithms", "numbering": "9.10.3.32", "title_level": 3, "desc": "9.10.3.32   NAS security algorithms\n\nThe purpose of the NAS security algorithms information element is to\nindicate the algorithms to be used for ciphering and integrity protection.\n\nThe NAS security algorithms information element is coded as shown in\nfigure\u00a09.10.3.32.1 and table\u00a09.10.3.32.1.\n\nThe NAS security algorithms is a type 3 information element with a length\nof 2 octets.\n\n|8                                             |7          |\n|Type of ciphering     |Type of integrity     |octet 2    |\n|algorithm             |protection algorithm  |           |\n\nFigure\u00a09.10.3.32.1: NAS security algorithms information element\n\nTable\u00a09.10.3.32.1: NAS security algorithms information element\n\n|Type of integrity protection algorithm (octet 2, bit 1|\n|to 3)                                                 |\n|Bits                                                  |\n|4|3|2|1|                                              |\n|0|0|0|0|5GS integrity algorithm 5G-IA0 (null integrity|\n| | | | |protection algorithm)                         |\n|0|0|0|1|5GS integrity algorithm 128-5G-IA1            |\n|0|0|1|0|5GS integrity algorithm 128-5G-IA2            |\n|0|0|1|1|5GS integrity algorithm 128-5G-IA3            |\n|0|1|0|0|5GS integrity algorithm 5G-IA4                |\n|0|1|0|1|5GS integrity algorithm 5G-IA5                |\n|0|1|1|0|5GS integrity algorithm 5G-IA6                |\n|0|1|1|1|5GS integrity algorithm 5G-IA7                |\n|                                                      |\n|All other values are reserved.                        |\n|                                                      |\n|Type of ciphering algorithm (octet 2, bit 5 to 7)     |\n|Bits                                                  |\n|8|7|6|5|                                              |\n|0|0|0|0|5GS encryption algorithm 5G-EA0 (null         |\n| | | | |ciphering algorithm)                          |\n|0|0|0|1|5GS encryption algorithm 128-5G-EA1           |\n|0|0|1|0|5GS encryption algorithm 128-5G-EA2           |\n|0|0|1|1|5GS encryption algorithm 128-5G-EA3           |\n|0|1|0|0|5GS encryption algorithm 5G-EA4               |\n|0|1|0|1|5GS encryption algorithm 5G-EA5               |\n|0|1|1|0|5GS encryption algorithm 5G-EA6               |\n|0|1|1|1|5GS encryption algorithm 5G-EA7               |\n|                                                      |\n|All other values are reserved.                        |\n|                                                      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Network name", "numbering": "9.10.3.33", "title_level": 3, "desc": "9.10.3.33   Network name\n\nSee subclause\u00a010.5.3.5a in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NSSAI", "numbering": "9.10.3.34", "title_level": 3, "desc": "9.10.3.34   NSSAI\n\nThe purpose of the NSSAI information element is to identify a collection of\nS-NSSAIs\n\nThe NSSAI information element is coded as shown in figure\u00a09.10.3.34.1 and\ntable\u00a09.10.3.34.1.\n\nThe NSSAI is a type 4 information element with a minimum length of 4 octets\nand a maximum length of 146 octets.\n\nNOTE\u00a01:  The number of S-NSSAI values in a requested NSSAI or allowed NSSAI\ncannot exceed eight.\n\nNOTE\u00a02:  The number of S-NSSAI values in a configured NSSAI cannot exceed\nsixteen.\n\nNOTE\u00a03:  An NSSAI can include more than one S-NSSAIs with same SST values,\nand optionally same SD values, which are associated with different mapped\nSST values and optionally mapped SD values.\n\n|8                                          |7          |\n|Length of NSSAI contents                   |octet 2    |\n|                                           |octet 3    |\n|S-NSSAI value 1                            |           |\n|                                           |octet m    |\n|                                           |octet m+1* |\n|S-NSSAI value 2                            |           |\n|                                           |octet n*   |\n|                                           |octet n+1* |\n|\u2026                                          |           |\n|                                           |octet u*   |\n|                                           |octet u+1* |\n|S-NSSAI value n                            |           |\n|                                           |octet v*   |\n\n\nFigure\u00a09.10.3.34.1: NSSAI information element\n\nTable\u00a09.10.3.34.1: NSSAI information element\n\n|Value part of the NSSAI information element (octet 3  |\n|to v)                                                 |\n|The value part of the NSSAI information element       |\n|consists of one or more S-NSSAI values. Each S-NSSAI  |\n|value consists of one S-NSSAI and optionally one      |\n|mapped configured S-NSSAI from the configured NSSAI   |\n|for the HPLMN.                                        |\n|If the recipient of this information element is the   |\n|UE, the UE shall store the complete list received. If |\n|the NSSAI information element conveys an allowed NSSAI|\n|and more than 8 S-NSSAI values are included in this   |\n|information element, the UE shall store the first 8   |\n|S-NSSAI values and ignore the remaining octets of the |\n|information element.                                  |\n|If the NSSAI information element conveys a configured |\n|NSSAI and more than 16 S-NSSAI values are included in |\n|this information element, the UE shall store the first|\n|16 S-NSSAI values and ignore the remaining octets of  |\n|the information element.                              |\n|                                                      |\n|S-NSSAI value:                                        |\n|                                                      |\n|S-NSSAI value is coded as the length and value part of|\n|S-NSSAI information element as specified in           |\n|subclause\u00a09.8.2.6 starting with the second octet.     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Payload container", "numbering": "9.10.3.35", "title_level": 3, "desc": "9.10.3.35   Payload container\n\nThe purpose of the Payload container information element is to transport a\npayload.\n\nThe Payload container information element is coded as shown in\nfigure\u00a09.10.3.35.1 and table\u00a09.10.3.35.1.\n\nThe Payload container is a type 6 information element with a minimum length\nof 4 octets and a maximum length of 65538 octets.\n\n|8                                             |7          |\n|                                              |octet 2    |\n|Length of payload container contents          |           |\n|                                              |octet 3    |\n|                                              |octet 4    |\n|Payload container contents                    |           |\n|                                              |octet n    |\n\n\nFigure\u00a09.10.3.35.1: Payload container information element\n\nTable\u00a09.10.3.35.1: Payload container information element\n\n|Payload container contents (octet 4 to octet n); max  |\n|value of 65535 octets                                 |\n|The coding of Payload container contents is dependent |\n|on the particular application.                        |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Payload container type", "numbering": "9.10.3.36", "title_level": 3, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session identity 2", "numbering": "9.10.3.37", "title_level": 3, "desc": "9.10.3.36   Payload container type\n\nThe purpose of the Payload container type information element indicates\ntype of payload included in the payload container information element.\n\nThe Payload container information element is coded as shown in\nfigure\u00a09.10.3.36.1 and table\u00a09.10.3.36.1.\n\nThe Payload container is a type 1 information element with a length of half\noctet.\n\n|8    |7    |6    |5    |4                    |3          |\n\n\nFigure\u00a09.10.3.36.1: Payload container information element\n\nTable\u00a09.10.3.36.1: Payload container information element\n\n|Payload container type value (octet 1, bit 1 to bit 4)|\n|Bits                                                  |\n|4|3|2|1|                                              |\n|0|0|0|1|N1 SM information                             |\n|0|0|1|0|SMS                                           |\n|0|0|1|1|LTE Positioning Protocol (LPP) message        |\n| | | | |container                                     |\n|0|1|0|0|Transparent container                         |\n|0|1|0|1|UE policy container                           |\n|                                                      |\n|All other values are reserved.                        |\n\n\n\n9.10.3.37   PDU session identity 2\n\nThe purpose of the PDU session identity 2 information element is to\nindicate the identity of a PDU session in a 5GMM message.\n\nThe PDU session identity 2 information element is coded as shown in\nfigure\u00a09.10.3.37.1 and table\u00a09.10.3.37.1.\n\nThe PDU session identity 2 is a type 3 information element with a length of\n2 octets .\n\n|8                                          |7          |\n|PDU session identity 2 value               |octet 2    |\n\n\nFigure\u00a09.10.3.37.1: PDU session identity 2 information element\n\nTable\u00a09.10.3.37.1: PDU session identity 2 information element\n\n|PDU session identity 2 value (octet 2)                |\n|The coding of the DU session identity 2 value is      |\n|identical to the coding of the PDU session identity   |\n|value as defined in 3GPP\u00a0TS\u00a024.007\u00a0[11] .             |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session reactivation result", "numbering": "9.10.3.38", "title_level": 3, "desc": "9.10.3.38   PDU session reactivation result\n\nThe purpose of the PDU session reactivation result information element is\nto indicate the result of PDU sessions user-plane resource activation.\n\nThe PDU session reactivation result information element is coded as shown\nin figure\u00a09.10.3.38.1 and table\u00a09.10.3.38.1.\n\nThe PDU session reactivation result is a type 4 information element with\nminimum length of 4 octets and maximum length of 34 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|PDU session reactivation result IEI        |octet 1 |\n|Length of PDU session reactivation result  |octet 2 |\n|PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |octet 3 |\n|(7)  |(6)  |(5)  |(4)  |(3)  |(2)  |(1)  |(0)  |        |\n|0                                          |octet 5*|\n|0                                          |-34*    |\n|0                                          |        |\n|0                                          |        |\n|0                                          |        |\n|0                                          |        |\n|0                                          |        |\n|0                                          |        |\n|                                           |        |\n|Spare                                      |        |\n|                                           |        |\n\n\nFigure\u00a09.10.3.38.1: PDU session reactivation result information element\n\nTable\u00a09.10.3.38.1: PDU session reactivation result information element\n\n|PSI(x) shall be coded as follows:                                     |\n|                                                                      |\n|PSI(0):                                                               |\n|Bit 0 of octet 3 is spare and shall be coded as zero.                 |\n|                                                                      |\n|PSI(1) \u2013 PSI(15):                                                     |\n|0 indicates PDU session user-plane resource reactivation was not      |\n|requested in the Uplink data status IE or was not allowed to be       |\n|reactivated in the Allowed PDU session status IE or user-plane        |\n|resource reactivation is successful.                                  |\n|1 indicates either PDU session reactivation was requested in the      |\n|Uplink data status IE but user-plane resource reactivation is not     |\n|successful or indicates PDU session was allowed to be reactivated in  |\n|the Allowed PDU session status IE but user-plane resource reactivation|\n|is either not performed or not successful.                            |\n|                                                                      |\n|All bits in octet 5 to 34 are spare and shall be coded as zero, if the|\n|respective octet is included in the information element.              |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session reactivation result error cause", "numbering": "9.10.3.39", "title_level": 3, "desc": "9.10.3.39   PDU session reactivation result error cause\n\nThe purpose of the PDU session reactivation result error cause information\nelement is to indicate error causes for PDU session ID(s) where there was a\nfailure to activate the user-plane resources.\n\nThe PDU session reactivation result error cause information element is\ncoded as shown in figure\u00a09.10.3.39.1 and table\u00a09.10.3.39.1.\n\nThe PDU session reactivation result error cause is a type 6 information\nelement with a minimum length of 5 octets and a maximum length of 515\noctets.\n\n\n\n|8                                             |7          |\n|Length of PDU session reactivation result     |octet 2    |\n|error cause                                   |           |\n|                                              |octet 3    |\n|PDU session ID                                |octet 4    |\n|cause value                                   |octet 5    |\n|                                              |           |\n|\u2026.                                            |           |\n|                                              |           |\n|PDU session ID                                |octet 514* |\n|cause value                                   |octet 515* |\n\n\nFigure\u00a09.10.3.39.1: PDU session reactivation result error cause information\nelement\n\nTable\u00a09.10.3.39.1: PDU session reactivation result error cause information\nelement\n\n|PDU session ID is coded same as PDU session ID IE (see subclause\u00a09.4).|\n|                                                                      |\n|The cause value is coded same as second octet of 5GMM cause           |\n|information element (see subclause\u00a09.10.3.2).                         |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session status", "numbering": "9.10.3.40", "title_level": 3, "desc": "9.10.3.40   PDU session status\n\nThe purpose of the PDU session status information element is to indicate\nthe state of each PDU session that can be identified by a PDU session\nidentity.\n\nThe PDU session status information element is coded as shown in\nfigure\u00a09.10.3.40.1 and table\u00a09.10.3.40.1.\n\nThe PDU session status information element is a type 4 information element\nwith minimum length of 4 octets and a maximum length of 34 octets.\n\n|8                                          |7       |\n|Length of PDU session status contents      |octet 2 |\n|PSI                                        |PSI     |\n|(7)                                        |(6)     |\n\n\nFigure\u00a09.10.3.40.1: PDU session status information element\n\nTable\u00a09.10.3.40.1: PDU session status information element\n\n|PSI(x) shall be coded as follows:                                     |\n|                                                                      |\n|PSI(0):                                                               |\n|Bit 1 of octet 3 is spare and shall be coded as zero.                 |\n|                                                                      |\n|PSI(1) \u2013 PSI(15):                                                     |\n|0 indicates that the 5GSM state of the corresponding PDU session is   |\n|PDU SESSION INACTIVE.                                                 |\n|1 indicates that the 5GSM state of the corresponding PDU session is   |\n|not PDU SESSION INACTIVE                                              |\n|                                                                      |\n|All bits in octet 5 to 34 are spare and shall be coded as zero, if the|\n|respective octet is included in the information element.              |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PLMN list", "numbering": "9.10.3.41", "title_level": 3, "desc": "9.10.3.41   PLMN list\n\nSee subclause\u00a010.5.1.13 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Rejected NSSAI", "numbering": "9.10.3.42", "title_level": 3, "desc": "9.10.3.42   Rejected NSSAI\n\nThe purpose of the Rejected NSSAI information element is to identify a\ncollection of rejected S-NSSAIs\n\nThe Rejected NSSAI information element is coded as shown in\nfigure\u00a09.10.3.42.1, figure\u00a09.10.3.42.2 and table\u00a09.10.3.42.1.\n\nThe Rejected NSSAI is a type 4 information element with a minimum length of\n4 octets and a maximum length of 42 octets.\n\nNOTE:  The number of rejected S-NSSAI(s) cannot exceed eight.\n\n|8                                          |7          |\n|Length of Rejected NSSAI contents          |octet 2    |\n|                                           |octet 3    |\n|Rejected S-NSSAI 1                         |           |\n|                                           |octet m    |\n|                                           |octet m+1* |\n|Rejected S-NSSAI 2                         |           |\n|                                           |octet n*   |\n|                                           |octet n+1* |\n|\u2026                                          |           |\n|                                           |octet u*   |\n|                                           |octet u+1* |\n|Rejected S-NSSAI n                         |           |\n|                                           |octet v*   |\n\n\nFigure\u00a09.10.3.42.1: Rejected NSSAI information element\n\n|8                    |7                    |6          |\n|SST                                        |octet 2    |\n|                                           |octet 3*   |\n|SD                                         |           |\n|                                           |octet 5*   |\n\n\nFigure\u00a09.10.3.42.2: Rejected S-NSSAI\n\nTable\u00a09.10.3.42.1: Rejected NSSAI information element\n\n|Value part of the Rejected NSSAI information element   |\n|(octet 3 to v)                                         |\n|The value part of the Rejected NSSAI information       |\n|element consists of one or more rejected S-NSSAIs. Each|\n|rejected S-NSSAI consists of one S-NSSAI and an        |\n|associated cause value. The length of each rejected    |\n|S-NSSAI can be determined by the 'length of rejected   |\n|S-NSSAI' field in the first octet of the rejected      |\n|S-NSSAI.                                               |\n|The UE shall store the complete list received. If more |\n|than 8 rejected S-NSSAIs are included in this          |\n|information element, the UE shall store the first 8    |\n|rejected S-NSSAIs and ignore the remaining octets of   |\n|the information element.                               |\n|                                                       |\n|Rejected S-NSSAI:                                      |\n|Cause value (octet 1)                                  |\n|Bits                                                   |\n|4                                                      |\n|All other values are reserved.                         |\n|                                                       |\n|Slice/service type (SST) (octet 2)                     |\n|                                                       |\n|This field contains the 8 bit SST value. The coding of |\n|the SST value part is defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].   |\n|                                                       |\n|Slice differentiator (SD) (octet 3 to octet 5)         |\n|                                                       |\n|This field contains the 24 bit SD value. The coding of |\n|the SD value part is defined in 3GPP\u00a0TS\u00a023.003\u00a0[4].    |\n|NOTE: If octet 3 is included, then octet 4 and octet 5 |\n|shall be included.                                     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Request type", "numbering": "9.10.3.43", "title_level": 3, "desc": "9.10.3.43   Request type\n\nThe purpose of the Request type information element is to indicate type of\nthe PDU session establishment.\n\nThe Request type information element is coded as shown in\nfigure\u00a09.10.3.43.1 and table\u00a09.10.3.43.1.\n\nThe Request type is a type 1 information element.\n\n|8                    |7    |6               |5          |\n\n\nFigure\u00a09.10.3.43.1: Request type information element\n\nTable\u00a09.10.3.43.1: Request type information element\n\n|Request type value (octet 1, bit 1 to bit 4)          |\n|                                                      |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |initial request                               |\n|0|1|0| |existing PDU session                          |\n|0|1|1| |initial emergency request                     |\n|1|0|0| |existing emergency PDU session                |\n|1|1|1| |reserved                                      |\n|                                                      |\n|All other values are unused and shall be interpreted  |\n|as \"initial request\", if received by the network.     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S1 UE network capability", "numbering": "9.10.3.44", "title_level": 3, "desc": "9.10.3.44   S1 UE network capability\n\nSee subclause\u00a09.9.3.34 in 3GPP\u00a0TS\u00a024.301\u00a0[15].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service area list", "numbering": "9.10.3.45", "title_level": 3, "desc": "9.10.3.45   Service area list\n\nThe purpose of the Service area list information element is to transfer a\nlist of allowed tracking areas for an allowed area or a list of non-allowed\ntracking areas for a non-allowed area from the network to the UE.\n\nThe coding of the information element allows combining different types of\nlists. The lists of type \"00\" and \"01\" allow a more compact encoding, when\nthe different TAIs are sharing the PLMN identity. The lists of type \"11\"\nindicate all TAIs in the PLMN are allowed area.\n\nThe Service area list information element is coded as shown in\nfigure\u00a09.10.3.45.1, figure\u00a09.10.3.45.2, figure\u00a09.10.3.45.3,\nfigure\u00a09.10.3.45.4, figure\u00a09.10.3.45.5 and table\u00a09.10.3.45.1.\n\nThe Service area list is a type 4 information element with a minimum length\nof 6 octets and a maximum length of 114 octets. The list can contain a\nmaximum of 16 different tracking area identities.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |          |\n|Service area list IEI                      |octet 1   |\n|Length of service area list contents       |octet 2   |\n|                                           |octet 3   |\n|Partial service area list 1                |          |\n|                                           |octet i   |\n|                                           |octet i+1*|\n|Partial service area list 2                |          |\n|                                           |octet l*  |\n|                                           |octet l+1*|\n|\u2026                                          |          |\n|                                           |octet m*  |\n|                                           |octet m+1*|\n|Partial service area list p                |          |\n|                                           |octet n*  |\n\n\nFigure\u00a09.10.3.45.1: Service area list information element\n\n\n\n|8    |7   |6    |5    |4    |3    |2    |1    |          |\n|Allow|Type of  |Number of elements         |octet 1   |\n|ed   |list     |                           |          |\n|type |         |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n|                                           |          |\n|TAC 1                                      |octet 5   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 6   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 7   |\n|\u2026                                          |\u2026         |\n|\u2026                                          |\u2026         |\n|                                           |          |\n|TAC k                                      |octet     |\n|                                           |3k+2*     |\n|                                           |          |\n|TAC k (continued)                          |octet     |\n|                                           |3k+3*     |\n|                                           |          |\n|TAC k (continued)                          |octet     |\n|                                           |3k+4*     |\n\n\nFigure\u00a09.10.3.45.2: Partial service area list \u2013 type of list = \"00\"\n\n\n\n|8    |7   |6    |5    |4    |3    |2    |1    |          |\n|Allow|Type of  |Number of elements         |octet 1   |\n|ed   |list     |                           |          |\n|type |         |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n|                                           |          |\n|TAC 1                                      |octet 5   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 6   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 7   |\n\n\nFigure\u00a09.10.3.45.3: Partial service area list \u2013 type of list = \"01\"\n\n\n\n|8    |7   |6    |5    |4    |3    |2    |1    |          |\n|Allow|Type of  |Number of elements         |octet 1   |\n|ed   |list     |                           |          |\n|type |         |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n|                                           |          |\n|TAC 1                                      |octet 5   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 6   |\n|                                           |          |\n|TAC 1 (continued)                          |octet 7   |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 8*  |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 9*  |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 10* |\n|                                           |          |\n|TAC 2                                      |octet 11* |\n|                                           |          |\n|TAC 2 (continued)                          |octet 12* |\n|                                           |          |\n|TAC 2 (continued)                          |octet 13* |\n|\u2026                                          |          |\n|\u2026                                          |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet     |\n|                     |                     |6k-4*     |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet     |\n|                     |                     |6k-3*     |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet     |\n|                     |                     |6k-2*     |\n|                                           |          |\n|TAC k                                      |octet     |\n|                                           |6k*-1     |\n|                                           |          |\n|TAC k (continued)                          |octet 6k* |\n|                                           |          |\n|TAC k (continued)                          |octet     |\n|                                           |6k+1*     |\n\n\nFigure\u00a09.10.3.45.4: Partial service area list \u2013 type of list = \"10\"\n\n\n\n|8    |7   |6    |5    |4    |3    |2    |1    |          |\n|Allow|Type of  |Number of elements         |octet 1   |\n|ed   |list     |                           |          |\n|type |         |                           |          |\n|                     |                     |          |\n|MCC digit 2          |MCC digit 1          |octet 2   |\n|                     |                     |          |\n|MNC digit 3          |MCC digit 3          |octet 3   |\n|                     |                     |          |\n|MNC digit 2          |MNC digit 1          |octet 4   |\n\n\nFigure\u00a09.10.3.45.5: Partial service area list \u2013 type of list = \"11\"\n\nTable\u00a09.10.3.45.1: Service area list information element\n\n|Value part of the Service area list information       |\n|element (octets 3 to n)                               |\n|                                                      |\n|The value part of the Service area list information   |\n|element consists of one or several partial service    |\n|area lists. The length of each partial service area   |\n|list can be determined from the 'type of list' field  |\n|and the 'number of elements' field in the first octet |\n|of the partial service area list.                     |\n|For allowed type \"0\", TAIs contained in all partial   |\n|service area lists are in the allowed area. For       |\n|allowed type \"1\", TAIs contained in all partial       |\n|service area lists are in the non-allowed area.       |\n|The UE shall store the complete list received. If more|\n|than 16 TAIs are included in this information element,|\n|the UE shall store the first 16 TAIs and ignore the   |\n|remaining octets of the information element.          |\n|                                                      |\n|                                                      |\n|Partial service area list:                            |\n|                                                      |\n|Allowed type (octet 1)                                |\n|Bit                                                   |\n|8| |                                                  |\n|0| |TAIs in the list are in the allowed area          |\n|1| |TAIs in the list are in the non-allowed area      |\n|                                                      |\n|Type of list (octet 1)                                |\n|Bits                                                  |\n|7|6|                                                  |\n|0|0|list of TACs belonging to one PLMN, with          |\n| | |non-consecutive TAC values                        |\n|0|1|list of TACs belonging to one PLMN, with          |\n| | |consecutive TAC values                            |\n|1|0|list of TAIs belonging to different PLMNs (see    |\n| | |NOTE)                                             |\n|1|1|All TAIs belonging to the PLMN are in the allowed |\n| | |area                                              |\n|                                                      |\n|Number of elements (octet 1)                          |\n|Bits                                                  |\n|5|4|3|2|1|                                           |\n|0|0|0|0|0| 1 element                                 |\n|0|0|0|0|1| 2 elements                                |\n|0|0|0|1|0| 3 elements                                |\n|\u2026         |                                           |\n|0|1|1|0|1| 14 elements                               |\n|0|1|1|1|0| 15 elements                               |\n|0|1|1|1|1| 16 elements                               |\n|                                                      |\n|All other values are unused and shall be interpreted  |\n|as 16, if received by the UE.                         |\n|                                                      |\n|For type of list = \"00\" and number of elements = k:   |\n|                                                      |\n|octets 2 to 4 contain the MCC+MNC, and                |\n|for j = 1, \u2026, k:                                      |\n|octets 3j+2 to 3j+4 contain the TAC of the j-th TAI   |\n|belonging to the partial list,                        |\n|                                                      |\n|For type of list = \"01\" and number of elements = k:   |\n|                                                      |\n|octets 2 to 4 contain the MCC+MNC, and                |\n|octets 5 to 7 contain the TAC of the first TAI        |\n|belonging to the partial list.                        |\n|The TAC values of the other k-1 TAIs are TAC+1, TAC+2,|\n|\u2026, TAC+k-1.                                           |\n|                                                      |\n|For type of list = \"10\" and number of elements = k:   |\n|                                                      |\n|for j = 1, \u2026, k.                                      |\n|octets 6j-4 to 6j-1 contain the MCC+MNC, and          |\n|octets 6j-1 to 6j+1 contain the TAC of the j-th TAI   |\n|belonging to the partial list.                        |\n|                                                      |\n|For type of list = \"11\":                              |\n|                                                      |\n|Allowed type shall be coded as \"0\" and number of      |\n|elements shall be ignored, and                        |\n|octets 2 to 4 contain the MCC+MNC.                    |\n|If allowed type is coded as \"1\", it shall be          |\n|interpreted as \"0\".                                   |\n|                                                      |\n|                                                      |\n|MNC, Mobile network code                              |\n|                                                      |\n|The coding of this field is the responsibility of each|\n|administration but BCD coding shall be used. The MNC  |\n|shall consist of 2 or 3 digits. If a network operator |\n|decides to use only two digits in the MNC, MNC digit 3|\n|shall be coded as \"1111\".                             |\n|                                                      |\n|TAC, Tracking area code                               |\n|                                                      |\n|In the TAC field bit 8 of the first octet is the most |\n|significant bit and bit 1 of the third octet the least|\n|significant bit.                                      |\n|The coding of the tracking area code is the           |\n|responsibility of each administration. Coding using   |\n|full hexadecimal representation may be used. The      |\n|tracking area code consists of 3 octets.              |\n|NOTE: If the \"list of TAIs belonging to different     |\n|PLMNs\" is used, the PLMNs included in the list need to|\n|be present in the list of equivalent PLMNs.           |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Service type", "numbering": "9.10.3.46", "title_level": 3, "desc": "9.10.3.46   Service type\n\nThe purpose of the service type information element is to specify the\npurpose of the service request procedure.\n\nThe service type is a type 1 information element.\n\nThe service type information element is coded as shown in\nfigure\u00a09.10.3.46.1 and table\u00a09.10.3.46.1.\n\n|8                    |7                    |6          |\n\nFigure\u00a09.10.3.46.1: Service type information element\n\nTable\u00a09.10.3.46.1: Service type information element\n\n\n\n|Service type value (octet 1)                          |\n|                                                      |\n|Service type value                                    |\n|Bits                                                  |\n|4                                                     |\n|All other values are reserved.                        |\n|                                                      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Time zone", "numbering": "9.10.3.47", "title_level": 3, "desc": "9.10.3.47   Time zone\n\nSee subclause\u00a010.5.3.8 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Time zone and time", "numbering": "9.10.3.48", "title_level": 3, "desc": "9.10.3.48   Time zone and time\n\nSee subclause\u00a010.5.3.9 in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Transparent container", "numbering": "9.10.3.49", "title_level": 3, "desc": "9.10.3.49   Transparent container\n\nEditor's note:  The IE coding is FFS.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE security capability", "numbering": "9.10.3.50", "title_level": 3, "desc": "9.10.3.50   UE security capability\n\nThe UE security capability information element is used by the network to\nindicate which security algorithms are supported by the UE in N1 mode and\nS1 mode for NAS security as well as which security algorithms are supported\nover NR and E-UTRA for AS security.\n\nThe UE security capability information element is coded as shown in\nfigure\u00a09.10.3.50.1 and table\u00a09.10.3.50.1.\n\nThe UE security capability is a type 4 information element with a minimum\nlength of 4 octets and a maximum length of 6 octets.\n\nOctets 5 and 6 are optional. If octet 5 is included, then also octet 6\nshall be included.\n\nIf the UE did not indicate support of any security algorithm for NAS\nsecurity in S1 mode and did not indicate support of any security algorithm\nfor AS security over E-UTRA, octets 5 and 6 shall not be included.\n\n|8                                           |7       |\n|Length of UE security capability contents   |octet 2 |\n|                                                       |\n|5G-EA0                                                 |\n|                                                       |\n|5GS encryption algorithm 5G-EA0 supported (octet 3, bit|\n|8)                                                     |\n|0| | | |5GS encryption algorithm 5G-EA0 not supported |\n|1| | | |5GS encryption algorithm 5G-EA0 supported     |\n|                                                       |\n|5GS encryption algorithm 128-5G-EA1 supported (octet 3,|\n|bit 7)                                                 |\n|0| | | |5GS encryption algorithm 128-5G-EA1 not       |\n| | | | |supported                                     |\n|1| | | |5GS encryption algorithm 128-5G-EA1 supported |\n|                                                       |\n|5GS encryption algorithm 128-5G-EA2 supported (octet 3,|\n|bit 6)                                                 |\n|0| | | |5GS encryption algorithm 128-5G-EA2 not       |\n| | | | |supported                                     |\n|1| | | |5GS encryption algorithm 128-5G-EA2 supported |\n|                                                       |\n|5GS encryption algorithm 128-5G-EA3 supported (octet 3,|\n|bit 5)                                                 |\n|0| | | |5GS encryption algorithm 128-5G-EA31 not      |\n| | | | |supported                                     |\n|1| | | |5GS encryption algorithm 128-5G-EA3 supported |\n|                                                       |\n|5GS encryption algorithm 5G-EA4 supported (octet 3, bit|\n|4)                                                     |\n|0| | | |5GS encryption algorithm 5G-EA4 not supported |\n|1| | | |5GS encryption algorithm 5G-EA4 supported     |\n|                                                       |\n|5GS encryption algorithm 5G-EA5 supported (octet 3, bit|\n|3)                                                     |\n|0| | | |5GS encryption algorithm 5G-EA5 not supported |\n|1| | | |5GS encryption algorithm 5G-EA5 supported     |\n|                                                       |\n|5GS encryption algorithm 5G-EA6 supported (octet 3, bit|\n|2)                                                     |\n|0| | | |5GS encryption algorithm 5G-EA6 not supported |\n|1| | | |5GS encryption algorithm 5G-EA6 supported     |\n|                                                       |\n|5GS encryption algorithm 5G-EA7 supported (octet 3, bit|\n|1)                                                     |\n|0| | | |5GS encryption algorithm 5G-EA7 not supported |\n|1| | | |5GS encryption algorithm 5G-EA7 supported     |\n|                                                       |\n|5GS integrity algorithms supported (see NOTE\u00a02) (octet |\n|4)                                                     |\n|                                                       |\n|5GS integrity algorithm 5G-IA0 supported (octet 4, bit |\n|8)                                                     |\n|0| | | |5GS integrity algorithm 5G-IA0 not supported  |\n|1| | | |5GS integrity algorithm 5G-IA0 supported      |\n|                                                       |\n|5GS integrity algorithm 128-5G-IA1 supported (octet 4, |\n|bit 7)                                                 |\n|0| | | |5GS integrity algorithm 128-5G-IA1 not        |\n| | | | |supported                                     |\n|1| | | |5GS integrity algorithm 128-5G-IA1 supported  |\n|                                                       |\n|5GS integrity algorithm 128-5G-IA2 supported (octet 4, |\n|bit 6)                                                 |\n|0| | | |5GS integrity algorithm 128-5G-IA2 not        |\n| | | | |supported                                     |\n|1| | | |5GS integrity algorithm 128-5G-IA2 supported  |\n|                                                       |\n|5GS integrity algorithm 128-5G-IA3 supported (octet 4, |\n|bit 5)                                                 |\n|0| | | |5GS integrity algorithm 128-5G-IA3 not        |\n| | | | |supported                                     |\n|1| | | |5GS integrity algorithm 128-5G-IA3 supported  |\n|                                                       |\n|5GS integrity algorithm 5G-IA4 supported (octet 4, bit |\n|4)                                                     |\n|0| | | |5GS integrity algorithm 5G-IA4 not supported  |\n|1| | | |5GS integrity algorithm 5G-IA4 supported      |\n|                                                       |\n|5GS integrity algorithm 5G-IA5 supported (octet 4, bit |\n|3)                                                     |\n|0| | | |5GS integrity algorithm 5G-IA5 not supported  |\n|1| | | |5GS integrity algorithm 5G-IA5 supported      |\n|                                                       |\n|5GS integrity algorithm 5G-IA6supported (octet 4, bit  |\n|2)                                                     |\n|0| | | |5GS integrity algorithm 5G-IA6 not supported  |\n|1| | | |5GS integrity algorithm 5G-IA6 supported      |\n|                                                       |\n|5GS integrity algorithm 5G-IA7 supported (octet 4, bit |\n|1)                                                     |\n|0| | | |5GS integrity algorithm 5G-IA7 not supported  |\n|1| | | |5GS integrity algorithm 5G-IA7 supported      |\n|                                                       |\n|EPS encryption algorithms supported (see NOTE\u00a03) (octet|\n|5)                                                     |\n|                                                       |\n|EPS encryption algorithm EEA0 supported (octet 5, bit  |\n|8)                                                     |\n|0| | | |EPS encryption algorithm EEA0 not supported   |\n|1| | | |EPS encryption algorithm EEA0 supported       |\n|                                                       |\n|EPS encryption algorithm 128-EEA1 supported (octet 5,  |\n|bit 7)                                                 |\n|0| | | |EPS encryption algorithm 128-EEA1 not         |\n| | | | |supported                                     |\n|1| | | |EPS encryption algorithm 128-EEA1 supported   |\n|                                                       |\n|EPS encryption algorithm 128-EEA2 supported (octet 5,  |\n|bit 6)                                                 |\n|0| | | |EPS encryption algorithm 128-EEA2 not         |\n| | | | |supported                                     |\n|1| | | |EPS encryption algorithm 128-EEA2 supported   |\n|                                                       |\n|EPS encryption algorithm 128-EEA3 supported (octet 5,  |\n|bit 5)                                                 |\n|0| | | |EPS encryption algorithm 128-EEA3 not         |\n| | | | |supported                                     |\n|1| | | |EPS encryption algorithm 128-EEA3 supported   |\n|                                                       |\n|EPS encryption algorithm EEA4 supported (octet 5, bit  |\n|4)                                                     |\n|0| | | |EPS encryption algorithm EEA4 not supported   |\n|1| | | |EPS encryption algorithm EEA4 supported       |\n|                                                       |\n|EPS encryption algorithm EEA5 supported (octet 5, bit  |\n|3)                                                     |\n|0| | | |EPS encryption algorithm EEA5 not supported   |\n|1| | | |EPS encryption algorithm EEA5 supported       |\n|                                                       |\n|EPS encryption algorithm EEA6 supported (octet 5, bit  |\n|2)                                                     |\n|0| | | |EPS encryption algorithm EEA6 not supported   |\n|1| | | |EPS encryption algorithm EEA6 supported       |\n|                                                       |\n|EPS encryption algorithm EEA7 supported (octet 5, bit  |\n|1)                                                     |\n|0| | | |EPS encryption algorithm EEA7 not supported   |\n|1| | | |EPS encryption algorithm EEA7 supported       |\n|                                                       |\n|EPS integrity algorithms supported (see NOTE\u00a04) (octet |\n|6)                                                     |\n|                                                       |\n|EPS integrity algorithm EIA0 supported (octet 6, bit 8)|\n|0| | | |EPS integrity algorithm EIA0 not supported    |\n|1| | | |EPS integrity algorithm EIA0 supported        |\n|                                                       |\n|EPS integrity algorithm 128-EIA1 supported (octet 6,   |\n|bit 7)                                                 |\n|0| | | |EPS integrity algorithm 128-EIA1 not supported|\n|1| | | |EPS integrity algorithm 128-EIA1 supported    |\n|                                                       |\n|EPS integrity algorithm 128-EIA2 supported (octet 6,   |\n|bit 6)                                                 |\n|0| | | |EPS integrity algorithm 128-EIA2 not supported|\n|1| | | |EPS integrity algorithm 128-EIA2 supported    |\n|                                                       |\n|EPS integrity algorithm 128-EIA3 supported (octet 6,   |\n|bit 5)                                                 |\n|0| | | |EPS integrity algorithm 128-EIA3 not supported|\n|1| | | |EPS integrity algorithm 128-EIA3 supported    |\n|                                                       |\n|EPS integrity algorithm EIA4 supported (octet 6, bit 4)|\n|0| | | |EPS integrity algorithm EIA4 not supported    |\n|1| | | |EPS integrity algorithm EIA4 supported        |\n|                                                       |\n|EPS integrity algorithm EIA5 supported (octet 6, bit 3)|\n|0| | | |EPS integrity algorithm EIA5 not supported    |\n|1| | | |EPS integrity algorithm EIA5 supported        |\n|                                                       |\n|EPS integrity algorithm EIA6 supported (octet 6, bit 2)|\n|0| | | |EPS integrity algorithm EIA6 not supported    |\n|1| | | |EPS integrity algorithm EIA6 supported        |\n|                                                       |\n|EPS integrity algorithm EIA7 supported (octet 6, bit 1)|\n|0| | | |EPS integrity algorithm EIA7 not supported    |\n|1| | | |EPS integrity algorithm EIA7 supported        |\n|                                                       |\n|NOTE\u00a01: The code points in octet 3 are used to indicate|\n|support for 5GS encryption algorithms for NAS security |\n|in N1 mode and support for 5GS encryption algorithms   |\n|for AS security over NR.                               |\n|NOTE\u00a02: The code points in octet 4 are used to indicate|\n|support for 5GS integrity algorithms for NAS security  |\n|in N1 mode and support for 5GS integrity algorithms for|\n|AS security over NR.                                   |\n|NOTE\u00a03: The code points in octet 5 are used to indicate|\n|support for EPS encryption algorithms for NAS security |\n|in S1 mode and support for EPS encryption algorithms   |\n|for AS security over E-UTRA.                           |\n|NOTE\u00a04: The code points in octet 6 are used to indicate|\n|support for EPS integrity algorithms for NAS security  |\n|in S1 mode and support for EPS integrity algorithms for|\n|AS security over E-UTRA.                               |\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE's usage setting", "numbering": "9.10.3.51", "title_level": 3, "desc": "9.10.3.51   UE's usage setting\n\nThe purpose of the UE's usage setting information element is to provide the\nnetwork with the UE's usage setting as defined in 3GPP\u00a0TS\u00a024.301\u00a0[15]. The\nnetwork uses the UE's usage setting to select the RFSP index.\n\nThe UE's usage setting information element is coded as shown in\nfigure\u00a09.10.3.51.1 and table\u00a09.10.3.51.1.\n\nThe UE's usage setting is a type 4 information element with a length of 3\noctets.\n\n|8                                           |7       |\n|Length of UE's usage setting contents       |octet 2 |\n|0                                                      |\n|Spare                                                  |\n|0| | | |voice centric                                 |\n|1| | | |data centric                                  |\n|                                                       |\n|All other bits in the octet 3 are spare and shall be   |\n|coded as zero,                                         |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE status", "numbering": "9.10.3.52", "title_level": 3, "desc": "9.10.3.52   UE status\n\nThe purpose of the UE status information element is to provide the network\nwith information concerning aspects of the current UE registration status\nwhich is used for interworking with EPS.\n\nThe UE status information element is coded as shown in figure\u00a09.10.3.52.1\nand table\u00a09.10.3.52.1.\n\nThe UE status is a type 4 information element with a length of 3 octets.\n\n|8                                           |7       |\n|Length of UE status contents                |octet 2 |\n|0                                                      |\n|Spare                                                  |\n|0| | | |UE is not in EMM-REGISTERED state             |\n|1| | | |UE is in EMM-REGISTERED state                 |\n|                                                       |\n|5GMM registration status (N1 mode reg) (octet 3, bit 2)|\n|0| | | |UE is not in 5GMM-REGISTERED state            |\n|1| | | |UE is in 5GMM-REGISTERED state                |\n|                                                       |\n|All other bits in the octet 3 are spare and shall be   |\n|coded as zero.                                         |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Uplink data status", "numbering": "9.10.3.53", "title_level": 3, "desc": "9.10.3.53   Uplink data status\n\nThe purpose of the Uplink data status information element is to indicate to\nthe network which preserved PDU session contexts have uplink data pending.\n\nThe Uplink data status information element is coded as shown in\nfigure\u00a09.10.3.53.1 and table\u00a09.10.3.53.1.\n\nThe Uplink data status information element is a type 4 information element\nwith minimum length of 4 octets a maximum length of 34 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|Uplink data status IEI                     |octet 1 |\n|Length of uplink data status contents      |octet 2 |\n|PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |PSI  |octet 3 |\n|(7)  |(6)  |(5)  |(4)  |(3)  |(2)  |(1)  |(0)  |        |\n|0    |0    |0    |0    |0    |0    |0    |0    |        |\n|spare                                      |octet 5*|\n|                                           |-34*    |\n\n\nFigure\u00a09.10.3.53.1: Uplink data status information element\n\nTable\u00a09.10.3.53.1: Uplink data status information element\n\n|PSI(x) shall be coded as follows:                                     |\n|                                                                      |\n|PSI(0):                                                               |\n|Bit 1 of octet 3 is spare and shall be coded as zero.                 |\n|                                                                      |\n|PSI(1) \u2013 PSI(15):                                                     |\n|0 indicates that no uplink data are pending for the corresponding PDU |\n|session identity.                                                     |\n|1 indicates that uplink data are pending for the corresponding PDU    |\n|session identity.                                                     |\n|                                                                      |\n|All bits in octet 5 to 34 are spare and shall be coded as zero, if the|\n|respective octet is included in the information element.              |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS session management (5GSM) information elements", "numbering": "9.10.4", "title_level": 2, "desc": "9.10.4 5GS session management (5GSM) information elements\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM capability", "numbering": "9.10.4.1", "title_level": 3, "desc": "9.10.4.1 5GSM capability\n\nThe purpose of the 5GSM capability information element is to indicate UE\ncapability related to the PDU session management.\n\nThe 5GSM capability information element is coded as shown in\nfigure\u00a09.10.4.1.1 and table\u00a09.10.4.1.1.\n\nThe 5GSM capability is a type 4 information element with a minimum length\nof 3 octets and a maximum length of 15 octets.\n\n|8                                           |7       |\n|Length of 5GSM capability contents          |octet 2 |\n|0                                           |0       |\n|Spare                                       |Spare   |\n\n\nFigure\u00a09.10.4.1.1: 5GSM capability information element\n\nTable\u00a09.10.4.1.1: 5GSM capability information element\n\n|5GSM capability value                                  |\n|RqoS(octet 3, bit 1)                                   |\n|This bit indicates the 5GSM capability to support      |\n|reflective QoS.                                        |\n|0| | | |Reflective QoS not supported                  |\n|1| | | |Reflective QoS supported                      |\n|                                                       |\n|Multi-homed IPv6 PDU session (MH6-PDU) (octet 3, bit 2)|\n|This bit indicates the 5GSM capability for Multi-homed |\n|IPv6 PDU session.                                      |\n|0| | | |Multi-homed IPv6 PDU session not supported    |\n|1| | | |Multi-homed IPv6 PDU session supported        |\n|                                                       |\n|All other bits in octet 3 to 15 are spare and shall be |\n|coded as zero, if the respective octet is included in  |\n|the information element.                               |\n|                                                       |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM cause", "numbering": "9.10.4.2", "title_level": 3, "desc": "9.10.4.2 5GSM cause\n\nThe purpose of the 5GSM cause information element is to indicate the reason\nwhy a 5GSM request is rejected.\n\nThe 5GSM cause information element is coded as shown in figure\u00a09.10.4.2.1\nand table\u00a09.10.4.2.1.\n\nThe 5GSM cause is a type 3 information element with 2 octets length.\n\n|8                                             |7          |\n|Cause value                                   |octet 2    |\n\n\nFigure\u00a09.10.4.2.1: 5GSM cause information element\n\nTable\u00a09.10.4.2.1: 5GSM cause information element\n\n|Cause value (octet 2)                                  |\n|Bits                                                   |\n|8                                                      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Allowed SSC mode", "numbering": "9.10.4.3", "title_level": 3, "desc": "9.10.4.3 Allowed SSC mode\n\nThe purpose of the Allowed SSC mode information element is to indicate the\nSSC modes allowed to be used by the UE for the PDU session.\n\nThe Allowed SSC mode information element is coded as shown in\nfigure\u00a09.10.4.3.1 and table\u00a09.10.4.3.1.\n\nThe Allowed SSC mode is a type 1 information element.\n\n|8                    |7    |6    |5    |4    |3          |\n\n\nFigure\u00a09.10.4.3.1: Allowed SSC mode information element\n\nTable\u00a09.10.4.3.1: Allowed SSC mode information element\n\n|SSC1 (octet 1, bit 1)                             |\n|1           |                                     |\n|0           |SSC mode 1 not allowed               |\n|1           |SSC mode 1 allowed                   |\n|            |                                     |\n|SSC1 (octet 1, bit 2)                             |\n|2           |                                     |\n|0           |SSC mode 2 not allowed               |\n|1           |SSC mode 2 allowed                   |\n|            |                                     |\n|SSC3 (octet 1, bit 3)                             |\n|3           |                                     |\n|0           |SSC mode 3 not allowed               |\n|1           |SSC mode 3 allowed                   |\n|                                                  |\n|Bit 4 is spare and shall be encoded as zero.      |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Extended protocol configuration options", "numbering": "9.10.4.4", "title_level": 3, "desc": "9.10.4.4 Extended protocol configuration options\n\nSee subclause\u00a010.5.6.3A in 3GPP\u00a0TS\u00a024.008\u00a0[12].\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mapped EPS bearer contexts", "numbering": "9.10.4.5", "title_level": 3, "desc": "9.10.4.5 Mapped EPS bearer contexts\n\nThe purpose of the mapped EPS bearer contexts information element is to\nindicate a set of EPS contexts for a PDU session context, as described in\nsubclause\u00a06.1.4.1.\n\nThe mapped EPS bearer contexts information element is a type 6 information\nelement with a minimum length of 7 octet and a maximum length of 65538\noctets.\n\nThe mapped EPS bearer contexts information element is coded as shown in\nfigure\u00a09.10.4.5.1, figure\u00a09.10.4.5.2, figure\u00a09.10.4.5.3 and\ntable\u00a09.10.4.5.1.\n\n|                 |8                                   |7      |\n|                 |Length of Mapped EPS bearer contexts|octet 2|\n|                 |contents                            |       |\n|                 |                                    |octet 3|\n|                 |                                    |octet 4|\n|                 |Mapped EPS bearer context 1         |       |\n|                 |                                    |octet u|\n|                 |                                    |octet  |\n|                 |Mapped EPS bearer context 2         |u+1    |\n|                 |                                    |       |\n|                 |                                    |octet v|\n|                 |                                    |octet  |\n|                 |\u2026                                   |v+1    |\n|                 |                                    |       |\n|                 |                                    |octet w|\n|                 |                                    |octet  |\n|                 |Mapped EPS bearer context n         |w+1    |\n|                 |                                    |       |\n|                 |                                    |octet x|\n\n\nFigure\u00a09.10.4.5.1: Mapped EPS bearer contexts\n\n|                 |8   |7   |6   |5   |4   |3   |2   |1  |       |\n|                 |EPS bearer identity                 |octet 4|\n|                 |Length of Mapped EPS bearer context |octet 5|\n|                 |                                    |octet 6|\n|                 |operatio|DEB  |E  |Number of EPS    |octet 7|\n|                 |n code  |bit  |bit|parameters       |       |\n|                 |                                    |octet 8|\n|                 |EPS parameters list                 |       |\n|                 |                                    |       |\n|                 |                                    |octet u|\n\n\nFigure\u00a09.10.4.5.2: Mapped EPS bearer context\n\n\n\n|                |8                                    |7        |\n|                |Length of EPS parameter contents 1   |octet 7  |\n|                |EPS parameter contents 1             |octet 8  |\n|                |                                     |octet h  |\n|                |EPS parameter identifier 2           |octet h+1|\n|                |Length of EPS parameter contents 2   |octet h+2|\n|                |EPS parameter contents 2             |octet h+3|\n|                |                                     |octet i  |\n|                |\u2026                                    |octet i+1|\n|                |                                     |octet j  |\n|                |EPS parameter identifier N           |octet j+1|\n|                |Length of EPS parameter contents N   |octet j+2|\n|                |EPS parameter contents N             |octet j+3|\n|                |                                     |octet x  |\n\n\nFigure\u00a09.10.4.5.3: EPS parameters list\n\nTable\u00a09.10.4.5.1: Mapped EPS bearer contexts information element\n\n|EPS bearer identity (octet 4)                       |\n|                                                    |\n|The EPS bearer identity is used to identity the EPS |\n|bearer, and is coded as specified in subclause\u00a09.3.2|\n|of 3GPP\u00a0TS\u00a024.301\u00a0[15].                             |\n|                                                    |\n|Operation code (bits 8 to 7 of octet 7)             |\n|Bits                                                |\n|8 7                                                 |\n|0 0 Reserved                                        |\n|0 1 Create new EPS bearer                           |\n|1 0 Delete existing EPS bearer                      |\n|1 1 Modify existing EPS bearer                      |\n|                                                    |\n|DEB bit (bit 6 of octet 7)                          |\n|The DEB bit indicates whether the EPS bearer is the |\n|default EPS bearer and it is encoded as follows:    |\n|Bit                                                 |\n|6                                                   |\n|0 the EPS bearer is not the default EPS bearer.     |\n|1 the EPS bearer is the default EPS bearer.         |\n|                                                    |\n|E bit (bit 5 of octet 7)                            |\n|For the \"create new EPS bearer\" operation, the E bit|\n|is encoded as follows:                              |\n|Bit                                                 |\n|5                                                   |\n|0 parameters list is not included                   |\n|1 parameters list is included                       |\n|For the \"modify existing EPS bearer\" operation, the |\n|E bit is encoded as follows:                        |\n|Bit                                                 |\n|5                                                   |\n|0 previously provided parameters list extension     |\n|1 previously provided parameters list replacement   |\n|                                                    |\n|If the E bit is set to \"parameters list is not      |\n|included\", the number of EPS parameters field has   |\n|zero value. If the E bit is set to \"parameters list |\n|is included\", the number of EPS parameters field has|\n|non-zero value. If the E bit is set to \"previously  |\n|provided parameters list extension\" or \"previously  |\n|provided parameters list replacement\", the number of|\n|parameters field can have zero or non-zero value.   |\n|                                                    |\n|Number of EPS parameters (bits 4 to 1 of octet 7)   |\n|The number of EPS parameters contains the binary    |\n|coding for the number of EPS parameters in the EPS  |\n|parameters list field. The number of EPS parameters |\n|field is encoded in bits 5 through 1 of octet x+1   |\n|where bit 5 is the most significant and bit 1 is the|\n|least significant bit.                              |\n|                                                    |\n|EPS parameters list (octets 8 to u)                 |\n|The EPS parameters list contains a variable number  |\n|of EPS parameters.                                  |\n|                                                    |\n|Each EPS parameter included in the EPS parameters   |\n|list is of variable length and consists of:         |\n|- an EPS parameter identifier (1 octet);            |\n|- the length of the EPS parameter contents (1       |\n|octet); and                                         |\n|- the EPS parameter contents itself (variable amount|\n|of octets).                                         |\n|                                                    |\n|The EPS parameter identifier field is used to       |\n|identify each EPS parameter included in the EPS     |\n|parameters list and it contains the hexadecimal     |\n|coding of the EPS parameter identifier. Bit 8 of the|\n|EPS parameter identifier field contains the most    |\n|significant bit and bit 1 contains the least        |\n|significant bit. In this version of the protocol,   |\n|the following EPS parameter identifiers are         |\n|specified:                                          |\n|- 01H (Mapped EPS QoS parameters);                  |\n|- 02H (Mapped extended EPS QoS parameters); and     |\n|- 03H (Traffic flow template).                      |\n|- 04H (APN-AMBR).                                   |\n|- 05H (extended APN-AMBR).                          |\n|                                                    |\n|If the EPS parameters list contains an EPS parameter|\n|identifier that is not supported by the receiving   |\n|entity the corresponding EPS parameter shall be     |\n|discarded.                                          |\n|                                                    |\n|The length of EPS parameter contents field contains |\n|the binary coded representation of the length of the|\n|EPS parameter contents field. The first bit in      |\n|transmission order is the most significant bit.     |\n|                                                    |\n|When the parameter identifier indicates mapped EPS  |\n|QoS parameters, the length and parameter contents   |\n|field are coded as specified in subclause\u00a09.9.4.3 of|\n|3GPP\u00a0TS\u00a024.301\u00a0[15].                                |\n|                                                    |\n|When the parameter identifier indicates mapped      |\n|extended EPS QoS parameters, the length and         |\n|parameter contents field are coded as specified in  |\n|subclause\u00a09.9.4.30 of 3GPP\u00a0TS\u00a024.301\u00a0[15].          |\n|                                                    |\n|When the parameter identifier indicates traffic flow|\n|template, the length and parameter contents field   |\n|are coded from octet 2 as shown figure\u00a010.5.144 and |\n|table\u00a010.5.162 of 3GPP\u00a0TS\u00a024.008\u00a0[12].              |\n|                                                    |\n|When the parameter identifier indicates APN-AMBR,   |\n|the length and parameter contents field are coded as|\n|specified in subclause\u00a09.9.4.2 of                   |\n|3GPP\u00a0TS\u00a024.301\u00a0[15].                                |\n|                                                    |\n|When the parameter identifier indicates Extended    |\n|APN-AMBR, the length and parameter contents field   |\n|are coded as specified in subclause\u00a09.9.4.29 of     |\n|3GPP\u00a0TS\u00a024.301\u00a0[15].                                |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Maximum number of supported packet filters", "numbering": "9.10.4.6", "title_level": 3, "desc": "9.10.4.6 Maximum number of supported packet filters\n\nThe purpose of the Maximum number of supported packet filters information\nelement is for the UE to indicate to the network the maximum number of\npacket filters, associated with signaled QoS rules, that can be supported\nby the UE for the PDU session that is being established, when the PDU\nsession type \"IPv4\", \"IPv6\", \"IPv4v6\" or \"Ethernet\".\n\nThe Maximum number of supported packet filters is coded as shown in\nfigure\u00a09.10.4.6.1 and table\u00a09.10.4.6.2.\n\nThe Maximum number of supported packet filters is a type 3 information\nelement with a length of 3 octets.\n\n|8                                           |7       |\n|Maximum number of supported packet filters  |octet 2 |\n|                                            |octet 3 |\n\n\nFigure\u00a09.10.4.6.1: Maximum number of supported packet filters information\nelement\n\nTable\u00a09.10.4.6.2: Maximum number of supported packet filters information\nelement\n\n|Maximum number of supported packet filters (octet 2 to |\n|3)                                                     |\n|                                                       |\n|In the Maximum number of supported packet filters field|\n|bit 8 of the first octet is the most significant bit   |\n|and bit 7 of second octet is the least significant bit.|\n|Bit 6 to bit 1 of the second octet are spare bits and  |\n|shall be coded as zero.                                |\n|The number of supported packet filters shall be in the |\n|range of 17 to 1024.                                   |\n|                                                       |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU address", "numbering": "9.10.4.7", "title_level": 3, "desc": "9.10.4.7 PDU address\n\nThe purpose of the PDU address information element is to assign to the UE:\n\n-  an IPv4 address associated with a PDU session;\n\n-  an interface identifier for the IPv6 link local address associated with\nthe PDU session; or\n\n-  an IPv4 address and an interface identifier for the IPv6 link local\naddress, associated with the PDU session.\n\nThe PDU address information element is coded as shown in figure\u00a09.10.4.7.1\nand table\u00a09.10.4.7.1.\n\nThe PDU address is a type 4 information element with minimum length of 7\noctets and a maximum length of 15 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|PDU address IEI                            |octet 1 |\n|Length of PDU address contents             |octet 2 |\n|0    |0    |0    |0    |0    |PDU session type|octet 3 |\n|     |     |     |     |     |value           |        |\n|spare                      |                |        |\n|                                           |octet 4 |\n|PDU address information                    |        |\n|                                           |octet 11|\n\n\nFigure\u00a09.10.4.7.1: PDU address information element\n\nTable\u00a09.10.4.7.1: PDU address information element\n\n|PDU session type value (octet 3)                      |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |IPv4                                          |\n|0|1|0| |IPv6                                          |\n|0|1|1| |IPv4v6                                        |\n|                                                      |\n|All other values are reserved.                        |\n|                                                      |\n|Bit 4 to 8 of octet 3 are spare and shall be coded as |\n|zero.                                                 |\n|                                                      |\n|PDU address information (octet 4 to 15)               |\n|                                                      |\n|If the PDU session type value indicates IPv4, the PDU |\n|address information in octet 4 to octet 7 contains an |\n|IPv4 address.                                         |\n|                                                      |\n|If the PDU session type value indicates IPv6, the PDU |\n|address information in octet 4 to octet 11 contains an|\n|interface identifier for the IPv6 link local address. |\n|                                                      |\n|If the PDU session type value indicates IPv4v6, the   |\n|PDU address information in octet 4 to octet 11        |\n|contains an interface identifier for the IPv6 link    |\n|local address and in octet 12 to octet 15 contains an |\n|IPv4 address.                                         |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session type", "numbering": "9.10.4.8", "title_level": 3, "desc": "9.10.4.8 PDU session type\n\nThe purpose of the PDU session type information element is to indicate type\nof the PDU session.\n\nThe PDU session type information element is coded as shown in\nfigure\u00a09.10.4.8.1 and table\u00a09.10.4.8.1.\n\nThe PDU session type is a type 1 information element.\n\n|8                    |7    |6               |5          |\n\n\nFigure\u00a09.10.4.8.1: PDU session type information element\n\nTable\u00a09.10.4.8.1: PDU session type information element\n\n|PDU session type value (octet 1, bit 1 to bit 3)      |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |IPv4                                          |\n|0|1|0| |IPv6                                          |\n|0|1|1| |IPv4v6                                        |\n|1|0|0| |Unstructured                                  |\n|1|0|1| |Ethernet                                      |\n|1|1|1| |reserved                                      |\n|                                                      |\n|All other values are unused and shall be interpreted  |\n|as \"IPv4v6\", if received by the UE or the network.    |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "QoS rules", "numbering": "9.10.4.9", "title_level": 3, "desc": "9.10.4.9 QoS rules\n\nThe purpose of the QoS rules information element is to indicate a set of\nQoS rules to be used by the UE, where each QoS rule is a set of parameters\nas described in subclause\u00a06.2.5.1.1.2:\n\na) for classification and marking of uplink user traffic; and\n\nb) for identification of a QoS flow which the network is to use for a\nparticular downlink user traffic.\n\nNOTE:  The UE needs to be aware of a QoS flow which the network is to use\nfor a particular downlink user traffic e.g. to determine whether a resource\nis available for downlink media of a media stream of an SDP media\ndescription provided by the UE in an IMS session.\n\nThe QoS rules may contain a set of packet filters consisting of zero or\nmore packet filters for UL direction, zero or more packet filters for DL\ndirection, zero or more packet filters for both UL and DL directions or any\ncombinations of these. The set of packet filters determine the traffic\nmapping to QoS flows.\n\nThe QoS rules information element is a type 6 information element with a\nminimum length of 7 octets. The maximum length for the information element\nis 65538 octets.\n\nThe QoS rules information element is coded as shown in figure\u00a09.10.4.9.1,\nfigure\u00a09.10.4.9.2, figure\u00a09.10.4.9.3, figure\u00a09.10.4.9.4, figure\u00a09.10.4.9.5\nand table\u00a09.10.4.9.1.\n\n|                 |8  |7   |6   |5   |4   |3   |2   |1   |      |\n|                 |QoS rules IEI                       |octet |\n|                 |                                    |1     |\n|                 |Length of QoS rules IE              |octet |\n|                 |                                    |2     |\n|                 |                                    |octet |\n|                 |                                    |3     |\n|                 |                                    |octet |\n|                 |QoS rule 1                          |4     |\n|                 |                                    |      |\n|                 |                                    |octet |\n|                 |                                    |u     |\n|                 |                                    |octet |\n|                 |QoS rule 2                          |u+1   |\n|                 |                                    |      |\n|                 |                                    |octet |\n|                 |                                    |v     |\n|                 |                                    |octet |\n|                 |\u2026                                   |v+1   |\n|                 |                                    |      |\n|                 |                                    |octet |\n|                 |                                    |w     |\n|                 |                                    |octet |\n|                 |QoS rule n                          |w+1   |\n|                 |                                    |      |\n|                 |                                    |octet |\n|                 |                                    |x     |\n\n\nFigure\u00a09.10.4.9.1: QoS rules information element\n\n\n\n|                 |8  |7   |6   |5   |4   |3   |2   |1   |      |\n|                 |QoS rule identifier                 |octet |\n|                 |                                    |4     |\n|                 |Length of QoS rule                  |octet |\n|                 |                                    |5     |\n|                 |                                    |octet |\n|                 |                                    |6     |\n|                 |Rule         |DQR  |Number of packet|octet |\n|                 |operation    |bit  |filters         |7     |\n|                 |code         |     |                |      |\n|                 |                                    |octet |\n|                 |Packet filter list                  |8*    |\n|                 |                                    |      |\n|                 |                                    |octet |\n|                 |                                    |z     |\n|                 |0  |E   |Number of parameters       |octet |\n|                 |Spa|    |                           |z+1   |\n|                 |re |    |                           |      |\n|                 |                                    |octet |\n|                 |Parameters list                     |z+2*  |\n|                 |                                    |      |\n|                 |                                    |octet |\n|                 |                                    |m     |\n|                 |QoS rule precedence                 |octet |\n|                 |                                    |m+1*  |\n|                 |0  |0   |QoS flow identifier (QFI)  |octet |\n|                 |Spa|Spar|                           |m+2*  |\n|                 |re |e   |                           |      |\n\n\nFigure\u00a09.10.4.9.2: QoS rule (u=m+2)\n\n\n\n|                |8   |7   |6   |5   |4   |3   |2   |1   |      |\n|                |0   |0   |0   |0   |Packet filter     |octet |\n|                |    |    |    |    |identifier 1      |8     |\n|                |Spare             |                  |      |\n|                |0   |0   |0   |0   |Packet filter     |octet |\n|                |    |    |    |    |identifier 2      |9     |\n|                |Spare             |                  |      |\n|                |\u2026                                   |      |\n|                |0   |0   |0   |0   |Packet filter     |octet |\n|                |    |    |    |    |identifier N      |N+7   |\n|                |Spare             |                  |      |\n\n\nFigure\u00a09.10.4.9.3: Packet filter list when the rule operation is \"modify\nexisting QoS rule and delete packet filters\" (z=N+7)\n\n\n\n|                  |8|7   |6   |5   |4   |3   |2   |1   |         |\n|                  |0|0   |Packet   |Packet filter     |octet 8  |\n|                  | |    |filter   |identifier 1      |         |\n|                  | |    |direction|                  |         |\n|                  | |    |1        |                  |         |\n|                  |Spare |         |                  |         |\n|                  |Length of packet filter contents 1 |octet 9  |\n|                  |Packet filter contents 1           |octet 10 |\n|                  |                                   |octet m  |\n|                  |0|0   |Packet   |Packet filter     |octet m+1|\n|                  | |    |filter   |identifier 2      |         |\n|                  | |    |direction|                  |         |\n|                  | |    |2        |                  |         |\n|                  |Spare |         |                  |         |\n|                  |Length of packet filter contents 2 |octet m+2|\n|                  |Packet filter contents 2           |octet m+3|\n|                  |                                   |octet n  |\n|                  |\u2026                                  |octet n+1|\n|                  |                                   |octet y  |\n|                  |0|0   |Packet   |Packet filter     |octet y+1|\n|                  | |    |filter   |identifier N      |         |\n|                  | |    |direction|                  |         |\n|                  | |    |N        |                  |         |\n|                  |Spare |         |                  |         |\n|                  |Length of packet filter contents N |octet y+2|\n|                  |Packet filter contents N           |octet y+3|\n|                  |                                   |octet z  |\n\n\nFigure\u00a09.10.4.9.4: Packet filter list when the rule operation is \"create\nnew QoS rule\", or \"modify existing QoS rule and add packet filters\" or\n\"modify existing QoS rule and replace packet filters\"\n\n\n\n|                |8   |7   |6   |5   |4   |3   |2   |1   |         |\n|                |Parameter identifier 1               |octet z+2|\n|                |Length of Parameter contents 1       |octet z+3|\n|                |Parameter contents 1                 |octet z+4|\n|                |                                     |octet k  |\n|                |Parameter identifier 2               |octet k+1|\n|                |Length of Parameter contents 2       |octet k+2|\n|                |Parameter contents 2                 |octet k+3|\n|                |                                     |octet p  |\n|                |\u2026                                    |octet p+1|\n|                |                                     |octet q  |\n|                |Parameter identifier N               |octet q+1|\n|                |Length of Parameter contents N       |octet q+2|\n|                |Parameter contents N                 |octet q+3|\n|                |                                     |octet m  |\n\n\nFigure\u00a09.10.4.9.5: Parameters list\n\nTable\u00a09.10.4.9.1: QoS rules information element\n\n|QoS rule identifier (octet 4)                       |\n|The QoS rule identifier field is used to identify   |\n|the QoS rule.                                       |\n|                                                    |\n|QoS rule precedence (octet m+1)                     |\n|The QoS rule precedence field is used to specify the|\n|precedence of the QoS rule among all QoS rules (both|\n|the signalled QoS rules as described in             |\n|subclause\u00a06.2.5.1.1.2 and the derived QoS rules as  |\n|described in subclause\u00a06.2.5.1.1.3) associated with |\n|the PDU session of the QoS flow. This field includes|\n|the binary coded value of the QoS rule precedence in|\n|the range from 0 to 255 (decimal). The higher the   |\n|value of the QoS rule precedence field, the lower   |\n|the precedence of that QoS rule is.                 |\n|The value 80 (decimal) is reserved.                 |\n|                                                    |\n|QoS flow identifier (QFI) (bits 6 to 1 of octet m+2)|\n|The QoS flow identifier (QFI) field contains the QoS|\n|flow identifier.                                    |\n|Bits                                                |\n|6 5 4 3 2 1                                         |\n|0 0 0 0 0 0 QFI 0                                   |\n|to                                                  |\n|1 1 1 1 1 1 QFI 63                                  |\n|                                                    |\n|                                                    |\n|DQR bit (bit 5 of octet 7)                          |\n|The DQR bit indicates whether the QoS rule is the   |\n|default QoS rule and it is encoded as follows:      |\n|Bit                                                 |\n|5                                                   |\n|0 the QoS rule is not the default QoS rule.         |\n|1 the QoS rule is the default QoS rule.             |\n|                                                    |\n|Rule operation code (bits 8 to 6 of octet 7)        |\n|Bits                                                |\n|8 7 6                                               |\n|0 0 0 Reserved                                      |\n|0 0 1 Create new QoS rule                           |\n|0 1 0 Delete existing QoS rule                      |\n|0 1 1 Modify existing QoS rule and add packet       |\n|filters                                             |\n|1 0 0 Modify existing QoS rule and replace packet   |\n|filters                                             |\n|1 0 1 Modify existing QoS rule and delete packet    |\n|filters                                             |\n|1 1 0 Modify existing QoS rule without modifying    |\n|packet filters                                      |\n|1 1 1 Reserved                                      |\n|                                                    |\n|                                                    |\n|E bit (bit 7 of octet z+1)                          |\n|For the \"create new QoS rule\" operation, the E bit  |\n|is encoded as follows:                              |\n|Bit                                                 |\n|7                                                   |\n|0 parameters list is not included                   |\n|1 parameters list is included                       |\n|For the \"modify existing QoS rule and add packet    |\n|filters\" operation, the \"modify existing QoS rule   |\n|and replace packet filters\", the \"modify existing   |\n|QoS rule and delete packet filters\" operation and   |\n|the \"modify existing QoS rule without modifying     |\n|packet filters\" operation, the E bit is encoded as  |\n|follows:                                            |\n|Bit                                                 |\n|7                                                   |\n|0 previously provided parameters list extension     |\n|1 previously provided parameters list replacement   |\n|                                                    |\n|If the E bit is set to \"parameters list is not      |\n|included\", the number of parameters field has zero  |\n|value. If the E bit is set to \"parameters list is   |\n|included\", the number of parameters field has       |\n|non-zero value. If the E bit is set to \"previously  |\n|provided parameters list extension\" or \"previously  |\n|provided parameters list replacement\", the number of|\n|parameters field can have zero or non-zero value.   |\n|                                                    |\n|Number of packet filters (bits 4 to 1 of octet 7)   |\n|The number of packet filters contains the binary    |\n|coding for the number of packet filters in the      |\n|packet filter list. The number of packet filters    |\n|field is encoded in bits 4 through 1 of octet 7     |\n|where bit 4 is the most significant and bit 1 is the|\n|least significant bit. For the \"delete existing QoS |\n|rule\" operation and for the \"modify existing QoS    |\n|rule without modifying packet filters\" operation,   |\n|the number of packet filters shall be coded as 0.   |\n|For the \"create new QoS rule\" operation and the     |\n|\"modify existing QoS rule and replace packet        |\n|filters\" operation, the number of packet filters    |\n|shall be greater than or equal to 0 and less than or|\n|equal to 15. For all other operations, the number of|\n|packet filters shall be greater than 0 and less than|\n|or equal to 15.                                     |\n|                                                    |\n|Packet filter list (octets 8 to z)                  |\n|The packet filter list contains a variable number of|\n|packet filters.                                     |\n|                                                    |\n|For the \"delete existing QoS rule\" operation, the   |\n|length of QoS rule field is set to one.             |\n|                                                    |\n|For the \"delete existing QoS rule\" operation and the|\n|\"modify existing QoS rule without modifying packet  |\n|filters\" operation, the packet filter list shall be |\n|empty.                                              |\n|                                                    |\n|For the \"modify existing QoS rule and delete packet |\n|filters\" operation, the packet filter list shall    |\n|contain a variable number of packet filter          |\n|identifiers. This number shall be derived from the  |\n|coding of the number of packet filters field in     |\n|octet 7.                                            |\n|                                                    |\n|For the \"create new QoS rule\" operation and for the |\n|\"modify existing QoS rule and replace packet        |\n|filters\" operation, the packet filter list shall    |\n|contain 0 or a variable number of packet filters.   |\n|This number shall be derived from the coding of the |\n|number of packet filters field in octet 7.          |\n|                                                    |\n|For the \"modify existing QoS rule and add packet    |\n|filters\" operation, the packet filter list shall    |\n|contain a variable number of packet filters. This   |\n|number shall be derived from the coding of the      |\n|number of packet filters field in octet 7.          |\n|                                                    |\n|Each packet filter is of variable length and        |\n|consists of                                         |\n|a packet filter direction (2 bits);                 |\n|- a packet filter identifier (4 bits);              |\n|- the length of the packet filter contents (1       |\n|octet); and                                         |\n|- the packet filter contents itself (variable amount|\n|of octets).                                         |\n|                                                    |\n|The packet filter direction field is used to        |\n|indicate for what traffic direction the filter      |\n|applies.                                            |\n|Bits                                                |\n|6 5                                                 |\n|0 0 reserved                                        |\n|0 1 downlink only                                   |\n|1 0 uplink only                                     |\n|1 1 bidirectional (see NOTE\u00a01)                      |\n|                                                    |\n|The packet filter identifier field is used to       |\n|identify each packet filter in a QoS rule. The least|\n|significant 4 bits are used.                        |\n|                                                    |\n|The length of the packet filter contents field      |\n|contains the binary coded representation of the     |\n|length of the packet filter contents field of a     |\n|packet filter. The first bit in transmission order  |\n|is the most significant bit.                        |\n|                                                    |\n|The packet filter contents field is of variable size|\n|and contains a variable number (at least one) of    |\n|packet filter components. Each packet filter        |\n|component shall be encoded as a sequence of a one   |\n|octet packet filter component type identifier and a |\n|fixed length packet filter component value field.   |\n|The packet filter component type identifier shall be|\n|transmitted first.                                  |\n|                                                    |\n|In each packet filter, there shall not be more than |\n|one occurrence of each packet filter component type.|\n|Among the \"IPv4 remote address type\" and \"IPv6      |\n|remote address/prefix length type\" packet filter    |\n|components, only one shall be present in one packet |\n|filter. Among the \"IPv4 local address type\" and     |\n|\"IPv6 local address/prefix length type\" packet      |\n|filter components, only one shall be present in one |\n|packet filter. Among the \"single local port type\"   |\n|and \"local port range type\" packet filter           |\n|components, only one shall be present in one packet |\n|filter. Among the \"single remote port type\" and     |\n|\"remote port range type\" packet filter components,  |\n|only one shall be present in one packet filter. If  |\n|the \"match-all type\" packet filter component is     |\n|present in the packet filter, no other packet filter|\n|component shall be present in the packet filter and |\n|the length of the packet filter contents field shall|\n|be set to one.                                      |\n|                                                    |\n|The term local refers to the UE and the term remote |\n|refers to an external network entity.               |\n|                                                    |\n|Packet filter component type identifier             |\n|Bits                                                |\n|8 7 6 5 4 3 2 1                                     |\n|0 0 0 0 0 0 0 1 Match-all type                      |\n|0 0 0 1 0 0 0 0 IPv4 remote address type            |\n|0 0 0 1 0 0 0 1 IPv4 local address type             |\n|0 0 1 0 0 0 0 1 IPv6 remote address/prefix length   |\n|type                                                |\n|0 0 1 0 0 0 1 1 IPv6 local address/prefix length    |\n|type                                                |\n|0 0 1 1 0 0 0 0 Protocol identifier/Next header type|\n|0 1 0 0 0 0 0 0 Single local port type              |\n|0 1 0 0 0 0 0 1 Local port range type               |\n|0 1 0 1 0 0 0 0 Single remote port type             |\n|0 1 0 1 0 0 0 1 Remote port range type              |\n|0 1 1 0 0 0 0 0 Security parameter index type       |\n|0 1 1 1 0 0 0 0 Type of service/Traffic class type  |\n|1 0 0 0 0 0 0 0 Flow label type                     |\n|1 0 0 0 0 0 0 1 Destination MAC address type        |\n|1 0 0 0 0 0 1 0 Source MAC address type             |\n|1 0 0 0 0 0 1 1 802.1Q C-TAG VID type               |\n|1 0 0 0 0 1 0 0 802.1Q S-TAG VID type               |\n|1 0 0 0 0 1 0 1 802.1Q C-TAG PCP/DEI type           |\n|1 0 0 0 0 1 1 0 802.1Q S-TAG PCP/DEI type           |\n|1 0 0 0 0 1 1 1 Ethertype type                      |\n|All other values are reserved.                      |\n|                                                    |\n|The description and valid combinations of packet    |\n|filter component type identifiers in a packet filter|\n|are defined in 3GPP\u00a0TS\u00a023.501\u00a0[8].                  |\n|                                                    |\n|For \"match-all type\", the packet filter component   |\n|shall not include the packet filter component value |\n|field.                                              |\n|                                                    |\n|For \"IPv4 remote address type\", the packet filter   |\n|component value field shall be encoded as a sequence|\n|of a four octet IPv4 address field and a four octet |\n|IPv4 address mask field. The IPv4 address field     |\n|shall be transmitted first.                         |\n|                                                    |\n|For \"IPv4 local address type\", the packet filter    |\n|component value field shall be encoded as defined   |\n|for \"IPv4 remote address type\".                     |\n|                                                    |\n|For \"IPv6 remote address/prefix length type\", the   |\n|packet filter component value field shall be encoded|\n|as a sequence of a sixteen octet IPv6 address field |\n|and one octet prefix length field. The IPv6 address |\n|field shall be transmitted first.                   |\n|                                                    |\n|                                                    |\n|For \"IPv6 local address/prefix length type\", the    |\n|packet filter component value field shall be encoded|\n|as defined for \"IPv6 remote address /prefix length\".|\n|                                                    |\n|For \"protocol identifier/Next header type\", the     |\n|packet filter component value field shall be encoded|\n|as one octet which specifies the IPv4 protocol      |\n|identifier or Ipv6 next header.                     |\n|                                                    |\n|For \"single local port type\" and \"single remote port|\n|type\", the packet filter component value field shall|\n|be encoded as two octets which specify a port       |\n|number.                                             |\n|                                                    |\n|For \"local port range type\" and \"remote port range  |\n|type\", the packet filter component value field shall|\n|be encoded as a sequence of a two octet port range  |\n|low limit field and a two octet port range high     |\n|limit field. The port range low limit field shall be|\n|transmitted first.                                  |\n|                                                    |\n|For \"security parameter index\", the packet filter   |\n|component value field shall be encoded as four      |\n|octets which specify the IPSec security parameter   |\n|index.                                              |\n|                                                    |\n|For \"type of service/traffic class type\", the packet|\n|filter component value field shall be encoded as a  |\n|sequence of a one octet type-of-service/traffic     |\n|class field and a one octet type-of-service/traffic |\n|class mask field. The type-of-service/traffic class |\n|field shall be transmitted first.                   |\n|                                                    |\n|For \"flow label type\", the packet filter component  |\n|value field shall be encoded as three octets which  |\n|specify the IPv6 flow label. The bits 8 through 5 of|\n|the first octet shall be spare whereas the remaining|\n|20 bits shall contain the IPv6 flow label.          |\n|                                                    |\n|For \"destination MAC address type\" and \"source MAC  |\n|address type\", the packet filter component value    |\n|field shall be encoded as 6 octets which specify a  |\n|MAC address.                                        |\n|                                                    |\n|For \"802.1Q C-TAG VID type\", the packet filter      |\n|component value field shall be encoded as two octets|\n|which specify the VID of the customer-VLAN tag      |\n|(C-TAG). The bits 8 through 5 of the first octet    |\n|shall be spare whereas the remaining 12 bits shall  |\n|contain the VID.                                    |\n|                                                    |\n|For \"802.1Q S-TAG VID type\", the packet filter      |\n|component value field shall be encoded as two octets|\n|which specify the VID of the service-VLAN tag       |\n|(S-TAG). The bits 8 through 5 of the first octet    |\n|shall be spare whereas the remaining 12 bits shall  |\n|contain the VID.                                    |\n|                                                    |\n|For \"802.1Q C-TAG PCP/DEI type\", the packet filter  |\n|component value field shall be encoded as one octet |\n|which specifies the 802.1Q C-TAG PCP and DEI. The   |\n|bits 8 through 5 of the octet shall be spare, the   |\n|bits 4 through 2 contain the PCP and bit 1 contains |\n|the DEI.                                            |\n|                                                    |\n|For \"802.1Q S-TAG PCP/DEI type\", the packet filter  |\n|component value field shall be encoded as one octet |\n|which specifies the 802.1Q S-TAG PCP. The bits 8    |\n|through 5 of the octet shall be spare, the bits 4   |\n|through 2 contain the PCP and bit 1 contains the    |\n|DEI.                                                |\n|                                                    |\n|For \"ethertype type\", the packet filter component   |\n|value field shall be encoded as two octets which    |\n|specify an ethertype.                               |\n|                                                    |\n|Number of parameters (bits 6 to 1 of octet z+1)     |\n|The number of parameters field contains the binary  |\n|coding for the number of parameters in the          |\n|parameters list field. The number of parameters     |\n|field is encoded in bits 6 through 1 of octet z+1   |\n|where bit 6 is the most significant and bit 1 is the|\n|least significant bit.                              |\n|                                                    |\n|Parameters list (octets z+2 to v)                   |\n|                                                    |\n|The parameters list contains a variable number of   |\n|parameters.                                         |\n|                                                    |\n|Each parameter included in the parameters list is of|\n|variable length and consists of:                    |\n|- a parameter identifier (1 octet);                 |\n|- the length of the parameter contents (1 octet);   |\n|and                                                 |\n|- the parameter contents itself (variable amount of |\n|octets).                                            |\n|                                                    |\n|The parameter identifier field is used to identify  |\n|each parameter included in the parameters list and  |\n|it contains the hexadecimal coding of the parameter |\n|identifier. Bit 8 of the parameter identifier field |\n|contains the most significant bit and bit 1 contains|\n|the least significant bit. In this version of the   |\n|protocol, the following parameter identifiers are   |\n|specified:                                          |\n|- 01H (5QI);                                        |\n|- 02H (GFBR uplink);                                |\n|- 03H (GFBR downlink);                              |\n|- 04H (MFBR uplink);                                |\n|- 05H (MFBR downlink);                              |\n|- 06H (Averaging window); and                       |\n|- 07H (EPS bearer identity).                        |\n|                                                    |\n|If the parameters list contains a parameter         |\n|identifier that is not supported by the receiving   |\n|entity the corresponding parameter shall be         |\n|discarded.                                          |\n|The length of parameter contents field contains the |\n|binary coded representation of the length of the    |\n|parameter contents field. The first bit in          |\n|transmission order is the most significant bit.     |\n|                                                    |\n|When the parameter identifier indicates 5QI, the    |\n|parameter contents field contains the binary        |\n|representation of 5G QoS identifier (5QI) that is   |\n|one octet in length.                                |\n|                                                    |\n|5QI:                                                |\n|Bits                                                |\n|8 7 6 5 4 3 2 1                                     |\n|In network to UE direction:                         |\n|0 0 0 0 0 0 0 0  Reserved                           |\n|0 0 0 0 0 0 0 1  5QI 1                              |\n|0 0 0 0 0 0 1 0  5QI 2                              |\n|0 0 0 0 0 0 1 1  5QI 3                              |\n|0 0 0 0 0 1 0 0  5QI 4                              |\n|0 0 0 0 0 1 0 1  5QI 5                              |\n|0 0 0 0 0 1 1 0  5QI 6                              |\n|0 0 0 0 0 1 1 1  5QI 7                              |\n|0 0 0 0 1 0 0 0  5QI 8                              |\n|0 0 0 0 1 0 0 1  5QI 9                              |\n|0 0 0 0 1 0 1 0                                     |\n|to    Spare                                         |\n|0 1 0 0 0 0 0 0                                     |\n|0 1 0 0 0 0 0 1  5QI 65                             |\n|0 1 0 0 0 0 1 0  5QI 66                             |\n|0 1 0 0 0 0 1 1                                     |\n|to    Spare                                         |\n|0 1 0 0 0 1 0 0                                     |\n|0 1 0 0 0 1 0 1  5QI 69                             |\n|0 1 0 0 0 1 1 0  5QI 70                             |\n|0 1 0 0 0 1 1 1                                     |\n|to    Spare                                         |\n|0 1 0 0 1 0 1 0                                     |\n|0 1 0 0 1 0 1 1  5QI 75                             |\n|0 1 0 0 1 1 0 0                                     |\n|to    Spare                                         |\n|0 1 0 0 1 1 1 0                                     |\n|0 1 0 0 1 1 1 1  5QI 79                             |\n|0 1 0 1 0 0 0 0                                     |\n|to    Spare                                         |\n|0 1 1 1 1 1 1 1                                     |\n|1 0 0 0 0 0 0 0                                     |\n|to    Operator-specific 5Qis                        |\n|1 1 1 1 1 1 1 0                                     |\n|1 1 1 1 1 1 1 1  Reserved                           |\n|                                                    |\n|The network shall consider all other values not     |\n|explicitly defined in this version of the protocol  |\n|as unsupported.                                     |\n|                                                    |\n|If the UE receives a 5QI value (excluding the       |\n|reserved 5QI values) that it does not understand,   |\n|the UE shall choose a 5QI value from the set of 5QI |\n|values defined in this version of the protocol (see |\n|3GPP\u00a0TS\u00a023.501\u00a0[8]) and associated with:            |\n|- GBR QoS flows, if the QoS flow includes a GFBR    |\n|uplink parameter and a GFBR downlink parameter; and |\n|- non-GBR QoS flows, if the QoS flow does not       |\n|include a GFBR uplink parameter or does not include |\n|a GFBR downlink parameter.                          |\n|                                                    |\n|The UE shall use this chosen 5QI value for internal |\n|operations only. The UE shall use the received 5QI  |\n|value in subsequent NAS signalling procedures.      |\n|                                                    |\n|When the parameter identifier indicates \"GFBR       |\n|uplink\", the parameter contents field contains one  |\n|octet indicating the unit of the guaranteed flow bit|\n|rate for uplink followed by two octets containing   |\n|the value of the guaranteed flow bit rate for       |\n|uplink.                                             |\n|Unit of the guaranteed flow bit rate for uplink     |\n|(octet 1)                                           |\n|Bits                                                |\n|8 7 6 5 4 3 2 1                                     |\n|0 0 0 0 0 0 0 0 0 value is not used                 |\n|0 0 0 0 0 0 0 0 1 value is incremented in multiples |\n|of 1 Kbps                                           |\n|0 0 0 0 0 0 0 1 0 value is incremented in multiples |\n|of 4 Kbps                                           |\n|0 0 0 0 0 0 0 1 1 value is incremented in multiples |\n|of 16 Kbps                                          |\n|0 0 0 0 0 0 1 0 0 value is incremented in multiples |\n|of 64 Kbps                                          |\n|0 0 0 0 0 0 1 0 1 value is incremented in multiples |\n|of 256 Kbps                                         |\n|0 0 0 0 0 0 1 1 0 value is incremented in multiples |\n|of 1 Mbps                                           |\n|0 0 0 0 0 0 1 1 1 value is incremented in multiples |\n|of 4 Mbps                                           |\n|0 0 0 0 0 1 0 0 0 value is incremented in multiples |\n|of 16 Mbps                                          |\n|0 0 0 0 0 1 0 0 1 value is incremented in multiples |\n|of 64 Mbps                                          |\n|0 0 0 0 0 1 0 1 0 value is incremented in multiples |\n|of 256 Mbps                                         |\n|0 0 0 0 0 1 0 1 1 value is incremented in multiples |\n|of 1 Gbps                                           |\n|0 0 0 0 0 1 1 0 0 value is incremented in multiples |\n|of 4 Gbps                                           |\n|0 0 0 0 0 1 1 0 1 value is incremented in multiples |\n|of 16 Gbps                                          |\n|0 0 0 0 0 1 1 1 0 value is incremented in multiples |\n|of 64 Gbps                                          |\n|0 0 0 0 0 1 1 1 1 value is incremented in multiples |\n|of 256 Gbps                                         |\n|0 0 0 0 1 0 0 0 0 value is incremented in multiples |\n|of 1 Tbps                                           |\n|0 0 0 0 1 0 0 0 1 value is incremented in multiples |\n|of 4 Tbps                                           |\n|0 0 0 0 1 0 0 1 0 value is incremented in multiples |\n|of 16 Tbps                                          |\n|0 0 0 0 1 0 0 1 1 value is incremented in multiples |\n|of 64 Tbps                                          |\n|0 0 0 0 1 0 1 0 0 value is incremented in multiples |\n|of 256 Tbps                                         |\n|0 0 0 0 1 0 1 0 1 value is incremented in multiples |\n|of 1 Pbps                                           |\n|0 0 0 0 1 0 1 1 0 value is incremented in multiples |\n|of 4 Pbps                                           |\n|0 0 0 0 1 0 1 1 1 value is incremented in multiples |\n|of 16 Pbps                                          |\n|0 0 0 0 1 1 0 0 0 value is incremented in multiples |\n|of 64 Pbps                                          |\n|0 0 0 0 1 1 0 0 1 value is incremented in multiples |\n|of 256 Pbps                                         |\n|Other values shall be interpreted as multiples of   |\n|256 Pbps in this version of the protocol.           |\n|                                                    |\n|Value of the guaranteed flow bit rate for uplink    |\n|(octets 2 and 3)                                    |\n|Octets 2 and 3 represent the binary coded value of  |\n|the guaranteed flow bit rate for uplink in units    |\n|defined by the unit of the guaranteed flow bit rate |\n|for uplink.                                         |\n|                                                    |\n|When the parameter identifier indicates \"GFBR       |\n|downlink\", the parameter contents field contains one|\n|octet indicating the unit of the guaranteed flow bit|\n|rate for downlink followed by two octets containing |\n|the value of the guaranteed flow bit rate for       |\n|downlink.                                           |\n|                                                    |\n|Unit of the guaranteed flow bit rate for downlink   |\n|(octet 1)                                           |\n|The coding is identical to that of the unit of the  |\n|guaranteed flow bit rate for uplink.                |\n|                                                    |\n|Value of the guaranteed flow bit rate for downlink  |\n|(octets 2 and 3)                                    |\n|Octets 2 and 3 represent the binary coded value of  |\n|the guaranteed flow bit rate for downlink in units  |\n|defined by the unit of the guaranteed flow bit rate |\n|for downlink.                                       |\n|                                                    |\n|When the parameter identifier indicates \"MFBR       |\n|uplink\", the parameter contents field contains the  |\n|one octet indicating the unit of the maximum flow   |\n|bit rate for uplink followed by two octets          |\n|containing the value of maximum flow bit rate for   |\n|uplink.                                             |\n|                                                    |\n|Unit of the maximum flow bit rate for uplink (octet |\n|1)                                                  |\n|The coding is identical to that of the unit of the  |\n|guaranteed flow bit rate for uplink.                |\n|                                                    |\n|Value of the maximum flow bit rate for uplink       |\n|(octets 2 and 3)                                    |\n|Octets 2 and 3 represent the binary coded value of  |\n|the maximum flow bit rate for uplink in units       |\n|defined by the unit of the maximum flow bit rate for|\n|uplink.                                             |\n|                                                    |\n|When the parameter identifier indicates \"MFBR       |\n|downlink\", the parameter contents field contains one|\n|octet indicating the unit of the maximum flow bit   |\n|rate for downlink followed by two octets containing |\n|the value of the maximum flow bit rate for downlink.|\n|                                                    |\n|Unit of the maximum flow bit rate for downlink      |\n|(octet 1)                                           |\n|The coding is identical to that of the unit of the  |\n|guaranteed flow bit rate for uplink.                |\n|                                                    |\n|Value of the maximum flow bit rate for downlink     |\n|(octets 2 and 3)                                    |\n|Octets 2 and 3 represent the binary coded value of  |\n|the maximum flow bit rate for downlink in units     |\n|defined by the unit of the maximum flow bit rate for|\n|downlink.                                           |\n|                                                    |\n|When the parameter identifier indicates \"averaging  |\n|window\", the parameter contents field contains the  |\n|binary representation of the averaging window for   |\n|both uplink and downlink in milliseconds and the    |\n|parameter contents field is two octets in length.   |\n|                                                    |\n|When the parameter identifier indicates EPS bearer  |\n|identity, the length of EPS bearer identity is one  |\n|octet and parameter contents field is coded as      |\n|specified in subclause\u00a09.3.2 of 3GPP\u00a0TS\u00a024.301\u00a0[15] |\n|(see NOTE\u00a02). The UE shall not include the EPS      |\n|bearer identity parameter in any UE initiated 5GSM  |\n|messages.                                           |\n|                                                    |\n|NOTE\u00a01: A packet filter with the \"bidirectional\"    |\n|packet filter direction is used both as a packet    |\n|filter with the \"downlink only\" packet filter       |\n|direction and a packet filter with the \"uplink only\"|\n|packet filter direction.                            |\n|NOTE\u00a02: The total number of EPS bearer identities   |\n|included in all QoS rules of a UE cannot exceed     |\n|eleven.                                             |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Session-AMBR", "numbering": "9.10.4.10", "title_level": 3, "desc": "9.10.4.10   Session-AMBR\n\nThe purpose of the Session-AMBR information element is to indicate the\ninitial subscribed PDU session aggregate maximum bit rate when the UE\nestablishes a PDU session or to indicate the new subscribed PDU session\naggregate maximum bit rate if it is changed by the network.\n\nThe Session-AMBR information element is coded as shown in\nfigure\u00a09.10.4.10.1 and table\u00a09.10.4.10.1.\n\nThe Session-AMBR is a type 4 information element with a length of 8 octets.\n\n|8    |7    |6    |5    |4    |3    |2    |1    |        |\n|Session-AMBR IEI                           |octet 1 |\n|Length of Session-AMBR contents            |octet 2 |\n|Unit for Session-AMBR for downlink         |octet 3 |\n|Session-AMBR for downlink                  |octet   |\n|                                           |4-5     |\n|Unit for Session-AMBR for uplink           |octet 6 |\n|Session-AMBR for uplink                    |octet   |\n|                                           |7-8     |\n\n\nFigure\u00a09.10.4.10.1: Session-AMBR information element\n\nTable\u00a09.10.4.10.1: Session-AMBR information element\n\n|Unit for Session-AMBR for downlink (octet 3)        |\n|                                                    |\n|0 0 0 0 0 0 0 0 value is not used                   |\n|0 0 0 0 0 0 0 1 value is incremented in multiples of|\n|1 Kbps                                              |\n|0 0 0 0 0 0 1 0 value is incremented in multiples of|\n|4 Kbps                                              |\n|0 0 0 0 0 0 1 1 value is incremented in multiples of|\n|16 Kbps                                             |\n|0 0 0 0 0 1 0 0 value is incremented in multiples of|\n|64 Kbps                                             |\n|0 0 0 0 0 1 0 1 value is incremented in multiples of|\n|256 kbps                                            |\n|0 0 0 0 0 1 1 0 value is incremented in multiples of|\n|1 Mbps                                              |\n|0 0 0 0 0 1 1 1 value is incremented in multiples of|\n|4 Mbps                                              |\n|0 0 0 0 1 0 0 0 value is incremented in multiples of|\n|16 Mbps                                             |\n|0 0 0 0 1 0 0 1 value is incremented in multiples of|\n|64 Mbps                                             |\n|0 0 0 0 1 0 1 0 value is incremented in multiples of|\n|256 Mbps                                            |\n|0 0 0 0 1 0 1 1 value is incremented in multiples of|\n|1 Gbps                                              |\n|0 0 0 0 1 1 0 0 value is incremented in multiples of|\n|4 Gbps                                              |\n|0 0 0 0 1 1 0 1 value is incremented in multiples of|\n|16 Gbps                                             |\n|0 0 0 0 1 1 1 0 value is incremented in multiples of|\n|64 Gbps                                             |\n|0 0 0 0 1 1 1 1 value is incremented in multiples of|\n|256 Gbps                                            |\n|0 0 0 1 0 0 0 0 value is incremented in multiples of|\n|1 Tbps                                              |\n|0 0 0 1 0 0 0 1 value is incremented in multiples of|\n|4 Tbps                                              |\n|0 0 0 1 0 0 1 0 value is incremented in multiples of|\n|16 Tbps                                             |\n|0 0 0 1 0 0 1 1 value is incremented in multiples of|\n|64 Tbps                                             |\n|0 0 0 1 0 1 0 0 value is incremented in multiples of|\n|256 Tbps                                            |\n|0 0 0 1 0 1 0 1 value is incremented in multiples of|\n|1 Pbps                                              |\n|0 0 0 1 0 1 1 0 value is incremented in multiples of|\n|4 Pbps                                              |\n|0 0 0 1 0 1 1 1 value is incremented in multiples of|\n|16 Pbps                                             |\n|0 0 0 1 1 0 0 0 value is incremented in multiples of|\n|64 Pbps                                             |\n|0 0 0 1 1 0 0 1 value is incremented in multiples of|\n|256 Pbps                                            |\n|                                                    |\n|Other values shall be interpreted as multiples of   |\n|256 Pbps in this version of the protocol.           |\n|                                                    |\n|Session-AMBR for downlink (octets 4 and 5)          |\n|                                                    |\n|Octets 4 and 5 represent the binary coded value of  |\n|PDU session aggregated maximum bit rate for downlink|\n|in units defined by octet 3.                        |\n|                                                    |\n|Unit for Session-AMBR for uplink (octet 6)          |\n|                                                    |\n|The coding is identical to the unit coding defined  |\n|for Session-AMBR for downlink (octet 3)             |\n|                                                    |\n|Session-AMBR for uplink (octets 7 and 8)            |\n|                                                    |\n|Octets 7 and 8 represent the binary coded value of  |\n|PDU session aggregated maximum bit rate for uplink  |\n|in units defined by octet 6.                        |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SM PDU DN request container", "numbering": "9.10.4.11", "title_level": 3, "desc": "9.10.4.11   SM PDU DN request container\n\nThe SM PDU DN request container contains a DN-specific identity of the UE\nin the network access identifier (NAI) format.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SSC mode", "numbering": "9.10.4.12", "title_level": 3, "desc": "9.10.4.12   SSC mode\n\nThe purpose of the SSC mode information element is to indicate SSC mode.\n\nThe SSC mode information element is coded as shown in figure\u00a09.10.4.12.1\nand table\u00a09.10.4.12.1.\n\nThe SSC mode is a type 1 information element.\n\n|8                    |7    |6               |5          |\n\n\nFigure\u00a09.10.4.12.1: SSC mode information element\n\nTable\u00a09.10.4.12.1: SSC mode information element\n\n|SSC mode value (octet 1, bit 1 to bit 4)              |\n|Bits                                                  |\n|3|2|1| |                                              |\n|0|0|1| |SSC mode 1                                    |\n|0|1|0| |SSC mode 2                                    |\n|0|1|1| |SSC mode 3                                    |\n|1|0|0| |unused; shall be interpreted as \"SSC mode 1\", |\n| | | | |if received by the network                    |\n|1|0|1| |unused; shall be interpreted as \"SSC mode 2\", |\n| | | | |if received by the network                    |\n|1|1|0| |unused; shall be interpreted as \"SSC mode 3\", |\n| | | | |if received by the network                    |\n|                                                      |\n|All other values are reserved.                        |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "3GPP specific coding information defined within present document", "numbering": "9.11", "title_level": 1, "desc": "9.11 3GPP specific coding information defined within present document\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Serving network name (SNN)", "numbering": "9.11.1", "title_level": 2, "desc": "9.11.1 Serving network name (SNN)\n\nThe serving network name (SNN) is used in the network name field of the\nAT_KDF_INPUT attribute defined in IETF\u00a0RFC\u00a05448\u00a0[40].\n\nSNN shall take the generic format of an octet string without terminating\nnull characters.\n\nSNN is of maximum length of 1020 octets.\n\nSNN consists of SNN-prefix and SNN-value, delimited by a colon.\n\nSNN-value identifies the serving PLMN.\n\nMCC and MNC in the SNN-PLMN-ID are MCC and MNC of the serving PLMN. If the\nMNC of the serving PLMN has two digits, then a zero is added at the\nbeginning.\n\nABNF syntax of SNN is specified in table\u00a09.11.1.1\n\nTable\u00a09.11.1.1: ABNF syntax of SNN\n\nSNN = SNN-prefix \":\" SNN-value\nSNN-prefix = %x35.47 ; \"5G\"\nSNN-value = SNN-PLMN-ID\nSNN-PLMN-ID = SNN-mnc-string SNN-mnc-digits \".\" SNN-mcc-string SNN-mcc-\ndigits \".\" SNN-3gppnetwork-string \".\" SNN-org-string\n\nSNN-mnc-digits = DIGIT DIGIT DIGIT ; MNC of the PLMN ID\nSNN-mcc-digits = DIGIT DIGIT DIGIT ; MCC of the PLMN ID\nSNN-mnc-string = %x6d.6e.63 ; \"mnc\" in lower case\nSNN-mcc-string = %x6d.63.63 ; \"mcc\" in lower case\nSNN-3gppnetwork-string = %x33.67.70.70.6e.65.74.77.6f.72.6b ; \"3gppnetwork\"\nin lower case\nSNN-org-string = %x6f.72.67 ; \"org\" in lower case\n\n\n\nNOTE:  SNN-prefix allows for distinguishing of ANID specified in\n3GPP\u00a0TS\u00a024.302\u00a0[16] and SNN as either of SNN or ANID can be carried in the\nAT_KDF_INPUT attribute.\n\nEXAMPLE: If PLMN ID contains MCC = 234 and MNC = 15, SNN is\n5G:mnc015.mcc234.3gppnetwork.org.\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "List of system parameters", "numbering": "10", "title_level": 0, "desc": "10 List of system parameters\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General", "numbering": "10.1", "title_level": 1, "desc": "10.1 General\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Timers of 5GS mobility management", "numbering": "10.2", "title_level": 1, "desc": "10.2 Timers of 5GS mobility management\n\nTimers of 5GS mobility management are shown in table\u00a010.2.1 and\ntable\u00a010.2.2\n\nTable\u00a010.2.1: Timers of 5GS mobility management \u2013 UE side\n\n|TIMER  |TIMER  |STATE      |CAUSE OF START      |NORMAL STOP |ON          |\n|NUM.   |VALUE  |           |                    |            |EXPIRY      |\n|T3510  |15s    |5GMM-REGIST|Transmission of     |REGISTRATION|Start T3511 |\n|       |       |ERED-INITIA|REGISTRATION REQUEST|ACCEPT      |or T3502 as |\n|       |       |TED        |message             |message     |specified in|\n|       |       |           |                    |received or |subclause\u00a05.|\n|       |       |           |                    |REGISTRATION|5.1.2.7 if  |\n|       |       |           |                    |REJECT      |T3510       |\n|       |       |           |                    |message     |expired     |\n|       |       |           |                    |received    |during      |\n|       |       |           |                    |            |registration|\n|       |       |           |                    |            |procedure   |\n|       |       |           |                    |            |for initial |\n|       |       |           |                    |            |registration|\n|       |       |           |                    |            |.           |\n|       |       |           |                    |            |            |\n|       |       |           |                    |            |Start T3511 |\n|       |       |           |                    |            |or T3502 as |\n|       |       |           |                    |            |specified in|\n|       |       |           |                    |            |subclause\u00a05.|\n|       |       |           |                    |            |5.1.3.6 if  |\n|       |       |           |                    |            |T3510       |\n|       |       |           |                    |            |expired     |\n|       |       |           |                    |            |during the  |\n|       |       |           |                    |            |registration|\n|       |       |           |                    |            |procedure   |\n|       |       |           |                    |            |for mobility|\n|       |       |           |                    |            |and periodic|\n|       |       |           |                    |            |registration|\n|       |       |           |                    |            |update      |\n|T3502  |Default|5GMM-REGIST|At registration     |Transmission|Initiation  |\n|       |12 min.|ERED       |failure and the     |of          |of the      |\n|       |NOTE\u00a01 |           |attempt counter is  |REGISTRATION|registration|\n|       |       |           |equal to 5          |REQUEST     |procedure,  |\n|       |       |           |                    |message     |if still    |\n|       |       |           |                    |            |required    |\n|T3511  |10s    |5GMM-DEREGI|At registration     |Transmission|Retransmissi|\n|       |       |STERED.ATTE|failure due to lower|of          |on of the   |\n|       |       |MPTING-REGI|layer failure, T3510|REGISTRATION|REGISTRATION|\n|       |       |STRATION   |timeout or          |REQUEST     |REQUEST, if |\n|       |       |           |registration        |message     |still       |\n|       |       |5GMM-REGIST|rejected with other |            |required    |\n|       |       |ERED.ATTEMP|5GMM cause values   |            |            |\n|       |       |TING-REGIST|than those treated  |            |            |\n|       |       |RATION-UPDA|in                  |            |            |\n|       |       |TE         |subclause\u00a05.5.1.2.5 |            |            |\n|       |       |           |for initial         |            |            |\n|       |       |           |registration or     |            |            |\n|       |       |           |subclause\u00a05.5.1.3.5 |            |            |\n|       |       |           |for mobility and    |            |            |\n|       |       |           |periodic            |            |            |\n|       |       |           |registration        |            |            |\n|T3512  |Default|5GMM-REGIST|In 5GMM-REGISTERED, |When        |Initiation  |\n|       |54 min |ERED       |when 5GMM-CONNECTED |entering    |of the      |\n|       |NOTE\u00a01 |           |mode is left        |state       |periodic    |\n|       |       |           |                    |5GMM-DEREGIS|registration|\n|       |       |           |                    |TERED or    |procedure if|\n|       |       |           |                    |when        |the UE is   |\n|       |       |           |                    |entering    |not         |\n|       |       |           |                    |5GMM-CONNECT|registered  |\n|       |       |           |                    |ED mode     |for         |\n|       |       |           |                    |            |emergency   |\n|       |       |           |                    |            |services.   |\n|       |       |           |                    |            |            |\n|       |       |           |                    |            |Locally     |\n|       |       |           |                    |            |deregister  |\n|       |       |           |                    |            |if the UE is|\n|       |       |           |                    |            |registered  |\n|       |       |           |                    |            |for         |\n|       |       |           |                    |            |emergency   |\n|       |       |           |                    |            |services    |\n|T3516  |30s    |5GMM-REGIST|RAND and RES stored |SECURITY    |Delete the  |\n|       |       |ERED-INITIA|as a result of an 5G|MODE COMMAND|stored RAND |\n|       |       |TED        |authentication      |received    |and RES     |\n|       |       |5GMM-REGIST|challenge           |SERVICE     |            |\n|       |       |ERED       |                    |REJECT      |            |\n|       |       |5GMM-DEREGI|                    |received    |            |\n|       |       |STERED-INIT|                    |REGISTRATION|            |\n|       |       |IATED      |                    |ACCEPT      |            |\n|       |       |5GMM-SERVIC|                    |received    |            |\n|       |       |E-REQUEST-I|                    |AUTHENTICATI|            |\n|       |       |NITIATED   |                    |ON REJECT   |            |\n|       |       |           |                    |received    |            |\n|       |       |           |                    |AUTHENTICATI|            |\n|       |       |           |                    |ON FAILURE  |            |\n|       |       |           |                    |sent        |            |\n|       |       |           |                    |5GMM-DEREGIS|            |\n|       |       |           |                    |TERED,      |            |\n|       |       |           |                    |5GMM-NULL or|            |\n|       |       |           |                    |5GMM-IDLE   |            |\n|       |       |           |                    |mode entered|            |\n|T3517  |15s    |5GMM-SERVIC|Transmission of     |SERVICE     |Abort the   |\n|       |       |E-REQUEST-I|SERVICE REQUEST     |ACCEPT      |procedure   |\n|       |       |NITIATED   |message             |message     |            |\n|       |       |           |                    |received, or|            |\n|       |       |           |                    |SERVICE     |            |\n|       |       |           |                    |REJECT      |            |\n|       |       |           |                    |message     |            |\n|       |       |           |                    |received    |            |\n|T3519  |60s    |5GMM-REGIST|Transmission of     |REGISTRATION|Delete      |\n|       |       |ERED-INITIA|IDENTITY RESPONSE   |ACCEPT      |stored SUCI |\n|       |       |TED        |message with freshly|message with|            |\n|       |       |           |generated SUCI      |new 5G-GUTI |            |\n|       |       |           |                    |received    |            |\n|       |       |           |                    |CONFIGURATIO|            |\n|       |       |           |                    |N UPDATE    |            |\n|       |       |           |                    |COMMAND     |            |\n|       |       |           |                    |message with|            |\n|       |       |           |                    |new 5G-GUTI |            |\n|       |       |           |                    |received    |            |\n|T3520  |15s    |5GMM-REGIST|Transmission of     |AUTHENTICATI|On first    |\n|       |       |ERED-INITIA|AUTHENTICATION      |ON REQUEST  |expiry, the |\n|       |       |TED        |FAILURE message with|message     |UE should   |\n|       |       |5GMM-DEREGI|any of the 5GMM     |received or |consider the|\n|       |       |STERED-INIT|cause #20, #21 , #26|AUTHENTICATI|network as  |\n|       |       |IATED      |or #29              |ON REJECT   |false and   |\n|       |       |5GMM-SERVIC|                    |message     |follow item |\n|       |       |E-REQUEST-I|                    |received    |g of        |\n|       |       |NITIATED   |                    |or          |subclause\u00a05.|\n|       |       |           |                    |SECURITY    |4.1.3.7, if |\n|       |       |           |                    |MODE COMMAND|the UE is   |\n|       |       |           |                    |message     |not         |\n|       |       |           |                    |received    |registered  |\n|       |       |           |                    |            |for         |\n|       |       |           |                    |when        |emergency   |\n|       |       |           |                    |entering    |services.   |\n|       |       |           |                    |5GMM-IDLE   |            |\n|       |       |           |                    |mode        |On first    |\n|       |       |           |                    |            |expiry, the |\n|       |       |           |                    |indication  |UE will     |\n|       |       |           |                    |of          |follow      |\n|       |       |           |                    |transmission|subclause\u00a05.|\n|       |       |           |                    |failure of  |4.1.3.7     |\n|       |       |           |                    |AUTHENTICATI|under \"For  |\n|       |       |           |                    |ON FAILURE  |items\u00a0c, d, |\n|       |       |           |                    |message from|e and f:\",  |\n|       |       |           |                    |lower layers|if the UE is|\n|       |       |           |                    |            |registered  |\n|       |       |           |                    |            |for         |\n|       |       |           |                    |            |emergency   |\n|       |       |           |                    |            |services.   |\n|T3521  |15s    |5GMM-DEREGI|Transmission of     |DEREGISTRATI|Retransmissi|\n|       |       |STERED-INIT|DEREGISTRATION      |ON ACCEPT   |on of       |\n|       |       |IATED      |REQUEST message when|message     |DEREGISTRATI|\n|       |       |           |de-registration     |received    |ON REQUEST  |\n|       |       |           |procedure is not due|            |message     |\n|       |       |           |to a \"switch off\"   |            |            |\n|T3540  |10s    |5GMM-REGIST|REGISTRATION REJECT |N1 NAS      |Release the |\n|       |       |ERED-INITIA|message or          |signalling  |NAS         |\n|       |       |TED        |DEREGISTRATION      |connection  |signalling  |\n|       |       |           |REQUEST message     |released    |connection  |\n|       |       |5GMM-DEREGI|received with any of|PDU sessions|for the     |\n|       |       |STERED-INIT|the 5GMM cause #7,  |have been   |cases a) and|\n|       |       |IATED      |#11, #12 or #13     |set up      |b) as       |\n|       |       |           |SERVICE REJECT      |            |described in|\n|       |       |5GMM-SERVIC|message received    |            |subclause\u00a05.|\n|       |       |E-REQUEST-I|with any of the 5GMM|            |3.1.2       |\n|       |       |NITIATED   |cause #7, #11, #12  |            |            |\n|       |       |           |or #13              |            |            |\n|       |       |5GMM-DEREGI|REGISTRATION REJECT |N1 NAS      |Release the |\n|       |       |STERED     |message or SERVICE  |signalling  |NAS         |\n|       |       |           |REJECT message      |connection  |signalling  |\n|       |       |5GMM-DEREGI|received with the   |released    |connection  |\n|       |       |STERED.NORM|5GMM cause #9 or #10|            |for the     |\n|       |       |AL-SERVICE |                    |            |cases c) as |\n|       |       |           |                    |            |described in|\n|       |       |           |                    |            |subclause\u00a05.|\n|       |       |           |                    |            |3.1.2 and   |\n|       |       |           |                    |            |initiation  |\n|       |       |           |                    |            |of the      |\n|       |       |           |                    |            |registration|\n|       |       |           |                    |            |procedure as|\n|       |       |           |                    |            |specified in|\n|       |       |           |                    |            |subclause\u00a05.|\n|       |       |           |                    |            |5.1.2.2 or  |\n|       |       |           |                    |            |5.5.1.3.2   |\n|Non-3GP|Default|All 5GMM   |Entering 5GMM-IDLE  |N1 NAS      |Implicitly  |\n|P      |54 min.|state over |mode over non-3GPP  |signalling  |de-register |\n|de-regi|NOTE\u00a01 |non-3GPP   |access              |connection  |the UE for  |\n|stratio|NOTE\u00a02 |access     |                    |over        |non-3GPP    |\n|n timer|       |except     |                    |non-3GPP    |access on   |\n|       |       |5GMM-DEREGI|                    |access      |1st expiry  |\n|       |       |STERED over|                    |established |            |\n|       |       |non-3GPP   |                    |or when     |            |\n|       |       |access     |                    |entering    |            |\n|       |       |           |                    |state       |            |\n|       |       |           |                    |5GMM-DEREGIS|            |\n|       |       |           |                    |TERED over  |            |\n|       |       |           |                    |non-3GPP    |            |\n|       |       |           |                    |access      |            |\n|NOTE\u00a01: The value of this timer is provided by the network operator during|\n|the registration procedure.                                               |\n|NOTE\u00a02: The default value of this timer is used if the network does not   |\n|indicate a value in the REGISTRATION ACCEPT message and the UE does not   |\n|have a stored value for this timer.                                       |\n\n\nEditor's note:  The exact default value of the non-3GPP de-registration\ntimer is FFS.\n\nTable\u00a010.2.2: Timers of 5GS mobility management \u2013 AMF side\n\n|TIMER  |TIMER  |STATE      |CAUSE OF START      |NORMAL STOP |ON          |\n|NUM.   |VALUE  |           |                    |            |EXPIRY      |\n|T3550  |6s     |5GMM-COMMON|Transmission of     |REGISTRATION|Retransmissi|\n|       |       |-PROCEDURE-|REGISTRATION ACCEPT |COMPLETE    |on of       |\n|       |       |INITIATED  |message at initial  |message     |REGISTRATION|\n|       |       |           |registration.       |received    |ACCEPT      |\n|       |       |           |Transmission of     |            |message     |\n|       |       |           |REGISTRATION ACCEPT |            |            |\n|       |       |           |message with 5G-GUTI|            |            |\n|       |       |           |at mobility or      |            |            |\n|       |       |           |periodic            |            |            |\n|       |       |           |registration        |            |            |\n|T3560  |6s     |5GMM-COMMON|Transmission of     |AUTHENTICATI|Retransmissi|\n|       |       |-PROCEDURE-|AUTHENTICATION      |ON RESPONSE |on of       |\n|       |       |INITIATED  |REQUEST message     |message     |AUTHENTICATI|\n|       |       |           |Transmission of     |received    |ON REQUEST  |\n|       |       |           |SECURITY MODE       |AUTHENTICATI|message or  |\n|       |       |           |COMMAND message     |ON FAILURE  |SECURITY    |\n|       |       |           |                    |message     |MODE COMMAND|\n|       |       |           |                    |received    |message     |\n|       |       |           |                    |SECURITY    |            |\n|       |       |           |                    |MODE        |            |\n|       |       |           |                    |COMPLETE    |            |\n|       |       |           |                    |message     |            |\n|       |       |           |                    |received    |            |\n|       |       |           |                    |SECURITY    |            |\n|       |       |           |                    |MODE REJECT |            |\n|       |       |           |                    |message     |            |\n|       |       |           |                    |received    |            |\n|T3570  |6s     |5GMM-COMMON|Transmission of     |IDENTITY    |Retransmissi|\n|       |       |-PROCEDURE-|IDENTITY REQUEST    |RESPONSE    |on of       |\n|       |       |INITIATED  |message             |message     |IDENTITY    |\n|       |       |           |                    |received    |REQUEST     |\n|       |       |           |                    |            |message     |\n|T3513  |NOTE\u00a04 |5GMM-REGIST|Paging procedure    |Paging      |Network     |\n|       |       |ERED       |initiated           |procedure   |dependent   |\n|       |       |           |                    |completed as|            |\n|       |       |           |                    |specified in|            |\n|       |       |           |                    |subclause\u00a05.|            |\n|       |       |           |                    |6.2.2.1     |            |\n|T3522  |6s     |5GMM-DEREGI|Transmission of     |DEREGISTRATI|Retransmissi|\n|       |       |STERED-INIT|DEREGISTRATION      |ON ACCEPT   |on of       |\n|       |       |IATED      |REQUEST message     |message     |DEREGISTRATI|\n|       |       |           |                    |received    |ON REQUEST  |\n|       |       |           |                    |            |message     |\n|T3555  |6s     |5GMM-REGIST|Transmission of     |CONFIGURATIO|Retransmissi|\n|       |       |ERED       |CONFIGURATION UPDATE|N UPDATE    |on of       |\n|       |       |           |COMMAND message with|COMPLETE    |CONFIGURATIO|\n|       |       |           |Acknowledgement     |message     |N UPDATE    |\n|       |       |           |requested flag IE   |received    |COMMAND     |\n|       |       |           |                    |            |message     |\n|T3565  |6s     |5GMM-REGIST|Transmission of     |SERVICE     |Retransmissi|\n|       |       |ERED       |NOTIFICATION message|REQUEST     |on of       |\n|       |       |           |                    |message     |NOTIFICATION|\n|       |       |           |                    |received    |message     |\n|       |       |           |                    |NOTIFICATION|            |\n|       |       |           |                    |RESPONSE    |            |\n|       |       |           |                    |message     |            |\n|       |       |           |                    |received    |            |\n|Mobile |NOTE\u00a01 |All except |Entering 5GMM-IDLE  |N1 NAS      |Network     |\n|reachab|       |5GMM-DEREGI|mode                |signalling  |dependent,  |\n|le     |       |STERED     |                    |connection  |but         |\n|timer  |       |           |                    |established |typically   |\n|       |       |           |                    |            |paging is   |\n|       |       |           |                    |            |halted on   |\n|       |       |           |                    |            |1st expiry, |\n|       |       |           |                    |            |and start   |\n|       |       |           |                    |            |implicit    |\n|       |       |           |                    |            |de-registrat|\n|       |       |           |                    |            |ion timer,  |\n|       |       |           |                    |            |if the UE is|\n|       |       |           |                    |            |not         |\n|       |       |           |                    |            |registered  |\n|       |       |           |                    |            |for         |\n|       |       |           |                    |            |emergency   |\n|       |       |           |                    |            |services.   |\n|       |       |           |                    |            |            |\n|       |       |           |                    |            |Implicitly  |\n|       |       |           |                    |            |de-register |\n|       |       |           |                    |            |the UE which|\n|       |       |           |                    |            |is          |\n|       |       |           |                    |            |registered  |\n|       |       |           |                    |            |for         |\n|       |       |           |                    |            |emergency   |\n|       |       |           |                    |            |services    |\n|Implici|NOTE\u00a02 |All except |The mobile reachable|N1 NAS      |Implicitly  |\n|t      |       |5GMM-DEREGI|timer expires while |signalling  |detach the  |\n|de-regi|       |STERED     |the network is in   |connection  |UE on 1st   |\n|stratio|       |           |5GMM-IDLE mode      |established |expiry      |\n|n timer|       |           |                    |            |            |\n|Non-3GP|NOTE\u00a03 |All except |Entering 5GMM-IDLE  |N1 NAS      |Implicitly  |\n|P      |       |5GMM-DEREGI|mode over non-3GPP  |signalling  |de-register |\n|implici|       |STERED     |access              |connection  |the UE for  |\n|t      |       |           |                    |over        |non-3GPP    |\n|de-regi|       |           |                    |non-3GPP    |access on 1s|\n|stratio|       |           |                    |access      |expiry      |\n|n timer|       |           |                    |established |            |\n|NOTE\u00a01: The default value of this timer is 4 minutes greater than T3512.  |\n|If the UE is registered for emergency services, the value of this timer is|\n|set equal to T3512.                                                       |\n|NOTE\u00a02: The value of this timer is network dependent. If MICO is          |\n|activated, the default value of this timer is 4 minutes greater than      |\n|T3512.                                                                    |\n|NOTE\u00a03: The value of this timer is network dependent. The default value of|\n|this timer is 4 minutes greater than the non-3GPP de-registration timer.  |\n|NOTE\u00a04: The value of this timer is network dependent.                     |\n\n\n\n", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Timers of 5GS session management", "numbering": "10.3", "title_level": 1, "desc": "", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-IDLE mode", "desc": "In this specification, if the term is used standalone, a UE\nin 5GMM-IDLE mode means the UE can be either in 5GMM-IDLE mode over 3GPP\naccess or in 5GMM-IDLE mode over non-3GPP access.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-CONNECTED mode", "desc": "In this specification, if the term is used standalone,\na UE in 5GMM-CONNECTED mode means the UE can be either in 5GMM-CONNECTED\nmode over 3GPP access or in 5GMM-CONNECTED mode over non-3GPP access.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-IDLE mode over 3GPP access", "desc": "A UE is in 5GMM-IDLE mode over 3GPP access\nwhen no N1 NAS signalling connection between the UE and network over 3GPP\naccess exists. The term 5GMM-IDLE mode over 3GPP access used in the present\ndocument corresponds to the term CM-IDLE state for 3GPP access used in\n3GPP\u00a0TS\u00a023.501\u00a0[8].", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-CONNECTED mode over 3GPP access", "desc": "A UE is in 5GMM-CONNECTED mode over\n3GPP access when a N1 NAS signalling connection between the UE and network\nover 3GPP access exists. The term 5GMM-CONNECTED mode over 3GPP access used\nin the present document corresponds to the term CM-CONNECTED state for 3GPP\naccess used in 3GPP\u00a0TS\u00a023.501\u00a0[8].", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-IDLE mode over non-3GPP access", "desc": "A UE is in 5GMM-IDLE mode over non-\n3GPP access no N1 NAS signalling connection between the UE and network over\nnon-3GPP access exists. The term 5GMM-IDLE mode over non-3GPP access used\nin the present document corresponds to the term CM-IDLE state for non-3GPP\naccess used in 3GPP\u00a0TS\u00a023.501\u00a0[8].", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM-CONNECTED mode over non-3GPP access", "desc": "A UE is in 5GMM-CONNECTED mode\nover non-3GPP access when it has N1 NAS signalling connection between the\nUE and network over non-3GPP access exists. The term 5GMM-CONNECTED mode\nover non-3GPP access used in the present document corresponds to the term\nCM-CONNECTED state for non-3GPP access used in 3GPP\u00a0TS\u00a023.501\u00a0[8].", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS services", "desc": "Services provided by PS domain. Within the context of this\nspecification, 5GS services is used as a synonym for EPS services.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Access stratum connection", "desc": "A peer to peer access stratum connection between\neither the UE and the NG-RAN for 3GPP access or the UE and the N3IWF for\nnon-3GPP access. The access stratum connection for 3GPP access corresponds\nto an RRC connection via the Uu reference point. The creation of the access\nstratum connection for non-3GPP access corresponds to the completion of the\nIKE_SA_INIT exchange (see IETF\u00a0RFC\u00a07296\u00a0[41]) via the NWu reference point.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Always-on PDU session", "desc": "A PDU session for which user-plane resources have to\nbe activated during every transition from 5GMM-IDLE mode to 5GMM-CONNECTED\nmode. Such a PDU session is established based on indication from upper\nlayers.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NOTE\u00a01", "desc": "How the upper layers in the UE are configured to provide an\nindication is out of scope of the specification.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Editor\u2019s note", "desc": "It is FFS whether any handling is required for access\nidentities, access category or reject cause received in PDU session\nreactivation result IE due to always-on PDU session.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DNN based congestion control", "desc": "Type of congestion control at session\nmanagement level that is applied to reject session management requests from\nUEs or release PDU sessions when the associated DNN is congested. DNN based\ncongestion control can be activated at the SMF over session management\nlevel and also activated at the AMF over mobility management level.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "General NAS level congestion control", "desc": "Type of congestion control at\nmobility management level that is applied at a general overload or\ncongestion situation in the network, e.g. lack of processing resources.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Last visited registered TAI", "desc": "A TAI which is contained in the registration\narea that the UE registered to the network and which identifies the\ntracking area last visited by the UE.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "N1 mode", "desc": "A mode of a UE allowing access to the 5G core network via the 5G\naccess network.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "N1 NAS signalling connection", "desc": "A peer to peer N1 mode connection between UE\nand AMF. An N1 NAS signalling connection is either the concatenation of an\nRRC connection via the Uu reference point and an NG connection via the N2\nreference point for 3GPP access, or the concatenation of an IPsec tunnel\nvia the NWu reference point and an NG connection via the N2 reference point\nfor non-3GPP access.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU address", "desc": "An IP address assigned to the UE by the packet data network.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PDU session for LADN", "desc": "A PDU session with a DNN associated with a LADN.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Persistent PDU session", "desc": "either a non-emergency PDU session contains a GBR\nQoS flow with QoS equivalent to QoS of teleservice 11 and where there is a\nradio bearer associated with that PDU session, or an emergency PDU session\nwhere there is a radio bearer associated with that PDU session.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NOTE\u00a02", "desc": "An example of a persistent PDU session is a non-emergency PDU\nsession with 5QI\u00a0=\u00a01 where there is a radio bearer associated with that\ncontext.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Procedure transaction identity", "desc": "An identity which is dynamically allocated\nby the UE for the UE-requested 5GSM procedures. The procedure transaction\nidentity is released when the procedure is completed but it should not be\nreleased immediately.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Registered for emergency services", "desc": "A UE is registered for emergency\nservices if it has successfully completed initial registration for\nemergency services or if it has only one PDU session established which is\nfor emergency services.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Rejected NSSAI", "desc": "Rejected NSSAI for the current PLMN or rejected NSSAI for\nthe current PLMN and registration area combination.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Rejected NSSAI for the current PLMN", "desc": "A set of S-NSSAIs which was included\nin the requested NSSAI by the UE and is sent by the AMF with the rejection\ncause \"S-NSSAI not available in the current PLMN\".", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Rejected NSSAI for the current PLMN and registration area combination", "desc": "A\nset of S-NSSAIs which was included in the requested NSSAI by the UE and is\nsent by the AMF with the rejection cause \"S-NSSAI not available in the\ncurrent registration area\".", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Removal of eCall only mode restriction", "desc": "All the limitations as described in\n3GPP\u00a0TS\u00a022.101\u00a0[2] for the eCall only mode do not apply any more.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S-NSSAI-based congestion control", "desc": "Type of congestion control at session\nmanagement level that is applied to reject session management requests from\nUEs or release PDU sessions when the associated S-NSSAI and optionally the\nassociated DNN are congested. . S-NSSAI based congestion control can be\nactivated at the SMF over session management level and also activated at\nthe AMF over mobility management level.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Selected core network type information", "desc": "A type of core network (EPC or\n5GCN) selected by the UE NAS layer in case of an E-UTRA cell connected to\nboth EPC and 5GCN.", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UE configured for high priority access in selected PLMN", "desc": "A UE configured\nwith one or more access identities equal to 1, 2, or 11-15 applicable in\nthe selected PLMN as specified in subclause\u00a04.5.2. Definition derived from\n3GPP\u00a0TS\u00a022.261\u00a0[3].\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a023.122\u00a0[5] apply:\n\nCountry\nEHPLMN\nHPLMN\nShared network\nSuitable Cell\nVPLMN\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a023.167\u00a0[6] apply:\n\neCall over IMS\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a023.401\u00a0[7] apply:\n\neCall only mode\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a023.501\u00a0[8] apply:\n\n5G access network\n5G core network\n5G QoS flow\n5G QoS identifier\n5G-GUTI\n5G System\n5G-S-TMSI\nAllowed area\nAllowed NSSAI\nAMF region\nAMF set\nConfigured NSSAI\nLocal area data network\nNetwork slice\nNG-RAN\nNon-allowed area\nNon-seamless non-3GPP offload\nPDU session\nPDU session type\nPEI\nRequested NSSAI\nSUPI\nSUCI\nUE presence in LADN service area\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a024.301\u00a0[15] apply:\n\nEPS services\nNon-EPS services\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a033.501\u00a0[24] apply:\n\n5G security context\n5G NAS security context\nCurrent 5G security context\nFull native 5G security context\nK'AME\nKAMF\nKASME\nMapped security context\nNative 5G security context\nNon-current 5G security context\nPartial native 5G security context\nRES*\n\nFor the purposes of the present document, the following terms and\ndefinitions given in 3GPP\u00a0TS\u00a038.413\u00a0[31] apply:\n\nNG connection", "numbering": "3.1", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "4G-GUTI", "desc": "4G-Globally Unique Temporary Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GCN", "desc": "5G Core Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5G-GUTI", "desc": "5G-Globally Unique Temporary Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GMM", "desc": "5GS Mobility Management", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GS", "desc": "5G System", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5GSM", "desc": "5GS Session Management", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5G-S-TMSI", "desc": "5G S-Temporary Mobile Subscription Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5G-TMSI", "desc": "5G Temporary Mobile Subscription Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "5QI", "desc": "5G QoS Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "AKA", "desc": "Authentication and Key Agreement", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "AMBR", "desc": "Aggregate Maximum Bit Rate", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "AMF", "desc": "Access and Mobility Management Function", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "APN", "desc": "Access Point Name", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DL", "desc": "Downlink", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DN", "desc": "Data Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "DNN", "desc": "Data Network Name", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "E-UTRAN", "desc": "Evolved Universal Terrestrial Radio Access Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EAP-AKA'", "desc": "Improved Extensible Authentication Protocol method for 3rd", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "generation", "desc": "Authentication and Key Agreement", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EPD", "desc": "Extended Protocol Discriminator", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EMM", "desc": "EPS Mobility Management", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EPC", "desc": "Evolved Packet Core Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "EPS", "desc": "Evolved Packet System", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "ESM", "desc": "EPS Session Management", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Gbps", "desc": "Gigabits per second", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "GFBR", "desc": "Guaranteed Flow Bit Rate", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "GUAMI", "desc": "Globally Unique AMF Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "IP-CAN", "desc": "IP-Connectivity Access Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "KSI", "desc": "Key Set Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LADN", "desc": "Local Area Data Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LMF", "desc": "Location Management Function", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "LPP", "desc": "LTE Positioning Protocol", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Mbps", "desc": "Megabits per second", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "MFBR", "desc": "Maximum Flow Bit Rate", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "MICO", "desc": "Mobile Initiated Connection Only", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "N3IWF", "desc": "Non-3GPP Inter-Working Function", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NAI", "desc": "Network Access Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NR", "desc": "New Radio", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "ngKSI", "desc": "Key Set Identifier for Next Generation Radio Access Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "NSSAI", "desc": "Network Slice Selection Assistance Information", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "PTI", "desc": "Procedure Transaction Identity", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "QFI", "desc": "QoS Flow Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "QoS", "desc": "Quality of Service", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "QRI", "desc": "QoS Rule Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "RQA", "desc": "Reflective QoS Attribute", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "RQI", "desc": "Reflective QoS Indication", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "(R)AN", "desc": "(Radio) Access Network", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "S-NSSAI", "desc": "Single NSSAI", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SA", "desc": "Security Association", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SNN", "desc": "Serving Network Name", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "SMF", "desc": "Session Management Function", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "TA", "desc": "Tracking Area", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "TAC", "desc": "Tracking Area Code", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "TAI", "desc": "Tracking Area Identity", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "Tbps", "desc": "Terabits per second", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UL", "desc": "Uplink", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UPDP", "desc": "UE Policy Delivery Protocol", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UPSC", "desc": "UE Policy Section Code", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "UPSI", "desc": "UE Policy Section Identifier", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "URN", "desc": "Uniform Resource Name", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}, {"key": "URSP", "desc": "UE Route Selection Policy", "numbering": "3.2", "Keywords": "5G, 5GS, EPS, stage 3, layer 3, user equipment,network"}]